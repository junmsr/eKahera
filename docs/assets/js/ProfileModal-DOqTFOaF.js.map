{"version":3,"file":"ProfileModal-DOqTFOaF.js","sources":["../../../frontend/src/components/common/SelectDropdown.jsx","../../../frontend/src/components/modals/ProfileModal.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { BiChevronDown, BiChevronUp, BiSearch, BiCheck } from \"react-icons/bi\";\r\n\r\n/**\r\n * Modern SelectDropdown Component with enhanced UI/UX\r\n * Features:\r\n * - Custom styling with animations\r\n * - Search/filter functionality\r\n * - Keyboard navigation\r\n * - Error state handling\r\n * - Accessibility support\r\n */\r\nexport default function SelectDropdown({\r\n  name,\r\n  value,\r\n  options = [],\r\n  placeholder = \"Select an option\",\r\n  onChange,\r\n  error,\r\n  disabled = false,\r\n  searchable = true,\r\n  className = \"\",\r\n  required = false,\r\n}) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [highlightedIndex, setHighlightedIndex] = useState(-1);\r\n  const dropdownRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n\r\n  // Filter options based on search term\r\n  const filteredOptions = options.filter((option) =>\r\n    option.label.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  // Handle click outside to close dropdown\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n        setSearchTerm(\"\");\r\n        setHighlightedIndex(-1);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  // Handle keyboard navigation\r\n  useEffect(() => {\r\n    const handleKeyDown = (event) => {\r\n      if (!isOpen) return;\r\n\r\n      switch (event.key) {\r\n        case \"ArrowDown\":\r\n          event.preventDefault();\r\n          setHighlightedIndex((prev) =>\r\n            prev < filteredOptions.length - 1 ? prev + 1 : 0\r\n          );\r\n          break;\r\n        case \"ArrowUp\":\r\n          event.preventDefault();\r\n          setHighlightedIndex((prev) =>\r\n            prev > 0 ? prev - 1 : filteredOptions.length - 1\r\n          );\r\n          break;\r\n        case \"Enter\":\r\n          event.preventDefault();\r\n          if (\r\n            highlightedIndex >= 0 &&\r\n            highlightedIndex < filteredOptions.length\r\n          ) {\r\n            handleSelect(filteredOptions[highlightedIndex]);\r\n          }\r\n          break;\r\n        case \"Escape\":\r\n          setIsOpen(false);\r\n          setSearchTerm(\"\");\r\n          setHighlightedIndex(-1);\r\n          break;\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => document.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [isOpen, highlightedIndex, filteredOptions]);\r\n\r\n  const handleSelect = (option) => {\r\n    onChange({ target: { name, value: option.value } });\r\n    setIsOpen(false);\r\n    setSearchTerm(\"\");\r\n    setHighlightedIndex(-1);\r\n  };\r\n\r\n  const handleToggle = () => {\r\n    if (disabled) return;\r\n    setIsOpen(!isOpen);\r\n    if (!isOpen) {\r\n      setTimeout(() => inputRef.current?.focus(), 100);\r\n    } else {\r\n      setSearchTerm(\"\");\r\n      setHighlightedIndex(-1);\r\n    }\r\n  };\r\n\r\n  const selectedOption = options.find((option) => option.value === value);\r\n\r\n  return (\r\n    <div className={`relative ${className}`} ref={dropdownRef}>\r\n      {/* Trigger Button */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={handleToggle}\r\n        disabled={disabled}\r\n        className={`\r\n          w-full px-4 py-3 text-left bg-white border rounded-lg shadow-sm transition-all duration-200\r\n          flex items-center justify-between\r\n          ${\r\n            error\r\n              ? \"border-red-300 focus:ring-red-500 focus:border-red-500\"\r\n              : \"border-gray-300 focus:ring-blue-500 focus:border-blue-500\"\r\n          }\r\n          ${\r\n            disabled\r\n              ? \"bg-gray-50 text-gray-400 cursor-not-allowed\"\r\n              : \"hover:border-gray-400 focus:ring-2 focus:outline-none\"\r\n          }\r\n          ${isOpen ? \"ring-2 ring-blue-500 border-blue-500\" : \"\"}\r\n        `}\r\n      >\r\n        <span\r\n          className={`truncate ${\r\n            selectedOption ? \"text-gray-900\" : \"text-gray-500\"\r\n          }`}\r\n        >\r\n          {selectedOption ? selectedOption.label : placeholder}\r\n        </span>\r\n        <div className=\"flex items-center gap-2\">\r\n          {selectedOption && (\r\n            <BiCheck className=\"w-4 h-4 text-blue-600 flex-shrink-0\" />\r\n          )}\r\n          {isOpen ? (\r\n            <BiChevronUp className=\"w-5 h-5 text-gray-400 flex-shrink-0\" />\r\n          ) : (\r\n            <BiChevronDown className=\"w-5 h-5 text-gray-400 flex-shrink-0\" />\r\n          )}\r\n        </div>\r\n      </button>\r\n\r\n      {/* Dropdown Menu */}\r\n      {isOpen && (\r\n        <div className=\"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg animate-in fade-in slide-in-from-top-2 duration-200\">\r\n          {/* Search Input */}\r\n          {searchable && options.length > 5 && (\r\n            <div className=\"p-3 border-b border-gray-100\">\r\n              <div className=\"relative\">\r\n                <BiSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                <input\r\n                  ref={inputRef}\r\n                  type=\"text\"\r\n                  placeholder=\"Search options...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => {\r\n                    setSearchTerm(e.target.value);\r\n                    setHighlightedIndex(-1);\r\n                  }}\r\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none text-sm\"\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Options List */}\r\n          <div className=\"max-h-60 overflow-y-auto\">\r\n            {filteredOptions.length > 0 ? (\r\n              filteredOptions.map((option, index) => (\r\n                <button\r\n                  key={option.value}\r\n                  type=\"button\"\r\n                  onClick={() => handleSelect(option)}\r\n                  onMouseEnter={() => setHighlightedIndex(index)}\r\n                  className={`\r\n                    w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors duration-150\r\n                    flex items-center justify-between group\r\n                    ${highlightedIndex === index ? \"bg-blue-50\" : \"\"}\r\n                    ${\r\n                      option.value === value\r\n                        ? \"bg-blue-50 text-blue-700\"\r\n                        : \"text-gray-900\"\r\n                    }\r\n                  `}\r\n                >\r\n                  <span className=\"truncate\">{option.label}</span>\r\n                  {option.value === value && (\r\n                    <BiCheck className=\"w-4 h-4 text-blue-600 flex-shrink-0 ml-2\" />\r\n                  )}\r\n                </button>\r\n              ))\r\n            ) : (\r\n              <div className=\"px-4 py-8 text-center text-gray-500 text-sm\">\r\n                {searchTerm ? \"No options found\" : \"No options available\"}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer with selected count */}\r\n          {selectedOption && (\r\n            <div className=\"px-4 py-2 border-t border-gray-100 bg-gray-50 text-xs text-gray-500\">\r\n              Selected: {selectedOption.label}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n          <svg\r\n            className=\"w-4 h-4 mr-1 flex-shrink-0\"\r\n            fill=\"currentColor\"\r\n            viewBox=\"0 0 20 20\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\"\r\n              clipRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n          {error}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Button from \"../common/Button\";\r\nimport FormField from \"../common/FormField\";\r\nimport SelectDropdown from \"../common/SelectDropdown\";\r\nimport BaseModal from \"./BaseModal\";\r\nimport { useKeyboardShortcuts } from \"../../hooks/useKeyboardShortcuts\";\r\nimport { api } from \"../../lib/api\";\r\nimport {\r\n  getRegions,\r\n  getProvinces,\r\n  getCities,\r\n  getBarangays,\r\n} from \"../../lib/locationApi\";\r\n\r\n/**\r\n * ProfileModal Component\r\n * Modern, trending UI/UX design with glassmorphism and animations\r\n */\r\nconst ProfileModal = ({ isOpen, onClose, userData, businessData }) => {\r\n  const [profileData, setProfileData] = useState({\r\n    first_name: userData?.first_name || \"\",\r\n    last_name: userData?.last_name || \"\",\r\n    email: userData?.email || \"\",\r\n    contact_number: userData?.contact_number || \"\",\r\n    currentPassword: \"\",\r\n    newPassword: \"\",\r\n    confirmPassword: \"\",\r\n    // Business fields\r\n    business_name: businessData?.business_name || \"\",\r\n    business_email: businessData?.email || \"\",\r\n    business_type: businessData?.business_type || \"\",\r\n    region: businessData?.region || \"\",\r\n    province: businessData?.province || \"\",\r\n    city: businessData?.city || \"\",\r\n    barangay: businessData?.barangay || \"\",\r\n    house_street:\r\n      businessData?.house_number ||\r\n      businessData?.business_address ||\r\n      businessData?.address_line ||\r\n      \"\",\r\n    country: businessData?.country || \"Philippines\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [errors, setErrors] = useState({});\r\n  const [touched, setTouched] = useState({});\r\n  const [activeTab, setActiveTab] = useState(\"account\");\r\n  const [locationOptions, setLocationOptions] = useState({\r\n    regions: [],\r\n    provinces: [],\r\n    cities: [],\r\n    barangays: [],\r\n  });\r\n  const [locationLoading, setLocationLoading] = useState({\r\n    regions: false,\r\n    provinces: false,\r\n    cities: false,\r\n    barangays: false,\r\n  });\r\n  const initialLocationRef = useRef({\r\n    region: businessData?.region || \"\",\r\n    province: businessData?.province || \"\",\r\n    city: businessData?.city || \"\",\r\n    barangay: businessData?.barangay || \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (userData || businessData) {\r\n      setProfileData({\r\n        first_name: userData?.first_name || \"\",\r\n        last_name: userData?.last_name || \"\",\r\n        email: userData?.email || \"\",\r\n        contact_number: userData?.contact_number || \"\",\r\n        currentPassword: \"\",\r\n        newPassword: \"\",\r\n        confirmPassword: \"\",\r\n        // Business fields\r\n        business_name: businessData?.business_name || \"\",\r\n        business_email: businessData?.email || \"\",\r\n        business_type: businessData?.business_type || \"\",\r\n        region: businessData?.region || \"\",\r\n        province: businessData?.province || \"\",\r\n        city: businessData?.city || \"\",\r\n        barangay: businessData?.barangay || \"\",\r\n        house_street:\r\n          businessData?.house_number ||\r\n          businessData?.business_address ||\r\n          businessData?.address_line ||\r\n          \"\",\r\n        country: businessData?.country || \"Philippines\",\r\n      });\r\n      setMessage(\"\");\r\n      setError(\"\");\r\n      setErrors({});\r\n      setTouched({});\r\n      setActiveTab(\"account\");\r\n    }\r\n  }, [userData, businessData, isOpen]);\r\n\r\n  // Helpers\r\n  const findOptionByLabel = (options, label) => {\r\n    if (!label) return null;\r\n    const target = label.toLowerCase().trim();\r\n    return options.find((o) => o.label.toLowerCase() === target) || null;\r\n  };\r\n\r\n  const getLabel = (options, value, fallback) => {\r\n    const match = options.find((o) => o.value === value);\r\n    return match ? match.label : fallback || \"\";\r\n  };\r\n\r\n  // Fetch regions on open\r\n  useEffect(() => {\r\n    const fetchRegions = async () => {\r\n      try {\r\n        setLocationLoading((l) => ({ ...l, regions: true }));\r\n        const data = await getRegions();\r\n        const options = data.map((r) => ({ value: r.code, label: r.name }));\r\n        setLocationOptions((o) => ({ ...o, regions: options }));\r\n      } catch (err) {\r\n        console.error(\"Failed to load regions\", err);\r\n      } finally {\r\n        setLocationLoading((l) => ({ ...l, regions: false }));\r\n      }\r\n    };\r\n    if (isOpen) {\r\n      fetchRegions();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // When regions loaded, map existing region name to code\r\n  useEffect(() => {\r\n    if (\r\n      locationOptions.regions.length &&\r\n      initialLocationRef.current.region &&\r\n      !profileData.region\r\n    ) {\r\n      const match = findOptionByLabel(\r\n        locationOptions.regions,\r\n        initialLocationRef.current.region\r\n      );\r\n      if (match) {\r\n        setProfileData((p) => ({ ...p, region: match.value }));\r\n      }\r\n    }\r\n  }, [locationOptions.regions, profileData.region]);\r\n\r\n  // Fetch provinces when region changes\r\n  useEffect(() => {\r\n    const loadProvinces = async () => {\r\n      if (!profileData.region) {\r\n        setLocationOptions((o) => ({\r\n          ...o,\r\n          provinces: [],\r\n          cities: [],\r\n          barangays: [],\r\n        }));\r\n        return;\r\n      }\r\n      try {\r\n        setLocationLoading((l) => ({ ...l, provinces: true }));\r\n        const data = await getProvinces(profileData.region);\r\n        const options = data.map((p) => ({ value: p.code, label: p.name }));\r\n        setLocationOptions((o) => ({\r\n          ...o,\r\n          provinces: options,\r\n          cities: [],\r\n          barangays: [],\r\n        }));\r\n\r\n        // Preselect province if we have a name from initial data\r\n        if (initialLocationRef.current.province) {\r\n          const match = findOptionByLabel(\r\n            options,\r\n            initialLocationRef.current.province\r\n          );\r\n          if (match) {\r\n            setProfileData((p) => ({ ...p, province: match.value }));\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to load provinces\", err);\r\n      } finally {\r\n        setLocationLoading((l) => ({ ...l, provinces: false }));\r\n      }\r\n    };\r\n    loadProvinces();\r\n  }, [profileData.region]);\r\n\r\n  // Fetch cities when province changes\r\n  useEffect(() => {\r\n    const loadCities = async () => {\r\n      if (!profileData.province) {\r\n        setLocationOptions((o) => ({ ...o, cities: [], barangays: [] }));\r\n        return;\r\n      }\r\n      try {\r\n        setLocationLoading((l) => ({ ...l, cities: true }));\r\n        const data = await getCities(profileData.province);\r\n        const options = data.map((c) => ({ value: c.code, label: c.name }));\r\n        setLocationOptions((o) => ({ ...o, cities: options, barangays: [] }));\r\n\r\n        // Preselect city\r\n        if (initialLocationRef.current.city) {\r\n          const match = findOptionByLabel(\r\n            options,\r\n            initialLocationRef.current.city\r\n          );\r\n          if (match) {\r\n            setProfileData((p) => ({ ...p, city: match.value }));\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to load cities\", err);\r\n      } finally {\r\n        setLocationLoading((l) => ({ ...l, cities: false }));\r\n      }\r\n    };\r\n    loadCities();\r\n  }, [profileData.province]);\r\n\r\n  // Fetch barangays when city changes\r\n  useEffect(() => {\r\n    const loadBarangays = async () => {\r\n      if (!profileData.city) {\r\n        setLocationOptions((o) => ({ ...o, barangays: [] }));\r\n        return;\r\n      }\r\n      try {\r\n        setLocationLoading((l) => ({ ...l, barangays: true }));\r\n        const data = await getBarangays(profileData.city);\r\n        const options = data.map((b) => ({ value: b.code, label: b.name }));\r\n        setLocationOptions((o) => ({ ...o, barangays: options }));\r\n\r\n        // Preselect barangay\r\n        if (initialLocationRef.current.barangay) {\r\n          const match = findOptionByLabel(\r\n            options,\r\n            initialLocationRef.current.barangay\r\n          );\r\n          if (match) {\r\n            setProfileData((p) => ({ ...p, barangay: match.value }));\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to load barangays\", err);\r\n      } finally {\r\n        setLocationLoading((l) => ({ ...l, barangays: false }));\r\n      }\r\n    };\r\n    loadBarangays();\r\n  }, [profileData.city]);\r\n\r\n  const validateField = (name, value) => {\r\n    const newErrors = { ...errors };\r\n\r\n    switch (name) {\r\n      case \"first_name\":\r\n        if (activeTab === \"account\" && !value.trim()) {\r\n          newErrors.first_name = \"First name is required\";\r\n        } else if (value.trim().length < 2) {\r\n          newErrors.first_name = \"First name must be at least 2 characters\";\r\n        } else {\r\n          delete newErrors.first_name;\r\n        }\r\n        break;\r\n\r\n      case \"last_name\":\r\n        if (activeTab === \"account\" && !value.trim()) {\r\n          newErrors.last_name = \"Last name is required\";\r\n        } else if (value.trim().length < 2) {\r\n          newErrors.last_name = \"Last name must be at least 2 characters\";\r\n        } else {\r\n          delete newErrors.last_name;\r\n        }\r\n        break;\r\n\r\n      case \"email\":\r\n        if (activeTab === \"account\" && !value.trim()) {\r\n          newErrors.email = \"Email is required\";\r\n        } else if (\r\n          value.trim() &&\r\n          !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value.trim())\r\n        ) {\r\n          newErrors.email = \"Please enter a valid email\";\r\n        } else {\r\n          delete newErrors.email;\r\n        }\r\n        break;\r\n\r\n      case \"contact_number\":\r\n        if (value && value.trim().length < 7) {\r\n          newErrors.contact_number = \"Phone number must be at least 7 digits\";\r\n        } else {\r\n          delete newErrors.contact_number;\r\n        }\r\n        break;\r\n\r\n      case \"business_email\":\r\n        if (value.trim() && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value.trim())) {\r\n          newErrors.business_email = \"Please enter a valid email\";\r\n        } else {\r\n          delete newErrors.business_email;\r\n        }\r\n        break;\r\n\r\n      case \"currentPassword\":\r\n        if (profileData.newPassword && !value) {\r\n          newErrors.currentPassword =\r\n            \"Current password is required to change password\";\r\n        } else {\r\n          delete newErrors.currentPassword;\r\n        }\r\n        break;\r\n\r\n      case \"newPassword\":\r\n        if (value && value.length < 6) {\r\n          newErrors.newPassword = \"Password must be at least 6 characters\";\r\n        } else {\r\n          delete newErrors.newPassword;\r\n        }\r\n        break;\r\n\r\n      case \"confirmPassword\":\r\n        if (value && value !== profileData.newPassword) {\r\n          newErrors.confirmPassword = \"Passwords do not match\";\r\n        } else {\r\n          delete newErrors.confirmPassword;\r\n        }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    setErrors(newErrors);\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setProfileData((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n    if (touched[name]) {\r\n      validateField(name, value);\r\n    }\r\n  };\r\n\r\n  const handleBlur = (e) => {\r\n    const { name, value } = e.target;\r\n    setTouched((prev) => ({ ...prev, [name]: true }));\r\n    validateField(name, value);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n    setError(\"\");\r\n\r\n    if (activeTab === \"security\") {\r\n      if (!profileData.currentPassword || !profileData.newPassword || !profileData.confirmPassword) {\r\n        setError(\"Please fill in all password fields.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      if (profileData.newPassword !== profileData.confirmPassword) {\r\n        setError(\"New password and confirmation do not match.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const token = sessionStorage.getItem(\"auth_token\");\r\n\r\n      if (activeTab === \"account\" || activeTab === \"security\") {\r\n        const updateData = {\r\n          first_name: profileData.first_name,\r\n          last_name: profileData.last_name,\r\n          email: profileData.email,\r\n          contact_number: profileData.contact_number,\r\n        };\r\n\r\n        // Add password fields if user is changing password\r\n        if (profileData.newPassword) {\r\n          updateData.currentPassword = profileData.currentPassword;\r\n          updateData.newPassword = profileData.newPassword;\r\n        }\r\n\r\n        await api(\"/api/auth/update-profile\", {\r\n          method: \"PUT\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(updateData),\r\n        });\r\n      } else if (activeTab === \"business\") {\r\n        const regionLabel = getLabel(\r\n          locationOptions.regions,\r\n          profileData.region,\r\n          businessData?.region\r\n        );\r\n        const provinceLabel = getLabel(\r\n          locationOptions.provinces,\r\n          profileData.province,\r\n          businessData?.province\r\n        );\r\n        const cityLabel = getLabel(\r\n          locationOptions.cities,\r\n          profileData.city,\r\n          businessData?.city\r\n        );\r\n        const barangayLabel = getLabel(\r\n          locationOptions.barangays,\r\n          profileData.barangay,\r\n          businessData?.barangay\r\n        );\r\n\r\n        const businessUpdateData = {\r\n          businessName: profileData.business_name || undefined,\r\n          businessType: profileData.business_type || undefined,\r\n          businessAddress: [\r\n            profileData.house_street,\r\n            barangayLabel,\r\n            cityLabel,\r\n            provinceLabel,\r\n            regionLabel,\r\n            profileData.country || \"Philippines\",\r\n          ]\r\n            .filter(Boolean)\r\n            .join(\", \"),\r\n          houseNumber: profileData.house_street || undefined,\r\n          country: profileData.country || \"Philippines\",\r\n          business_email: profileData.business_email || undefined,\r\n        };\r\n\r\n        await api(\"/api/business/update-business\", {\r\n          method: \"PUT\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(businessUpdateData),\r\n        });\r\n      }\r\n\r\n      setMessage(\"Profile updated successfully!\");\r\n      setTimeout(() => {\r\n        onClose();\r\n        window.location.reload();\r\n      }, 2000);\r\n    } catch (err) {\r\n      console.error(\"Failed to update profile:\", err);\r\n      setError(err.message || \"Failed to update profile. Please try again.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Reset form when modal opens/closes\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setActiveTab(\"account\");\r\n      setProfileData({\r\n        first_name: userData?.first_name || \"\",\r\n        last_name: userData?.last_name || \"\",\r\n        email: userData?.email || \"\",\r\n        contact_number: userData?.contact_number || \"\",\r\n        currentPassword: \"\",\r\n        newPassword: \"\",\r\n        confirmPassword: \"\",\r\n        business_name: businessData?.business_name || \"\",\r\n        business_email: businessData?.email || \"\",\r\n        business_type: businessData?.business_type || \"\",\r\n        region: businessData?.region || \"\",\r\n        province: businessData?.province || \"\",\r\n        city: businessData?.city || \"\",\r\n        barangay: businessData?.barangay || \"\",\r\n        house_street:\r\n          businessData?.house_number ||\r\n          businessData?.business_address ||\r\n          businessData?.address_line ||\r\n          \"\",\r\n        country: businessData?.country || \"Philippines\",\r\n      });\r\n      setErrors({});\r\n      setTouched({});\r\n      setMessage(\"\");\r\n      setError(\"\");\r\n    }\r\n  }, [isOpen, userData, businessData]);\r\n\r\n  // Set up keyboard shortcuts\r\n  useKeyboardShortcuts(\r\n    [\r\n      {\r\n        key: \"escape\",\r\n        action: onClose,\r\n        enabled: isOpen,\r\n        allowWhileTyping: true,\r\n      },\r\n      {\r\n        key: \"enter\",\r\n        action: (e) => {\r\n          if (isOpen) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            handleSubmit(e);\r\n          }\r\n        },\r\n        enabled: isOpen && activeTab !== \"security\",\r\n      },\r\n    ],\r\n    [isOpen, onClose, handleSubmit, activeTab]\r\n  );\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const storeLabel =\r\n    userData?.store_name ||\r\n    userData?.storeName ||\r\n    userData?.businessName ||\r\n    \"your store\";\r\n\r\n  return (\r\n    <BaseModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Update Password\"\r\n      subtitle={\r\n        <div className=\"flex flex-col gap-2\">\r\n          <p>Cashiers can only change their password here</p>\r\n          <div className=\"mt-2 pt-2 border-t border-gray-200\">\r\n            <p className=\"text-xs text-gray-500 flex items-center gap-1\">\r\n              <span className=\"inline-flex items-center justify-center bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-0.5 rounded\">\r\n                F11\r\n              </span>\r\n              <span>Recent Receipts</span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      }\r\n      footer={\r\n        <div className=\"w-full flex gap-2 justify-end\">\r\n          <Button\r\n            label=\"Cancel\"\r\n            variant=\"secondary\"\r\n            onClick={onClose}\r\n            disabled={loading}\r\n          />\r\n          <Button\r\n            label={\r\n              loading ? \"Saving...\" : \"Save Password (Enter)\"\r\n            }\r\n            variant=\"primary\"\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n      }\r\n    >\r\n      {message && (\r\n        <div className=\"text-sm text-emerald-700 bg-emerald-50 border border-emerald-200 rounded-lg px-3 py-2 mb-3\">\r\n          {message}\r\n        </div>\r\n      )}\r\n      {error && (\r\n        <div className=\"text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg px-3 py-2 mb-3\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Tab Navigation */}\r\n      <div className=\"flex gap-1 border-b border-slate-200/10 -mx-6 px-6\">\r\n        <button\r\n          onClick={() => setActiveTab(\"account\")}\r\n          className={`px-4 py-2 rounded-t-xl font-medium transition-all duration-200 relative ${\r\n            activeTab === \"account\"\r\n              ? \"text-blue-600 bg-blue-50/30\"\r\n              : \"text-slate-500 hover:text-slate-700\"\r\n          }`}\r\n        >\r\n          <span className=\"flex items-center gap-2\">\r\n            <svg\r\n              className=\"w-4 h-4\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\r\n              />\r\n            </svg>\r\n            Account\r\n          </span>\r\n          {activeTab === \"account\" && (\r\n            <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full\"></div>\r\n          )}\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab(\"business\")}\r\n          className={`px-4 py-2 rounded-t-xl font-medium transition-all duration-200 relative ${\r\n            activeTab === \"business\"\r\n              ? \"text-blue-600 bg-blue-50/30\"\r\n              : \"text-slate-500 hover:text-slate-700\"\r\n          }`}\r\n        >\r\n          <span className=\"flex items-center gap-2\">\r\n            <svg\r\n              className=\"w-4 h-4\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"\r\n              />\r\n            </svg>\r\n            Business\r\n          </span>\r\n          {activeTab === \"business\" && (\r\n            <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full\"></div>\r\n          )}\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab(\"security\")}\r\n          className={`px-4 py-2 rounded-t-xl font-medium transition-all duration-200 relative ${\r\n            activeTab === \"security\"\r\n              ? \"text-blue-600 bg-blue-50/30\"\r\n              : \"text-slate-500 hover:text-slate-700\"\r\n          }`}\r\n        >\r\n          <span className=\"flex items-center gap-2\">\r\n            <svg\r\n              className=\"w-4 h-4\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"\r\n              />\r\n            </svg>\r\n            Security\r\n          </span>\r\n          {activeTab === \"security\" && (\r\n            <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full\"></div>\r\n          )}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Form Content */}\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* Account Tab */}\r\n        {activeTab === \"account\" && (\r\n          <div className=\"space-y-4 animate-in fade-in duration-300\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <h3 className=\"text-sm font-bold text-slate-900\">\r\n                Personal Information\r\n              </h3>\r\n              <div className=\"flex-1 h-px bg-gradient-to-r from-slate-200 to-transparent\"></div>\r\n            </div>\r\n\r\n            {/* First Name Field */}\r\n            <FormField\r\n              label=\"First Name\"\r\n              name=\"first_name\"\r\n              value={profileData.first_name}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Enter first name\"\r\n              error={\r\n                touched.first_name && errors.first_name\r\n                  ? errors.first_name\r\n                  : null\r\n              }\r\n              required\r\n            />\r\n\r\n            {/* Last Name Field */}\r\n            <FormField\r\n              label=\"Last Name\"\r\n              name=\"last_name\"\r\n              value={profileData.last_name}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Enter last name\"\r\n              error={\r\n                touched.last_name && errors.last_name ? errors.last_name : null\r\n              }\r\n              required\r\n            />\r\n\r\n            {/* Email Field */}\r\n            <FormField\r\n              label=\"Email Address\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              value={profileData.email}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Enter email address\"\r\n              error={touched.email && errors.email ? errors.email : null}\r\n              required\r\n            />\r\n\r\n            {/* Contact Number Field */}\r\n            <FormField\r\n              label=\"Contact Number\"\r\n              name=\"contact_number\"\r\n              type=\"tel\"\r\n              value={profileData.contact_number}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Enter phone number\"\r\n              error={\r\n                touched.contact_number && errors.contact_number\r\n                  ? errors.contact_number\r\n                  : null\r\n              }\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Business Tab */}\r\n        {activeTab === \"business\" && (\r\n          <div className=\"space-y-4 animate-in fade-in duration-300\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <h3 className=\"text-sm font-bold text-slate-900\">\r\n                Business Information\r\n              </h3>\r\n              <div className=\"flex-1 h-px bg-gradient-to-r from-slate-200 to-transparent\"></div>\r\n            </div>\r\n\r\n            {/* Business Name */}\r\n            <FormField\r\n              label=\"Business Name\"\r\n              name=\"business_name\"\r\n              value={profileData.business_name}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Enter business name\"\r\n              error={\r\n                touched.business_name && errors.business_name\r\n                  ? errors.business_name\r\n                  : null\r\n              }\r\n            />\r\n\r\n            {/* Business Email Field */}\r\n            <FormField\r\n              label=\"Business Email\"\r\n              name=\"business_email\"\r\n              type=\"email\"\r\n              value={profileData.business_email}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Enter business email\"\r\n              error={\r\n                touched.business_email && errors.business_email\r\n                  ? errors.business_email\r\n                  : null\r\n              }\r\n            />\r\n\r\n            {/* Business Type */}\r\n            <div className=\"mb-5\">\r\n              <label className=\"block mb-1 font-medium text-blue-800\">\r\n                Business Type\r\n              </label>\r\n              <SelectDropdown\r\n                name=\"business_type\"\r\n                value={profileData.business_type}\r\n                onChange={(e) => handleInputChange(e)}\r\n                options={[\r\n                  { value: \"Grocery Store\", label: \"Grocery Store\" },\r\n                  { value: \"Retail\", label: \"Retail\" },\r\n                  { value: \"Restaurant\", label: \"Restaurant\" },\r\n                  { value: \"Cafe\", label: \"Cafe\" },\r\n                  { value: \"Pharmacy\", label: \"Pharmacy\" },\r\n                  { value: \"Services\", label: \"Services\" },\r\n                  ...(profileData.business_type &&\r\n                  ![\r\n                    \"Grocery Store\",\r\n                    \"Retail\",\r\n                    \"Restaurant\",\r\n                    \"Cafe\",\r\n                    \"Pharmacy\",\r\n                    \"Services\",\r\n                  ].includes(profileData.business_type)\r\n                    ? [\r\n                        {\r\n                          value: profileData.business_type,\r\n                          label: profileData.business_type,\r\n                        },\r\n                      ]\r\n                    : []),\r\n                ]}\r\n                placeholder=\"Select business type\"\r\n                error={\r\n                  touched.business_type && errors.business_type\r\n                    ? errors.business_type\r\n                    : null\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2 mb-2 pt-2\">\r\n              <h3 className=\"text-sm font-bold text-slate-900\">\r\n                Business Location\r\n              </h3>\r\n              <div className=\"flex-1 h-px bg-gradient-to-r from-slate-200 to-transparent\"></div>\r\n            </div>\r\n\r\n            {/* Region */}\r\n            <div className=\"mb-5\">\r\n              <label className=\"block mb-1 font-medium text-blue-800\">\r\n                Region\r\n              </label>\r\n              <SelectDropdown\r\n                name=\"region\"\r\n                value={profileData.region}\r\n                options={locationOptions.regions}\r\n                onChange={(e) =>\r\n                  handleInputChange({\r\n                    target: { name: \"region\", value: e.target.value },\r\n                  })\r\n                }\r\n                placeholder={\r\n                  locationLoading.regions\r\n                    ? \"Loading regions...\"\r\n                    : \"Select Region\"\r\n                }\r\n                disabled={locationLoading.regions}\r\n                error={touched.region && errors.region ? errors.region : null}\r\n              />\r\n            </div>\r\n\r\n            {/* Province */}\r\n            <div className=\"mb-5\">\r\n              <label className=\"block mb-1 font-medium text-blue-800\">\r\n                Province\r\n              </label>\r\n              <SelectDropdown\r\n                name=\"province\"\r\n                value={profileData.province}\r\n                options={locationOptions.provinces}\r\n                onChange={(e) =>\r\n                  handleInputChange({\r\n                    target: { name: \"province\", value: e.target.value },\r\n                  })\r\n                }\r\n                placeholder={\r\n                  locationLoading.provinces\r\n                    ? \"Loading provinces...\"\r\n                    : \"Select Province\"\r\n                }\r\n                disabled={!profileData.region || locationLoading.provinces}\r\n                error={\r\n                  touched.province && errors.province ? errors.province : null\r\n                }\r\n              />\r\n            </div>\r\n\r\n            {/* City/Municipality */}\r\n            <div className=\"mb-5\">\r\n              <label className=\"block mb-1 font-medium text-blue-800\">\r\n                City/Municipality\r\n              </label>\r\n              <SelectDropdown\r\n                name=\"city\"\r\n                value={profileData.city}\r\n                options={locationOptions.cities}\r\n                onChange={(e) =>\r\n                  handleInputChange({\r\n                    target: { name: \"city\", value: e.target.value },\r\n                  })\r\n                }\r\n                placeholder={\r\n                  locationLoading.cities\r\n                    ? \"Loading cities...\"\r\n                    : \"Select City/Municipality\"\r\n                }\r\n                disabled={!profileData.province || locationLoading.cities}\r\n                error={touched.city && errors.city ? errors.city : null}\r\n              />\r\n            </div>\r\n\r\n            {/* Barangay */}\r\n            <div className=\"mb-5\">\r\n              <label className=\"block mb-1 font-medium text-blue-800\">\r\n                Barangay\r\n              </label>\r\n              <SelectDropdown\r\n                name=\"barangay\"\r\n                value={profileData.barangay}\r\n                options={locationOptions.barangays}\r\n                onChange={(e) =>\r\n                  handleInputChange({\r\n                    target: { name: \"barangay\", value: e.target.value },\r\n                  })\r\n                }\r\n                placeholder={\r\n                  locationLoading.barangays\r\n                    ? \"Loading barangays...\"\r\n                    : \"Select Barangay\"\r\n                }\r\n                disabled={!profileData.city || locationLoading.barangays}\r\n                error={\r\n                  touched.barangay && errors.barangay ? errors.barangay : null\r\n                }\r\n              />\r\n            </div>\r\n\r\n            {/* House / Street / Landmark */}\r\n            <FormField\r\n              label=\"House no./ Street Name / Landmark (optional)\"\r\n              name=\"house_street\"\r\n              value={profileData.house_street}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Enter house number, street, or landmark\"\r\n              error={\r\n                touched.house_street && errors.house_street\r\n                  ? errors.house_street\r\n                  : null\r\n              }\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Security Tab */}\r\n        {activeTab === \"security\" && (\r\n          <div className=\"space-y-4 animate-in fade-in duration-300\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <h3 className=\"text-sm font-bold text-slate-900\">\r\n                Change Password\r\n              </h3>\r\n              <div className=\"flex-1 h-px bg-gradient-to-r from-slate-200 to-transparent\"></div>\r\n            </div>\r\n            <p className=\"text-xs text-slate-500 bg-amber-50 border border-amber-100/50 rounded-xl px-3 py-2\">\r\n              Leave blank to keep your current password\r\n            </p>\r\n\r\n            {/* Current Password Field */}\r\n            <FormField\r\n              label=\"Current Password\"\r\n              name=\"currentPassword\"\r\n              type=\"password\"\r\n              value={profileData.currentPassword}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Enter current password\"\r\n              error={\r\n                touched.currentPassword && errors.currentPassword\r\n                  ? errors.currentPassword\r\n                  : null\r\n              }\r\n            />\r\n\r\n            {/* Password Strength Indicator */}\r\n            {profileData.newPassword && (\r\n              <div className=\"space-y-2\">\r\n                <div className=\"text-xs font-semibold text-slate-700\">\r\n                  Password Strength\r\n                </div>\r\n                <div className=\"w-full h-1.5 bg-slate-200 rounded-full overflow-hidden\">\r\n                  <div\r\n                    className={`h-full rounded-full transition-all duration-300 ${\r\n                      profileData.newPassword.length >= 12\r\n                        ? \"w-full bg-gradient-to-r from-green-500 to-emerald-500\"\r\n                        : profileData.newPassword.length >= 8\r\n                        ? \"w-2/3 bg-gradient-to-r from-yellow-500 to-amber-500\"\r\n                        : \"w-1/3 bg-gradient-to-r from-red-500 to-orange-500\"\r\n                    }`}\r\n                  ></div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* New Password Field */}\r\n            <FormField\r\n              label=\"New Password\"\r\n              name=\"newPassword\"\r\n              type=\"password\"\r\n              value={profileData.newPassword}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Min. 6 characters\"\r\n              error={\r\n                touched.newPassword && errors.newPassword\r\n                  ? errors.newPassword\r\n                  : null\r\n              }\r\n            />\r\n\r\n            {/* Confirm Password Field */}\r\n            <FormField\r\n              label=\"Confirm Password\"\r\n              name=\"confirmPassword\"\r\n              type=\"password\"\r\n              value={profileData.confirmPassword}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Re-enter new password\"\r\n              error={\r\n                touched.confirmPassword && errors.confirmPassword\r\n                  ? errors.confirmPassword\r\n                  : null\r\n              }\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"flex justify-end gap-2 pt-4 border-t border-gray-100 mt-6\">\r\n          <Button\r\n            label=\"Cancel\"\r\n            variant=\"secondary\"\r\n            onClick={onClose}\r\n            disabled={loading}\r\n            type=\"button\"\r\n          />\r\n          <Button\r\n            label={loading ? \"Saving...\" : \"Save Changes\"}\r\n            variant=\"primary\"\r\n            type=\"submit\"\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n      </form>\r\n    </BaseModal>\r\n  );\r\n};\r\n\r\nexport default ProfileModal;\r\n"],"names":["SelectDropdown","name","value","options","placeholder","onChange","error","disabled","searchable","className","required","isOpen","setIsOpen","useState","searchTerm","setSearchTerm","highlightedIndex","setHighlightedIndex","dropdownRef","useRef","inputRef","filteredOptions","filter","option","label","toLowerCase","includes","useEffect","handleClickOutside","event","current","contains","target","addEventListener","document","removeEventListener","handleKeyDown","key","preventDefault","prev","length","handleSelect","selectedOption","find","ref","children","jsxs","type","onClick","handleToggle","setTimeout","focus","jsx","BiCheck","BiChevronUp","BiChevronDown","BiSearch","e","map","index","onMouseEnter","fill","viewBox","fillRule","d","clipRule","ProfileModal","onClose","userData","businessData","profileData","setProfileData","first_name","last_name","email","contact_number","currentPassword","newPassword","confirmPassword","business_name","business_email","business_type","region","province","city","barangay","house_street","house_number","business_address","address_line","country","loading","setLoading","message","setMessage","setError","errors","setErrors","touched","setTouched","activeTab","setActiveTab","locationOptions","setLocationOptions","regions","provinces","cities","barangays","locationLoading","setLocationLoading","initialLocationRef","findOptionByLabel","trim","o","getLabel","fallback","match","async","l","data","getRegions","r","code","err","fetchRegions","p","getProvinces","loadProvinces","getCities","c","loadCities","getBarangays","b","loadBarangays","validateField","newErrors","test","handleInputChange","handleBlur","handleSubmit","token","sessionStorage","getItem","updateData","api","method","headers","Authorization","body","JSON","stringify","regionLabel","provinceLabel","cityLabel","barangayLabel","businessUpdateData","businessName","undefined","businessType","businessAddress","Boolean","join","houseNumber","window","location","reload","useKeyboardShortcuts","action","enabled","allowWhileTyping","stopPropagation","BaseModal","title","subtitle","footer","Button","variant","stroke","strokeLinecap","strokeLinejoin","strokeWidth","onSubmit","FormField","onBlur"],"mappings":"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"}