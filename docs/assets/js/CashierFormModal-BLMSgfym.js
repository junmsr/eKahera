import{j as e}from"./utils-BnCj7yKo.js";import{a}from"./vendor-BZrj58oz.js";import{b as s}from"./index-DLptuXQb.js";import{F as r}from"./FormField-1uEQplD4.js";import{B as t}from"./BaseModal-C-8Qp-dk.js";function n({isOpen:n,onClose:m,onSubmit:l,title:i="Add Cashier",submitButtonText:o="Save",initialData:u,isLoading:d=!1}){const c={name:"",first_name:"",last_name:"",password:"",number:"",email:"",status:"ACTIVE"},[b,h]=a.useState(u||c),[p,f]=a.useState({}),[_,w]=a.useState({}),g=u&&u.id;a.useEffect(()=>{h(u?{name:u.name||u.username||"",first_name:u.first_name||"",last_name:u.last_name||"",password:u.password||"",number:u.number||u.contact_number||"",email:u.email||"",status:u.status||"ACTIVE"}:c)},[u]),a.useEffect(()=>{n||(h(c),f({}),w({}))},[n,u]);const j=(e,a)=>{const s={...p};switch(e){case"name":a&&a.trim()?a.trim().length<2?s.name="Username must be at least 2 characters":delete s.name:s.name="Username is required";break;case"first_name":a&&a.trim()?a.trim().length<2?s.first_name="First name must be at least 2 characters":delete s.first_name:s.first_name="First name is required";break;case"last_name":a&&a.trim()?a.trim().length<2?s.last_name="Last name must be at least 2 characters":delete s.last_name:s.last_name="Last name is required";break;case"password":g||a&&a.trim()?a&&a.length<6?s.password="Password must be at least 6 characters":delete s.password:s.password="Password is required";break;case"number":a&&a.trim()?a.trim().length<7?s.number="Phone number must be at least 7 digits":delete s.number:s.number="Phone number is required";break;case"email":a&&a.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.trim())?s.email="Please enter a valid email":delete s.email}f(s)},x=e=>{const{name:a,value:s}=e.target;h(e=>({...e,[a]:s})),_[a]&&j(a,s)},v=e=>{const{name:a,value:s}=e.target;w(e=>({...e,[a]:!0})),j(a,s)},k=async e=>{e.preventDefault();const a={};Object.keys(b).forEach(e=>{if("status"!==e){const s=b[e];switch(e){case"name":s&&s.trim()?s.trim().length<2&&(a.name="Username must be at least 2 characters"):a.name="Username is required";break;case"first_name":s&&s.trim()?s.trim().length<2&&(a.first_name="First name must be at least 2 characters"):a.first_name="First name is required";break;case"last_name":s&&s.trim()?s.trim().length<2&&(a.last_name="Last name must be at least 2 characters"):a.last_name="Last name is required";break;case"password":g||s?s&&s.length<6&&(a.password="Password must be at least 6 characters"):a.password="Password is required";break;case"number":s&&s.trim()?s.trim().length<7&&(a.number="Phone number must be at least 7 digits"):a.number="Phone number is required";break;case"email":s&&s.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.trim())&&(a.email="Please enter a valid email")}}}),f(a),w({name:!0,first_name:!0,last_name:!0,...!g&&{password:!0},number:!0,email:!0});if(!(Object.keys(a).length>0)){const e=g?{...b}:b;g&&e.password&&delete e.password,await l(e),C()}},C=()=>{h(u||c),f({}),w({}),m()};if(!n)return null;const q=0===Object.keys(p).length&&b.name&&b.name.trim()&&b.first_name&&b.first_name.trim()&&b.last_name&&b.last_name.trim()&&(!!g||b.password)&&b.number&&b.number.trim(),y=e.jsxs(e.Fragment,{children:[e.jsx(s,{label:"Cancel",variant:"secondary",onClick:C,type:"button",disabled:d}),e.jsx(s,{label:o,variant:"primary",type:"submit",onClick:k,disabled:!q||d})]});return e.jsx(t,{isOpen:n,onClose:C,title:i,subtitle:"Please fill in all required fields",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 10H9m6 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),footer:y,disabled:d,size:"md",contentClassName:"space-y-4",children:e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsx(r,{label:"Username",name:"name",value:b.name,onChange:x,onBlur:v,placeholder:"Enter username",error:_.name&&p.name?p.name:null,required:!0}),e.jsx(r,{label:"First Name",name:"first_name",value:b.first_name,onChange:x,onBlur:v,placeholder:"Enter first name",error:_.first_name&&p.first_name?p.first_name:null,required:!0}),e.jsx(r,{label:"Last Name",name:"last_name",value:b.last_name,onChange:x,onBlur:v,placeholder:"Enter last name",error:_.last_name&&p.last_name?p.last_name:null,required:!0}),!g&&e.jsx(r,{label:"Password",name:"password",type:"password",value:b.password,onChange:x,onBlur:v,placeholder:"Min. 6 characters",error:_.password&&p.password?p.password:null,required:!0}),e.jsx(r,{label:"Phone Number",name:"number",value:b.number,onChange:x,onBlur:v,placeholder:"Enter phone number",error:_.number&&p.number?p.number:null,required:!0}),e.jsx(r,{label:"Email Address",name:"email",type:"email",value:b.email,onChange:x,onBlur:v,placeholder:"Enter email address (optional)",error:_.email&&p.email?p.email:null}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"status",value:b.status,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]})]})})}export{n as C};
//# sourceMappingURL=CashierFormModal-BLMSgfym.js.map
