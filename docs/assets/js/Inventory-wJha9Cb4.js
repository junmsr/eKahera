import{j as e}from"./utils-CzS7jPpm.js";import{a as t}from"./vendor-DpjJfaBO.js";import{P as s}from"./PageLayout-Ds8RPz28.js";import{N as r}from"./Nav-Admin-NcjbEfr6.js";import{b as i,a,c as n}from"./index-CBMb4OTp.js";import{C as o}from"./Card-BlR7hDww.js";import{M as l}from"./Modal-mCLYhInP.js";import"./Input-D0wlSige.js";import"./qr-CcdB0EcG.js";import"./ScannerCard-DtSIQHjX.js";import"./Navbar-CEV9jCwp.js";import"./Logo-DYlOg-eR.js";import"./PrivacyPolicyModal-DyoaljC3.js";import"./BaseModal-BODUq_pt.js";import"./FormField-B3zxLfAq.js";function c({products:t,allProducts:s,page:r,entriesPerPage:a,totalPages:n,onPageChange:l,onEntriesChange:c,search:d,onSearchChange:m,onEdit:x,onDelete:u,onStockEntry:p,categories:g=[],selectedCategory:h,onCategoryFilter:y,stockFilter:b,onStockFilter:f,sortBy:j,sortOrder:v,onSort:N}){const k=()=>e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 1 1 2.828 2.828L11.828 15.828a4 4 0 0 1-1.414.828l-4.243 1.414 1.414-4.243a4 4 0 0 1 .828-1.414z"})}),w=()=>e.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),e.jsx("path",{d:"M10 11v6M14 11v6"})]}),S=()=>e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 4v16m8-8H4"})}),C=e=>0===e?{label:"Out of Stock",color:"bg-red-100 text-red-700 border-red-200"}:e<10?{label:"Low Stock",color:"bg-orange-100 text-orange-700 border-orange-200"}:{label:"In Stock",color:"bg-green-100 text-green-700 border-green-200"},L=({direction:t})=>e.jsx("svg",{className:"w-4 h-4 "+(t?"text-blue-600":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:"asc"===t?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}):"desc"===t?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),_=e=>{N(e,j===e&&"asc"===v?"desc":"asc")};return e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"mb-4 sm:mb-6 p-3 sm:p-4 md:p-6 w-full overflow-hidden",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 w-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 sm:gap-4 w-full",children:[e.jsx("div",{className:"flex-1 w-full min-w-0",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:d,onChange:m,className:"w-full pl-9 sm:pl-12 pr-3 sm:pr-4 py-2 sm:py-3 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl text-xs sm:text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-gray-400",placeholder:"Search products, categories..."})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-600 hidden md:block",children:"Sort:"}),e.jsxs("select",{value:`${j}-${v}`,onChange:e=>{const[t,s]=e.target.value.split("-");N(t,s)},className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl px-2 sm:px-3 py-1.5 sm:py-2 text-xs font-medium text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 cursor-pointer",children:[e.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),e.jsx("option",{value:"quantity-asc",children:"Stock (Low to High)"}),e.jsx("option",{value:"quantity-desc",children:"Stock (High to Low)"}),e.jsx("option",{value:"selling_price-asc",children:"Price (Low to High)"}),e.jsx("option",{value:"selling_price-desc",children:"Price (High to Low)"}),e.jsx("option",{value:"category-asc",children:"Category (A-Z)"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-600 hidden md:block",children:"Show:"}),e.jsx("select",{value:a,onChange:c,className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl px-2 sm:px-3 py-1.5 sm:py-2 text-xs font-medium text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 cursor-pointer",children:[5,10,25,50,100].map(t=>e.jsx("option",{value:t,children:t},t))})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2 sm:pt-3 border-t border-gray-100 w-full",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 shrink-0",children:"Filters:"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:h||"",onChange:e=>y(e.target.value||null),className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-full px-3 sm:px-4 py-1 sm:py-1.5 text-xs font-medium text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 cursor-pointer",children:[e.jsx("option",{value:"",children:"All Categories"}),g.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id||t.name))]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:b||"",onChange:e=>f(e.target.value||null),className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-full px-3 sm:px-4 py-1 sm:py-1.5 text-xs font-medium text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 cursor-pointer",children:[e.jsx("option",{value:"",children:"All Stock Status"}),e.jsx("option",{value:"in_stock",children:"In Stock"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]})}),(h||b)&&e.jsxs("button",{onClick:()=>{y(null),f(null)},className:"px-2 sm:px-3 py-1 sm:py-1.5 rounded-full text-xs font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 flex items-center gap-1 shrink-0",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]})]})}),e.jsxs(o,{className:"overflow-hidden w-full",children:[e.jsxs("div",{className:"overflow-x-auto w-full relative hidden sm:block",children:[" ",e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-50/80 to-indigo-50/80 border-b-2 border-blue-100",children:[e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"#"}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-blue-100/50 transition-colors group",onClick:()=>_("name"),children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:["Product",e.jsx(L,{direction:"name"===j?v:null})]})}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider hidden sm:table-cell cursor-pointer hover:bg-blue-100/50 transition-colors group",onClick:()=>_("category"),children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:["Category",e.jsx(L,{direction:"category"===j?v:null})]})}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider hidden md:table-cell",children:"Description"}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider hidden lg:table-cell",children:"Cost Price"}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-blue-100/50 transition-colors group",onClick:()=>_("selling_price"),children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:["Selling Price",e.jsx(L,{direction:"selling_price"===j?v:null})]})}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-blue-100/50 transition-colors group",onClick:()=>_("quantity"),children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:["Stock",e.jsx(L,{direction:"quantity"===j?v:null})]})}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:0===t.length?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"No products found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:d?"Try adjusting your search terms":"Start by adding your first product"})]})})}):t.map((t,s)=>{const i=C(t.quantity);return e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-all duration-200 group",children:[e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4 text-xs sm:text-sm text-gray-600 font-medium",children:(r-1)*a+s+1}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4",children:e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsxs("span",{className:"text-xs sm:text-sm font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:[t.name||"N/A"," "]}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-500 mt-0.5 truncate",children:["SKU: ",t.sku||"N/A"]})]})}),e.jsxs("td",{className:"py-3 px-2 sm:py-4 sm:px-4 hidden sm:table-cell",children:[e.jsx("span",{className:"inline-flex items-center px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-medium bg-indigo-50 text-indigo-700 border border-indigo-200",children:t.category})," "]}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4 max-w-xs truncate hidden md:table-cell text-xs sm:text-sm text-gray-600",title:t.description,children:t.description||"-"}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4 hidden lg:table-cell",children:e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:["₱",Number(t.cost_price||0).toFixed(2)," "]})}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4",children:e.jsxs("span",{className:"text-xs sm:text-sm font-bold text-blue-600",children:["₱",Number(t.selling_price||0).toFixed(2)," "]})}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:t.quantity}),e.jsx("span",{className:`inline-flex items-center px-1.5 sm:px-2 py-0.5 rounded-full text-[10px] sm:text-xs font-medium border ${i.color}`,children:i.label})]})}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>p&&p(t),className:"p-2 rounded-lg bg-green-50 text-green-600 hover:bg-green-100 border border-green-200 transition-all duration-200 hover:scale-110",title:"Add Stock",children:e.jsx(S,{})}),e.jsx("button",{onClick:()=>x(t),className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200 transition-all duration-200 hover:scale-110",title:"Edit Product",children:e.jsx(k,{})}),e.jsx("button",{onClick:()=>u(t.id),className:"p-2 rounded-lg bg-red-50 text-red-600 hover:bg-red-100 border border-red-200 transition-all duration-200 hover:scale-110",title:"Delete Product",children:e.jsx(w,{})})]})})]},t.id)})})]})]}),e.jsx("div",{className:"sm:hidden divide-y divide-gray-100",children:0===t.length?e.jsx("div",{className:"text-center py-16 px-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"No products found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:d?"Try adjusting your search terms":"Start by adding your first product"})]})}):t.map((t,s)=>{const r=C(t.quantity);return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",children:t.name||"N/A"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["SKU: ",t.sku||"N/A"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium bg-indigo-50 text-indigo-700 border border-indigo-200",children:t.category||"N/A"})}),t.description&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 italic truncate",title:t.description,children:['"',t.description,'"']})]}),e.jsxs("div",{className:"flex-shrink-0 text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-blue-600",children:["₱",Number(t.selling_price||0).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Cost: ₱",Number(t.cost_price||0).toFixed(2)]}),e.jsxs("p",{className:`text-xs font-semibold mt-1 ${r.color.replace("bg-","text-").split(" ")[0]}`,children:[t.quantity," in stock"]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2 border-t border-gray-100 pt-3",children:[e.jsx("button",{onClick:()=>p&&p(t),className:"p-2 rounded-lg bg-green-50 text-green-600 hover:bg-green-100 border border-green-200 transition-all duration-200",title:"Add Stock",children:e.jsx(S,{})}),e.jsx("button",{onClick:()=>x(t),className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200 transition-all duration-200",title:"Edit Product",children:e.jsx(k,{})}),e.jsx("button",{onClick:()=>u(t.id),className:"p-2 rounded-lg bg-red-50 text-red-600 hover:bg-red-100 border border-red-200 transition-all duration-200",title:"Delete Product",children:e.jsx(w,{})})]})]},t.id)})}),e.jsx("div",{className:"bg-gray-50/50 border-t border-gray-200 px-3 sm:px-4 md:px-6 py-3 sm:py-4 w-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4 w-full",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:["Showing"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:0===t.length?0:(r-1)*a+1})," ","to"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:Math.min(r*a,t.length)})," ","of"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:t.length})," ","entries"]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-1 sm:gap-2 w-full sm:w-auto",children:[e.jsx(i,{label:"Previous",size:"sm",variant:"secondary",onClick:()=>l(r-1),disabled:1===r,className:"min-w-[80px] sm:min-w-[100px] text-xs sm:text-sm"}),e.jsx("div",{className:"flex items-center gap-1 flex-wrap justify-center",children:Array.from({length:Math.min(n,5)},(t,s)=>{let a;return a=n<=5||r<=3?s+1:r>=n-2?n-4+s:r-2+s,e.jsx(i,{variant:r===a?"paginationActive":"paginationInactive",onClick:()=>l(a),disabled:r===a,className:"min-w-[36px] sm:min-w-[40px] text-xs sm:text-sm",children:a},a)})}),e.jsx(i,{label:"Next",size:"sm",variant:"secondary",onClick:()=>l(r+1),disabled:r===n,className:"min-w-[80px] sm:min-w-[100px] text-xs sm:text-sm"})]})]})})]})]})}function d({products:t,allProducts:s=t,stats:r,page:i,entriesPerPage:a,totalPages:n,onPageChange:l,onEntriesChange:d,search:m,onSearchChange:x,onEdit:u,onDelete:p,onStockEntry:g,categories:h=[],selectedCategory:y,onCategoryFilter:b,stockFilter:f,onStockFilter:j,sortBy:v,sortOrder:N,onSort:k,className:w=""}){const S=s.reduce((e,t)=>e+Number(t.selling_price||0)*Number(t.quantity||0),0),C=s.filter(e=>Number(e.quantity||0)<10).length;return e.jsxs("div",{className:`w-full max-w-full overflow-x-hidden py-4 sm:py-6 px-4 md:px-6 ${w}`,children:[e.jsx(o,{className:"mb-4 sm:mb-6 p-3 sm:p-4 md:p-6 bg-gradient-to-r from-blue-50/80 to-indigo-50/80 border-blue-100 w-full overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4 w-full",children:[" ",e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 rounded-xl flex items-center justify-center shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide truncate",children:"Total Products"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:[s.length||0," "]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-orange-100 rounded-xl flex items-center justify-center shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide truncate",children:"Low Stock Items"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:[C||0," "]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 sm:col-span-2 lg:col-span-1",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-green-100 rounded-xl flex items-center justify-center shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide truncate",children:"Total Inventory Value"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:["₱ ",S.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]})}),e.jsx(c,{products:t,page:i,entriesPerPage:a,totalPages:n,onPageChange:l,onEntriesChange:d,search:m,onSearchChange:x,onEdit:u,onDelete:p,onStockEntry:g,categories:h,selectedCategory:y,onCategoryFilter:b,stockFilter:f,onStockFilter:j,sortBy:v,sortOrder:N,onSort:k})]})}const m=[],x=[];function u(e){const t={"Grocery Store":["Fresh Produce","Meat & Poultry","Seafood","Dairy & Eggs","Bread & Bakery","Snacks & Chips","Beverages","Canned & Packaged Goods","Frozen Food","Rice, Pasta & Grains","Condiments & Spices","Cleaning Supplies","Household Essentials","Baby Products","Pet Supplies"],Pharmacy:["Prescription Medicines","OTC Medicines","Vitamins & Supplements","First Aid Supplies","Medical Devices","Personal Care","Hygiene Products","Beauty & Cosmetics","Baby Care","Adult Care","PPE & Sanitizers"],"Clothing Store":["Men’s Clothing","Women’s Clothing","Kids’ Clothing","Baby Clothing","Footwear","Bags & Accessories","Underwear & Socks"],"Electronics Store":["Mobile Devices","Computers & Laptops","Computer Accessories","Phone Accessories","Audio Devices","Cameras & Photography","Home Appliances","Personal Appliances","Gaming Consoles & Accessories","Cables, Adapters & Chargers"],"Hardware Store":["Hand Tools","Power Tools","Construction Materials","Electrical Supplies","Plumbing Supplies","Paint & Painting Supplies","Gardening Tools","Fasteners (Nails, Screws, Bolts)","Safety Gear"],Bookstore:["Fiction Books","Non-Fiction Books","Educational Books","Children’s Books","Comics & Manga","School Supplies","Art Materials","Office Supplies","Stationery & Gifts"],"Convenience Store":["Snacks","Beverages","Ready-to-Eat Food","Instant Noodles / Cup Meals","Frozen Food","Basic Grocery Items","Toiletries","Basic OTC Medicines","Household Essentials","Phone Load","Ice Cream & Desserts","Tobacco & Lighters"],Others:["General"]};return t[e]||t.Others}function p(){const[o,c]=t.useState(m),[p,g]=t.useState(()=>{try{let t=null;try{t="undefined"!=typeof window&&sessionStorage.getItem("business_type")||null}catch(e){t=null}if(!t&&"undefined"!=typeof window)try{const s=sessionStorage.getItem("user")||localStorage.getItem("user");if(s){const r=JSON.parse(s);if(t=r?.business?.business_type||r?.business_type||null,t)try{sessionStorage.setItem("business_type",t)}catch(e){}}}catch(e){t=null}t=t||"Others";return(u(t)||[]).map((e,t)=>({id:t+1,name:e}))}catch{return x}}),[h,y]=t.useState(!1),[b,f]=t.useState(!1),[j,v]=t.useState(null),[N,k]=t.useState({sku:"",name:"",category:"",customCategory:"",description:"",quantity:"",cost_price:"",selling_price:""}),[w,S]=t.useState({sku:"",quantity:""}),[C,L]=t.useState(!1),[_,P]=t.useState(""),[M,A]=t.useState(10),[B,F]=t.useState(1),[E,q]=t.useState(""),[O,T]=t.useState(!1);t.useEffect(()=>{(async()=>{try{L(!0),q("");const t=sessionStorage.getItem("auth_token"),s=await a("/api/auth/profile",{headers:n(t)}),r=s?.business?.business_type||"Others";try{"undefined"!=typeof window&&sessionStorage.setItem("business_type",r)}catch(e){console.debug("Could not persist business_type",e)}const i=u(r);g(i.map((e,t)=>({id:t+1,name:e})));const o=(await a("/api/inventory",{headers:n(t)})||[]).map(e=>({id:String(e.id||""),name:e.name||"-",category:e.category||"-",quantity:Number(e.quantity||0),cost_price:Number(e.cost_price||0),selling_price:Number(e.selling_price||0),sku:e.sku||"",description:e.description||""}));c(o)}catch(t){q("Failed to load inventory"),c([])}finally{L(!1)}})()},[]);const I=o.reduce((e,t)=>e+Number(t.selling_price||0)*Number(t.quantity||0),0),H=o.filter(e=>Number(e.quantity||0)<10).length,W=[{label:"TOTAL ITEMS",value:o.length,icon:e.jsx("svg",{width:"32",height:"32",fill:"none",stroke:"#2563eb",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),color:"text-blue-800",sub:"Total products in inventory"},{label:"INVENTORY VALUE",value:I,icon:e.jsx("svg",{width:"32",height:"32",fill:"none",stroke:"#2563eb",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"text-green-700",formatValue:e=>`₱${e.toLocaleString(void 0,{minimumFractionDigits:2})}`,sub:"Total value of all stock"},{label:"AVAILABLE CATEGORIES",value:p.length,icon:e.jsx("svg",{width:"32",height:"32",fill:"none",stroke:"#2563eb",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 7h16M4 12h16M4 17h16"})}),color:"text-blue-500",sub:"Product categories"},{label:"LOW STOCK ALERTS",value:H,icon:e.jsx("svg",{width:"32",height:"32",fill:"none",stroke:"#2563eb",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),color:"text-orange-600",sub:"Items needing restock"}],[D,V]=t.useState("name"),[z,G]=t.useState("asc"),[$,R]=t.useState(null),[U,J]=t.useState(null),K=t.useMemo(()=>{let e=o.filter(e=>e.name.toLowerCase().includes(_.toLowerCase())||e.category.toLowerCase().includes(_.toLowerCase())||e.description.toLowerCase().includes(_.toLowerCase()));return $&&(e=e.filter(e=>e.category===$)),U&&("out_of_stock"===U?e=e.filter(e=>0===Number(e.quantity||0)):"low_stock"===U?e=e.filter(e=>{const t=Number(e.quantity||0);return t>0&&t<10}):"in_stock"===U&&(e=e.filter(e=>Number(e.quantity||0)>=10))),e.sort((e,t)=>{let s,r;if("name"===D)s=(e.name||"").toLowerCase(),r=(t.name||"").toLowerCase();else if("category"===D)s=(e.category||"").toLowerCase(),r=(t.category||"").toLowerCase();else if("quantity"===D)s=Number(e.quantity||0),r=Number(t.quantity||0);else{if("selling_price"!==D)return 0;s=Number(e.selling_price||0),r=Number(t.selling_price||0)}return s<r?"asc"===z?-1:1:s>r?"asc"===z?1:-1:0}),e},[o,_,$,U,D,z]),Z=Math.ceil(K.length/M)||1,Y=K.slice((B-1)*M,B*M),Q=()=>{v(null),k({sku:"",name:"",category:"",customCategory:"",description:"",quantity:"",cost_price:"",selling_price:""}),y(!0)},X=e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-3 sm:gap-4 mb-4 sm:mb-0 w-full",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 sm:gap-3 w-auto",children:[e.jsxs(i,{onClick:()=>{const e=convertToCSV(allProducts),t=(new Date).toISOString().split("T")[0];downloadCSV(e,`inventory_export_${t}.csv`)},variant:"secondary",className:"text-sm flex items-center justify-center sm:justify-start gap-1 sm:gap-2 shrink-0 !py-2 !px-2 sm:!px-2 min-w-[40px] sm:min-w-[40px] lg:min-w-0",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsxs(i,{onClick:Q,variant:"primary",microinteraction:!0,className:"bg-blue-600 text-md text-white font-semibold rounded-lg shadow hover:bg-blue-700 transition gap-1 sm:gap-2 flex items-center justify-center sm:justify-start !py-2 !px-2 sm:!px-2 shrink-0 min-w-[40px] sm:min-w-[40px] lg:min-w-0",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:block",children:"Add Product"}),e.jsx("span",{className:"sm:inline"})]})]})});return e.jsxs(s,{title:"INVENTORY",sidebar:e.jsx(r,{}),isSidebarOpen:O,headerActions:X,setSidebarOpen:T,showHeader:!0,showNavbar:!1,showFooter:!1,children:[e.jsx(d,{products:Y,allProducts:K,stats:W,page:B,entriesPerPage:M,totalPages:Z,onPageChange:e=>{e<1||e>Z||F(e)},onEntriesChange:e=>{A(Number(e.target.value)),F(1)},search:_,onSearchChange:e=>{P(e.target.value),F(1)},onEdit:e=>{v(e),k({...e}),y(!0)},onDelete:async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{L(!0),q("");const t=sessionStorage.getItem("auth_token");await a(`/api/inventory/${e}`,{method:"DELETE",headers:n(t)});const s=(await a("/api/inventory",{headers:n(t)})||[]).map(e=>({id:String(e.id||""),name:e.name||"-",category:e.category||"-",quantity:Number(e.quantity||0),cost_price:Number(e.cost_price||0),selling_price:Number(e.selling_price||0),sku:e.sku||"",description:e.description||""}));c(s)}catch(t){q("Failed to delete product")}finally{L(!1)}},onAddProduct:Q,onStockEntry:e=>{S({sku:e?.sku||"",quantity:""}),f(!0)},categories:p,selectedCategory:$,onCategoryFilter:e=>{R(e),F(1)},stockFilter:U,onStockFilter:e=>{J(e),F(1)},sortBy:D,sortOrder:z,onSort:(e,t)=>{V(e),G(t),F(1)}}),E&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-3 flex items-start gap-2 mt-2",children:[e.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-sm font-medium text-red-700",children:(()=>{try{const e=JSON.parse(E);return e.error||e.message||E}catch{return E}})()})]}),e.jsx(l,{isOpen:h,onClose:()=>y(!1),variant:"product",title:j?"Edit Product":"Add New Product",editingProduct:j,productForm:N,onChange:e=>{const{name:t,value:s}=e.target;k(e=>({...e,[t]:s}))},categories:p,onSubmit:async e=>{e.preventDefault();try{L(!0),q("");const e=sessionStorage.getItem("auth_token");j?await a(`/api/inventory/${j.id}`,{method:"PUT",headers:{"Content-Type":"application/json",...n(e)},body:JSON.stringify({product_name:(N.name||"").trim(),cost_price:Number(N.cost_price)||0,selling_price:Number(N.selling_price)||0,sku:(N.sku||"").trim(),category:"Others"===N.category?(N.customCategory||"").trim():(N.category||"").trim(),description:(N.description||"").trim()})}):await a("/api/products",{method:"POST",headers:{"Content-Type":"application/json",...n(e)},body:JSON.stringify({product_category_id:null,category:"Others"===N.category?(N.customCategory||"").trim():(N.category||"").trim(),product_name:(N.name||"").trim(),name:(N.name||"").trim(),description:(N.description||"").trim(),cost_price:Number(N.cost_price)||0,selling_price:Number(N.selling_price)||0,price:Number(N.selling_price)||0,sku:(N.sku||"").trim()||`SKU-${Date.now()}`,quantity:Number(N.quantity)||0})});const t=(await a("/api/inventory",{headers:n(e)})||[]).map(e=>({id:String(e.id||""),name:e.name||"-",category:e.category||"-",quantity:Number(e.quantity||0),cost_price:Number(e.cost_price||0),selling_price:Number(e.selling_price||0),sku:e.sku||"",description:e.description||""}));c(t),y(!1)}catch(t){q("Failed to save product")}finally{L(!1)}},loading:C}),e.jsx(l,{isOpen:b,onClose:()=>f(!1),title:"Stock Entry",variant:"stock",editingProduct:null,stockForm:w,onChange:e=>S({...w,[e.target.name]:e.target.value}),onSubmit:async e=>{e.preventDefault();try{L(!0),q("");const e=sessionStorage.getItem("auth_token");await a("/api/products/add-stock-by-sku",{method:"POST",headers:n(e),body:JSON.stringify({sku:w.sku,quantity:Number(w.quantity)})});const t=(await a("/api/inventory",{headers:n(e)})||[]).map(e=>({id:String(e.id||""),name:e.name||"-",category:e.category||"-",quantity:Number(e.quantity||0),cost_price:Number(e.cost_price||0),selling_price:Number(e.selling_price||0),sku:e.sku||"",description:e.description||""}));c(t),f(!1)}catch(t){q("Failed to add stock")}finally{L(!1)}},loading:C})]})}export{p as default};
//# sourceMappingURL=Inventory-wJha9Cb4.js.map
