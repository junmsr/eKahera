import{j as e,m as A,u as t,a as s,A as r,b as n,c as a,d as i,e as o,f as l}from"./utils-Cpejmg6E.js";import{c,u as d,d as u,a as h,O as m,L as g,R as p,N as x,g as f,e as w,f as b,r as B,h as y,i as v,j}from"./vendor-hb6WZOFT.js";import{R as C,B as N,C as Q,X as U,Y as k,T as F,a as S,L as E,b as I,c as H,P as _,d as L,e as T}from"./charts-BDK5KOEw.js";import{r as O,k as M}from"./qr-BiQopX76.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))A(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&A(e)}).observe(document,{childList:!0,subtree:!0})}function A(e){if(e.ep)return;e.ep=!0;const A=function(e){const A={};return e.integrity&&(A.integrity=e.integrity),e.referrerPolicy&&(A.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?A.credentials="include":"anonymous"===e.crossOrigin?A.credentials="omit":A.credentials="same-origin",A}(e);fetch(e.href,A)}}();var P,D={};var K=function(){if(P)return D;P=1;var e=c();return D.createRoot=e.createRoot,D.hydrateRoot=e.hydrateRoot,D}();async function R(e,A={},t=!1){let s="";s="https://ekahera.onrender.com",s&&s.endsWith("/")&&(s=s.slice(0,-1));const r={...A.headers||{}};A.body instanceof FormData||(r["Content-Type"]="application/json");const n=sessionStorage.getItem("auth_token")||localStorage.getItem("token");n&&(r.Authorization=`Bearer ${n}`);const a=(s||"")+(e.startsWith("/api")?e:`/api${e}`),i=await fetch(a,{...A,credentials:"include",headers:r});if(!i.ok){const e=await i.text();try{const A=JSON.parse(e),t=A?.error||A?.message||JSON.stringify(A);throw new Error(`${i.status} ${i.statusText}: ${t}`)}catch(o){const A=/<[^>]+>/.test(e)?"Server returned an HTML error page":e;throw new Error(`${i.status} ${i.statusText}: ${A}`)}}if(t)return i;return(i.headers.get("content-type")||"").includes("application/json")?i.json():i.text()}function V(e){return e?{Authorization:`Bearer ${e}`}:{}}async function G({amount:e,description:A,referenceNumber:t,cancelUrl:s,successUrl:r}){return await R("/payments/gcash/checkout",{method:"POST",body:JSON.stringify({amount:e,description:A,referenceNumber:t,cancelUrl:s,successUrl:r})})}async function W({amount:e,description:A,referenceNumber:t,cancelUrl:s,successUrl:r}){return await R("/payments/maya/checkout",{method:"POST",body:JSON.stringify({amount:e,description:A,referenceNumber:t,cancelUrl:s,successUrl:r})})}const z=({variant:A="gradientBlue",pattern:t,overlay:s,floatingElements:r,className:n="",children:a})=>{let i={};"gradientBlue"===A&&(i.background="#e6f0ff");const o="dots"===t?{backgroundImage:"url('data:image/svg+xml;utf8,<svg width='40' height='40' viewBox='0 0 40 40' fill='none' xmlns='http://www.w3.org/2000/svg'><circle cx='1' cy='1' r='1' fill='%23bcd0ee' fill-opacity='0.25'/></svg>')",backgroundRepeat:"repeat",backgroundSize:"40px 40px",pointerEvents:"none",position:"absolute",inset:0,zIndex:1}:null,l=s?{background:"linear-gradient(180deg, rgba(59,130,246,0.07) 0%, rgba(255,255,255,0.7) 100%)",position:"absolute",inset:0,zIndex:2,pointerEvents:"none"}:null;return e.jsxs("div",{className:`relative w-full min-h-screen ${n}`,style:{zIndex:0},children:[e.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none select-none z-0",style:i}),t&&e.jsx("div",{style:o,"aria-hidden":"true"}),s&&e.jsx("div",{style:l,"aria-hidden":"true"}),r&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:"/assets/png/vector1-Ds2OLeae.png",alt:"decorative vector 1",className:"absolute top-0 left-0 w-40 md:w-56 opacity-40 blur-sm pointer-events-none select-none z-10",style:{transform:"translate(-30%, -30%)"},"aria-hidden":"true"}),e.jsx("img",{src:"/assets/png/vector2-DT7TUxf2.png",alt:"decorative vector 2",className:"absolute bottom-0 right-0 w-40 md:w-56 opacity-40 blur-sm pointer-events-none select-none z-10",style:{transform:"translate(30%, 30%)"},"aria-hidden":"true"})]}),e.jsx("div",{className:"relative z-20 w-full",children:a})]})},$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA7CAYAAAAjDDn3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAS5SURBVHgB5ZoxcBtFFIb/OwuYwWFQGiiRU8PYqaA8Q8MwDhEdpIk9E1ocSqCwVQAlFi0wMg3QxQ4wQ8NYdFBZDNRIlEkTF0mTiXN5vzYXSbe3p909JdGdvhmN5PVKd/++t++93dsARWnGddxFUz6tIcQriOU9QF3+rmNWxBjIbw5wH3/L5y6eQw8HwQAFCOADxd7DZX6SV4SnQ1cGYR+/Bt/DAzfhSvC2fLqKWVq0CPQEDsAvQcvta7ZsxJH07shFGphH1FTYtfWA6cJp5VPsiOCrKAMx9nAHLXSDk7xu+cKbcUNc+xoYuMoErb+E9bwAaBZO0ac4mlvXnsYU8dnCyy46IUe8LlzN6ePSix7Rw20Rn5rzodZNBbIGqsMalkVTikmLvxNvylB0UE3WJdd3kz8mLb6kj0xlYA0SxY+KrpHwjbhqLj4JtZ0Z1SIjV78Q9ystXHEigW6FgU5ZnHO7+qJJXQLdJj8o4eFwpbUYBLio3lRZ2scicRtnQxFdrjp8FryAJl09wqJxirWavK3iKRG9qrd1/83/Tn1ZSrEVvX1wU72sCNCoDaO53wZUYY6+1NuCC+b+jZfkO1/I+8uT7RS8/gnsCbEaUj1KwrXPzKKtrU1i1EOUhK+uiIuf09u39hxFK8ohfOcD2d28qLe3fpSY8A+8mHvhDIC7l/T29nVp/wHe1FAQ3tjquUk3/P+GssS0CD0NBrNOxhZn7z/xgG9QCG/hyU1Fr2X/n+tbzj3OQR93ZNoyRfD3PkdhvFydYo+/NotOSNIP56grHNS06JM7HhHcgLNwimFaoUXS8May4BydNkjjcKCab+jtnhE8E2fhtERaNAPN2ffViwUIbzA9CLZW33wrO5gxgh/8iZnhJJwBLG25/d9VoBkXyrb0POT3bKzeMTyvmaVo4iR88029rWVIKQxogxuTbc3X4U1nGzPFKaqvZlROdE1b0sHKBXobq7ePv8VMcBJeP6O37VyCNS8u2/dlrk6XqKzeDv/yr9bGcXL1+vN4IjCQrX+qTxWSFVx9KFS5MaC1D+379y1SEYNYUoputVUdMA7TKTNEUZcPZD89tu3M/J3Or3nr52nEP+ttTInjGWLvQ2D7Xb0fPaKIy9PVT2w7/5FxobwUxZ0S1vK0kq17pvM/rf84XD6URbm1cObnrBugsDQMTCxrucvS/w649ZM5R+fBgaDLp0lc3hfuwPRsOw/n9HX9BiiO7kjrMlfTPdNzk7Q8l5F06fR1CaO8Syk8Due4FJiwLg/oXsdt95zMSJ1eP2fNcVPMMF2Xtfv5j8zrBBMh7ttbnAxXSIZUY6LopkFy3Vm6fIhncQBHOMorVx6ulnIGgC7KQSq6aTD+eyaXz1rN5aE2ljfiIxR4sMBRpwsmQa7XVwPi6n5PElXAxDiUIYjgidNm/pygStZnsA+HfF4FlPCD4YmgNhaI0SKlhr3h8egFYSScVg+whQVhclmqjkMthMvr6/EadgG3oqaMZD8gfjtuYAlHZXqS6or5yXjFxecfCaiw+Pw9t9+CgRQ351HBgGd/CISHAAN5FlgR67ufftmId6XQuVz2AfA/9qOOePNEZIQSUvy8EwNgbXhIMAKPjqlTVA3MOQ8Aj5ByG4f1BkQAAAAASUVORK5CYII=";function J({children:A}){const t=d(),s=u(),[r,n]=h.useState(!0),[a,i]=h.useState(!1);h.useEffect(()=>{sessionStorage.getItem("setup_checked")?n(!1):(o(),sessionStorage.setItem("setup_checked","true"))},[]);const o=async()=>{try{if("/setup"===s.pathname)return void n(!1);(await R("/api/auth/setup/status")).needsSetup?(i(!0),"/setup"!==s.pathname&&t("/setup",{replace:!0})):i(!1)}catch(e){console.error("Setup status check failed:",e),i(!1)}finally{n(!1)}};return r?e.jsxs(z,{variant:"gradientBlue",pattern:"dots",overlay:!0,children:[e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6 animate-fadeIn",style:{animationDelay:"0.1s"},children:[e.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-blue-400 border-t-transparent rounded-full animate-spin-slow"}),e.jsx("div",{className:"absolute inset-2 border-3 border-blue-500 border-t-transparent rounded-full animate-spin-reverse"}),e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("div",{className:"absolute inset-0 rounded-full bg-blue-400 opacity-40 blur-2xl animate-pulse-slow"}),e.jsx("img",{src:$,alt:"Logo",className:"w-full h-full animate-trending transform transition-transform duration-700 hover:scale-110 drop-shadow-lg"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-900 font-semibold text-lg tracking-wide animate-shimmerText bg-gradient-to-r from-gray-600 via-blue-600 to-gray-600 bg-[length:200%_auto] text-transparent bg-clip-text",children:"Checking system status..."}),e.jsx("p",{className:"text-gray-600 text-sm mt-1 animate-fadeIn delay-200",children:"Preparing your environment, please hold on."})]})]})}),e.jsx("style",{children:"\n            @keyframes fadeIn {\n              from { opacity: 0; transform: translateY(10px); }\n              to { opacity: 1; transform: translateY(0); }\n            }\n            .animate-fadeIn {\n              animation: fadeIn 0.8s ease-out forwards;\n            }\n\n            @keyframes trending {\n              0%, 100% { transform: translateY(0) rotate(0deg); }\n              25% { transform: translateY(-8px) rotate(2deg); }\n              50% { transform: translateY(-15px) rotate(0deg); }\n              75% { transform: translateY(-8px) rotate(-2deg); }\n            }\n            .animate-trending {\n              animation: trending 2s ease-in-out infinite;\n            }\n\n            @keyframes pulseSlow {\n              0%, 100% { opacity: 0.3; transform: scale(0.9); }\n              50% { opacity: 0.6; transform: scale(1.1); }\n            }\n            .animate-pulse-slow {\n              animation: pulseSlow 2.4s ease-in-out infinite;\n            }\n\n            @keyframes shimmerText {\n              0% { background-position: 0% 50%; }\n              100% { background-position: 200% 50%; }\n            }\n            .animate-shimmerText {\n              animation: shimmerText 2.5s linear infinite;\n            }\n\n            @keyframes spinSlow {\n              from { transform: rotate(0deg); }\n              to { transform: rotate(360deg); }\n            }\n            .animate-spin-slow {\n              animation: spinSlow 3s linear infinite;\n            }\n\n            @keyframes spinReverse {\n              from { transform: rotate(360deg); }\n              to { transform: rotate(0deg); }\n            }\n            .animate-spin-reverse {\n              animation: spinReverse 2s linear infinite;\n            }\n          "})]}):a&&"/setup"!==s.pathname?null:A}function q({label:A,children:t,onClick:s,type:r="button",className:n="",variant:a="primary",disabled:i=!1,size:o="md",microinteraction:l=!0,icon:c,iconPosition:d="left",isIconButton:u=!1,isCloseButton:h=!1,isPasswordToggle:m=!1,showPassword:g=!1,...p}){let x=a;h&&(x="close"),m&&(x="passwordToggle");const f=`inline-flex items-center justify-center font-sans font-semibold rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 select-none ${{sm:u?"p-2 text-sm":"px-4 py-2 text-sm",md:u?"p-2.5 text-base":"px-6 py-2.5 text-base",lg:u?"p-3 text-lg":"px-8 py-3 text-lg"}[o]} ${{primary:"bg-blue-600 text-white shadow-md hover:from-blue-600 hover:to-blue-800 hover:shadow-lg",secondary:"bg-white text-blue-700 border border-blue-200 shadow-sm hover:bg-blue-50 hover:text-blue-900",outline:"border-2 border-blue-600 text-blue-600 bg-white hover:bg-blue-50 hover:border-blue-700",ghost:"text-blue-600 hover:bg-blue-50",danger:"bg-gradient-to-r from-red-500 to-red-700 text-white shadow-md hover:from-red-600 hover:to-red-800 hover:shadow-lg",success:"bg-gradient-to-r from-green-500 to-green-700 text-white shadow-md hover:from-green-600 hover:to-green-800 hover:shadow-lg",warning:"bg-gradient-to-r from-yellow-500 to-yellow-700 text-white shadow-md hover:from-yellow-600 hover:to-yellow-800 hover:shadow-lg",close:"absolute top-3 right-3 text-blue-400 hover:text-blue-700 text-2xl font-bold focus:outline-none focus:ring-2 focus:ring-blue-400 rounded-full transition-colors duration-150",passwordToggle:"p-1 bg-transparent border-none shadow-none hover:bg-blue-100 rounded-full transition-colors focus:ring-0 focus:ring-transparent focus:ring-offset-0",iconAction:"rounded-full p-1 hover:bg-opacity-80 transition flex items-center",stockEntry:"bg-green-100 border border-green-300 rounded-full p-1 hover:bg-green-200 transition flex items-center",edit:"bg-blue-100 border border-blue-300 rounded-full p-1 hover:bg-blue-200 transition flex items-center",delete:"bg-red-100 border border-red-300 rounded-full p-1 hover:bg-red-200 transition flex items-center",pagination:"px-3 py-1 rounded-lg font-semibold border",paginationActive:"px-3 py-1 rounded-lg font-semibold border bg-blue-500 text-white border-blue-500",paginationInactive:"px-3 py-1 rounded-lg font-semibold border bg-white text-blue-700 border-blue-200 hover:bg-blue-100"}[x]} ${i?"opacity-50 cursor-not-allowed pointer-events-none":""} ${!l||h||m?"":"hover:scale-[1.03] active:scale-[0.97] transition-transform focus:shadow-blue-300/40"} ${n}`,w=h?"&times;":null,b=m?g?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500 hover:text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.403-3.22 1.125-4.575m2.122-2.122A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.403 3.22-1.125 4.575m-2.122 2.122A9.956 9.956 0 0112 21c-2.21 0-4.267-.72-5.947-1.947m0 0L3 21m0 0l3-3"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500 hover:text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):null,B=e.jsxs(e.Fragment,{children:[c&&"left"===d&&c,t||A,c&&"right"===d&&c]});return e.jsx("button",{type:r,onClick:s,className:f,disabled:i,...p,children:w||b||B})}function Y({className:A="",size:t="md",variant:s="spinner",color:r="blue"}){const n={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return e.jsxs("svg",{className:`${n[t]||n.md} animate-spin text-gray-700 ${A}`,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}function X({onComplete:A}){const[t,s]=h.useState(0),[r,n]=h.useState(!0),a=[{title:"Welcome to eKahera!",content:"Let's take a quick tour of your new POS system. This tutorial will help you get started with the key features.",icon:"ðŸ‘‹",action:"Get Started"},{title:"Dashboard Overview",content:"Your dashboard shows sales analytics, recent transactions, and key business metrics. This is your command center for monitoring business performance.",icon:"ðŸ“Š",action:"Next"},{title:"Inventory Management",content:"Add and manage your products here. You can set prices, track stock levels, and organize items by categories. Keep your inventory up-to-date for accurate sales tracking.",icon:"ðŸ“¦",action:"Next"},{title:"Point of Sale (POS)",content:"Process sales transactions quickly and efficiently. Scan barcodes, add items manually, apply discounts, and handle different payment methods.",icon:"ðŸ’³",action:"Next"},{title:"Team Management",content:"Add cashiers and team members to your business. Assign roles and permissions to control access to different features of the system.",icon:"ðŸ‘¥",action:"Next"},{title:"Reports & Analytics",content:"Track your business performance with detailed reports. Monitor sales trends, inventory levels, and generate insights to grow your business.",icon:"ðŸ“ˆ",action:"Next"},{title:"You're All Set!",content:"Congratulations! You're now ready to start using eKahera. Remember, you can always access help and support from the menu. Welcome aboard!",icon:"ðŸš€",action:"Start Using eKahera"}],i=()=>{n(!1),A()};if(!r)return null;const o=a[t];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Step ",t+1," of ",a.length]}),e.jsx("button",{onClick:()=>{n(!1),A()},className:"text-sm text-gray-500 hover:text-gray-700",children:"Skip Tutorial"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:(t+1)/a.length*100+"%"}})})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:o.icon}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:o.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:o.content})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>s(Math.max(0,t-1)),disabled:0===t,className:"px-4 py-2 text-sm rounded-md "+(0===t?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),children:"Previous"}),e.jsx("div",{className:"flex space-x-2",children:a.map((A,s)=>e.jsx("div",{className:"w-2 h-2 rounded-full "+(s===t?"bg-blue-600":s<t?"bg-blue-300":"bg-gray-300")},s))}),e.jsx(q,{onClick:()=>{t<a.length-1?s(t+1):i()},children:o.action})]})]})})}function Z(){const e=d();return{logout:()=>{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),e("/")}}}function ee({user:A,onProceed:t}){const[s,r]=h.useState(null),[n,a]=h.useState(!0),[i,o]=h.useState(null),[l,c]=h.useState(!1),[d,u]=h.useState(!1),{logout:m}=Z();h.useEffect(()=>{const e=sessionStorage.getItem("verification_fetched");A&&!e?(g(),sessionStorage.setItem("verification_fetched","true")):A||a(!1);const t=localStorage.getItem(`tutorial_completed_${A?.user_id}`);u("true"===t)},[A]);const g=async()=>{try{const e=localStorage.getItem("token"),t=await R(`/documents/business/${A.businessId}`,{headers:{Authorization:`Bearer ${e}`}});r(t),console.log("Verification data:",t)}catch(e){"jwt expired"===e.message||'{"error":"Invalid token"}'===e.message?m():o(e.message||"Failed to fetch verification status")}finally{a(!1)}};if(n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{size:"lg"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Checking verification status..."})]})});if(i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i}),e.jsx(q,{onClick:()=>window.location.reload(),children:"Try Again"})]})});const{verification:p}=s,x=p?.verification_status||"not_submitted";return"approved"===x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:[...Array(50)].map((A,t)=>e.jsx("div",{className:"absolute animate-pulse",style:{left:100*Math.random()+"%",top:100*Math.random()+"%",fontSize:20*Math.random()+20+"px",animationDelay:3*Math.random()+"s",animationDuration:3*Math.random()+2+"s"},children:["ðŸŽ‰","ðŸŽŠ","âœ¨","ðŸŒŸ","ðŸ’«","ðŸŽˆ"][Math.floor(6*Math.random())]},t))}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-50 relative",children:e.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg p-8 text-center relative z-10",children:[e.jsx("div",{className:"text-6xl mb-6 animate-bounce",children:"ðŸŽ‰"}),e.jsx("h1",{className:"text-3xl font-bold text-green-600 mb-4 animate-pulse",children:"Congratulations!"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Your Business Has Been Verified!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Welcome to eKahera! Your business documents have been reviewed and approved. You now have full access to all system features."}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"ðŸš€ What's Next?"}),e.jsxs("ul",{className:"text-sm text-green-700 text-left space-y-1",children:[e.jsx("li",{children:"â€¢ ðŸ“¦ Set up your product inventory"}),e.jsx("li",{children:"â€¢ ðŸ’» Configure your POS system"}),e.jsx("li",{children:"â€¢ ðŸ‘¥ Add team members and cashiers"}),e.jsx("li",{children:"â€¢ ðŸ’° Start processing sales"})]})]}),e.jsx(q,{onClick:()=>{d?t():c(!0)},className:"bg-green-600 hover:bg-green-700 transform hover:scale-105 transition-all duration-200",children:"ðŸŽ¯ Get Started with eKahera"}),e.jsx("div",{className:"mt-4 text-sm text-gray-500",children:d?"Welcome back!":"We'll guide you through the system!"})]})})]}):"rejected"===x?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-md p-8 text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-6",children:"âŒ"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Additional Information Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your business application requires additional information or documentation before it can be approved."}),p?.rejection_reason&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 text-left",children:[e.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"Reason:"}),e.jsx("p",{className:"text-red-700 text-sm",children:p.rejection_reason})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please review the feedback and resubmit your documents with the necessary corrections or additional information."}),e.jsx(q,{onClick:()=>window.location.href="/get-started",children:"Update Application"})]})}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[e.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-md p-8 text-center",children:[e.jsx("div",{className:"text-blue-500 text-6xl mb-6",children:"â³"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Verification in Progress"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for submitting your business application! Our verification team is currently reviewing your documents."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"What's Happening:"}),e.jsxs("ul",{className:"text-sm text-blue-700 text-left space-y-1",children:[e.jsx("li",{children:"â€¢ Your documents are being reviewed by our team"}),e.jsx("li",{children:"â€¢ Verification typically takes 1-3 business days"}),e.jsx("li",{children:"â€¢ You'll receive an email notification once complete"}),e.jsx("li",{children:"â€¢ No action is required from you at this time"})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Please check back in 1-3 business days"})," or wait for our email notification."]})}),e.jsxs("div",{className:"flex space-x-4 justify-center",children:[e.jsx(q,{onClick:g,variant:"outline",children:"Refresh Status"}),e.jsx(q,{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"},variant:"outline",children:"Logout"})]})]}),l&&e.jsx(X,{onComplete:()=>{c(!1),u(!0),localStorage.setItem(`tutorial_completed_${A.user_id}`,"true"),t()}})]})}function Ae({children:A}){const t=u(),[s,r]=h.useState(null),[n,a]=h.useState(!1),[i,o]=h.useState(!1);h.useEffect(()=>{if(!sessionStorage.getItem("verification_checked")){const A=localStorage.getItem("user");if(A)try{const e=JSON.parse(A);r(e);const t=localStorage.getItem(`tutorial_completed_${e.user_id}`);o("true"===t)}catch(e){console.error("Failed to parse user data from localStorage:",e),r(null)}sessionStorage.setItem("verification_checked","true")}},[]);const l=["/setup","/login","/get-started","/","/contact","/services"].includes(t.pathname);if(!s||!s.businessId||"superadmin"===s.role||l)return e.jsxs(e.Fragment,{children:[A,n&&e.jsx(X,{onComplete:()=>{a(!1),o(!0),localStorage.setItem(`tutorial_completed_${s?.user_id}`,"true")}})]});return e.jsx(ee,{user:s,onProceed:()=>{i||a(!0)}})}function te(){return e.jsx("div",{className:"app",children:e.jsx(J,{children:e.jsx(Ae,{children:e.jsx(m,{})})})})}function se({size:A=35,className:t="",variant:s="default"}){const[r,n]=h.useState(!1),[a,i]=h.useState(""),o="eKahera";h.useEffect(()=>{n(!0);let e=0;const A=setInterval(()=>{i(o.slice(0,e+1)),e++,7===e&&clearInterval(A)},150);return()=>clearInterval(A)},[]);const l=`flex items-center justify-center ${{default:"shadow-none",flat:"shadow-none",gradient:"shadow-none"}[s]} ${t}`;return e.jsxs("div",{className:l,role:"img","aria-label":"eKahera Logo",children:[e.jsx("img",{src:$,alt:"eKahera Logo",className:"object-contain bg-transparent",style:{width:A,height:A}}),e.jsx("span",{className:"ml-1 font-semibold text-black text-shadow-lg whitespace-nowrap",children:o})]})}function re({className:A=""}){u();const[t,s]=h.useState(!1),r=[{label:"Home",path:"/"},{label:"Features",path:"#features"},{label:"About",path:"#about"},{label:"FAQ",path:"#faq"}];return h.useEffect(()=>{const e=document.getElementById("main-navbar"),A=()=>{window.scrollY>10?e.classList.add("navbar-scrolled"):e.classList.remove("navbar-scrolled")};return window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)},[]),e.jsxs("nav",{id:"main-navbar",className:`site-navbar-base flex items-center justify-between px-5 py-3 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/70 border border-blue-100 shadow-lg rounded-full fixed top-0 left-1/2 transform -translate-x-1/2 w-[95vw] max-w-4xl z-50 ${A}`,style:{fontFamily:"Inter, sans-serif",fontWeight:600},role:"navigation","aria-label":"Primary",children:[e.jsx("style",{children:"\n        /* Hide other header images (duplicate logos) but keep the nav logo visible */\n        header img:not(.nav-logo) { display: none !important; }\n      "}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(g,{to:"/","aria-label":"eKahera home",className:"flex items-center",children:e.jsx(se,{size:42,className:"nav-logo w-auto"})})}),e.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center space-x-7",role:"menubar",children:r.map(A=>e.jsxs("a",{href:A.path,className:"group relative text-slate-800 hover:text-blue-700 transition-colors text-base px-1.5 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400",style:{fontFamily:"Inter, sans-serif"},role:"menuitem",children:[A.label,e.jsx("span",{className:"absolute left-0 -bottom-1 h-0.5 bg-blue-600 transition-all duration-300 w-0 group-hover:w-full"})]},A.label))}),e.jsx("div",{className:"hidden md:flex items-center",children:e.jsx(g,{to:"/get-started",className:"text-white font-semibold px-6 py-2 rounded-full shadow-md bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 focus:from-blue-700 focus:to-blue-600 transition-all text-base",style:{fontFamily:"Inter, sans-serif"},children:"Get Started"})}),e.jsx("div",{className:"md:hidden",children:e.jsx(q,{"aria-expanded":t,"aria-controls":"mobile-menu",onClick:()=>{s(!t)},className:"md:hidden bg-white hover:bg-blue-50 text-gray-800 px-2 py-2 font-medium transition-colors cursor-pointer border-opacity-20 rounded-xl border-2 border-blue-600 flex items-center","aria-label":"Open menu",children:e.jsx("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAqoSURBVHic7d2xql3l1oDhN26bKCRqZwhaaKKYKmhQ7I2lpBDEQpCABMR4JYIkpVgrFopWIbkBDYh26o6giOYCghoLdZ9innPI4Rwhf/7sPWZcz3MFL7vY31hjzTW/AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdsu+6QBu2lPVyepEdbR6sDpQbU1GARvtj+padbW6Ul2uLlafT0ZxcwwA63ZP9Vr1evXocAvAzfq2Ol+9U10fbuEvGADW61R1rjo8HQJwi36ozlYfT4fw36yP12er5eB/q2XFD3CnOli9VN1fXap2ZnO4kQ3AumxV71UvTocA3GYfVC+3PDfACtgArMu56tXpCIBdcKxlI3BhOoSFDcB6nKo+nI4A2GUvVJ9MR2AAWIv91dfVQ9MhALvsx+qx6tfpkE1313QAVZ3J4Q9shsPV6ekIbADWYF/LCzQemQ4B2CPbLVsABtkAzHsyhz+wWY5Wx6cjNp0BYN7z0wEAA05OB2w6A8C8E9MBAAOeng7YdAaAeUemAwAGuN9kmAFg3qHpAIAB7jkZZgCYd+90AMAA//uGGQAAYAMZAOb9Mh0AMODn6YBNZwCYd3U6AGDAT9MBm84AMG97OgBgwJXpgE1nAJh3eToAYMCn0wGbzgAw7+J0AMCAS9MBm85lQOtwJS/FADaHy4BWwAZgHc5PBwDsoXPTAdgArMX+6qvq4ekQgF32XfVE9dt0yKazAViH69Wb0xEAu2ynOpvDfxW2pgP4t2+qB3JDFvD39Xa+8lwNA8C6XKoer45NhwDcZu9XZ1q2AKyAAWBddqqPqoPVM8MtALfDTssn/zPVn8Mt3MAAsD471YXqi+rZ6r7ZHIBb9n31Ssva3yf/lfErgHXbX52u3qiODrcA3Kztlp/6vZsH/lbLAHDnOF491/LVwJHqUHWgunsyCthov1fXWi41264+a3m76ZeTUQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3Jn2TQf8HzxVnaxOVEerB6sD1dZkFAAb64/qWnW1ulJdri5Wn09G3ay1DwD3VK9Vr1ePDrcAwM34tjpfvVNdH275S2seAE5V56rD0yEAcAt+qM5WH0+H/C9rXJ9vtRz8b7Ws+AHgTnSweqm6v7pU7czm/Ke1bQC2qveqF6dDAOA2+qB6ueW5gVVY2wbgXPXqdAQA3GbHWjYCF6ZD/mVNG4BT1YfTEQCwi16oPpmOqPUMAPurr6uHpkMAYBf9WD1W/Todctd0wD+dyeEPwN/f4er0dEStYwOwr+UFCo9MhwDAHthu2QKMWsMG4Mkc/gBsjqPV8emINQwAz08HAMAeOzkdsIYB4MR0AADssaenA9YwAByZDgCAPTZ+v80aBoBD0wEAsMfG77lZwwBw73QAAOyx8bNvDQMAALDH1jAA/DIdAAB77OfpgDUMAFenAwBgj/00HbCGAWB7OgAA9tiV6YA1DACXpwMAYI99Oh2whgHg4nQAAOyxS9MBa7gMqJZVyPhLEQBgD7gM6AbnpwMAYI+cmw6o9WwA9ldfVQ9PhwDALvqueqL6bTpkLRuA69Wb0xEAsIt2qrOt4PCv2poOuME31QOt4IYkANgFb7eir7zXNADU8lTk49Wx6RAAuI3er860bAFWYW0DwE71UXWwema4BQD+v3ZaPvmfqf4cbvkPaxsAavljXai+qJ6t7pvNAYBb8n31SsvafzWf/P9lLb8C+Cv7q9PVG9XR4RYAuBnbLT/1e7eVPPD3v6x9ALjR8eq5lq8GjlSHqgPV3ZNRAGys36trLZfabVeftbzd9svJKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAO9W+6QBu2lPVyepEdbR6sDpQbU1GARvtj+padbW6Ul2uLlafT0ZxcwwA63ZP9Vr1evXocAvAzfq2Ol+9U10fbuEvGADW61R1rjo8HQJwi36ozlYfT4fw36yP12er5eB/q2XFD3CnOli9VN1fXap2ZnO4kQ3AumxV71UvTocA3GYfVC+3PDfACtgArMu56tXpCIBdcKxlI3BhOoSFDcB6nKo+nI4A2GUvVJ9MR2AAWIv91dfVQ9MhALvsx+qx6tfpkE1313QAVZ3J4Q9shsPV6ekIbADWYF/LCzQemQ4B2CPbLVsABtkAzHsyhz+wWY5Wx6cjNp0BYN7z0wEAA05OB2w6A8C8E9MBAAOeng7YdAaAeUemAwAGuN9kmAFg3qHpAIAB7jkZZgCYd+90AMAA//uGGQAAYAMZAOb9Mh0AMODn6YBNZwCYd3U6AGDAT9MBm84AMG97OgBgwJXpgE1nAJh3eToAYMCn0wGbzgAw7+J0AMCAS9MBm85lQOtwJS/FADaHy4BWwAZgHc5PBwDsoXPTAdgArMX+6qvq4ekQgF32XfVE9dt0yKazAViH69Wb0xEAu2ynOpvDfxW2pgP4t2+qB3JDFvD39Xa+8lwNA8C6XKoer45NhwDcZu9XZ1q2AKyAAWBddqqPqoPVM8MtALfDTssn/zPVn8Mt3MAAsD471YXqi+rZ6r7ZHIBb9n31Ssva3yf/lfErgHXbX52u3qiODrcA3Kztlp/6vZsH/lbLAHDnOF491/LVwJHqUHWgunsyCthov1fXWi41264+a3m76ZeTUQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANP+ATIv6iuU2+VKAAAAAElFTkSuQmCC",alt:"menu",className:"w-5 h-5"})})}),t&&e.jsxs("div",{id:"mobile-menu",className:"md:hidden absolute top-full left-1/2 transform -translate-x-1/2 w-[90vw] max-w-sm bg-white/95 backdrop-blur shadow-lg z-50 flex flex-col items-start px-6 py-5 space-y-5 rounded-xl border border-blue-100 mt-2",role:"menu",children:[r.map(A=>e.jsx("a",{href:A.path,className:"text-gray-800 hover:text-blue-700 font-medium text-base w-full transition-colors",style:{fontFamily:"Inter, sans-serif"},onClick:()=>s(!1),role:"menuitem",children:A.label},A.label)),e.jsx(g,{to:"/get-started",className:"text-white px-7 py-3 rounded-full font-semibold text-base cursor-pointer w-full text-center transition-colors bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600",style:{fontFamily:"Inter, sans-serif"},onClick:()=>s(!1),role:"menuitem",children:"Get Started"})]})]})}var ne={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ae=p.createContext&&p.createContext(ne),ie=["attr","size","title"];function oe(e,A){if(null==e)return{};var t,s,r=function(e,A){if(null==e)return{};var t={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(A.indexOf(s)>=0)continue;t[s]=e[s]}return t}(e,A);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)t=n[s],A.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var A=1;A<arguments.length;A++){var t=arguments[A];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},le.apply(this,arguments)}function ce(e,A){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);A&&(s=s.filter(function(A){return Object.getOwnPropertyDescriptor(e,A).enumerable})),t.push.apply(t,s)}return t}function de(e){for(var A=1;A<arguments.length;A++){var t=null!=arguments[A]?arguments[A]:{};A%2?ce(Object(t),!0).forEach(function(A){ue(e,A,t[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ce(Object(t)).forEach(function(A){Object.defineProperty(e,A,Object.getOwnPropertyDescriptor(t,A))})}return e}function ue(e,A,t){return A=function(e){var A=function(e,A){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,A);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===A?String:Number)(e)}(e,"string");return"symbol"==typeof A?A:A+""}(A),A in e?Object.defineProperty(e,A,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[A]=t,e}function he(e){return e&&e.map((e,A)=>p.createElement(e.tag,de({key:A},e.attr),he(e.child)))}function me(e){return A=>p.createElement(ge,le({attr:de({},e.attr)},A),he(e.child))}function ge(e){var A=A=>{var t,{attr:s,size:r,title:n}=e,a=oe(e,ie),i=r||A.size||"1em";return A.className&&(t=A.className),e.className&&(t=(t?t+" ":"")+e.className),p.createElement("svg",le({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},A.attr,s,a,{className:t,style:de(de({color:e.color||A.color},A.style),e.style),height:i,width:i,xmlns:"http://www.w3.org/2000/svg"}),n&&p.createElement("title",null,n),e.children)};return void 0!==ae?p.createElement(ae.Consumer,null,e=>A(e)):A(ne)}function pe(e){return me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 18v1c0 1.1-.9 2-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14c1.1 0 2 .9 2 2v1h-9a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function xe(e){return me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)}function fe(e){return me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"},child:[]}]})(e)}function we(e){return me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"},child:[]}]})(e)}function be(e){return me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(e)}function Be(e){return me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"},child:[]}]})(e)}function ye(e){return me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function ve({isOpen:A=!1,onClose:t,title:s,subtitle:r,icon:n,children:a,size:i="md",showHeader:o=!0,showCloseButton:l=!0,footer:c,className:d="",contentClassName:u="",headerIcon:h,disabled:m=!1}){if(!A)return null;return e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0",onClick:t,"aria-hidden":"true"}),e.jsxs("div",{className:`relative bg-white rounded-lg shadow-2xl w-full ${{sm:"max-w-md",md:"max-w-xl",lg:"max-w-3xl",full:"max-w-5xl"}[i]} max-h-[85vh] overflow-hidden flex flex-col z-[10000] ${d}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-600/10 rounded-full blur-3xl -z-10"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-60 h-60 bg-gradient-to-tr from-purple-400/10 to-pink-600/10 rounded-full blur-3xl -z-10"}),o&&e.jsxs("div",{className:"sticky top-0 px-6 py-5 bg-gradient-to-r from-white via-slate-50 to-white backdrop-blur-xl border-b border-slate-200/20 flex items-center justify-between z-50 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[(n||h)&&e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:n||h}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 truncate",children:s}),r&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:r})]})]}),l&&e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-all duration-200 p-2 rounded-xl ml-2 flex-shrink-0",type:"button",disabled:m,"aria-label":"Close modal",children:e.jsx(ye,{className:"w-6 h-6"})})]}),e.jsx("div",{className:`overflow-y-auto flex-1 px-6 py-6 ${u}`,children:a}),c&&e.jsx("div",{className:"sticky bottom-0 px-6 py-4 bg-gradient-to-t from-slate-50 via-white to-transparent border-t border-slate-200/10 flex justify-end gap-3 backdrop-blur-sm flex-shrink-0",children:c})]})]})}function je({open:A,onClose:t}){h.useEffect(()=>{if(!A)return;const e=e=>{"Escape"===e.key&&t?.()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[A,t]);const s=e.jsx(q,{label:"Close",variant:"primary",onClick:t,className:"w-full"});return e.jsxs(ve,{isOpen:A,onClose:t,title:"Terms and Conditions",subtitle:"Please read carefully before using our service",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C6.5 6.253 2 10.998 2 17c0 5.523 3.592 10 8 10s8-4.477 8-10c0-6.002-4.5-10.747-10-10.747z"})}),footer:s,size:"full",contentClassName:"leading-relaxed text-slate-800 selection:bg-blue-100 selection:text-blue-900",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Terms and Conditions for eKahera"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Effective Date: May 1, 2025"}),e.jsx("p",{className:"mt-6",children:'Please read this agreement ("Terms") carefully. This document governs your access to and use of the "eKahera: A Web-Based Store Management Platform with Self Checkout", (the "Service").'}),e.jsx("p",{className:"mt-4",children:'The Service is an unpublished undergraduate capstone project ("Project") submitted to the Bicol University College of Science by its student developers.'}),e.jsx("p",{className:"mt-4",children:'By creating an account, accessing the platform, or using the Service, you ("User," "You") acknowledge that you have read, understood, and agree to be bound by these Terms. If you do not agree, do not access or use the Service.'}),e.jsx("h4",{className:"mt-6 font-semibold text-slate-900",children:"1. Definitions"}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:'"Service" or "Platform"'}),": Refers to the eKahera web-based store management and self-checkout application."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:'"Developers"'}),": Refers to the authors of the Project: Bonaobra, Inocencio, Jazmin, Mendina, and Perez."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:'"MSME Admin"'}),": A User, typically a store owner, with administrative permissions to manage products, inventory, reports, and staff accounts."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:'"Cashier"'}),": A User, typically a store employee, with permissions to process transactions using the POS interface and verify Customer QR codes."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:'"Customer"'}),": A User who accesses the mobile-friendly web application to scan items, manage a cart, and perform self-checkout."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:'"Simulated Payment"'}),": A mock payment feature used to demonstrate e-wallet functionality. This feature is for testing only and does not process real money."]}),e.jsx("h4",{className:"mt-6 font-semibold text-slate-900",children:"2. Nature of the Service"}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Academic Project:"}),' The Service is an academic capstone project. It is provided "AS IS" and "AS AVAILABLE" for demonstration, evaluation, and feedback purposes. It is not a commercial-grade, fully supported product.']}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Open-Source:"})," The Service was developed as an open-source system. Your license to use, modify, and distribute the source code is governed by the specific open-source license accompanying the Project's code repository (if any). These Terms govern your use of the hosted Service, not the source code itself."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Limited Scope:"})," The Service is designed for small retail operations (like convenience stores) and does not cater to restaurants, service providers, or businesses with complex logistics."]}),e.jsx("h4",{className:"mt-6 font-semibold text-slate-900",children:"3. User Accounts and Roles"}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"MSME Admin:"})," By registering a store, you represent that you are the owner or authorized representative of that MSME. You are solely responsible for all activity under your account, including managing product data, pricing, and the creation and conduct of Cashier accounts."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Cashier:"})," Your account is created and managed by an MSME Admin. You are responsible for maintaining the confidentiality of your login credentials and for all transactions you process."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Customer:"})," You do not need an account to use the self-checkout feature. You are responsible for accurately scanning all items using your device's camera."]}),e.jsx("h4",{className:"mt-6 font-semibold text-slate-900",children:"4. Critical Disclaimers and Limitations"}),e.jsx("p",{className:"mt-2",children:"The Developers provide the Service without warranties of any kind. You assume all risks associated with its use."}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"No Guarantee of Security:"})," The Service includes basic user authentication and role-based access control. However, you acknowledge that advanced security measures such as end-to-end encryption and penetration testing are beyond the current scope of this Project. The Developers are not liable for any data breach, loss, or unauthorized access."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Payment is Simulated:"})," You acknowledge that all e-wallet payment integrations (e.g., GCash, Maya) are simulated and for demonstration only. The Service cannot and does not process real financial transactions. The Developers are not liable for any real funds lost or financial information compromised by attempting to use this feature."]})]})}function Ce({open:A,onClose:t}){h.useEffect(()=>{if(!A)return;const e=e=>"Escape"===e.key&&t?.();return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[A,t]);const s=e.jsx(q,{label:"Close",variant:"primary",onClick:t,className:"w-full"});return e.jsxs(ve,{isOpen:A,onClose:t,title:"Privacy Policy",subtitle:"How we protect your information",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),footer:s,size:"full",contentClassName:"leading-relaxed text-slate-800 selection:bg-blue-100 selection:text-blue-900",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Privacy Policy for eKahera"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Effective Date: May 1, 2025"}),e.jsx("p",{className:"mt-6",children:'This Privacy Policy describes how the "eKahera: A Web-Based Store Management Platform with Self Checkout" (the "Service" or "Platform") collects, uses, and protects your information. This Service is an unpublished undergraduate capstone project ("Project") developed by students of the Bicol University College of Science.'}),e.jsx("p",{className:"mt-4",children:"By creating an account or using this Service, you agree to the collection and use of information in accordance with this policy."}),e.jsx("h4",{className:"mt-6 font-semibold text-slate-900",children:"1. Information We Collect"}),e.jsx("p",{className:"mt-2",children:"We collect several types of information to provide and improve our Service."}),e.jsx("p",{className:"mt-3 font-medium text-slate-900",children:"A. Information You Provide"}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"MSME Admin & Store Information:"})," When an MSME Owner registers a store, we collect information necessary for verification and account setup. This may include your name, store name, contact information, and business details."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Cashier Information:"})," MSME Admins create accounts for their staff. This information is limited to what is needed for role-based access, such as a name and login credentials."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"User Authentication Data:"})," To secure your account, we use Firebase for user authentication, which may manage your email address and password."]}),e.jsx("p",{className:"mt-3 font-medium text-slate-900",children:"B. Information Generated Through Use"}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Inventory Data:"})," We collect and store all product information you add to the Platform, including product names, barcode details, prices, and stock levels."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Transaction Data:"})," The Service logs all sales transactions. This includes items sold, quantities, total price, and a timestamp. This data is used to generate sales reports."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Customer Self-Checkout Data:"})," When a Customer uses the self-checkout feature, the Service temporarily collects their shopping cart information (scanned items and quantities) to process the transaction."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"QR Code Verification Data:"})," The system generates a unique QR code for each transaction, which is used by a Cashier to verify the purchase."]}),e.jsx("p",{className:"mt-3 font-medium text-slate-900",children:"C. What We DO NOT Collect"}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"No Customer Personal Information:"})," The Customer self-checkout feature is designed to be used without requiring the Customer to create an account or provide any personal information (like name or phone number)."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"No Real Financial Information:"})," The e-wallet payment features (e.g., GCash, Maya) are simulated for demonstration purposes only. We do not collect, process, or store any real financial data, credit card numbers, or e-wallet account details."]}),e.jsx("h4",{className:"mt-6 font-semibold text-slate-900",children:"2. How We Use Your Information"}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"To Provide and Maintain the Service:"})," To operate the POS, manage inventory, and enable the self-checkout and verification systems."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"To Manage Accounts:"})," To authenticate and manage access for MSME Admins and Cashiers based on their roles."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"For MSME Operations:"})," To allow MSME Admins to track sales, monitor inventory, receive low-stock alerts, and generate business reports."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"For Academic Evaluation:"})," As a capstone project, data may be used by the Developers and faculty of the Bicol University IT Department for testing, debugging, and evaluating the system's performance and functional suitability against the project's objectives."]})]})}function Ne({className:t=""}){const[s,r]=h.useState(!1),[n,a]=h.useState(!1),i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return e.jsxs(A.footer,{className:`relative w-full pt-0 overflow-hidden ${t}`,style:{fontFamily:"Inter, sans-serif"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx(A.div,{className:"absolute inset-0 bg-gradient-to-b from-white via-slate-50/80 to-blue-50/40",layoutId:"footer-bg",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}}),e.jsx(A.div,{className:"absolute -bottom-40 -left-40 w-[500px] h-[500px] rounded-full blur-3xl",style:{background:"radial-gradient(circle, rgba(96, 165, 250, 0.15) 0%, rgba(34, 211, 238, 0.1) 100%)"},animate:{scale:[1,1.1,1],opacity:[.3,.4,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(A.div,{className:"absolute -bottom-40 -right-40 w-[500px] h-[500px] rounded-full blur-3xl",style:{background:"radial-gradient(circle, rgba(192, 132, 252, 0.15) 0%, rgba(236, 72, 153, 0.1) 100%)"},animate:{scale:[1,1.15,1],opacity:[.3,.4,.3]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),e.jsx(A.div,{className:"absolute inset-0 opacity-40",style:{backgroundImage:["linear-gradient(rgba(59, 130, 246, 0.02) 1px, transparent 1px)","linear-gradient(90deg, rgba(59, 130, 246, 0.02) 1px, transparent 1px)"].join(","),backgroundSize:"3rem 3rem"},initial:{opacity:0},animate:{opacity:.4},transition:{duration:1,delay:.3}}),e.jsxs(A.div,{className:"relative z-10 max-w-7xl mx-auto px-6 sm:px-8 lg:px-12 pt-24 pb-16",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},children:[e.jsxs(A.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12 lg:gap-16 mb-16",children:[e.jsxs(A.div,{variants:i,className:"lg:col-span-1",children:[e.jsx(A.div,{className:"mb-8",whileHover:{scale:1.03},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(se,{size:45,className:"text-2xl"})}),e.jsx(A.p,{className:"text-slate-600 text-sm leading-relaxed mb-8 max-w-xs font-medium",children:"Smart POS platform for fast checkout, unified inventory, and real-time analytics."}),e.jsxs(A.div,{className:"space-y-4 mb-8",children:[e.jsxs(A.a,{href:"mailto:support@ekahera.com",className:"flex items-center gap-3 text-sm text-slate-700 hover:text-blue-600 transition-all duration-300 group",whileHover:{x:6,scale:1.02},children:[e.jsx(A.div,{className:"h-10 w-10 rounded-xl flex items-center justify-center transition-all duration-300 shadow-sm group-hover:shadow-md",style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)"},whileHover:{rotate:5,background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",scale:1.05},children:e.jsxs("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",className:"text-blue-600",children:[e.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),e.jsx("path",{d:"M22 6l-10 7L2 6"})]})}),e.jsx(A.span,{className:"font-medium",children:"support@ekahera.com"})]}),e.jsxs(A.a,{href:"tel:+639708468324",className:"flex items-center gap-3 text-sm text-slate-700 hover:text-blue-600 transition-all duration-300 group",whileHover:{x:6,scale:1.02},children:[e.jsx(A.div,{className:"h-10 w-10 rounded-xl flex items-center justify-center transition-all duration-300 shadow-sm group-hover:shadow-md",style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)"},whileHover:{rotate:5,background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",scale:1.05},children:e.jsx("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",className:"text-blue-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx(A.span,{className:"font-medium",children:"+63 970 846 8324"})]}),e.jsxs(A.a,{href:"https://www.google.com/maps/search/?api=1&query=200+T.+De+Castro+Street,+Zone-8+Bulan,+Sorsogon",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-sm text-slate-700 hover:text-blue-600 transition-all duration-300 group",whileHover:{x:6,scale:1.02},children:[e.jsx(A.div,{whileHover:{rotate:5},className:"h-10 w-10 min-w-[2.5rem] rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 group-hover:from-blue-100 group-hover:to-blue-200 flex items-center justify-center transition-all duration-300 shadow-sm group-hover:shadow-md",children:e.jsxs("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",className:"text-blue-600",children:[e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"}),e.jsx("circle",{cx:"12",cy:"9",r:"2.5"})]})}),e.jsxs(A.span,{className:"font-medium",children:["200 T. De Castro Street, Zone-8",e.jsx("br",{}),"Bulan, Sorsogon, Philippines"]})]})]})]}),e.jsxs(A.div,{variants:i,children:[e.jsxs(A.h3,{className:"text-lg font-bold text-slate-800 mb-6 relative inline-block",children:["Quick Links",e.jsx(A.span,{className:"absolute bottom-0 left-0 w-12 h-0.5 rounded-full",style:{background:"linear-gradient(90deg, #60a5fa 0%, #22d3ee 100%)"},initial:{width:0},animate:{width:"100%"},transition:{duration:.3}})]}),e.jsx("ul",{className:"space-y-3.5",children:[{name:"About Us",href:"#about",icon:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},{name:"Features",href:"#features",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},{name:"Contact Us",href:"/contact",icon:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}].map(t=>e.jsx(A.li,{children:e.jsxs(A.a,{href:t.href,className:"group flex items-center gap-2.5 text-sm text-slate-600 hover:text-blue-600 transition-all duration-300",whileHover:{x:6},children:[e.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",className:"text-slate-400 group-hover:text-blue-600 transition-colors duration-300",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:t.icon})}),e.jsx(A.span,{className:"font-medium",children:t.name})]})},t.name))})]}),e.jsxs(A.div,{variants:i,children:[e.jsxs(A.h3,{className:"text-lg font-bold text-slate-800 mb-6 relative inline-block",children:["Support",e.jsx(A.span,{className:"absolute bottom-0 left-0 w-12 h-0.5 rounded-full",style:{background:"linear-gradient(90deg, #60a5fa 0%, #22d3ee 100%)"},initial:{width:0},animate:{width:"100%"},transition:{duration:.3}})]}),e.jsxs("ul",{className:"space-y-3.5",children:[e.jsx(A.li,{children:e.jsxs(A.a,{href:"#",className:"group flex items-center gap-2.5 text-sm text-slate-600 hover:text-blue-600 transition-all duration-300",whileHover:{x:6},children:[e.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",className:"text-slate-400 group-hover:text-blue-600 transition-colors duration-300",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),e.jsx(A.span,{className:"font-medium",children:"Documentation"})]})}),e.jsx(A.li,{children:e.jsxs(A.button,{onClick:()=>a(!0),className:"group flex items-center gap-2.5 text-left text-sm text-slate-600 hover:text-blue-600 transition-all duration-300 w-full",whileHover:{x:6},children:[e.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",className:"text-slate-400 group-hover:text-blue-600 transition-colors duration-300",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx(A.span,{className:"font-medium",children:"Privacy Policy"})]})}),e.jsx(A.li,{children:e.jsxs(A.button,{onClick:()=>r(!0),className:"group flex items-center gap-2.5 text-left text-sm text-slate-600 hover:text-blue-600 transition-all duration-300 w-full",whileHover:{x:6},children:[e.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",className:"text-slate-400 group-hover:text-blue-600 transition-colors duration-300",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx(A.span,{className:"font-medium",children:"Terms and Conditions"})]})}),e.jsx(A.li,{children:e.jsxs(A.a,{href:"#faq",className:"group flex items-center gap-2.5 text-sm text-slate-600 hover:text-blue-600 transition-all duration-300",whileHover:{x:6},children:[e.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",className:"text-slate-400 group-hover:text-blue-600 transition-colors duration-300",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx(A.span,{className:"font-medium",children:"FAQ"})]})})]})]})]}),e.jsxs("div",{className:"relative w-full mb-10",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[e.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-slate-200 to-transparent"}),e.jsx(A.div,{className:"absolute top-0 left-0 h-px w-full bg-gradient-to-r from-transparent via-blue-400/50 to-transparent",initial:{scaleX:0},animate:{scaleX:1},transition:{duration:.8,delay:.2}})]}),e.jsxs(A.div,{className:"flex flex-col md:flex-row justify-between items-center gap-3 md:gap-6 text-sm",variants:i,initial:"hidden",animate:"visible",children:[e.jsxs(A.p,{className:"text-slate-500 text-sm mb-4 md:mb-0",children:["Â© ",(new Date).getFullYear()," eKahera. All rights reserved."]}),e.jsx("span",{className:"hidden md:block text-slate-300 text-lg",children:"â€¢"}),e.jsx(A.p,{className:"text-slate-600 text-sm mb-6",children:"Follow us on social media for the latest updates and news."})]})]}),e.jsx(je,{open:s,onClose:()=>r(!1)}),e.jsx(Ce,{open:n,onClose:()=>a(!1)})]})}const Qe=({title:A,subtitle:t,headerActions:s,onMenuClick:r,isMobileNavOpen:n,className:a=""})=>e.jsx("header",{className:`sticky top-0 z-40 bg-white/90 backdrop-blur-md shadow-sm border-b border-gray-200/50 ${a}`,children:e.jsx("div",{className:"px-6 lg:px-6 py-2",children:e.jsxs("div",{className:"grid grid-cols-[1fr_auto] items-center h-16 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[r&&e.jsx("button",{type:"button",onClick:r,className:"md:hidden p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-md transition-transform duration-200 flex-shrink-0","aria-label":n?"Close menu":"Open menu","aria-expanded":n,children:n?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})}),e.jsx("h1",{className:"text-2xl font-bold truncate",children:A.includes(" - POS")?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-blue-600",children:A.replace(" - POS","")}),e.jsx("span",{className:"text-gray-900",children:" - POS"})]}):e.jsx("span",{className:"text-blue-600",children:A})}),t&&e.jsx("p",{className:"text-sm text-gray-600 font-medium truncate",children:t})]}),s&&e.jsx("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:s})]})})});function Ue({children:A,title:t,subtitle:s,sidebar:r,headerActions:n,showHeader:a=!0,showNavbar:i=!1,showFooter:o=!1,className:l="",isSidebarOpen:c,setSidebarOpen:d}){const[u,m]=h.useState("light"),g=h.useRef(null),x=h.useRef(!1),{logout:f}=Z(),w=()=>{f()};return e.jsxs(z,{variant:"white",pattern:void 0,overlay:!1,floatingElements:!1,className:u,children:[i&&e.jsx(re,{}),e.jsxs("div",{className:`flex h-screen relative ${l} ${u}`,onTouchStart:e=>{if(window.innerWidth>=768)return;const A=e.touches?.[0]?.clientX??0;(!c&&A<=24||c)&&(x.current=!0,g.current=A)},onTouchMove:e=>{if(!x.current)return;const A=e.touches?.[0]?.clientX??0,t=A-(g.current??A);!c&&t>60?(d(!0),x.current=!1,g.current=null):c&&t<-60&&(d(!1),x.current=!1,g.current=null)},onTouchEnd:()=>{x.current=!1,g.current=null},children:[r&&e.jsx("aside",{className:"hidden md:block fixed top-0 left-0 h-full z-50",children:p.cloneElement(r,{onLogoutClick:w})}),r&&e.jsx("aside",{className:"md:hidden fixed inset-y-0 left-0 z-50 w-48 max-w-[80vw] bg-white shadow-xl transform transition-transform duration-300 "+(c?"translate-x-0":"-translate-x-full"),role:"dialog","aria-modal":"true",children:p.cloneElement(r,{isMobile:!0,onLogoutClick:w})}),r&&c&&e.jsx("div",{className:"md:hidden fixed inset-0 bg-black/30 z-40",onClick:()=>d(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${r?"md:ml-48":""} ${c?"blur-sm":""}`,children:[e.jsxs("main",{className:"flex-1",children:[a&&e.jsx(Qe,{title:t,subtitle:s,headerActions:n,isMobileNavOpen:c,onMenuClick:()=>d(!c),className:"bg-white"}),e.jsx("div",{className:"flex-1 relative",children:A})]}),o&&e.jsx(Ne,{className:"z-50"})]})]})]})}function ke({onCustomerClick:r,onStaffClick:n}){const a=d(),{scrollY:i}=t();s(i,[0,300],[0,-20]);const o={hidden:{opacity:0,y:30},show:{opacity:1,y:0,transition:{duration:.7,ease:[.16,1,.3,1]}}},l=r||(()=>a("/customer")),c=n||(()=>a("/select-role"));return e.jsxs("section",{className:"relative w-full min-h-[calc(100vh-56px)] md:min-h-[calc(100vh-72px)] flex flex-col items-center justify-center px-4 md:px-6 lg:px-8 pt-24 md:pt-32 pb-16 md:pb-24 overflow-x-hidden",style:{fontFamily:"Inter, sans-serif"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 via-indigo-50/30 to-purple-50/20"}),e.jsx(A.div,{className:"absolute -top-32 -left-32 w-[500px] h-[500px] rounded-full bg-gradient-to-br from-blue-400/40 to-cyan-400/30 blur-3xl z-0",animate:{x:[0,100,0],y:[0,50,0],scale:[1,1.2,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),e.jsx(A.div,{className:"absolute top-1/3 -right-32 w-[600px] h-[600px] rounded-full bg-gradient-to-bl from-purple-400/35 to-pink-400/25 blur-3xl z-0",animate:{x:[0,-80,0],y:[0,-60,0],scale:[1,1.15,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}}),e.jsx(A.div,{className:"absolute bottom-0 left-1/4 w-[400px] h-[400px] rounded-full bg-gradient-to-tr from-indigo-400/30 to-blue-400/20 blur-3xl z-0",animate:{x:[0,60,0],y:[0,-40,0],scale:[1,1.1,1]},transition:{duration:18,repeat:1/0,ease:"easeInOut"}}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(59,130,246,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(59,130,246,0.03)_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_110%)]"}),e.jsx(A.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.15,delayChildren:.2}}},initial:"hidden",animate:"show",className:"relative z-10 w-full max-w-[95rem] mx-auto",children:e.jsxs("div",{className:"relative flex flex-col lg:flex-row items-center lg:items-start justify-between gap-12 lg:gap-16 lg:pr-0",children:[e.jsxs(A.div,{className:"flex-1 flex flex-col justify-center items-start max-w-2xl lg:max-w-none lg:w-[55%] pt-8 lg:pt-12",variants:o,children:[e.jsx(A.div,{variants:o,className:"group relative mb-6",children:e.jsxs(A.span,{className:"hover:cursor-default inline-flex items-center px-4 py-2 rounded-full backdrop-blur-md bg-white/70 border border-white/20 shadow-lg shadow-blue-500/10 text-blue-700 text-sm font-semibold tracking-wide",children:[e.jsxs("span",{className:"relative flex h-2 w-2 mr-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-500"})]}),"For Modern Businesses"]})}),e.jsxs(A.h1,{variants:o,className:"text-5xl sm:text-6xl md:text-7xl lg:text-8xl leading-[1.05] font-extrabold mb-6 md:mb-8 tracking-tight",style:{fontFamily:"Inter, sans-serif"},children:[e.jsx("span",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 bg-clip-text text-transparent hover:cursor-default",children:"Smart POS for"}),e.jsx("br",{}),e.jsx("span",{className:"hover:cursor-default bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 bg-clip-text text-transparent",children:"Every Business."})]}),e.jsx(A.p,{variants:o,className:"hover:cursor-default text-lg sm:text-xl md:text-2xl text-slate-600 mb-10 md:mb-12 font-normal leading-relaxed max-w-xl",style:{fontFamily:"Inter, sans-serif"},children:"Streamline checkout, manage inventory, and track sales in real time with a secure, scalable POS built for growth."}),e.jsxs(A.div,{variants:o,className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex flex-col group",children:[e.jsxs(A.button,{onClick:c,className:"relative overflow-hidden bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold px-8 py-4 rounded-2xl shadow-xl shadow-blue-500/25 border border-blue-500/20 text-base sm:text-lg flex items-center justify-center min-w-[180px] transition-all duration-300",style:{fontFamily:"Inter, sans-serif"},whileHover:{scale:1.02,boxShadow:"0 20px 25px -5px rgba(37, 99, 235, 0.3), 0 10px 10px -5px rgba(37, 99, 235, 0.2)"},whileTap:{scale:.98},children:[e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx("span",{children:"Log In"}),e.jsx(A.svg,{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsx(A.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-700 to-blue-800",initial:{x:"-100%"},whileHover:{x:"0%"},transition:{duration:.3}})]}),e.jsx("span",{className:"hover:cursor-default text-xs sm:text-sm text-slate-500 mt-2.5 text-center sm:text-left font-medium",children:"Try the Admin/Cashier experience"})]}),e.jsxs("div",{className:"flex flex-col group",children:[e.jsx(A.button,{onClick:l,className:"relative overflow-hidden backdrop-blur-md bg-white/80 border-2 border-blue-200/50 text-blue-700 font-semibold px-8 py-4 rounded-2xl shadow-lg shadow-blue-500/10 text-base sm:text-lg flex items-center justify-center gap-2 min-w-[180px] transition-all duration-300",style:{fontFamily:"Inter, sans-serif"},whileHover:{scale:1.02,backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"rgba(59, 130, 246, 0.6)",boxShadow:"0 20px 25px -5px rgba(59, 130, 246, 0.15), 0 10px 10px -5px rgba(59, 130, 246, 0.1)"},whileTap:{scale:.98},children:e.jsx("span",{className:"relative z-10",children:"Shop Now!"})}),e.jsx("span",{className:"hover:cursor-default text-xs sm:text-sm text-slate-500 mt-2.5 text-center sm:text-left font-medium",children:"Shop in your own convenience"})]})]})]}),e.jsx(A.div,{className:"flex-shrink-0 w-full sm:w-[85%] lg:w-[45%] flex items-center justify-center lg:justify-end h-full mt-4 lg:mt-0 relative lg:translate-x-8 xl:translate-x-12",variants:o,children:e.jsx(A.img,{src:"/assets/png/hero-illustration-DN7PLg__.png",alt:"Digital payment illustration",className:"w-full h-auto max-w-full lg:max-w-none drop-shadow-2xl will-change-transform",style:{objectFit:"contain"},animate:{y:[0,-16,0],rotateZ:[0,.3,0]}})})]})})]})}const Fe=[{icon:e.jsxs("svg",{width:"40",height:"40",fill:"none",stroke:"#1976ed",strokeWidth:"2.5",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"7",width:"18",height:"13",rx:"2"}),e.jsx("path",{d:"M16 3v4M8 3v4"}),e.jsx("path",{d:"M3 11h18"})]}),title:"Mobile-Friendly Self-Checkout",desc:"Customers can browse products, scan barcodes, add items to cart, and complete purchases via their smartphones."},{icon:e.jsxs("svg",{width:"40",height:"40",fill:"none",stroke:"#1976ed",strokeWidth:"2.5",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("path",{d:"M7 7h.01M7 11h.01M7 15h.01M11 7h2v2h-2zM11 11h2v2h-2zM11 15h2v2h-2zM15 7h.01M15 11h.01M15 15h.01"})]}),title:"QR Code Digital Receipts",desc:"Enhances transaction security and reduces fraud."},{icon:e.jsxs("svg",{width:"40",height:"40",fill:"none",stroke:"#1976ed",strokeWidth:"2.5",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9-9 4.03-9 9 4.03 9 9 9z"}),e.jsx("path",{d:"M12 7v4l3 3"})]}),title:"Payment Options",desc:"Supports both cash and online payments (GCash, Maya, etc.)."},{icon:e.jsxs("svg",{width:"40",height:"40",fill:"none",stroke:"#1976ed",strokeWidth:"2.5",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2"}),e.jsx("path",{d:"M16 3v4M8 3v4"}),e.jsx("path",{d:"M2 11h20"})]}),title:"Transaction Processing",desc:"Cashiers scan customer-generated QR codes to verify and complete purchases."},{icon:e.jsxs("svg",{width:"40",height:"40",fill:"none",stroke:"#1976ed",strokeWidth:"2.5",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"7",width:"18",height:"13",rx:"2"}),e.jsx("path",{d:"M16 3v4M8 3v4"}),e.jsx("path",{d:"M3 11h18"})]}),title:"Inventory Management",desc:"Keeps stock levels updated automatically, tracks product quantities, and prevents overselling with real-time synchronization."},{icon:e.jsxs("svg",{width:"40",height:"40",fill:"none",stroke:"#1976ed",strokeWidth:"2.5",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"7",width:"18",height:"13",rx:"2"}),e.jsx("path",{d:"M16 3v4M8 3v4"}),e.jsx("path",{d:"M3 11h18"})]}),title:"Sales & Inventory Reports",desc:"Generates analytics and reports for better business decision making."}],Se=()=>e.jsx("section",{id:"features",className:"hover:cursor-default relative w-full py-20 px-2 bg-white",style:{fontFamily:"Inter, sans-serif"},children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("p",{className:"hover:cursor-default text-blue-700 text-base md:text-lg text-center mb-2 font-medium",children:"Discover what makes eKahera the smart choice for your business."}),e.jsx("h2",{className:"hover:cursor-default text-3xl md:text-4xl font-extrabold text-black mb-10 text-center",children:"Features"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:Fe.map((t,s)=>e.jsxs(A.div,{initial:{opacity:0,y:24,scale:.98},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:{duration:.5,ease:"easeOut",delay:.04*s},className:"bg-white rounded-2xl shadow-lg p-8 flex flex-col items-center border border-blue-100 transition-all duration-300 hover:shadow-2xl",children:[e.jsx("div",{className:"mb-4 flex items-center justify-center w-16 h-16 rounded-full bg-white group-hover:bg-white transition-colors duration-200",children:t.icon}),e.jsx("h3",{className:"font-extrabold text-lg text-black mb-2 text-center",children:t.title}),e.jsx("p",{className:"text-black text-center text-base",children:t.desc})]},s))})]})});function Ee({children:A,className:t="",variant:s="default",size:r="lg",align:n="center"}){const a=`font-extrabold tracking-tight text-blue-700 drop-shadow-sm ${{sm:"text-lg md:text-xl mb-4",md:"text-xl md:text-2xl mb-5",lg:"text-2xl md:text-3xl mb-6",xl:"text-3xl md:text-4xl mb-8"}[r]} ${{left:"text-left",center:"text-center",right:"text-right"}[n]} ${{default:"text-gray-800",light:"text-blue-100",dark:"text-blue-900",white:"text-white"}[s]} ${t}`;return e.jsx("h2",{className:a,children:A})}const Ie=()=>e.jsx("section",{id:"about",className:"relative w-full py-28 bg-gradient-to-b from-white to-blue-50/30 flex justify-center items-center",children:e.jsxs(A.div,{className:"max-w-6xl w-full mx-auto grid grid-cols-1 md:grid-cols-2 gap-16 px-6",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.7,ease:"easeOut"},children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(Ee,{size:"2xl",align:"left",className:"mb-6 text-slate-900",children:"About eKahera"}),e.jsx("p",{className:"text-black text-lg md:text-xl font-medium mb-6 max-w-prose leading-relaxed",children:"We build smart, reliable POS software designed to help small and midsize businesses sell faster, operate smarter, and scale with confidence."}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 w-full",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-blue-50 text-blue-600 shadow-md",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#2563EB",strokeWidth:"2",children:e.jsx("path",{d:"M12 2l3 7h7l-5.5 4 2.5 7-7-4.5L5 20l2.5-7L2 9h7z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-900 font-semibold text-xl",children:"Our Mission"}),e.jsx("p",{className:"text-black text-base md:text-lg mt-2 leading-relaxed",children:"Empower entrepreneurs through simple, fast, and intelligent POS tools that improve checkout, enhance insights, and support business growth."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-blue-50 text-blue-600 shadow-md",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#2563EB",strokeWidth:"2",children:e.jsx("path",{d:"M3 12h18M12 3v18"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-900 font-semibold text-xl",children:"Our Vision"}),e.jsx("p",{className:"text-black text-base md:text-lg mt-2 leading-relaxed",children:"A future where every storeâ€”from micro-kiosks to national chainsâ€”runs on simple, secure, and delightful POS technology."})]})]})]})]}),e.jsx("div",{className:"flex md:justify-end",children:e.jsxs(A.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6,ease:"easeOut"},className:"relative w-full max-w-lg p-8 rounded-3xl bg-white/80 backdrop-blur-xl border border-blue-100 shadow-[0_12px_45px_rgba(37,99,235,0.12)]",children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl pointer-events-none",style:{boxShadow:"inset 0 0 0 1.5px rgba(37,99,235,0.06)"}}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-blue-600"}),e.jsx("span",{className:"text-xs uppercase tracking-wider text-slate-700 font-semibold",children:"Why eKahera"})]}),e.jsxs("ul",{className:"space-y-4 text-slate-800 text-base md:text-lg leading-relaxed",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-1 h-2 w-2 rounded-full bg-blue-600"}),"Real-time sales and inventory monitoring"]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-1 h-2 w-2 rounded-full bg-blue-600"}),"Multi-branch and multi-user capabilities"]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-1 h-2 w-2 rounded-full bg-blue-600"}),"Cloud-first security and performance"]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-1 h-2 w-2 rounded-full bg-blue-600"}),"Lightning-fast setup and intuitive UI"]})]})]})]})})]})}),He=[{q:"What devices is this POS software compatible with?",a:"Our POS works on any modern browser, desktop, laptop, or tablet. No special hardware required."},{q:"Can I use this for multiple stores or branches?",a:"Yes! You can manage multiple stores and users from a single account."},{q:"What are the documents needed to get started?",a:"Business Registration Certificate (DTI/SEC/CDA), Mayor's Permit / Business Permit, and BIR Certificate of Registration (Form 2303)."},{q:"How do I get support?",a:"You can reach us via the Help Center, email, or chat. We are here to help you succeed."}],_e=()=>{const[t,s]=h.useState(0);return e.jsx("section",{className:"relative w-full py-28 bg-white flex justify-center items-center",children:e.jsxs(A.div,{className:"max-w-4xl w-full mx-auto flex flex-col items-center px-6",initial:{opacity:0,y:28},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.6,ease:"easeOut"},children:[e.jsx(Ee,{size:"xl",align:"center",className:"mb-9 text-slate-900",children:"Frequently Asked Questions"}),e.jsx("div",{className:"w-full rounded-2xl bg-white border border-blue-100 shadow-[0_10px_40px_rgba(37,99,235,0.05)] divide-y divide-slate-100",children:He.map((n,a)=>{const i=a===t;return e.jsxs("div",{className:"group",children:[e.jsxs("button",{onClick:()=>(e=>s(A=>A===e?-1:e))(a),className:"w-full flex items-center justify-between gap-5 px-6 md:px-7 py-6 text-left hover:bg-white/40 transition-colors","aria-expanded":i,children:[e.jsx("span",{className:"text-slate-900 font-normal text-lg md:text-xl",children:n.q}),e.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-blue-200 text-blue-600 bg-white group-hover:bg-blue-600 group-hover:text-white transition-colors",children:i?e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M5 12h14"})}):e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 5v14M5 12h14"})})})]}),e.jsx(r,{initial:!1,children:i&&e.jsx(A.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:"easeOut"},children:e.jsx("div",{className:"px-6 md:px-7 pb-6 text-slate-700 md:text-lg text-base leading-relaxed",children:n.a})})})]},n.q)})})]})})};function Le({id:t,title:s,children:r,className:n=""}){const a=s?`${t||"section"}-heading`:void 0;return e.jsxs("section",{id:t,"aria-labelledby":a,className:`px-4 ${n}`,children:[s&&e.jsx("h2",{id:a,className:"sr-only",children:s}),e.jsx(A.div,{variants:{hidden:{opacity:0,y:24},show:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.2,margin:"-80px"},children:r})]})}function Te({className:r="my-12",heightClass:c="h-40 md:h-60"}){const d=n();let u=!1;try{if("undefined"!=typeof window){u="1"===new URLSearchParams(window.location.search).get("motion")||"1"===window.localStorage.getItem("motionOverride")}}catch(K){u=!1}const h=d&&!u,{scrollYProgress:m}=t(),g=s(m,[0,1],[16,-16]),x=s(m,[0,1],[10,-10]),f=s(m,[0,1],["-80%","140%"]),w={damping:20,stiffness:120},b=a(g,w),B=a(x,w),y=a(f,{damping:30,stiffness:160}),v=h?{}:{translateY:b},j=h?{}:{translateY:B},C=h?{}:{translateX:y},N="M0 40 C180 10 360 70 720 56 C1080 42 1260 12 1440 36 C1260 70 1080 100 720 84 C360 68 180 98 0 80 Z",Q="M0 60 C220 100 420 20 720 52 C1020 84 1220 60 1440 72 C1220 100 1020 120 720 100 C420 80 220 110 0 92 Z",U=s(m,[0,.5,1],[0,1,0]),k=s(m,[0,.5,1],[0,1,0]),F=p.useRef(),S=p.useRef(),E=i(0),I=i(0),H=o(),_=o();p.useEffect(()=>{if(h)return;const e=l(E,[0,.9,0],{duration:10,ease:"easeInOut",repeat:1/0}),A=l(I,[0,.8,0],{duration:8,ease:"easeInOut",repeat:1/0});F.current=e,S.current=A;return(async()=>{H.set({opacity:0,translateY:16}),_.set({opacity:0,translateY:24}),await H.start({opacity:1,translateY:[16,0],transition:{duration:.8,ease:"easeOut"}}),await _.start({opacity:1,translateY:[24,0],transition:{duration:.9,ease:"easeOut"}}),H.start({translateY:[0,-10,0],rotate:[0,.6,0],transition:{duration:9,repeat:1/0,ease:"easeInOut"}}),_.start({translateY:[0,-14,0],rotate:[0,.9,0],transition:{duration:7,repeat:1/0,ease:"easeInOut"}})})(),()=>{e&&e.stop&&e.stop(),A&&A.stop&&A.stop(),H.stop(),_.stop()}},[h]);const L=s([U,E],([e,A])=>Math.max(0,Math.min(1,.7*e+.5*A))),T=s([k,I],([e,A])=>Math.max(0,Math.min(1,.6*e+.55*A))),O=a(L,{damping:24,stiffness:140}),M=a(T,{damping:26,stiffness:160}),P=h?N:s(O,[0,1],[N,"M0 36 C180 24 360 60 720 48 C1080 36 1260 8 1440 32 C1260 64 1080 96 720 80 C360 64 180 92 0 72 Z"]),D=h?Q:s(M,[0,1],[Q,"M0 64 C220 92 420 28 720 58 C1020 88 1220 66 1440 76 C1220 98 1020 118 720 98 C420 78 220 108 0 94 Z"]);return e.jsxs("div",{className:`w-full flex items-center justify-center overflow-hidden ${r}`,children:[e.jsxs(A.svg,{className:`${c} block`,viewBox:"0 0 1440 120",preserveAspectRatio:"none",role:"img","aria-label":"section divider",xmlns:"http://www.w3.org/2000/svg",style:{width:"100vw",marginLeft:"calc(50% - 50vw)"},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"divGrad",x1:"0",x2:"1",children:[e.jsx("stop",{className:"g1-s1",offset:"0%",stopColor:"#60a5fa"}),e.jsx("stop",{className:"g1-s2",offset:"50%",stopColor:"#2563eb"}),e.jsx("stop",{className:"g1-s3",offset:"100%",stopColor:"#93c5fd"})]}),e.jsxs("linearGradient",{id:"divGrad2",x1:"0",x2:"1",children:[e.jsx("stop",{className:"g2-s1",offset:"0%",stopColor:"#2563eb"}),e.jsx("stop",{className:"g2-s2",offset:"100%",stopColor:"#60a5fa"})]})]}),e.jsx(A.path,{className:"wave-back",d:P,fill:"url(#divGrad2)",opacity:"1",style:v,animate:H}),e.jsx(A.path,{className:"wave-front",d:D,fill:"url(#divGrad)",opacity:"1",style:j,stroke:"#1e40af",strokeOpacity:.08,strokeWidth:2,animate:_}),e.jsx(A.rect,{className:"divider-shine",x:"-60%",y:"0",width:"60%",height:"160",fill:"#ffffff",opacity:"0.12",style:C})]}),e.jsx("style",{children:"\n        .wave-back {\n          transform-box: fill-box;\n          transform-origin: center;\n          animation: back-pan 9s linear infinite, wave-bob 12s ease-in-out infinite;\n          will-change: transform;\n        }\n        .wave-front {\n          transform-box: fill-box;\n          transform-origin: center;\n          animation: front-float 6.5s ease-in-out infinite, wave-tilt 8.5s ease-in-out infinite;\n          will-change: transform;\n        }\n\n        .divider-shine {\n          transform-box: fill-box;\n          transform-origin: center;\n          mix-blend-mode: screen;\n          filter: blur(20px);\n          animation: shine 5s linear infinite;\n          will-change: transform, opacity;\n        }\n\n        @keyframes wave-bob {\n          0% { transform: translateY(0); }\n          50% { transform: translateY(-8px); }\n          100% { transform: translateY(0); }\n        }\n\n        @keyframes back-pan {\n          0% { transform: translateX(0) translateY(0) scaleX(1); }\n          50% { transform: translateX(-18px) translateY(-3px) scaleX(1.02); }\n          100% { transform: translateX(0) translateY(0) scaleX(1); }\n        }\n\n        @keyframes front-float {\n          0% { transform: translateX(0) translateY(0) scaleX(1); }\n          25% { transform: translateX(12px) translateY(-8px) scaleX(1.01); }\n          50% { transform: translateX(0) translateY(0) scaleX(1); }\n          75% { transform: translateX(-12px) translateY(6px) scaleX(0.995); }\n          100% { transform: translateX(0) translateY(0) scaleX(1); }\n        }\n\n        @keyframes wave-tilt {\n          0% { transform: rotateZ(0deg); }\n          50% { transform: rotateZ(0.7deg); }\n          100% { transform: rotateZ(0deg); }\n        }\n\n        @keyframes shine {\n          0% { transform: translateX(-40%); opacity: 0.06; }\n          50% { transform: translateX(40%); opacity: 0.22; }\n          100% { transform: translateX(140%); opacity: 0.06; }\n        }\n\n  .g1-s1 { stop-color: #93c5fd; animation: gradA 8s ease-in-out infinite; }\n  .g1-s2 { stop-color: #60a5fa; animation: gradB 8s ease-in-out infinite; }\n  .g1-s3 { stop-color: #eff6ff; }\n  .g2-s1 { stop-color: #60a5fa; animation: gradC 10s ease-in-out infinite; }\n  .g2-s2 { stop-color: #e0f2ff; }\n\n  @keyframes gradA { 0% { stop-color:#93c5fd } 50% { stop-color:#a5d8ff } 100% { stop-color:#93c5fd } }\n  @keyframes gradB { 0% { stop-color:#60a5fa } 50% { stop-color:#3b82f6 } 100% { stop-color:#60a5fa } }\n  @keyframes gradC { 0% { stop-color:#60a5fa } 50% { stop-color:#7cc0ff } 100% { stop-color:#60a5fa } }\n\n        @media (prefers-reduced-motion: reduce) {\n          .wave-back, .wave-front, .divider-shine, .g1-s1, .g1-s2, .g2-s1 {\n            animation: none !important;\n          }\n        }\n      "})]})}function Oe(){return e.jsx("a",{href:"#main-content",onFocus:e=>{e.currentTarget.style.left="16px"},onBlur:e=>{e.currentTarget.style.left="-9999px"},style:{position:"absolute",left:"-9999px",top:"8px",zIndex:9999,background:"#fff",color:"#2563eb",padding:"8px 12px",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0,0,0,0.08)",textDecoration:"none",fontWeight:600},children:"Skip to content"})}function Me(){const A=d();return h.useEffect(()=>{const e=document.documentElement,A=e.style.scrollBehavior;return e.style.scrollBehavior="smooth",e.style.scrollPaddingTop="64px",()=>{e.style.scrollBehavior=A||"",e.style.scrollPaddingTop=""}},[]),e.jsxs(Ue,{showNavbar:!0,showFooter:!0,showHeader:!1,navbarVariant:"default",footerVariant:"default",className:"overflow-x-hidden bg-white min-h-screen flex flex-col",children:[e.jsx(Oe,{}),e.jsx(ke,{onCustomerClick:()=>A("/customer-enter"),onStaffClick:()=>A("/login"),onMobileScannerClick:()=>A("/mobile-scanner")}),e.jsxs("main",{id:"main-content",role:"main",className:"flex-1",children:[e.jsx(Le,{id:"features",title:"Key features",children:e.jsx(Se,{})}),e.jsx(Te,{className:"my-8"}),e.jsx(Le,{id:"about",title:"About us",children:e.jsx(Ie,{})}),e.jsx(Te,{className:"my-8"}),e.jsx(Le,{id:"faq",title:"Frequently asked questions",className:"mb-8",children:e.jsx(_e,{})})]})]})}function Pe(){return e.jsx("section",{id:"services",children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:[e.jsx("h1",{className:"text-4xl font-bold text-blue-600 mb-6",children:"Our Services"}),e.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"We offer a wide range of services to help you achieve your goals."}),e.jsxs("ul",{className:"list-disc list-inside text-gray-600",children:[e.jsx("li",{children:"Service 1: Description of service 1"}),e.jsx("li",{children:"Service 2: Description of service 2"}),e.jsx("li",{children:"Service 3: Description of service 3"})]})]})})}function De(){const e=[{label:"Account Info",icon:"ðŸ‘¤"},{label:"OTP Verification",icon:"ðŸ”’"},{label:"Business Details",icon:"ðŸ¢"},{label:"Document Upload",icon:"ðŸ“„"}],[A,t]=h.useState(0),[s,r]=h.useState({email:"",firstName:"",fullName:"",username:"",businessName:"",businessEmail:"",useAdminEmail:!1,businessType:"",customBusinessType:"",region:"",province:"",city:"",barangay:"",regionName:"",provinceName:"",cityName:"",barangayName:"",houseNumber:"",mobile:"",password:"",confirmPassword:"",otp:"",documents:[],documentTypes:[],acceptTerms:!1,acceptPrivacy:!1}),[n,a]=h.useState({}),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(!1),m=h.useRef(null);h.useEffect(()=>{m.current&&m.current.focus()},[A]),h.useEffect(()=>{1===A&&d&&p()},[A,d]),h.useEffect(()=>{1!==A||4!==s.otp.length||d||i||p()},[s.otp,A,d,i]);const g=e=>{const A={};if(0===e){const e=(r=s.email)?/^\S+@\S+\.\S+$/.test(r)?null:"Invalid email address":"Required";e&&(A.email=e),s.firstName||(A.firstName="Required"),s.fullName||(A.fullName="Required");const n=(t=s.username)?/^[a-zA-Z0-9_]{3,20}$/.test(t)?null:"Username must be 3-20 characters (letters, numbers, underscores)":"Required";n&&(A.username=n),s.mobile?/^\d{10,15}$/.test(s.mobile)||(A.mobile="Invalid mobile number"):A.mobile="Required",s.password?s.password.length<12?A.password="Password must be at least 12 characters long":/[A-Z]/.test(s.password)?/[a-z]/.test(s.password)?/\d/.test(s.password)?/[!@#$%^&*(),.?":{}|<>]/.test(s.password)||(A.password="Password must contain at least one special character"):A.password="Password must contain at least one number":A.password="Password must contain at least one lowercase letter":A.password="Password must contain at least one uppercase letter":A.password="Required",s.password!==s.confirmPassword&&(A.confirmPassword="Passwords do not match")}var t,r;if(1===e&&(s.otp?/^[A-Za-z0-9]{4}$/.test(s.otp)||(A.otp="Please enter a 4-character OTP"):A.otp="Required"),2===e&&(s.businessName||(A.businessName="Required"),s.useAdminEmail||s.businessEmail?s.useAdminEmail||!s.businessEmail||/^\S+@\S+\.\S+$/.test(s.businessEmail)||(A.businessEmail="Invalid email address"):A.businessEmail="Required",s.businessType||(A.businessType="Required"),"Others"!==s.businessType||s.customBusinessType||(A.customBusinessType="Please specify business type"),s.region||(A.region="Required"),s.province||(A.province="Required"),s.city||(A.city="Required"),s.barangay||(A.barangay="Required")),3===e){const e=["Business Registration Certificate (DTI/SEC/CDA)","Mayor's Permit / Business Permit","BIR Certificate of Registration (Form 2303)"];s.documents&&0!==s.documents.length||(A.documents="Please upload at least one business document"),s.documents.length!==s.documentTypes.length&&(A.documentTypes="Please specify document type for each uploaded file");const t=s.documentTypes.filter(e=>e),r=e.filter(e=>!t.includes(e));r.length>0&&(A.documents=`Missing required documents: ${r.join(", ")}`);const n={};s.documentTypes.forEach(e=>{e&&(n[e]=(n[e]||0)+1)});const a=Object.keys(n).filter(e=>n[e]>1);a.length>0&&(A.documentTypes=`Duplicate document types not allowed: ${a.join(", ")}`),s.acceptTerms?s.acceptPrivacy||(A.accept="You must acknowledge the Privacy Policy."):A.accept="You must accept the Terms and Conditions."}return a(A),0===Object.keys(A).length},p=async()=>{if(g())if(0===A){o(!0);try{const e=await(async(e,A)=>{try{return await R("/auth/check-existing",{method:"POST",body:JSON.stringify({email:e,username:A})})}catch(t){if(console.error("Error checking existing user:",t),t.data)throw t;throw new Error("Failed to check user availability. Please try again.")}})(s.email,s.username);if(e.exists){const A={};return"email"===e.field?A.email=e.message||"This email is already registered. Please use a different email or log in.":"username"===e.field?A.username=e.message||"This username is already taken. Please choose another one.":A.email=e.message||"This email or username is already registered.",void a(A)}await R("/otp/send",{method:"POST",body:JSON.stringify({email:s.email})}),t(e=>e+1)}catch(e){if(console.error("Error in handleNext:",e),409===e.status){const A=e.data||{},t={};"email"===A.field?t.email=A.message||"This email is already registered.":"username"===A.field?t.username=A.message||"This username is already taken.":t.email=A.message||"This email or username is already registered.",a(t)}else a({email:e.message||"Failed to verify account. Please try again."})}finally{o(!1)}}else if(1===A){if(d)return void t(e=>e+1);o(!0);try{await R("/otp/verify",{method:"POST",body:JSON.stringify({email:s.email,otp:s.otp})});u(!0),t(e=>e+1)}catch(e){console.error("OTP verification error:",e),a({otp:e.message||"Failed to verify OTP"}),r(e=>({...e,otp:""}))}finally{o(!1)}}else t(e=>e+1)};return{steps:e,step:A,setStep:t,form:s,setForm:r,errors:n,setErrors:a,loading:i,setLoading:o,success:l,isOtpVerified:d,setIsOtpVerified:u,inputRef:m,handleChange:e=>{const{name:A,value:t,type:s,checked:n}=e.target;r("useAdminEmail"===A?e=>({...e,[A]:n,businessEmail:n?e.email:""}):e=>({...e,[A]:"checkbox"===s?n:t}))},handleLocationChange:(e,A,t)=>{const s={};"region"===e?(s.province="",s.city="",s.barangay="",s.provinceName="",s.cityName="",s.barangayName=""):"province"===e?(s.city="",s.barangay="",s.cityName="",s.barangayName=""):"city"===e&&(s.barangay="",s.barangayName=""),r(r=>({...r,[e]:A,[`${e}Name`]:t,...s}))},validateStep:g,handleNext:p,handleBack:()=>t(e=>Math.max(0,e-1)),handleFinish:async()=>{if(g()){o(!0);try{const e=new FormData;e.append("email",s.email),e.append("firstName",s.firstName),e.append("fullName",s.fullName),e.append("username",s.username),e.append("businessName",s.businessName),e.append("businessType","Others"===s.businessType?s.customBusinessType:s.businessType),e.append("country","Philippines"),e.append("countryName","Philippines"),e.append("province",s.province),e.append("city",s.city),e.append("barangay",s.barangay),e.append("regionName",s.regionName),e.append("provinceName",s.provinceName),e.append("cityName",s.cityName),e.append("barangayName",s.barangayName),e.append("houseNumber",s.houseNumber),e.append("mobile",s.mobile),e.append("password",s.password),e.append("document_types",JSON.stringify(s.documentTypes)),s.documents.forEach(A=>{e.append("documents",A)});const A=await R("/business/register-with-documents",{method:"POST",body:e});localStorage.setItem("token",A.token),localStorage.setItem("user",JSON.stringify(A.user)),c(!0)}catch(e){a({general:e.message||"An error occurred."})}finally{o(!1)}}},progress:(A+1)/e.length*100}}function Ke({children:A,className:t="",variant:s="glass",padding:r="default",cardBg:n,...a}){const i=`rounded-lg transition-all duration-300 backdrop-blur-xl bg-white/60 border border-white/30 shadow-xl ${{glass:"bg-white/60 backdrop-blur-xl border border-white/30",bordered:"border-2 border-gray-200 hover:border-blue-200",flat:"",gradient:"bg-gradient-to-br from-white via-blue-50 to-blue-100 border border-blue-200"}[s]} ${{none:"",sm:"p-4",default:"p-6 md:p-8",lg:"p-8 md:p-12"}[r]} ${t}`;return e.jsxs("div",{className:`${i} ${n||""}`,tabIndex:0,...a,children:[A,e.jsx("style",{children:"\n        .emphasized-card {\n          background: linear-gradient(135deg, rgba(255,255,255,0.7) 60%, rgba(59,130,246,0.10) 100%);\n          box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.18), 0 1.5px 8px 0 rgba(59,130,246,0.10);\n          border: 2.5px solid rgba(59,130,246,0.13);\n          backdrop-filter: blur(18px) saturate(1.2);\n          border-radius: 2rem;\n          transition: box-shadow 0.25s, border 0.25s;\n        }\n        .emphasized-card:focus-within, .emphasized-card:hover {\n          box-shadow: 0 12px 40px 0 rgba(59,130,246,0.22), 0 2px 12px 0 rgba(59,130,246,0.13);\n          border-color: #3b82f6;\n        }\n      "})]})}function Re({percent:A}){return e.jsx("div",{className:"w-full h-2.5 bg-blue-100/70 rounded-full overflow-hidden shadow-inner","aria-label":"Progress bar","aria-valuenow":A,"aria-valuemin":0,"aria-valuemax":100,role:"progressbar",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 via-blue-500 to-blue-400 transition-all duration-500 rounded-full shadow-md",style:{width:`${A}%`}})})}function Ve({steps:A,currentStep:t}){const s=A=>{switch(A){case 0:return e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]});case 1:return e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]});case 2:return e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"18"}),e.jsx("rect",{x:"14",y:"8",width:"7",height:"13"}),e.jsx("path",{d:"M7 6h2M7 10h2M7 14h2M18 11h2M18 15h2"})]});default:return e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("path",{d:"M14 2v6h6"}),e.jsx("path",{d:"M16 13H8M16 17H8M10 9H8"})]})}};return e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative flex items-center justify-between",children:[A.map((A,r)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full border-2 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white z-10\n                ${r<t?"border-green-600 text-green-600":r===t?"border-blue-600 text-blue-600 ring-2 ring-blue-200":"border-gray-300 text-gray-400"}\n              `,"aria-current":r===t?"step":void 0,tabIndex:0,title:A.label,children:s(r)}),e.jsx("span",{className:"mt-2 text-xs font-medium text-center max-w-[90px] "+(r<=t?"text-blue-700":"text-gray-500"),children:A.label})]},r)),e.jsx("div",{className:"absolute left-0 right-0 top-5 h-1 bg-gray-200 rounded","aria-hidden":!0}),e.jsx("div",{className:"absolute left-0 top-5 h-1 bg-gradient-to-r from-blue-600 to-blue-400 rounded transition-all duration-500",style:{width:t/(A.length-1)*100+"%"},"aria-hidden":!0})]})})}function Ge({step:A,steps:t,progress:s,loading:r,errors:n,onBack:a,onNext:i,onFinish:o,children:l}){const c=1===A,d=A<t.length-1&&!c;return t.length,e.jsx(z,{variant:"gradientBlue",pattern:"dots",overlay:!0,floatingElements:!0,children:e.jsx("div",{className:"flex justify-center px-4 py-10",children:e.jsx(Ke,{className:"w-full max-w-5xl overflow-hidden rounded-3xl p-0",children:e.jsxs("div",{className:"md:flex",children:[e.jsx("aside",{className:"hidden md:flex md:w-5/12 items-center justify-center bg-gradient-to-br from-blue-600 via-blue-400 to-blue-500 p-10 relative",children:e.jsxs("div",{className:"text-center max-w-sm",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/15 text-white text-xs font-semibold mb-5 border border-white/30",children:[e.jsx("span",{children:"Quick setup"}),e.jsx("span",{className:"opacity-80",children:"â€¢"}),e.jsx("span",{children:"Secure"})]}),e.jsx("h3",{className:"text-white text-2xl font-bold mb-3",children:"Welcome to your business journey"}),e.jsx("p",{className:"text-white/90 text-sm mb-6",children:"Create your account, verify your email, add business details and upload documents. You're minutes away from a modern POS."}),e.jsxs("ul",{className:"text-left text-white/95 text-sm space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-white"})," ","Guided, step-by-step flow"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-white"})," ","Save & resume automatically"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-white"})," ","Bankâ€‘grade security"]})]})]})}),e.jsxs("main",{className:"w-full md:w-7/12 p-6 md:p-10 flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(g,{to:"/",className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to home"]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(Re,{percent:s})})}),e.jsx("div",{className:"mt-4",children:e.jsx(Ve,{steps:t,currentStep:A})})]}),e.jsxs("div",{className:"flex-1",children:[n?.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:n.general}),e.jsx("div",{className:"max-w-lg",children:l})]}),d&&e.jsx("div",{className:"mt-8 md:mt-6 flex items-center justify-center",children:e.jsx(q,{onClick:i,disabled:r,variant:"primary",className:"w-48",children:r?e.jsx(Y,{size:"sm"}):"Continue"})}),e.jsx("div",{className:"mt-4 text-[11px] text-gray-500 text-center",children:"Your data is encrypted in transit and at rest."})]})]})})})})}const We=h.forwardRef(({type:A="text",name:t,value:s,onChange:r,placeholder:n="",className:a="",error:i,variant:o="glass",suffix:l,size:c="md",microinteraction:d=!0,...u},h)=>{const m=`w-full rounded-xl text-base text-gray-900 transition-all duration-200 focus:outline-none focus:ring-1 focus:ring-blue-400 placeholder:text-gray-400 bg-white/60 backdrop-blur-md border border-white/30 shadow-sm ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-4 py-3 text-lg"}[c]} ${{glass:i?"border-red-400 ring-red-200":"border-white/30 hover:border-blue-300",bordered:i?"border-red-400 ring-red-200":"border-2 border-blue-400",underline:i?"border-red-400 ring-red-200":"border-b-2 border-blue-400 rounded-none",default:i?"border-red-400 ring-red-200":"border-gray-300 hover:border-blue-300"}[o]} ${l?"pr-10":""} ${d} ${a} ${i?"buzz":""}`;return e.jsxs("div",{className:"relative "+(i?"buzz":""),children:[e.jsx("input",{ref:h,type:A,name:t,value:s,onChange:r,placeholder:n,className:m,"aria-invalid":!!i,"aria-describedby":i?`${t}-error`:void 0,...u}),l&&e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-auto",children:l}),i&&e.jsx("p",{id:`${t}-error`,className:"text-red-500 text-xs mt-1 font-medium",role:"alert",children:i})]})});function ze({name:A,value:t,onChange:s,placeholder:r="Password",error:n,autoComplete:a="current-password",className:i="",variant:o="glass",size:l="md",microinteraction:c=!0,...d}){const[u,m]=h.useState(!1),g=`w-full rounded-xl text-base text-gray-900 transition-all duration-200 focus:outline-none focus:ring-1 focus:ring-blue-400 placeholder:text-gray-400 bg-white/60 backdrop-blur-md border border-white/30 shadow-sm ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-4 py-3 text-lg"}[l]} ${{glass:n?"border-red-400 ring-red-200":"border-white/30 hover:border-blue-300",bordered:n?"border-red-400 ring-red-200":"border-2 border-blue-400",underline:n?"border-red-400 ring-red-200":"border-b-2 border-blue-400 rounded-none",default:n?"border-red-400 ring-red-200":"border-gray-300 hover:border-blue-300"}[o]} pr-12 ${c} ${i}`;return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",name:A,value:t,onChange:s,placeholder:r,className:g,autoComplete:a,"aria-invalid":!!n,"aria-describedby":n?`${A}-error`:void 0,...d}),e.jsx("button",{type:"button",onClick:()=>{m(e=>!e)},className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors duration-200 focus:outline-none focus:text-blue-500","aria-label":u?"Hide password":"Show password",tabIndex:0,children:u?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),n&&e.jsx("p",{id:`${A}-error`,className:"text-red-500 text-xs mt-1 font-medium",role:"alert",children:n})]})}We.displayName="Input";const $e="https://psgc.cloud/api";function Je({form:A,errors:t,handleLocationChange:s}){const[r,n]=h.useState([]),[a,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,m]=h.useState({regions:!1,provinces:!1,cities:!1,barangays:!1}),[g,p]=h.useState(null);h.useEffect(()=>{(async()=>{m(e=>({...e,regions:!0})),p(null);try{const e=await async function(){const e=await fetch(`${$e}/regions`);if(!e.ok)throw new Error("Failed to fetch regions");return e.json()}();n(e)}catch(e){console.error(e),p("Failed to load regions. Please check your connection and try again.")}finally{m(e=>({...e,regions:!1}))}})()},[]),h.useEffect(()=>{if(A.region){(async()=>{m(e=>({...e,provinces:!0}));try{const e=await async function(e){const A=await fetch(`${$e}/regions/${e}/provinces`);if(!A.ok)throw new Error("Failed to fetch provinces");return A.json()}(A.region);i(e)}catch(e){console.error(e)}finally{m(e=>({...e,provinces:!1}))}})()}},[A.region]),h.useEffect(()=>{if(A.province){(async()=>{m(e=>({...e,cities:!0}));try{const e=await async function(e){const A=await fetch(`${$e}/provinces/${e}/cities-municipalities`);if(!A.ok)throw new Error("Failed to fetch cities");return A.json()}(A.province);l(e)}catch(e){console.error(e)}finally{m(e=>({...e,cities:!1}))}})()}},[A.province]),h.useEffect(()=>{if(A.city){(async()=>{m(e=>({...e,barangays:!0}));try{const e=await async function(e){const A=await fetch(`${$e}/cities-municipalities/${e}/barangays`);if(!A.ok)throw new Error("Failed to fetch barangays");return A.json()}(A.city);d(e)}catch(e){console.error(e)}finally{m(e=>({...e,barangays:!1}))}})()}},[A.city]);const x=e=>{const{name:A,value:t}=e.target,r=e.target.options[e.target.selectedIndex],n=r?r.text:"";s(A,t,n)};return e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Region ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"region",value:A.region,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{borderColor:t.region?"#ef4444":""},disabled:u.regions,children:[e.jsx("option",{value:"",children:u.regions?"Loading...":"Select Region"}),r.map(A=>e.jsx("option",{value:A.code,children:A.name},A.code))]}),t.region&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.region}),g&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:g})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Province ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"province",value:A.province,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{borderColor:t.province?"#ef4444":""},disabled:!A.region||u.provinces,children:[e.jsx("option",{value:"",children:u.provinces?"Loading...":"Select Province"}),a.map(A=>e.jsx("option",{value:A.code,children:A.name},A.code))]}),t.province&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.province})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["City/Municipality ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"city",value:A.city,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{borderColor:t.city?"#ef4444":""},disabled:!A.province||u.cities,children:[e.jsx("option",{value:"",children:u.cities?"Loading...":"Select City/Municipality"}),o.map(A=>e.jsx("option",{value:A.code,children:A.name},A.code))]}),t.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.city})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Barangay ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"barangay",value:A.barangay,onChange:x,className:"w-full px-3 py-2 border border--gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{borderColor:t.barangay?"#ef4444":""},disabled:!A.city||u.barangays,children:[e.jsx("option",{value:"",children:u.barangays?"Loading...":"Select Barangay"}),c.map(A=>e.jsx("option",{value:A.code,children:A.name},A.code))]}),t.barangay&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.barangay})]})]})}function qe({documents:A,documentTypes:t,onDocumentsChange:s,error:r}){const[n,a]=h.useState([]),i=["Business Registration Certificate (DTI/SEC/CDA)","Mayor's Permit / Business Permit","BIR Certificate of Registration (Form 2303)"],o=["Barangay Business Clearance","Fire Safety Inspection Certificate (if applicable)","Sanitary Permit (for food businesses)"],l=[...i,...o,"Other Business Document"],c=t.filter(e=>e),d=i.filter(e=>!c.includes(e));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm text-gray-700 font-medium",children:["Upload Business Documents ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Drag and drop files here, or click to browse"}),e.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Browse Files",e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.gif",onChange:e=>{const r=Array.from(e.target.files||[]);if(0===r.length)return;const n=["application/pdf","image/jpeg","image/jpg","image/png","image/gif"],i=e=>`${e.name}|${e.size}|${e.lastModified||""}`,o=new Set(A.map(i)),l=[],c=[];if(r.forEach(e=>{const A=i(e);if(o.has(A))return void c.push({file:e,reason:"Duplicate file"});if(!n.includes(e.type))return void c.push({file:e,reason:"Unsupported file type. Only PDF, JPG, PNG, GIF allowed."});if(e.size>10485760)return void c.push({file:e,reason:"File too large. Maximum 10MB per file."});const t=e.name.split(".").pop()?.toLowerCase();["pdf","jpg","jpeg","png","gif"].includes(t)?(l.push(e),o.add(A)):c.push({file:e,reason:"Invalid file extension."})}),l.length>0){const e=[...A,...l],r=[...t,...l.map(()=>"")];s(e,r),a([])}c.length>0&&a(c.map(({file:e,reason:A})=>`${e.name}: ${A}`)),e.target.value=""},className:"hidden"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Accepted formats: PDF, JPG, PNG, GIF. Maximum file size: 10MB per file. Secure uploads only."})]}),n.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Upload Errors:"}),e.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:n.map((A,t)=>e.jsxs("li",{children:["â€¢ ",A]},t))})]}),A.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Uploaded Documents:"}),A.map((r,n)=>{const a=i.includes(t[n]),c=o.includes(t[n]);return e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border "+(a?"bg-green-50 border-green-200":c?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"),children:[e.jsx("div",{className:"flex-shrink-0",children:"application/pdf"===r.type?e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(r.size/1024/1024).toFixed(2)," MB â€¢ ",r.type||"unknown"]}),a&&e.jsx("span",{className:"inline-block mt-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Required"}),c&&e.jsx("span",{className:"inline-block mt-1 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:"Optional"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("select",{value:t[n]||"",onChange:e=>((e,r)=>{const n=[...t];n[e]=r,s(A,n)})(n,e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select document type"}),l.map(A=>e.jsx("option",{value:A,children:A},A))]})}),e.jsx("button",{type:"button",onClick:()=>(e=>{const r=A.filter((A,t)=>t!==e),n=t.filter((A,t)=>t!==e);s(r,n)})(n),className:"text-red-600 hover:text-red-800 text-sm p-1",title:"Remove document",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},n)})]}),d.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Missing Required Documents:"}),e.jsx("ul",{className:"text-sm text-yellow-700 space-y-1",children:d.map((A,t)=>e.jsxs("li",{children:["â€¢ ",A]},t))})]}),r&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r})]})}function Ye({hook:A,isOtpVerified:t,onOpenTerms:s,onOpenPrivacy:r}){const{step:n,form:a,errors:i,loading:o,inputRef:l,handleChange:c}=A;function d(){const[A,t]=p.useState([]),[s,r]=p.useState(null);return p.useEffect(()=>{const e=sessionStorage.getItem("auth_token");let A=null;try{const e=JSON.parse(sessionStorage.getItem("user")||"null");A=e?.businessId||e?.business_id||null}catch{}e&&A&&(async()=>{try{const s=await R(`/documents/business/${A}`,{headers:{Authorization:`Bearer ${e}`}});t(Array.isArray(s.documents)?s.documents:[]),r(s.verification||null)}catch{}})()},[]),A&&0!==A.length?e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Previously Uploaded"}),e.jsx("ul",{className:"space-y-2 text-sm",children:A.map(A=>e.jsxs("li",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-700",children:[A.document_type," â€” ",A.document_name]}),e.jsx("span",{className:"text-gray-500",children:(A.mime_type||"").split("/").pop()})]},A.document_id))}),s?.verification_status&&e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Verification status: ",s.verification_status]})]}):null}switch(n){case 0:return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ee,{className:"text-2xl md:text-3xl text-gray-900",children:"Account Info"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Email"}),e.jsx(We,{ref:l,name:"email",value:a.email,onChange:c,placeholder:"Enter your email address",type:"email",error:i.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"First Name"}),e.jsx(We,{name:"firstName",value:a.firstName,onChange:c,placeholder:"Enter your first name",type:"text",error:i.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Last Name"}),e.jsx(We,{name:"fullName",value:a.fullName,onChange:c,placeholder:"Enter your last name",type:"text",error:i.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Username"}),e.jsx(We,{name:"username",value:a.username,onChange:c,placeholder:"Choose a username",type:"text",error:i.username,helpText:"3-20 characters, letters, numbers, and underscores only"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Mobile Number"}),e.jsx(We,{name:"mobile",value:a.mobile,onChange:c,placeholder:"09xxxxxxxxx",type:"tel",maxLength:15,error:i.mobile})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Password"}),e.jsx(ze,{name:"password",value:a.password,onChange:c,placeholder:"Enter password",error:i.password}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"Password must contain:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[e.jsxs("div",{className:"flex items-center "+(a.password.length>=12?"text-green-600":"text-gray-500"),children:[e.jsx("span",{className:"mr-2 "+(a.password.length>=12?"âœ“":"â—‹")}),"At least 12 characters"]}),e.jsxs("div",{className:"flex items-center "+(/[A-Z]/.test(a.password)?"text-green-600":"text-gray-500"),children:[e.jsx("span",{className:"mr-2 "+(/[A-Z]/.test(a.password)?"âœ“":"â—‹")}),"One uppercase letter (A-Z)"]}),e.jsxs("div",{className:"flex items-center "+(/[a-z]/.test(a.password)?"text-green-600":"text-gray-500"),children:[e.jsx("span",{className:"mr-2 "+(/[a-z]/.test(a.password)?"âœ“":"â—‹")}),"One lowercase letter (a-z)"]}),e.jsxs("div",{className:"flex items-center "+(/\d/.test(a.password)?"text-green-600":"text-gray-500"),children:[e.jsx("span",{className:"mr-2 "+(/\d/.test(a.password)?"âœ“":"â—‹")}),"One number (0-9)"]}),e.jsxs("div",{className:"flex items-center "+(/[!@#$%^&*(),.?":{}|<>]/.test(a.password)?"text-green-600":"text-gray-500"),children:[e.jsx("span",{className:"mr-2 "+(/[!@#$%^&*(),.?":{}|<>]/.test(a.password)?"âœ“":"â—‹")}),'One special character (!@#$%^&*(),.?":',"|","<",">",")"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Password Confirmation"}),e.jsx(ze,{name:"confirmPassword",value:a.confirmPassword,onChange:c,placeholder:"Re-enter password",error:i.confirmPassword})]})]}),e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["By continuing, you agree to our"," ",e.jsx("button",{type:"button",onClick:s,className:"text-blue-700 underline hover:text-blue-800",children:"Terms & Conditions"})," ","and"," ",e.jsx("button",{type:"button",onClick:r,className:"text-blue-700 underline hover:text-blue-800",children:"Privacy Policy"}),"."]})]});case 1:return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ee,{className:"text-2xl md:text-3xl text-gray-900",children:"OTP Verification"}),e.jsxs("p",{className:"text-gray-700 mb-2 text-sm",children:["We've sent a 4-character verification code to"," ",e.jsx("strong",{children:a.email}),"."]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Enter OTP"}),e.jsx(We,{ref:l,name:"otp",value:a.otp,onChange:e=>{const t=e.target.value.slice(0,4);c({target:{name:"otp",value:t}}),i.otp&&A.setErrors({...i,otp:null})},placeholder:"Enter 4-character code",type:"text",maxLength:4,error:i.otp,disabled:t}),4===a.otp.length&&!t&&!o&&e.jsxs("div",{className:"mt-2 text-blue-600 text-sm font-medium flex items-center",children:[e.jsx(Y,{size:"sm",className:"mr-2"}),"Auto-verifying OTP..."]}),o&&e.jsxs("div",{className:"mt-2 text-gray-700 text-sm font-medium flex items-center",children:[e.jsx(Y,{size:"sm",className:"mr-2"}),"Verifying OTP..."]}),t&&e.jsxs("div",{className:"mt-2 text-green-600 text-sm font-medium flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 20 20","aria-hidden":!0,children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"OTP verified successfully!"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:async()=>{A.setLoading(!0);try{await R("/otp/resend",{method:"POST",body:JSON.stringify({email:a.email})}),alert("New OTP sent successfully!")}catch(e){alert("Failed to resend OTP")}finally{A.setLoading(!1)}},className:"text-gray-700 hover:text-gray-900 text-sm underline",disabled:o,children:o?"Sending...":"Resend OTP"})})]});case 2:return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ee,{className:"text-2xl md:text-3xl text-gray-900",children:"Business Details"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Business Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(We,{name:"businessName",value:a.businessName,onChange:c,placeholder:"Enter business name",error:i.businessName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Business Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"useAdminEmail",name:"useAdminEmail",checked:a.useAdminEmail,onChange:c,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"useAdminEmail",className:"text-sm text-gray-700",children:["Use admin email (",a.email,")"]})]}),!a.useAdminEmail&&e.jsx(We,{name:"businessEmail",value:a.businessEmail,onChange:c,placeholder:"Enter business email",type:"email",error:i.businessEmail})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Business Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"businessType",value:a.businessType,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{borderColor:i.businessType?"#ef4444":""},children:[e.jsx("option",{value:"",children:"Select business type"}),e.jsx("option",{value:"Grocery Store",children:"Grocery Store"}),e.jsx("option",{value:"Pharmacy",children:"Pharmacy"}),e.jsx("option",{value:"Clothing Store",children:"Clothing Store"}),e.jsx("option",{value:"Electronics Store",children:"Electronics Store"}),e.jsx("option",{value:"Hardware Store",children:"Hardware Store"}),e.jsx("option",{value:"Bookstore",children:"Bookstore"}),e.jsx("option",{value:"Convenience Store",children:"Convenience Store"}),e.jsx("option",{value:"Others",children:"Others"})]}),i.businessType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.businessType}),"Others"===a.businessType&&e.jsx("div",{className:"mt-2",children:e.jsx(We,{name:"customBusinessType",value:a.customBusinessType,onChange:c,placeholder:"Please specify your business type",error:i.customBusinessType})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 mt-4 font-semibold text-gray-900",children:"Business Location"}),e.jsx(Je,{form:a,errors:i,handleLocationChange:A.handleLocationChange})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"House no./ Street Name / Landmark (optional)"}),e.jsx(We,{name:"houseNumber",value:a.houseNumber,onChange:c,placeholder:"Enter house no., street, or landmark (optional)"})]})]})]});case 3:return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ee,{className:"text-2xl md:text-3xl text-gray-900",children:"Business Documents"}),e.jsx("p",{className:"text-gray-700 mb-4 text-sm",children:"Please upload your business documents for verification. These documents help us verify that your business is legitimate and complies with Philippine regulations."}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"âš ï¸ REQUIRED Documents (Must Upload All 3):"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-1 font-medium",children:[e.jsx("li",{children:"â–º Business Registration Certificate (DTI/SEC/CDA)"}),e.jsx("li",{children:"â–º Mayor's Permit / Business Permit"}),e.jsx("li",{children:"â–º BIR Certificate of Registration (Form 2303)"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Additional Documents (Optional):"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Barangay Business Clearance"}),e.jsx("li",{children:"â€¢ Fire Safety Inspection Certificate (if applicable)"}),e.jsx("li",{children:"â€¢ Sanitary Permit (for food businesses)"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(qe,{documents:a.documents,documentTypes:a.documentTypes,onDocumentsChange:(e,A)=>{c({target:{name:"documents",value:e}}),c({target:{name:"documentTypes",value:A}})},error:i.documents||i.documentTypes}),e.jsx(d,{})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Important:"})," After submitting your documents, please allow 1-3 business days for verification. You will receive an email notification once the review is complete."]})}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"acceptTerms",name:"acceptTerms",type:"checkbox",checked:a.acceptTerms,onChange:c,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsxs("label",{htmlFor:"acceptTerms",className:"text-gray-700",children:["I agree to the"," ",e.jsx("button",{type:"button",onClick:s,className:"text-blue-600 hover:text-blue-800 underline",children:"Terms and Conditions"})]})})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"acceptPrivacy",name:"acceptPrivacy",type:"checkbox",checked:a.acceptPrivacy,onChange:c,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsxs("label",{htmlFor:"acceptPrivacy",className:"text-gray-700",children:["I have read the"," ",e.jsx("button",{type:"button",onClick:r,className:"text-blue-600 hover:text-blue-800 underline",children:"Privacy Policy"})]})})]}),i.accept&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:i.accept})]}),e.jsxs("div",{className:"mt-8 flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsxs("button",{type:"button",onClick:A.handlePrevious,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsx("button",{type:"button",onClick:A.handleFinish,disabled:o||!a.documents||0===a.documents.length||!a.acceptTerms||!a.acceptPrivacy,className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):"Submit Application"})]})]});default:return null}}function Xe({onOpenTerms:A,onOpenPrivacy:t}){const s=De(),{step:r,steps:n,progress:a,loading:i,errors:o,handleBack:l,handleNext:c,handleFinish:d,success:u,isOtpVerified:h}=s;return u?e.jsx(Ge,{step:r,steps:n,progress:100,loading:!1,errors:{},children:e.jsx("div",{className:"flex flex-col items-center justify-center px-4 py-12",children:e.jsxs(Ke,{className:"rounded-3xl p-10 flex flex-col items-center max-w-2xl",children:[e.jsx(Ee,{className:"text-3xl md:text-4xl text-gray-900 mb-4",children:"Application Submitted!"}),e.jsx("p",{className:"text-gray-800 mb-6 text-base text-center max-w-md",children:"Your business application has been submitted successfully! Our verification team will review your documents."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 w-full max-w-md",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Document verification (1-3 business days)"}),e.jsx("li",{children:"â€¢ Email notification once complete"}),e.jsx("li",{children:"â€¢ Full access upon approval"})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 w-full max-w-md",children:e.jsxs("p",{className:"text-sm text-yellow-800 text-center",children:[e.jsx("strong",{children:"Please wait 1-3 business days"})," for verification. You will receive an email notification once the review is complete."]})}),e.jsx(q,{label:"Return to Home",onClick:()=>window.location.href="/",className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-full font-semibold shadow hover:from-blue-700 hover:to-blue-800 transition-colors"})]})})}):e.jsx(Ge,{step:r,steps:n,progress:a,loading:i,errors:o,onBack:l,onNext:c,onFinish:d,children:e.jsx(Ye,{hook:s,isOtpVerified:h,onOpenTerms:A,onOpenPrivacy:t})})}function Ze(){const[A,t]=h.useState(!1),[s,r]=h.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Xe,{onOpenTerms:()=>t(!0),onOpenPrivacy:()=>r(!0)}),e.jsx(je,{open:A,onClose:()=>t(!1)}),e.jsx(Ce,{open:s,onClose:()=>r(!1)})]})}function eA(){const[A,t]=h.useState({name:"",email:"",message:""}),[s,r]=h.useState(!1),n=e=>{const{name:A,value:s}=e.target;t(e=>({...e,[A]:s}))};return s?e.jsx("section",{id:"contact",className:"min-h-screen flex flex-col items-center justify-center px-4 py-12 bg-gray-50",children:e.jsxs("div",{className:"max-w-xl w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-green-700 mb-4",children:"Thank You!"}),e.jsx("p",{className:"text-gray-700 text-lg mb-6",children:"Your concern has been submitted successfully. We will get back to you soon."}),e.jsx(g,{to:"/",className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-full font-medium cursor-pointer inline-block text-center",children:"Back to Homepage"})]})}):e.jsx("section",{id:"contact",className:"min-h-screen flex flex-col items-center justify-center px-4 py-12 bg-gray-50",children:e.jsxs("div",{className:"max-w-xl w-full bg-white rounded-xl shadow-lg p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-blue-700 mb-4 text-center",children:"Contact Us"}),e.jsx("p",{className:"text-gray-700 text-lg mb-6 text-center",children:"Have questions or need support? Reach out to the eKahera team!"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),r(!0)},className:"flex flex-col space-y-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Your Name",value:A.name,onChange:n,className:"border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0}),e.jsx("input",{type:"email",name:"email",placeholder:"Your Email",value:A.email,onChange:n,className:"border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0}),e.jsx("textarea",{name:"message",placeholder:"Your Message",value:A.message,onChange:n,className:"border border-gray-300 rounded px-4 py-2 h-32 resize-none focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0}),e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-full font-medium cursor-pointer",children:"Send Message"})]}),e.jsxs("div",{className:"mt-6 text-center text-gray-500 text-sm",children:["Or email us at"," ",e.jsx("a",{href:"mailto:support@ekahera.com",className:"text-blue-600 underline",children:"support@ekahera.com"})]})]})})}function AA(){const A=d(),[t,s]=h.useState({email:"",password:""}),[r,n]=h.useState({}),[a,i]=h.useState(!1),[o,l]=h.useState(""),c=e=>{s({...t,[e.target.name]:e.target.value}),r[e.target.name]&&n({...r,[e.target.name]:""})};return e.jsxs(z,{variant:"gradientBlue",pattern:"dots",overlay:!0,floatingElements:!0,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 via-indigo-50/30 to-purple-50/20 pointer-events-none"}),e.jsx("main",{className:"flex h-screen items-center justify-center px-2 relative z-10 overflow-hidden",children:e.jsxs(Ke,{variant:"glass",className:"w-full max-w-4xl flex flex-col md:flex-row overflow-hidden p-0 animate-fadeIn rounded-2xl shadow-xl",children:[e.jsx("section",{className:"w-full md:w-1/2 flex flex-col justify-center items-center p-6 md:p-12 rounded-l-2xl bg-white/90 backdrop-blur-xl",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(g,{to:"/",className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to home"]})}),e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx(Ee,{variant:"primary",size:"lg",className:"text-center",children:"Log In"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Enter your credentials to access your account"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return t.email||(e.email="Email or username is required"),t.password||(e.password="Password is required"),n(e),0===Object.keys(e).length})()){i(!0),l("");try{const{token:e,user:s}=await R("/api/auth/login",{method:"POST",body:JSON.stringify({email:t.email,password:t.password})});sessionStorage.setItem("auth_token",e),sessionStorage.setItem("user",JSON.stringify(s));const r=(s?.role||"").toLowerCase();A("cashier"===r?"/cashier-pos":"superadmin"===r?"/superadmin":"admin"===r?"/dashboard":"/")}catch(s){l("Login Failed")}finally{i(!1)}}},className:"w-full flex flex-col gap-4",noValidate:!0,children:[e.jsx(We,{name:"email",value:t.email,onChange:c,placeholder:"Email or username",type:"text",error:r.email,autoComplete:"username",required:!0}),e.jsx("div",{className:"relative",children:e.jsx(ze,{name:"password",value:t.password,onChange:c,placeholder:"Password",error:r.password,autoComplete:"current-password",required:!0,className:"pr-12"})}),e.jsx("div",{className:"flex items-center justify-end mt-1",children:e.jsxs("div",{className:"text-sm text-gray-500",children:["Need an account?"," ",e.jsx("a",{href:"/get-started",className:"text-blue-600 hover:underline",children:"Get started"})]})}),o&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-3 flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-sm font-medium text-red-700",children:(()=>{try{const e=JSON.parse(o);return e.error||e.message||o}catch{return o}})()})]}),e.jsxs(q,{type:"submit",variant:"primary",disabled:a,className:"w-full flex items-center justify-center h-12 mt-2 text-lg font-medium transition-all duration-300 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]",children:[a&&e.jsx(Y,{size:"sm",className:"mr-2"}),a?"Logging in...":"Login"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"mt-6 text-gray-400 text-xs",children:"Secure login powered by eKahera"})})]})}),e.jsxs("aside",{className:"hidden md:flex items-center rounded-r-2xl bg-gradient-to-br from-indigo-500 via-blue-400 to-sky-400 w-1/2 p-10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-7 -z-10 pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-[radial-gradient(circle_at_1px_1px,rgba(255,255,255,0.25)_1px,transparent_0)] bg-[length:24px_24px]"})}),e.jsxs("div",{className:"relative z-10 flex flex-col justify-center items-start max-w-sm pl-6",children:[e.jsx("h2",{className:"text-white font-extrabold text-3xl leading-tight mb-3",children:"Welcome back!"}),e.jsx("p",{className:"text-white/90 text-base max-w-xs mb-6",children:"Sign in to continue managing transactions, inventory and sales from anywhere."}),e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 text-white/90 px-3 py-1 text-xs backdrop-blur-sm ring-1 ring-white/20",children:[e.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-emerald-300 animate-pulse"}),"Secure area â€¢ eKahera"]})]})]})]})}),e.jsx("style",{children:"\n    html, body, #root {\n      height: 100%;\n      margin: 0;\n      padding: 0;\n      overflow: hidden; /* No scroll */\n    }\n  "})]})}const tA=[{id:"dashboard",label:"Dashboard",path:"/dashboard",icon:e.jsxs("svg",{width:"28",height:"28",fill:"none",stroke:"currentColor",strokeWidth:"2.2",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"})]})},{id:"pos",label:"POS",path:"/pos",icon:e.jsxs("svg",{width:"28",height:"28",fill:"none",stroke:"currentColor",strokeWidth:"2.2",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"7",width:"18",height:"13",rx:"2"}),e.jsx("path",{d:"M16 3v4M8 3v4"})]})},{id:"cashiers",label:"Cashiers",path:"/cashiers",icon:e.jsxs("svg",{width:"28",height:"28",fill:"none",stroke:"currentColor",strokeWidth:"2.2",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("path",{d:"M5.5 21a7.5 7.5 0 0 1 13 0"})]})},{id:"inventory",label:"Inventory",path:"/inventory",icon:e.jsxs("svg",{width:"28",height:"28",fill:"none",stroke:"currentColor",strokeWidth:"2.2",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"7",width:"18",height:"13",rx:"2"}),e.jsx("path",{d:"M16 3v4M8 3v4"})]})},{id:"logs",label:"Logs",path:"/logs",icon:e.jsxs("svg",{width:"28",height:"28",fill:"none",stroke:"currentColor",strokeWidth:"2.2",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"5",y:"3",width:"14",height:"18",rx:"2"}),e.jsx("path",{d:"M9 7h6M9 11h6M9 15h2"})]})},{id:"profile",label:"Profile",path:"/profile",icon:e.jsxs("svg",{width:"28",height:"28",fill:"none",stroke:"currentColor",strokeWidth:"2.2",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}],sA="bg-white/20 backdrop-blur-md border-r border-white/30 shadow-xl flex flex-col py-4 px-4 w-48 h-screen fixed z-20",rA="mb-8 flex items-center gap-3 group cursor-pointer px-2",nA="flex-col gap-5 w-full",aA="group flex items-center w-full py-3 px-3 rounded-lg transition-all duration-200 font-medium text-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 relative",iA="bg-blue-600/80 backdrop-blur-sm text-white shadow-lg",oA="bg-transparent text-gray-700 hover:bg-blue-100 hover:text-gray-900 hover:backdrop-blur-sm",lA="mr-3 relative flex-shrink-0",cA="leading-tight",dA="absolute left-full ml-3 top-1/2 -translate-y-1/2 bg-gray-800 text-white text-xs rounded-md px-2 py-1 shadow-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 z-50 whitespace-nowrap",uA="text-gray-600 text-xs font-semibold uppercase tracking-wider mb-2 mt-0 px-3",hA="mt-auto flex items-center w-full py-3 px-3 rounded-lg transition-all duration-200 font-medium text-sm text-gray-700 hover:bg-red-50 hover:text-red-700 hover:backdrop-blur-sm hover:shadow-md relative group",mA="mr-3 flex-shrink-0",gA="#ffffff",pA="#4b5563",xA=({item:A,isActive:t})=>{const s=t?gA:pA;return e.jsxs(x,{to:A.path,"aria-label":A.label,className:`${aA} ${t?iA:oA}`,tabIndex:0,children:[e.jsx("span",{className:lA,children:p.cloneElement(A.icon,{stroke:s,width:"20",height:"20"})}),e.jsx("span",{className:cA,children:A.label}),e.jsx("span",{className:dA,children:A.label})]},A.id)},fA=({isMobile:A,onLogoutClick:t})=>{const[s,r]=p.useState(!1),n=()=>{r(!1)},a=()=>e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})});return e.jsxs(e.Fragment,{children:[e.jsxs("aside",{className:sA,children:[e.jsx("div",{className:rA,onClick:()=>navigate("/dashboard"),role:"button",tabIndex:0,children:e.jsx("div",{className:"transition-all duration-300",children:e.jsx(se,{size:42})})}),e.jsxs("nav",{className:`${nA} h-full flex flex-col overflow-y-auto overflow-x-hidden`,"aria-label":"Main navigation",children:[e.jsx("div",{className:uA,children:"MENU"}),tA.map(A=>e.jsx(xA,{item:A,isActive:window.location.pathname===A.path},A.id)),e.jsx("div",{className:""+(A?"block":"mt-auto"),children:e.jsxs("button",{onClick:()=>{r(!0)},className:hA,"aria-label":"Logout",children:[e.jsx("span",{className:mA,children:e.jsx(a,{})}),e.jsx("span",{className:cA,children:"Logout"})]})})]})]}),s&&e.jsxs("div",{className:"fixed inset-0 z-90 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 z-90",onClick:n}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-[92%] max-w-md z-100 p-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-50 via-red-50/80 to-orange-50/50 border-b border-red-100 px-6 py-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"white",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Confirm Logout"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure you want to log out?"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-6",children:"You will be redirected to the login page and your session will be ended."}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:"Cancel"}),e.jsxs("button",{onClick:()=>{r(!1),t&&t()},className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})]})]})]})};function wA({title:A,children:t,className:s="",...r}){return e.jsxs(Ke,{className:`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl group ${s}`,...r,children:[A&&e.jsx(Ee,{size:"md",align:"left",className:"text-gray-900 mb-6 font-bold group-hover:text-blue-600 transition-colors duration-300",children:A}),e.jsxs("div",{className:"relative",children:[t,e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-blue-50/20 rounded-lg pointer-events-none"})]})]})}function bA({stats:A,className:t="",...s}){return e.jsx(Ke,{className:`bg-white backdrop-blur-sm border border-gray-100 shadow-sm rounded-2xl ${t}`,...s,children:e.jsxs("div",{className:"grid grid-cols-1 divide-y divide-gray-200/60 p-6 md:p-8 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"â‚±"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Today's Sales"}),e.jsxs("span",{className:"text-2xl md:text-xl font-bold text-gray-900 mt-0.5",children:["â‚±",Number(A.sales||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"â†»"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Transactions"}),e.jsx("span",{className:"text-2xl md:text-xl font-bold text-gray-900 mt-0.5",children:Number(A.transactions||0).toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"â˜…"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Top Product"}),e.jsx("span",{className:"text-xl md:text-lg font-bold text-gray-900 mt-0.5 leading-tight line-clamp-2",children:A.topProduct||"-"})]})]}),e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"#"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Total Items Sold"}),e.jsx("span",{className:"text-2xl md:text-xl font-bold text-gray-900 mt-0.5",children:Number(A.totalItemsSold||0).toLocaleString()})]})]})]})})}const BA=({trend:A})=>"up"===A?e.jsx("span",{className:"text-blue-600 font-semibold text-xl",children:"â†—"}):"down"===A?e.jsx("span",{className:"text-blue-400 font-semibold text-xl",children:"â†˜"}):e.jsx("span",{className:"text-gray-400 font-semibold text-xl",children:"â†’"});function yA(){const[A,t]=h.useState([]),[s,r]=h.useState([]),[n,a]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState({}),[m,g]=h.useState({cashFlow:0,operatingCosts:0,profitGrowth:0}),p=["#3b82f6","#1d4ed8","#1e40af","#2563eb","#60a5fa","#93c5fd","#bfdbfe"];return h.useEffect(()=>{(async()=>{try{const[e,A,s,n,i,l,d]=await Promise.all([R("/api/stats/key-metrics"),R("/api/stats/sales-by-location"),R("/api/stats/revenue-vs-expenses"),R("/api/stats/profit-trend"),R("/api/stats/payment-methods"),R("/api/stats/product-performance"),R("/api/stats/business-stats")]);u(e||{}),t(A||[]),r(s||[]),a(n||[]),o(i||[]),c(l||[]),g(d||{})}catch(e){console.error("Error fetching business report data:",e)}})()},[]),e.jsxs("section",{className:"w-full px-5 md:px-8 py-6 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8 w-full min-h-[350px]",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Sales by Location"}),e.jsx(C,{width:"100%",height:280,children:e.jsxs(N,{data:A,margin:{top:10,right:10,left:0,bottom:10},children:[e.jsx(Q,{strokeDasharray:"3 3",stroke:"#cbd5e1"}),e.jsx(U,{dataKey:"location",tick:{fontSize:13,fill:"#1e40af"},padding:{left:10,right:10}}),e.jsx(k,{tick:{fontSize:13,fill:"#1e40af"}}),e.jsx(F,{contentStyle:{background:"#f0f9ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e3a8a"}}),e.jsx(S,{dataKey:"sales",fill:"#3b82f6",radius:[10,10,0,0],barSize:40,background:{fill:"#c7d2fe"}})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Revenue vs Expenses"}),e.jsx(C,{width:"100%",height:280,children:e.jsxs(N,{data:s,margin:{top:10,right:10,left:0,bottom:10},children:[e.jsx(Q,{strokeDasharray:"3 3",stroke:"#cbd5e1"}),e.jsx(U,{dataKey:"month",tick:{fontSize:13,fill:"#1e40af"},padding:{left:10,right:10}}),e.jsx(k,{tick:{fontSize:13,fill:"#1e40af"}}),e.jsx(F,{contentStyle:{background:"#f0f9ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e3a8a"}}),e.jsx(E,{verticalAlign:"top",wrapperStyle:{paddingBottom:10}}),e.jsx(S,{dataKey:"revenue",fill:"#2563eb",radius:[10,10,0,0],barSize:32,background:{fill:"#bfdbfe"}}),e.jsx(S,{dataKey:"expenses",fill:"#93c5fd",radius:[10,10,0,0],barSize:32,background:{fill:"#dbeafe"}})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8 w-full min-h-[350px]",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Profit Trends"}),e.jsx(C,{width:"100%",height:280,children:e.jsxs(I,{data:n,margin:{top:10,right:10,left:0,bottom:10},children:[e.jsx(Q,{strokeDasharray:"3 3",stroke:"#cbd5e1"}),e.jsx(U,{dataKey:"month",tick:{fontSize:13,fill:"#1e40af"},padding:{left:10,right:10}}),e.jsx(k,{tick:{fontSize:13,fill:"#1e40af"}}),e.jsx(F,{contentStyle:{background:"#f0f9ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e3a8a"}}),e.jsx(H,{type:"monotone",dataKey:"profit",stroke:"#2563eb",strokeWidth:3,dot:{fill:"#2563eb",r:6}})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Payment Methods"}),e.jsx(C,{width:"100%",height:280,children:e.jsxs(_,{margin:{top:20,right:20,left:20,bottom:20},children:[e.jsx(L,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,value:A})=>`${e} ${A}%`,outerRadius:90,dataKey:"value",children:i.map((A,t)=>e.jsx(T,{fill:p[t%p.length]},`cell-${t}`))}),e.jsx(F,{formatter:(e,A,t)=>[`${Number(e).toFixed(0)}%`,t?.payload?.name],contentStyle:{background:"#eff6ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e40af"}}),e.jsx(E,{verticalAlign:"bottom",height:36})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-md mb-8 w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6 select-none",children:"Product Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{const A=Math.max(...l.map(e=>e.sales||0));return l.map(t=>{const s=A?Math.round(t.sales/A*100):0;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-150",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-semibold text-gray-800 text-sm",children:t.name}),e.jsx(BA,{trend:t.trend})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Sales progress for ${t.name}`,style:{width:`${s}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 font-semibold",children:["â‚±",t.sales.toLocaleString()]})]},t.name)})})()})]})]})}function vA(e){return me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 13.586V10c0-3.217-2.185-5.927-5.145-6.742C13.562 2.52 12.846 2 12 2s-1.562.52-1.855 1.258C7.185 4.074 5 6.783 5 10v3.586l-1.707 1.707A.996.996 0 0 0 3 16v2a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-2a.996.996 0 0 0-.293-.707L19 13.586zM19 17H5v-.586l1.707-1.707A.996.996 0 0 0 7 14v-4c0-2.757 2.243-5 5-5s5 2.243 5 5v4c0 .266.105.52.293.707L19 16.414V17zm-7 5a2.98 2.98 0 0 0 2.818-2H9.182A2.98 2.98 0 0 0 12 22z"},child:[]}]})(e)}function jA(e){return me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 11H7.101l.001-.009a4.956 4.956 0 0 1 .752-1.787 5.054 5.054 0 0 1 2.2-1.811c.302-.128.617-.226.938-.291a5.078 5.078 0 0 1 2.018 0 4.978 4.978 0 0 1 2.525 1.361l1.416-1.412a7.036 7.036 0 0 0-2.224-1.501 6.921 6.921 0 0 0-1.315-.408 7.079 7.079 0 0 0-2.819 0 6.94 6.94 0 0 0-1.316.409 7.04 7.04 0 0 0-3.08 2.534 6.978 6.978 0 0 0-1.054 2.505c-.028.135-.043.273-.063.41H2l4 4 4-4zm4 2h2.899l-.001.008a4.976 4.976 0 0 1-2.103 3.138 4.943 4.943 0 0 1-1.787.752 5.073 5.073 0 0 1-2.017 0 4.956 4.956 0 0 1-1.787-.752 5.072 5.072 0 0 1-.74-.61L7.05 16.95a7.032 7.032 0 0 0 2.225 1.5c.424.18.867.317 1.315.408a7.07 7.07 0 0 0 2.818 0 7.031 7.031 0 0 0 4.395-2.945 6.974 6.974 0 0 0 1.053-2.503c.027-.135.043-.273.063-.41H22l-4-4-4 4z"},child:[]}]})(e)}function CA(e){return me({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3 3 3 0 0 1-3 3zm9 11v-1a7 7 0 0 0-7-7h-4a7 7 0 0 0-7 7v1h2v-1a5 5 0 0 1 5-5h4a5 5 0 0 1 5 5v1z"},child:[]}]})(e)}function NA({label:A,name:t,value:s,onChange:r,placeholder:n,type:a="text",error:i,required:o=!1,className:l="",...c}){return e.jsxs("div",{className:`mb-5 ${l}`,children:[e.jsxs("label",{className:"block mb-1 font-medium text-blue-800",children:[A,o&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(We,{name:t,value:s,onChange:r,placeholder:n,type:a,error:i,...c})]})}const QA=({isOpen:A,onClose:t,userData:s,businessData:r})=>{const[n,a]=h.useState({first_name:s?.first_name||"",last_name:s?.last_name||"",email:s?.email||"",contact_number:s?.contact_number||"",currentPassword:"",newPassword:"",confirmPassword:"",country:r?.country||"",business_email:r?.email||"",business_address:r?.business_address||"",house_number:r?.house_number||"",mobile:r?.mobile||""}),[i,o]=h.useState(!1),[l,c]=h.useState(""),[d,u]=h.useState(""),[m,g]=h.useState({}),[p,x]=h.useState({}),[f,w]=h.useState("account");h.useEffect(()=>{(s||r)&&(a({first_name:s?.first_name||"",last_name:s?.last_name||"",email:s?.email||"",contact_number:s?.contact_number||"",currentPassword:"",newPassword:"",confirmPassword:"",country:r?.country||"",business_email:r?.email||"",business_address:r?.business_address||"",house_number:r?.house_number||"",mobile:r?.mobile||""}),c(""),u(""),g({}),x({}),w("account"))},[s,r,A]);const b=(e,A)=>{const t={...m};switch(e){case"first_name":"account"!==f||A.trim()?A.trim().length<2?t.first_name="First name must be at least 2 characters":delete t.first_name:t.first_name="First name is required";break;case"last_name":"account"!==f||A.trim()?A.trim().length<2?t.last_name="Last name must be at least 2 characters":delete t.last_name:t.last_name="Last name is required";break;case"email":"account"!==f||A.trim()?A.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.trim())?t.email="Please enter a valid email":delete t.email:t.email="Email is required";break;case"contact_number":A&&A.trim().length<7?t.contact_number="Phone number must be at least 7 digits":delete t.contact_number;break;case"business_email":A.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.trim())?t.business_email="Please enter a valid email":delete t.business_email;break;case"mobile":A&&A.trim().length<7?t.mobile="Mobile number must be at least 7 digits":delete t.mobile;break;case"currentPassword":n.newPassword&&!A?t.currentPassword="Current password is required to change password":delete t.currentPassword;break;case"newPassword":A&&A.length<6?t.newPassword="Password must be at least 6 characters":delete t.newPassword;break;case"confirmPassword":A&&A!==n.newPassword?t.confirmPassword="Passwords do not match":delete t.confirmPassword}g(t)},B=e=>{const{name:A,value:t}=e.target;a(e=>({...e,[A]:t})),p[A]&&b(A,t)},y=e=>{const{name:A,value:t}=e.target;x(e=>({...e,[A]:!0})),b(A,t)},v=async e=>{e.preventDefault(),o(!0),c(""),u(""),Object.keys(n).forEach(e=>{b(e,n[e])});if(Object.keys(m).length>0)o(!1);else try{const e=sessionStorage.getItem("auth_token");if("account"===f||"security"===f){const A={first_name:n.first_name,last_name:n.last_name,email:n.email,contact_number:n.contact_number};n.newPassword&&(A.currentPassword=n.currentPassword,A.newPassword=n.newPassword),await R("/api/auth/update-profile",{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(A)})}else if("business"===f){const A={country:n.country,business_email:n.business_email,business_address:n.business_address,house_number:n.house_number,mobile:n.mobile};await R("/api/business/update-business",{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(A)})}c("Profile updated successfully!"),setTimeout(()=>{j(),window.location.reload()},2e3)}catch(A){console.error("Failed to update profile:",A),u(A.message||"Failed to update profile. Please try again.")}finally{o(!1)}},j=()=>{a({first_name:s?.first_name||"",last_name:s?.last_name||"",email:s?.email||"",contact_number:s?.contact_number||"",currentPassword:"",newPassword:"",confirmPassword:"",country:r?.country||"",business_email:r?.email||"",business_address:r?.business_address||"",house_number:r?.house_number||"",mobile:r?.mobile||""}),g({}),x({}),c(""),u(""),w("account"),t()};if(!A)return null;const C=e.jsxs(e.Fragment,{children:[e.jsx(q,{label:"Cancel",variant:"secondary",onClick:j,type:"button",disabled:i,className:"px-6 py-2.5 rounded-xl font-medium transition-all duration-200"}),e.jsx(q,{label:i?"Saving...":"Save Changes",variant:"primary",type:"submit",onClick:v,disabled:!("account"===f?0===Object.keys(m).length&&n.first_name.trim()&&n.last_name.trim()&&n.email.trim():("business"===f||"security"===f)&&0===Object.keys(m).length)||i,className:"px-6 py-2.5 rounded-xl font-medium transition-all duration-200 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-lg hover:shadow-xl"})]});return e.jsxs(ve,{isOpen:A,onClose:j,title:"Edit Profile",subtitle:"Update your account details",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),footer:C,disabled:i,contentClassName:"space-y-5",children:[l&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200/50 rounded-2xl flex items-start gap-3 animate-in slide-in-from-top duration-300",children:[e.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:l}),e.jsx("p",{className:"text-xs text-emerald-700 mt-0.5",children:"Your profile has been updated successfully"})]})]}),d&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-red-50 to-rose-50 border border-red-200/50 rounded-2xl flex items-start gap-3 animate-in slide-in-from-top duration-300",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-red-900",children:d}),e.jsx("p",{className:"text-xs text-red-700 mt-0.5",children:"Please check your information and try again"})]})]}),e.jsxs("div",{className:"flex gap-1 border-b border-slate-200/10 -mx-6 px-6",children:[e.jsxs("button",{onClick:()=>w("account"),className:"px-4 py-2 rounded-t-xl font-medium transition-all duration-200 relative "+("account"===f?"text-blue-600 bg-blue-50/30":"text-slate-500 hover:text-slate-700"),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Account"]}),"account"===f&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full"})]}),e.jsxs("button",{onClick:()=>w("business"),className:"px-4 py-2 rounded-t-xl font-medium transition-all duration-200 relative "+("business"===f?"text-blue-600 bg-blue-50/30":"text-slate-500 hover:text-slate-700"),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Business"]}),"business"===f&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full"})]}),e.jsxs("button",{onClick:()=>w("security"),className:"px-4 py-2 rounded-t-xl font-medium transition-all duration-200 relative "+("security"===f?"text-blue-600 bg-blue-50/30":"text-slate-500 hover:text-slate-700"),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Security"]}),"security"===f&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full"})]})]}),e.jsxs("form",{onSubmit:v,children:["account"===f&&e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Personal Information"}),e.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-slate-200 to-transparent"})]}),e.jsx(NA,{label:"First Name",name:"first_name",value:n.first_name,onChange:B,onBlur:y,placeholder:"Enter first name",error:p.first_name&&m.first_name?m.first_name:null,required:!0}),e.jsx(NA,{label:"Last Name",name:"last_name",value:n.last_name,onChange:B,onBlur:y,placeholder:"Enter last name",error:p.last_name&&m.last_name?m.last_name:null,required:!0}),e.jsx(NA,{label:"Email Address",name:"email",type:"email",value:n.email,onChange:B,onBlur:y,placeholder:"Enter email address",error:p.email&&m.email?m.email:null,required:!0}),e.jsx(NA,{label:"Contact Number",name:"contact_number",type:"tel",value:n.contact_number,onChange:B,onBlur:y,placeholder:"Enter phone number",error:p.contact_number&&m.contact_number?m.contact_number:null})]}),"business"===f&&e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Business Information"}),e.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-slate-200 to-transparent"})]}),e.jsx(NA,{label:"Country",name:"country",value:n.country,onChange:B,onBlur:y,placeholder:"Enter country",error:p.country&&m.country?m.country:null}),e.jsx(NA,{label:"Business Email",name:"business_email",type:"email",value:n.business_email,onChange:B,onBlur:y,placeholder:"Enter business email",error:p.business_email&&m.business_email?m.business_email:null}),e.jsx(NA,{label:"Business Address",name:"business_address",value:n.business_address,onChange:B,onBlur:y,placeholder:"Enter business address",error:p.business_address&&m.business_address?m.business_address:null}),e.jsx(NA,{label:"House Number",name:"house_number",value:n.house_number,onChange:B,onBlur:y,placeholder:"Enter house number",error:p.house_number&&m.house_number?m.house_number:null}),e.jsx(NA,{label:"Mobile Number",name:"mobile",type:"tel",value:n.mobile,onChange:B,onBlur:y,placeholder:"Enter mobile number",error:p.mobile&&m.mobile?m.mobile:null})]}),"security"===f&&e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Change Password"}),e.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-slate-200 to-transparent"})]}),e.jsx("p",{className:"text-xs text-slate-500 bg-amber-50 border border-amber-100/50 rounded-xl px-3 py-2",children:"Leave blank to keep your current password"}),e.jsx(NA,{label:"Current Password",name:"currentPassword",type:"password",value:n.currentPassword,onChange:B,onBlur:y,placeholder:"Enter current password",error:p.currentPassword&&m.currentPassword?m.currentPassword:null}),n.newPassword&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-700",children:"Password Strength"}),e.jsx("div",{className:"w-full h-1.5 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300 "+(n.newPassword.length>=12?"w-full bg-gradient-to-r from-green-500 to-emerald-500":n.newPassword.length>=8?"w-2/3 bg-gradient-to-r from-yellow-500 to-amber-500":"w-1/3 bg-gradient-to-r from-red-500 to-orange-500")})})]}),e.jsx(NA,{label:"New Password",name:"newPassword",type:"password",value:n.newPassword,onChange:B,onBlur:y,placeholder:"Min. 6 characters",error:p.newPassword&&m.newPassword?m.newPassword:null}),e.jsx(NA,{label:"Confirm Password",name:"confirmPassword",type:"password",value:n.confirmPassword,onChange:B,onBlur:y,placeholder:"Re-enter new password",error:p.confirmPassword&&m.confirmPassword?m.confirmPassword:null})]})]})]})};function UA(e){return me({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},child:[]}]})(e)}function kA({notifications:A=[],unreadCount:t=0,onMarkAsRead:s,onMarkAsUnread:r,onDelete:n,onSelectAll:a,onDeselectAll:i,isOpen:o,onToggle:l,containerRef:c}){const[d,u]=h.useState(new Set),[m,g]=h.useState("all"),p=h.useMemo(()=>"unread"===m?A.filter(e=>!e.isRead):"read"===m?A.filter(e=>e.isRead):A,[A,m]),x=d.size===p.length&&p.length>0,f=d.size>0;return e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{onClick:l,className:"p-2 rounded-full hover:bg-gray-100 transition-colors relative group",title:"Notifications",children:[e.jsx(vA,{className:"w-5 h-5 text-gray-700 group-hover:text-gray-900"}),t>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:t>99?"99+":t})]}),o&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white rounded-xl shadow-2xl border border-gray-200 z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(vA,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Notifications"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t," unread"]})]})]}),e.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(ye,{className:"w-5 h-5 text-gray-500"})})]})}),A.length>0&&e.jsx("div",{className:"flex gap-1 px-4 pt-3 border-b border-gray-100 bg-gray-50",children:["all","unread","read"].map(A=>e.jsx("button",{onClick:()=>{g(A),u(new Set)},className:"px-3 py-2 text-sm font-medium rounded-t-lg transition-colors "+(m===A?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:A.charAt(0).toUpperCase()+A.slice(1)},A))}),f&&e.jsxs("div",{className:"px-4 py-3 bg-blue-50 border-b border-blue-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[d.size," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{d.forEach(e=>{const t=A.find(A=>A.id===e);t&&!t.isRead&&s(e)}),u(new Set)},className:"p-1.5 hover:bg-blue-100 rounded-lg transition-colors text-gray-600 hover:text-gray-900 text-xs",title:"Mark as read",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{d.forEach(e=>{const t=A.find(A=>A.id===e);t&&t.isRead&&r(e)}),u(new Set)},className:"p-1.5 hover:bg-blue-100 rounded-lg transition-colors text-gray-600 hover:text-gray-900 text-xs",title:"Mark as unread",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{window.confirm(`Delete ${d.size} notification(s)?`)&&(d.forEach(e=>n(e)),u(new Set))},className:"p-1.5 hover:bg-red-100 rounded-lg transition-colors text-red-600 hover:text-red-700 text-xs",title:"Delete selected",children:e.jsx(UA,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:p.length>0?e.jsxs(e.Fragment,{children:[p.length>1&&e.jsx("div",{className:"px-4 py-2 border-b border-gray-100 bg-gray-50 sticky top-0",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-gray-100 p-2 -m-2 rounded transition-colors",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>{d.size===p.length?u(new Set):u(new Set(p.map(e=>e.id)))},className:"w-4 h-4 rounded border-gray-300 text-blue-600 cursor-pointer"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:x?"Deselect All":"Select All"})]})}),p.map(A=>e.jsx("div",{className:"border-b border-gray-100 transition-all duration-200 hover:bg-gray-50 group "+(A.isRead?"":"bg-blue-50/50"),children:e.jsxs("div",{className:"px-4 py-3 flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 pt-1",children:e.jsx("input",{type:"checkbox",checked:d.has(A.id),onChange:()=>{return e=A.id,void u(A=>{const t=new Set(A);return t.has(e)?t.delete(e):t.add(e),t});var e},className:"w-4 h-4 rounded border-gray-300 text-blue-600 cursor-pointer"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm truncate",children:A.title}),!A.isRead&&e.jsx("span",{className:"inline-flex w-2 h-2 bg-blue-600 rounded-full flex-shrink-0"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:A.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1.5",children:A.time})]}),e.jsxs("div",{className:"flex-shrink-0 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[A.isRead?e.jsx("button",{onClick:()=>r(A.id),className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors text-gray-600 hover:text-gray-900",title:"Mark as unread",children:e.jsx(xe,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>s(A.id),className:"p-1.5 hover:bg-blue-100 rounded-lg transition-colors text-gray-600 hover:text-blue-600",title:"Mark as read",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{onClick:e=>((e,A)=>{A.stopPropagation(),window.confirm("Delete this notification?")&&n(e)})(A.id,e),className:"p-1.5 hover:bg-red-100 rounded-lg transition-colors text-gray-600 hover:text-red-600",title:"Delete",children:e.jsx(UA,{className:"w-4 h-4"})})]})]})})]})},A.id))]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(vA,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"unread"===m?"No unread notifications":"read"===m?"No read notifications":"No notifications yet"})]})}),A.length>0&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50 flex gap-2",children:[e.jsx("button",{onClick:()=>{A.filter(e=>!e.isRead).map(e=>e.id).forEach(e=>s(e)),u(new Set)},className:"flex-1 px-3 py-2 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Mark All as Read"}),e.jsx("button",{onClick:()=>{window.confirm("Delete all notifications?")&&(A.forEach(e=>n(e.id)),u(new Set))},className:"flex-1 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Clear All"})]})]})]})}const FA="#93c5fd",SA="#3e209bff";function EA({data:A,className:t="",range:s="month"}){return e.jsx(wA,{title:e.jsxs("span",{className:"text-blue-700",children:["Visitors for the ",{week:"this week",month:"this month",year:"this year"}[s]||"last 6 months"]}),className:`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl ${t}`,children:e.jsx("div",{className:"h-72",children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(I,{data:A,margin:{top:20,right:20,left:0,bottom:5},children:[e.jsx(Q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(U,{dataKey:"name",tick:{fill:"#374151",fontSize:14}}),e.jsx(k,{tick:{fill:"#374151",fontSize:14}}),e.jsx(F,{contentStyle:{background:"#fff",borderColor:"#e5e7eb",borderRadius:8}}),e.jsx(H,{type:"monotone",dataKey:"value",stroke:FA,strokeWidth:3,dot:{r:5,fill:FA}})]})})})})}function IA({data:A,className:t=""}){return e.jsx(wA,{title:e.jsx("span",{className:"text-blue-700",children:"Sales by Product Category"}),className:`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl ${t}`,children:e.jsx("div",{className:"h-72",children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(_,{children:[e.jsx(L,{data:A,dataKey:"percent",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:e=>`${e.name} (${Number(e.percent||0).toFixed(1)}%)`,fill:SA,children:A.map((A,t)=>{const s=[FA,"#1e2cecff",SA];return e.jsx(T,{fill:s[t%s.length]},`cell-${t}`)})}),e.jsx(E,{}),e.jsx(F,{formatter:(e,A,t)=>[`${Number(e).toFixed(1)}%`,t?.payload?.name],contentStyle:{background:"#fafafa",borderColor:SA,borderRadius:8}})]})})})})}function HA(){const[A,t]=h.useState({revenue:0,expenses:0,netProfit:0,grossMargin:0,totalTransactions:0,totalItemsSold:0}),[s,r]=h.useState([]),[n,a]=h.useState("month"),[i,o]=h.useState(!1),[l,c]=h.useState([]),[d,u]=h.useState([]),[m,g]=h.useState([]),[x,f]=h.useState(!1),[w,b]=h.useState([]),[B,y]=h.useState(0),[v,j]=h.useState(!1),C=p.useRef(null);Z();const[N,Q]=h.useState(!1),[U,k]=h.useState({sales:0,transactions:0,topProduct:"-",totalItemsSold:0});h.useEffect(()=>{(async()=>{try{const e=sessionStorage.getItem("auth_token"),A=new Date,t=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}-${String(A.getDate()).padStart(2,"0")}`,s=await R("/api/dashboard/overview",{headers:V(e),params:{startDate:t,endDate:t}});s&&k({sales:s.totalSales,transactions:s.totalTransactions,totalItemsSold:s.totalItemsSold,topProduct:s.topProducts?.[0]?.product_name||"-"})}catch(e){console.error("Failed to fetch today's data",e)}})()},[]);const F=h.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem("user")||"{}")}catch(e){return{}}},[]);h.useEffect(()=>{const e=e=>{C.current&&!C.current.contains(e.target)&&j(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const S=async()=>{try{o(!0);const e=sessionStorage.getItem("auth_token"),A=new Date;let s,a;switch(n){case"week":s=new Date(A);const e=A.getDay();s.setDate(A.getDate()-e),s.setHours(0,0,0,0),a=new Date(s),a.setDate(s.getDate()+6),a.setHours(23,59,59,999);break;case"month":default:s=new Date(A.getFullYear(),A.getMonth(),1),s.setHours(0,0,0,0),a=new Date(A.getFullYear(),A.getMonth()+1,0),a.setHours(23,59,59,999);break;case"year":s=new Date(A.getFullYear(),0,1),s.setHours(0,0,0,0),a=new Date(A.getFullYear(),11,31),a.setHours(23,59,59,999)}const i=e=>{const A=new Date(e);return`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}-${String(A.getDate()).padStart(2,"0")}`},l=i(s),d=i(a);console.log("Fetching data for date range:",{range:n,startDate:s.toISOString(),endDate:a.toISOString(),formattedStart:l,formattedEnd:d});const[h,m,p,x,f]=await Promise.all([R("/api/dashboard/overview",{headers:V(e),params:{startDate:l,endDate:d}}),R("/api/stats/customers-timeseries",{headers:V(e),params:{startDate:l,endDate:d}}),R("/api/stats/sales-by-category",{headers:V(e),params:{startDate:l,endDate:d}}),R("/api/dashboard/inventory-movement",{headers:V(e)}),R("/api/products/low-stock",{headers:V(e)})]),w=(m||[]).map(e=>({...e,value:Number(e.customers||e.total||e.value||0)})),b=(p||[]).reduce((e,A)=>e+Number(A.value||0),0)||1,B=(p||[]).map(e=>({...e,percent:Number(e.value||0)/b*100}));if(h){console.log("Overview data received:",h);const e=Number(h.totalSales||0),A=Number(h.totalExpenses||0),s=e-A,a=e>0?(e-A)/e*100:0,i=Number(h.totalTransactions||0),o=Number(h.totalItemsSold||0),l=h.topProducts?.[0]?.product_name||"-";console.log("Processed metrics:",{revenue:e,expenses:A,netProfit:s,grossMargin:a,totalTransactions:i,totalItemsSold:o,topProduct:l}),t({revenue:e,expenses:A,netProfit:s,grossMargin:a,totalTransactions:i,totalItemsSold:o});const c=(()=>{const e=new Date;let A,t=e;switch(n){case"week":return A=new Date(e),A.setDate(e.getDate()-e.getDay()),`${A.toLocaleDateString("en-PH",{month:"short",day:"numeric"})} - ${t.toLocaleDateString("en-PH",{month:"short",day:"numeric"})}`;case"month":return A=new Date(e.getFullYear(),e.getMonth(),1),A.toLocaleDateString("en-PH",{month:"long",year:"numeric"});case"year":return e.getFullYear().toString();default:return e.toLocaleDateString("en-PH")}})();r([{label:"week"===n?"This Week's Sales":"month"===n?"This Month's Sales":"This Year's Sales",value:`â‚±${e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subtext:c},{label:"week"===n?"Weekly Transactions":"month"===n?"Monthly Transactions":"Yearly Transactions",value:i,subtext:`${c}`},{label:"Top Product",value:l,subtext:`Total: ${h.topProducts?.[0]?.total_sold||0} sold`},{label:"Items Sold",value:o,subtext:`${i} transactions`}])}c(w),u(B);const y=(x||[]).filter(e=>Number(e.quantity_in_stock||0)<=10);g(y.length?y:f||[])}catch(e){console.error("Failed to fetch dashboard data",e)}finally{o(!1)}};h.useEffect(()=>{S(),(async()=>{try{const e=sessionStorage.getItem("auth_token"),A=await R("/api/logs",{headers:V(e)}),t=new Set(JSON.parse(sessionStorage.getItem("read_notif_ids")||"[]")),s=new Set(JSON.parse(sessionStorage.getItem("deleted_notif_ids")||"[]")),r=(A||[]).filter(e=>!s.has(e.log_id)).map(e=>({id:e.log_id,title:e.action,message:`${e.username} (${e.role}) did an action: ${e.action}`,time:new Date(e.date_time).toLocaleString(),isRead:t.has(e.log_id)}));b(r),y(r.filter(e=>!e.isRead).length)}catch(e){console.error("Failed to fetch notifications",e)}})()},[n]);const E=e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:S,disabled:i,title:"Refresh Data",className:"bg-white/80 backdrop-blur-sm hover:bg-white text-gray-700 p-1.5 sm:p-2 rounded-lg border border-gray-200/80 text-sm font-medium transition-all duration-200 hover:shadow-md hover:scale-[1.02]",children:e.jsx(jA,{className:"w-4 h-4 sm:w-5 sm:h-5 "+(i?"animate-spin":"")})}),e.jsxs("select",{className:"bg-white/80 backdrop-blur-sm hover:bg-white text-gray-700 px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-lg border border-gray-200/80 text-xs sm:text-sm font-medium transition-all duration-200 outline-none cursor-pointer hover:shadow-md",value:n,onChange:e=>a(e.target.value),disabled:i,children:[e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"month",children:"Month"}),e.jsx("option",{value:"year",children:"Year"})]}),e.jsx("div",{className:"-mt-2 -mb-3 py-8 px-8 pr-12 flex justify-end",children:e.jsxs(q,{onClick:()=>{const e=s.map(e=>[e.label,e.value,e.change]);m.length>0&&(e.push(["","",""]),e.push(["Low Stock Products","",""]),e.push(["Product Name","Quantity Left",""]),m.forEach(A=>e.push([A.product_name,A.quantity_in_stock,""])));const A=[["Label","Value","Change"],...e].map(e=>e.join(",")).join("\n"),t=new Blob([A],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(t),r.download="dashboard-data.csv",r.click()},size:"sm",variant:"secondary",className:"flex items-center gap-2 w-full sm:w-auto shrink-0",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]})}),e.jsx("div",{className:"relative",ref:C,children:e.jsx(kA,{notifications:w,unreadCount:B,onMarkAsRead:e=>{const A=JSON.parse(sessionStorage.getItem("read_notif_ids")||"[]");A.includes(e)||sessionStorage.setItem("read_notif_ids",JSON.stringify([...A,e])),b(A=>A.map(A=>A.id===e?{...A,isRead:!0}:A)),y(e=>Math.max(0,e-1))},onMarkAsUnread:e=>{const A=JSON.parse(sessionStorage.getItem("read_notif_ids")||"[]").filter(A=>A!==e);sessionStorage.setItem("read_notif_ids",JSON.stringify(A)),b(A=>A.map(A=>A.id===e?{...A,isRead:!1}:A)),y(e=>e+1)},onDelete:e=>{const A=JSON.parse(sessionStorage.getItem("deleted_notif_ids")||"[]");sessionStorage.setItem("deleted_notif_ids",JSON.stringify([...A,e])),b(A=>A.filter(A=>A.id!==e));const t=w.find(A=>A.id===e);t&&!t.isRead&&y(e=>Math.max(0,e-1))},isOpen:v,onToggle:()=>j(!v),containerRef:C})}),e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-1 sm:gap-2 bg-white/80 backdrop-blur-sm p-1 sm:p-1.5 sm:px-2 sm:py-2 rounded-lg border border-gray-200/80 hover:bg-white transition-all duration-200 hover:shadow-md hover:scale-[1.02] shrink-0",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full flex items-center justify-center text-sm font-medium shadow-lg",children:F.username?.[0]?.toUpperCase()||"A"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:inline",children:F.username||"Admin"})]})]});return e.jsxs(Ue,{title:"DASHBOARD",subtitle:"",sidebar:e.jsx(fA,{}),headerActions:E,isSidebarOpen:N,setSidebarOpen:Q,className:"bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"p-4 lg:hidden",children:i?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/5"})]}):e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Low Stock Products"})}),e.jsx(_A,{lowStockProducts:m})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 p-6 md:p-8",children:s.map((A,t)=>e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold flex-shrink-0",children:0===t?"â‚±":1===t?"â†»":2===t?"â˜…":"#"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase truncate",children:A.label}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1 truncate",children:A.value}),A.subtext&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:A.subtext})]})]})},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 p-6 pb-10 lg:pb-6 pt-0",children:[e.jsx("div",{className:"lg:col-span-8 flex flex-col gap-6",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 h-[336px] animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-full h-64 bg-gray-200 rounded-lg"})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 h-[336px] animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-64 h-64 bg-gray-200 rounded-full"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(EA,{data:l,range:n}),e.jsx(IA,{data:d})]})}),e.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-6",children:[i?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2"})]}):e.jsx(bA,{stats:U}),i?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 animate-pulse hidden lg:block",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/5"})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md hidden lg:block",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Low Stock Products"})}),m.length>0?e.jsx("ul",{className:"divide-y divide-gray-200",children:m.map(A=>e.jsxs("li",{className:"py-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:A.product_name}),e.jsxs("span",{className:"text-sm font-bold text-red-600",children:[A.quantity_in_stock," left"]})]},A.product_id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No products with low stock."})]})]})]}),e.jsx("div",{className:"max-w-10lx mx-auto w-full",children:e.jsx(yA,{})}),e.jsx(QA,{isOpen:x,onClose:()=>f(!1),userData:F})]})}function _A({lowStockProducts:A}){return 0===A.length?e.jsx("p",{className:"text-sm text-gray-500",children:"No products with low stock."}):e.jsx("ul",{className:"divide-y divide-gray-200",children:A.map(A=>e.jsxs("li",{className:"py-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:A.product_name}),e.jsxs("span",{className:"text-sm font-bold text-red-600",children:[A.quantity_in_stock," left"]})]},A.product_id))})}const LA=f(O());function TA({onScan:A,paused:t,onResume:s,textMain:r="text-blue-800",className:n="",modalContext:a=!1,...i}){const[o,l]=h.useState("environment"),[c,d]=h.useState(null),[u,m]=h.useState(""),[g,p]=h.useState(!a),[x,f]=h.useState(!1),[w,b]=h.useState(!1),[B,y]=h.useState([]),[v,j]=h.useState(!1),C=h.useRef(null),[N,Q]=h.useState(0),[U,k]=h.useState([]),[F,S]=h.useState(!1),[E,I]=h.useState(""),[H,_]=h.useState(!1),[L,T]=h.useState(!1),O=h.useRef(null),[P,D]=h.useState(!1),[K,R]=h.useState(""),[V,G]=h.useState(0);h.useEffect(()=>{a&&!P||(async()=>{try{try{const e=await navigator.permissions.query({name:"camera"});if(d("granted"===e.state),"denied"===e.state)return m("Camera access denied. Please enable camera permissions in your browser settings."),void p(!1);e.addEventListener("change",()=>{d("granted"===e.state),"denied"===e.state?m("Camera access denied. Please enable camera permissions in your browser settings."):m("")})}catch(e){console.log("Permissions API not supported, attempting camera access...")}try{const e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind);if(console.log("Available cameras:",e.length),y(e),j(e.length>1),0===e.length)return m("No camera found. Please connect a camera."),void p(!1)}catch(A){console.log("Could not enumerate devices, will try direct access...")}setTimeout(()=>{p(!1)},500)}catch(t){console.error("Permission check error:",t),p(!1)}})()},[a,P]),h.useEffect(()=>{a&&!P&&D(!0)},[a,P]),h.useEffect(()=>{b(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))},[]),h.useEffect(()=>{C.current=new(window.AudioContext||window.webkitAudioContext)},[]);const W=()=>{if(C.current){const e=C.current.createOscillator(),A=C.current.createGain();e.connect(A),A.connect(C.current.destination),e.frequency.setValueAtTime(800,C.current.currentTime),A.gain.setValueAtTime(.3,C.current.currentTime),e.start(),e.stop(C.current.currentTime+.1)}},z=()=>{w&&"vibrate"in navigator&&navigator.vibrate(100)};h.useEffect(()=>{const e=e=>{if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||t)return;const s=Date.now();if(R(s-V>100?e.key:A=>A+e.key),G(s),"Enter"===e.key){e.preventDefault();const t=K.trim();t&&(console.log("USB Scanner detected:",t),W(),z(),k(e=>[t,...e.filter(e=>e!==t)].slice(0,5)),A([{rawValue:t}])),R("")}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,V,K,A,W,z]);h.useEffect(()=>()=>{L&&(LA.offDetected(),LA.offProcessed(),LA.stop())},[L]);return e.jsx("div",{className:`flex-shrink-0 bg-white/80 backdrop-blur-md border border-white/60 shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden ${n}`,children:e.jsxs("div",{className:"flex flex-col h-full p-1 sm:p-2",children:[e.jsxs("div",{className:`w-full text-center mb-1 font-bold text-xs tracking-wide ${r} flex items-center justify-center gap-1`,children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"SCAN QR & BARCODE"]}),e.jsxs("div",{className:"w-full flex-1 bg-gradient-to-br from-blue-50/80 via-indigo-50/60 to-blue-100/80 rounded-xl flex items-center justify-center border-2 border-blue-200/50 shadow-inner overflow-hidden relative z-0 group",children:[g?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Initializing camera..."})]})}):u?e.jsx("div",{className:"flex items-center justify-center h-full text-red-500 p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Camera Error"}),e.jsx("p",{className:"text-xs",children:u}),e.jsx(q,{label:"Retry",size:"sm",variant:"secondary",className:"mt-2",onClick:()=>{m(""),Q(0),p(!0),l(e=>"user"===e?"environment":"user"),setTimeout(()=>p(!1),1e3)},microinteraction:!0})]})}):H?e.jsxs("div",{className:"w-full h-full relative",children:[e.jsx("div",{ref:O,className:"w-full h-full rounded-xl overflow-hidden"}),!L&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:e.jsx(q,{label:"Start Advanced Scanner",size:"sm",variant:"primary",onClick:async()=>{if(!L)try{await LA.init({inputStream:{name:"Live",type:"LiveStream",target:O.current,constraints:{facingMode:"environment"===o?"environment":"user",width:{min:640,ideal:1920},height:{min:480,ideal:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:2,decoder:{readers:["code_128_reader","ean_reader","ean_8_reader","code_39_reader","code_39_vin_reader","codabar_reader","upc_reader","upc_e_reader","i2of5_reader","2of5_reader","code_93_reader"]},locate:!0}),LA.onDetected(e=>{if(e&&e.codeResult){const t=e.codeResult.code;console.log("Quagga detected:",t),W(),z(),k(e=>[t,...e.filter(e=>e!==t)].slice(0,5)),A([{rawValue:t}])}}),LA.onProcessed(e=>{const A=LA.canvas.ctx.overlay,t=LA.canvas.dom.overlay;e&&(e.boxes&&(A.clearRect(0,0,parseInt(t.getAttribute("width")),parseInt(t.getAttribute("height"))),e.boxes.filter(A=>A!==e.box).forEach(e=>{LA.ImageDebug.drawPath(e,{x:0,y:1},A,{color:"green",lineWidth:2})})),e.box&&LA.ImageDebug.drawPath(e.box,{x:0,y:1},A,{color:"#00F",lineWidth:2}),e.codeResult&&e.codeResult.code&&LA.ImageDebug.drawPath(e.line,{x:"x",y:"y"},A,{color:"red",lineWidth:3}))}),await LA.start(),T(!0),console.log("Quagga scanner initialized")}catch(e){console.error("Quagga initialization failed:",e),m("Advanced scanner initialization failed. Using fallback scanner.")}},microinteraction:!0})})]}):e.jsx(M,{onScan:e=>{if(console.log("Scanner result:",e),e&&e.length>0){const t=e[0]?.rawValue;console.log("Detected code:",t),t&&(W(),z(),k(e=>[t,...e.filter(e=>e!==t)].slice(0,5)),A(e))}},onError:e=>{console.error("Scanner error:",e);let A="Scanner error occurred",t=!1;if("NotAllowedError"===e.name)A="Camera access denied. Please allow camera access and refresh the page.",d(!1);else if("NotFoundError"===e.name)A="No camera found. Please connect a camera and refresh the page.";else if("NotReadableError"===e.name)A="Camera is being used by another application.";else if("OverconstrainedError"===e.name){if(N<2){Q(e=>e+1);return l("user"===o?"environment":"user"),m(""),p(!0),void setTimeout(()=>p(!1),1e3)}A="Camera constraints not supported. Trying without constraints...",l(null),t=!0}else"SecurityError"===e.name?A="Camera access blocked. Please use HTTPS or localhost.":N<2&&(Q(e=>e+1),t=!0);if(t&&N<2)return p(!0),void setTimeout(()=>{p(!1),m("")},1e3);m(A),setTimeout(()=>{m(""),p(!0),setTimeout(()=>p(!1),1e3)},3e3)},paused:t,constraints:null!==o?{facingMode:o,width:{ideal:1920,min:640},height:{ideal:1080,min:480},frameRate:{ideal:30,min:15}}:{width:{ideal:1920,min:640},height:{ideal:1080,min:480},frameRate:{ideal:30,min:15}},scanDelay:50,area:{top:"5%",right:"5%",bottom:"5%",left:"5%"},styles:{container:{width:"100%",height:"100%",borderRadius:"1rem",overflow:"visible"},video:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"1rem",backgroundColor:"black"}},classNames:{container:"w-full h-full"},formats:["qr_code","code_128","code_39","ean_13","ean_8","upc_a","upc_e","itf","codabar","data_matrix","pdf417"],inversionAttempts:"attemptBoth",multiple:"true"}),!u&&!g&&t&&e.jsxs("div",{className:"absolute bottom-2 right-2 z-10 flex gap-2",children:[e.jsx(q,{label:"Resume",size:"sm",variant:"secondary",onClick:s,microinteraction:!0}),w&&v&&e.jsx(q,{label:"user"===o?"ðŸ“·":"ðŸ“±",size:"sm",variant:"secondary",onClick:()=>{l(e=>"user"===e?"environment":"user"),p(!0),setTimeout(()=>p(!1),1e3)},microinteraction:!0,title:"user"===o?"Switch to back camera":"Switch to front camera"}),w&&e.jsx(q,{label:x?"ðŸ”¦":"ðŸ’¡",size:"sm",variant:"secondary",onClick:()=>f(!x),microinteraction:!0,title:x?"Turn off flashlight":"Turn on flashlight"}),e.jsx(q,{label:"âŒ¨ï¸",size:"sm",variant:"secondary",onClick:()=>S(!F),microinteraction:!0,title:"Manual input"}),e.jsx(q,{label:H?"ðŸ”„":"âš¡",size:"sm",variant:"secondary",onClick:()=>{H&&L&&(LA.stop(),T(!1)),_(!H),p(!0),setTimeout(()=>p(!1),1e3)},microinteraction:!0,title:H?"Switch to standard scanner":"Switch to advanced scanner"})]}),F&&e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-20",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 w-80 max-w-[90vw]",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-center",children:"Manual SKU Input"}),e.jsx("input",{type:"text",value:E,onChange:e=>I(e.target.value),placeholder:"Enter SKU or barcode",className:"w-full p-3 border border-gray-300 rounded-lg mb-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:e=>{"Enter"===e.key&&E.trim()&&(A([{rawValue:E.trim()}]),I(""),S(!1),W(),z())}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{label:"Cancel",size:"sm",variant:"secondary",onClick:()=>{S(!1),I("")},className:"flex-1"}),e.jsx(q,{label:"Submit",size:"sm",variant:"primary",onClick:()=>{E.trim()&&(A([{rawValue:E.trim()}]),I(""),S(!1),W(),z())},className:"flex-1"})]})]})}),U.length>0&&!u&&!g&&t&&e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-2 max-w-32",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Recent:"}),e.jsx("div",{className:"space-y-1",children:U.slice(0,3).map((t,s)=>e.jsx("button",{onClick:()=>{A([{rawValue:t}]),W(),z()},className:"block w-full text-left text-xs text-blue-600 hover:text-blue-800 truncate",title:`Scan ${t}`,children:t.length>10?`${t.substring(0,10)}...`:t},s))})]})})]})]})})}const OA=p.forwardRef(({sku:A,setSku:t,quantity:s,setQuantity:r,handleAddToCart:n,className:a="",...i},o)=>e.jsx(Ke,{className:`flex-shrink-0 bg-white/80 backdrop-blur-md border border-white/60 shadow-xl hover:shadow-2xl transition-all duration-300 ${a}`,variant:"glass",...i,children:e.jsxs("div",{className:"flex flex-col gap-1 p-1 sm:p-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:"Enter SKU Code"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"SKU Code"}),e.jsx("div",{className:"relative",children:e.jsx("input",{ref:o,type:"text",name:"sku",value:A,onChange:e=>t(e.target.value),onKeyPress:e=>{"Enter"===e.key&&A.trim()&&n()},placeholder:"Scan or enter SKU code",className:"w-full pl-3 pr-3 py-2 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-gray-400 font-medium"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 whitespace-nowrap",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[e.jsx("button",{onClick:()=>r(Math.max(1,s-1)),className:"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold transition-colors duration-200 flex items-center justify-center",children:"âˆ’"}),e.jsx("input",{type:"number",name:"quantity",value:s,min:1,onChange:e=>r(Math.max(1,Number(e.target.value)||1)),className:"w-16 px-2 py-1 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl text-center text-sm font-semibold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),e.jsx("button",{onClick:()=>r(s+1),className:"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold transition-colors duration-200 flex items-center justify-center",children:"+"})]}),e.jsx(q,{label:"Add to Cart",onClick:n,variant:"primary",size:"sm",microinteraction:!0,icon:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),iconPosition:"left"})]})]})]})}));function MA({cart:A,handleRemove:t,handleEditQuantity:s,total:r,className:n="",...a}){const[i,o]=h.useState(null),[l,c]=h.useState(1);h.useEffect(()=>{const e=e=>{if("F1"===e.key&&A.length>0){e.preventDefault();const t=0;o(t),c(A[t].quantity)}else if("F2"===e.key&&A.length>0){e.preventDefault();t(0)}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[A,t]);const d=()=>e.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 1 1 2.828 2.828L11.828 15.828a4 4 0 0 1-1.414.828l-4.243 1.414 1.414-4.243a4 4 0 0 1 .828-1.414z"})}),u=()=>e.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})});return e.jsx(Ke,{className:`flex-1 flex flex-col bg-white/80 backdrop-blur-md border border-white/60 shadow-xl transition-all duration-300 h-full min-h-0 overflow-hidden ${n}`,variant:"glass",...a,children:e.jsxs("div",{className:"flex-1 min-h-0 flex flex-col p-2 sm:p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("h3",{className:"text-sm sm:text-base font-bold text-gray-900",children:"Shopping Cart"})]}),e.jsxs("span",{className:"text-xs font-semibold text-gray-600 bg-gray-100 px-2 py-0.5 rounded-full",children:[A.length," ",1===A.length?"item":"items"]})]}),e.jsx("div",{className:"flex-1 overflow-auto min-h-0 rounded-lg",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"sticky top-0 z-10 bg-gradient-to-r from-blue-50/90 to-indigo-50/90 backdrop-blur-sm border-b border-blue-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-1.5 px-2 text-left text-[10px] sm:text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"py-1.5 px-2 text-center text-[10px] sm:text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"py-1.5 px-2 text-right text-[10px] sm:text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"py-1.5 px-2 text-right text-[10px] sm:text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"py-1.5 px-2 text-center text-[10px] sm:text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:0===A.length?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("p",{className:"text-gray-500 text-sm font-semibold",children:"Cart is empty"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Scan or enter products"})]})})}):A.map((A,r)=>e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors duration-200 group",children:[e.jsx("td",{className:"py-1.5 px-2",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:A.name}),e.jsxs("span",{className:"text-[10px] text-gray-500 truncate",children:["SKU: ",A.sku||"N/A"]})]})}),e.jsx("td",{className:"py-1.5 px-2 text-center",children:i===r?e.jsx("input",{type:"number",min:"1",value:l,onChange:e=>c(Math.max(1,parseInt(e.target.value)||1)),onKeyDown:e=>{"Enter"===e.key?(s(r,l),o(null)):"Escape"===e.key&&o(null)},onBlur:()=>{s(r,l),o(null)},className:"w-12 h-7 text-center text-xs font-bold border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):e.jsx("span",{className:"inline-flex items-center justify-center w-7 h-7 rounded-md bg-blue-100 text-blue-700 font-bold text-xs",children:A.quantity})}),e.jsx("td",{className:"py-1.5 px-2 text-right",children:e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:["â‚±",A.price.toFixed(2)]})}),e.jsx("td",{className:"py-1.5 px-2 text-right",children:e.jsxs("span",{className:"text-xs sm:text-sm font-bold text-blue-600",children:["â‚±",(A.price*(i===r?l:A.quantity)).toFixed(2)]})}),e.jsx("td",{className:"py-1.5 px-2",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>{o(r),c(A.quantity)},className:"p-1.5 rounded-md bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200 transition-all duration-200",title:"Edit (F1)",children:e.jsx(d,{})}),e.jsx("button",{onClick:()=>t(r),className:"p-1.5 rounded-md bg-red-50 text-red-600 hover:bg-red-100 border border-red-200 transition-all duration-200",title:"Remove (F2)",children:e.jsx(u,{})})]})})]},r))})]})}),e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-700",children:"Total:"}),e.jsxs("span",{className:"text-lg sm:text-xl font-extrabold text-blue-600",children:["â‚±",A.reduce((e,A,t)=>e+A.price*(i===t?l:A.quantity),0).toFixed(2)]})]})})]})})}function PA({isOpen:A,onClose:t,sku:s,setSku:r}){const[n,a]=h.useState(null);p.useEffect(()=>{if(!s)return void a(null);const e=setTimeout(()=>{(async()=>{if(s)try{const e=localStorage.getItem("business_id"),A=e?`?business_id=${encodeURIComponent(e)}`:"",t=await R(`/api/products/public/sku/${encodeURIComponent(s)}${A}`);a(t?{name:t.product_name,price:Number(t.selling_price||0),sku:t.sku}:null)}catch(e){a(null)}})()},200);return()=>clearTimeout(e)},[s]);const i=e.jsx(q,{label:"Close",variant:"secondary",onClick:t,className:"w-full"});return e.jsxs(ve,{isOpen:A,onClose:t,title:"Price Check",subtitle:"Scan or enter SKU/barcode",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),footer:i,size:"md",contentClassName:"space-y-4",children:[e.jsx("div",{className:"w-full",children:e.jsx(TA,{onScan:e=>{const A=e?.[0]?.rawValue;A&&r(A)},paused:!1,onResume:()=>{},className:"w-full",textMain:"text-blue-700"})}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter SKU or Barcode"}),e.jsx("input",{type:"text",value:s,onChange:e=>r(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter SKU or scan barcode"})]}),n?e.jsxs("div",{className:"w-full bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200/50",children:[e.jsx("div",{className:"text-lg font-semibold text-blue-900 mb-1",children:n.name}),e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:["â‚±",n.price.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["SKU: ",n.sku]})]}):s?e.jsx("div",{className:"text-red-500 text-sm text-center py-4",children:"No product found."}):null]})}function DA({isOpen:A,onClose:t,onApplyDiscount:s}){const[r,n]=h.useState("FIX"),[a,i]=h.useState(!1),[o,l]=h.useState("PERCENTAGE"),[c,d]=h.useState([{label:"PWD/Senior Citizen",value:"5%"}]),[u,m]=h.useState([]),[g,p]=h.useState(""),[x,f]=h.useState(""),[w,b]=h.useState(null),B=()=>{g&&x&&("PERCENTAGE"===o?d([...c,{label:g,value:x+"%"}]):m([...u,{label:g,value:parseFloat(x).toFixed(2)}]),p(""),f(""))},y=e.jsx(q,{label:"Save Settings",variant:"primary",onClick:()=>{i(!1)},className:"w-full"}),v=e.jsxs("div",{className:"w-full space-y-2",children:[e.jsx(q,{label:"Confirm Selection",variant:"primary",onClick:()=>{const e="PERCENTAGE"===r?c:u;null!==w&&e[w]&&(s(e[w]),b(null),t())},disabled:null===w,className:"w-full"}),e.jsx(q,{label:"Manage Discounts",variant:"secondary",onClick:()=>i(!0),className:"w-full"})]});return e.jsx(ve,{isOpen:A,onClose:t,title:a?"Manage Discounts":"Select Discount",subtitle:a?"Add or remove discount options":"Choose a discount to apply",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),footer:a?y:v,size:"md",contentClassName:"space-y-4",children:a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 px-4 py-2 rounded-lg font-semibold text-sm transition-all "+("PERCENTAGE"===o?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>l("PERCENTAGE"),children:"Percentage"}),e.jsx("button",{className:"flex-1 px-4 py-2 rounded-lg font-semibold text-sm transition-all "+("FIXED"===o?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>l("FIXED"),children:"Fixed Amount"})]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:("PERCENTAGE"===o?c:u).map((A,t)=>e.jsxs("div",{className:"flex gap-2 items-center bg-gray-50 p-3 rounded-lg",children:[e.jsx("input",{className:"flex-1 bg-transparent outline-none text-sm font-medium",value:A.label,readOnly:!0}),e.jsx("input",{className:"w-20 bg-transparent text-center outline-none text-sm font-medium",value:A.value,readOnly:!0}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition-colors p-1",onClick:()=>(e=>{"PERCENTAGE"===o?d(c.filter((A,t)=>t!==e)):m(u.filter((A,t)=>t!==e))})(t),title:"Remove",type:"button",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))}),e.jsxs("div",{className:"space-y-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Add New Discount"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Description",value:g,onChange:e=>p(e.target.value)}),e.jsx("input",{className:"w-24 border border-gray-300 rounded-lg px-3 py-2 text-sm text-center focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"PERCENTAGE"===o?"0%":"0.00",value:x,onChange:e=>f(e.target.value),type:"number",min:"0"}),e.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-bold",onClick:B,title:"Add",type:"button",children:"+"})]})]})]}):(()=>{const A="PERCENTAGE"===r?c:u;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 px-4 py-2 rounded-lg font-semibold text-sm transition-all "+("FIX"===r?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>{n("FIX"),b(null)},children:"Fixed Amount"}),e.jsx("button",{className:"flex-1 px-4 py-2 rounded-lg font-semibold text-sm transition-all "+("PERCENTAGE"===r?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>{n("PERCENTAGE"),b(null)},children:"Percentage"})]}),e.jsx("div",{className:"space-y-2",children:0===A.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No discounts available yet."}),e.jsx("p",{className:"text-xs mt-1",children:"Set up discounts in settings."})]}):A.map((A,t)=>e.jsxs("button",{type:"button",className:"w-full border-2 rounded-lg px-4 py-3 text-sm transition-all flex items-center justify-between "+(w===t?"border-blue-600 bg-blue-50 ring-2 ring-blue-300":"border-gray-200 bg-white hover:border-gray-300"),onClick:()=>b(t),children:[e.jsx("span",{className:"font-medium",children:A.label}),e.jsx("span",{className:"font-bold "+(w===t?"text-blue-600":"text-gray-700"),children:A.value})]},t))})]})})()})}function KA({isOpen:A,onClose:t}){const[s,r]=h.useState("SUMMARY"),[n,a]=h.useState(null),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState(!1),[m,g]=h.useState(!1),[p,x]=h.useState(""),f=async(e=null)=>{g(!0);try{x("");const A=e?`/stats/cash-transactions?payment_type=${encodeURIComponent(e)}&limit=100`:"/stats/cash-transactions?limit=100",t=await R(A);c(Array.isArray(t)?t:[])}catch(A){x(A.message||"Failed to load transactions")}finally{g(!1)}};h.useEffect(()=>{A&&((async()=>{u(!0);try{x("");const e=await R("/stats/cash-ledger");o(Array.isArray(e)?e:[])}catch(e){x(e.message||"Failed to load cash ledger")}finally{u(!1)}})(),f())},[A]);const w=e.jsxs("div",{className:"flex gap-2 border-t border-gray-200/50 pt-4 mt-4",children:[e.jsxs("button",{onClick:()=>{r("SUMMARY"),a(null)},className:"flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-semibold transition-all "+("SUMMARY"===s?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.jsx(fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Summary"})]}),e.jsxs("button",{onClick:()=>{r("TRANSACTIONS"),a(null)},className:"flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-semibold transition-all "+("TRANSACTIONS"===s?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.jsx(we,{className:"w-5 h-5"}),e.jsx("span",{children:"Transactions"})]})]});return e.jsx(ve,{isOpen:A,onClose:t,title:"Cash Ledger",subtitle:"View cash balance and payment methods",icon:e.jsx(pe,{className:"w-6 h-6 text-white"}),size:"lg",contentClassName:"space-y-4",children:e.jsxs("div",{className:"space-y-6",children:["SUMMARY"===s?(()=>{const A=i.reduce((e,A)=>e+(Number(A.balance)||0),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-700 text-white rounded-lg shadow-xl px-8 py-8 text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-100 mb-2",children:"Total Cash on Hand"}),e.jsxs("div",{className:"text-5xl font-bold flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-4xl",children:"â‚±"}),A.toFixed(2)]}),e.jsx("p",{className:"text-blue-100 text-sm mt-3",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:e.jsx(pe,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Payment Methods"})]}),e.jsx("div",{className:"space-y-3",children:d?e.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}):0===i.length?e.jsx("div",{className:"text-sm text-gray-500",children:"No balances available"}):i.map(A=>e.jsx("button",{onClick:async()=>{a(A.name),r("TRANSACTIONS"),await f(A.name)},className:"w-full bg-gradient-to-r from-gray-50 to-gray-100/50 hover:from-blue-50 hover:to-indigo-50/50 rounded-2xl p-4 border border-gray-200/50 hover:border-blue-300 transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center border border-gray-200 group-hover:border-blue-300 group-hover:bg-blue-50 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:A.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"View transactions"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["â‚±",(Number(A.balance)||0).toFixed(2)]})}),e.jsx(Be,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors"})]})]})},A.name))})]}),p&&e.jsx("div",{className:"text-sm text-red-600",children:p.includes("Server returned an HTML error page")||p.includes("Cannot GET")?"Unable to reach backend API. Check backend server and proxy configuration.":p})]})})():e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{type:"button",onClick:()=>{a(null),r("SUMMARY")},className:"text-sm text-blue-600 hover:text-blue-800 font-semibold flex items-center gap-2 hover:gap-3 transition-all",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Summary"]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 rounded-2xl p-4 border border-indigo-100/50",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:n?`${n} Transactions`:"All Transactions"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m?"Loading...":`${l.length} transaction${1!==l.length?"s":""} found`})]}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200/50 overflow-hidden",children:m?e.jsx("div",{className:"text-center py-12 text-sm text-gray-500",children:"Loading transactions..."}):0===l.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No transactions found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200/50",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Amount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.map(A=>e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 font-medium",children:new Date(A.created_at).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 border border-blue-200",children:A.payment_type})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right font-bold text-green-600",children:["â‚±",(Number(A.total)||0).toFixed(2)]})]},String(A.transaction_id)))})]})})})]}),w]})})}function RA({isOpen:A,onClose:t,total:s,onSelectPayment:r}){const n=e.jsxs("div",{className:"w-full flex flex-col gap-3",children:[e.jsx(q,{label:"CASH",className:"w-full h-12 text-base font-bold",onClick:()=>r("cash")}),e.jsx(q,{label:"GCASH",className:"w-full h-12 text-base font-bold",onClick:()=>r("gcash")}),e.jsx(q,{label:"MAYA",className:"w-full h-12 text-base font-bold",onClick:()=>r("maya")})]});return e.jsxs(ve,{isOpen:A,onClose:t,title:"Checkout",subtitle:"Select payment method",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),footer:n,size:"sm",contentClassName:"text-center",children:[e.jsxs("div",{className:"bg-blue-500 text-white rounded-2xl py-6 px-4 text-center mb-4",children:[e.jsx("div",{className:"text-sm opacity-90 mb-2",children:"Total Amount"}),e.jsxs("div",{className:"text-4xl font-bold",children:["â‚±",s.toFixed(2)]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Choose your preferred payment method"})]})}function VA({isOpen:A,onClose:t,change:s=0,payable:r=0,onReceipt:n,onNewEntry:a}){const i=e.jsx("div",{className:"w-full flex flex-col gap-3",children:e.jsx(q,{label:"RECEIPT",className:"w-full h-11 text-sm font-semibold bg-blue-700 hover:bg-blue-800 text-white",onClick:()=>{n?n():alert("Receipt")}})});return e.jsxs(ve,{isOpen:A,onClose:t,title:"Payment Complete",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),footer:i,size:"sm",contentClassName:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"w-14 h-14 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl p-5 text-white",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide opacity-90 mb-2",children:"Change"}),e.jsxs("div",{className:"inline-flex items-baseline gap-2 bg-white text-blue-700 rounded-lg px-4 py-3 shadow-md",children:[e.jsx("span",{className:"text-lg font-bold",children:"â‚±"}),e.jsx("span",{className:"text-2xl font-bold",children:Number(s).toFixed(2)})]}),e.jsx("div",{className:"mt-4 text-sm opacity-90",children:"Payable"}),e.jsxs("div",{className:"text-sm font-semibold",children:["â‚±",Number(r).toFixed(2)]})]})]})}function GA({isOpen:A,onClose:t,total:s,onConfirm:r}){const[n,a]=h.useState(""),[i,o]=h.useState(!1),[l,c]=h.useState(null);if(!A&&!i)return null;if(i)return e.jsx(VA,{isOpen:i,onClose:()=>{o(!1),t&&t()},change:l?.change,payable:l?.payable,onNewEntry:()=>{o(!1),t&&t()},onReceipt:()=>{r&&null!=l?.received&&r(Number(l.received))}});const d=e.jsxs(e.Fragment,{children:[e.jsx(q,{label:"Cancel",variant:"secondary",onClick:t,type:"button",className:"flex-1"}),e.jsx(q,{label:"Proceed",variant:"primary",type:"button",onClick:()=>{if(!n||Number(n)<s)return void alert("Amount received must be greater than or equal to total.");const e=Number(n);c({change:e-s,payable:s,received:e}),o(!0)},className:"flex-1"})]});return e.jsxs(ve,{isOpen:A,onClose:t,title:"Cash Payment",subtitle:"Enter amount received",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),footer:d,size:"md",contentClassName:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-2xl py-6 px-4 text-center",children:[e.jsx("div",{className:"text-sm opacity-90 mb-2",children:"Total Amount"}),e.jsxs("div",{className:"text-4xl font-bold",children:["â‚±",s.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount Received"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-center text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"â‚±0.00",value:n,onChange:e=>a(e.target.value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Quick amounts:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[100,200,300,400,500,600,700,800,900].map(A=>e.jsx("button",{className:"bg-blue-100 hover:bg-blue-200 text-blue-700 font-bold py-2 rounded-lg transition-colors text-sm",onClick:()=>(e=>a(e.toString()))(A),children:A},A))})]}),e.jsx(q,{label:"Use Exact Amount",className:"w-full h-10 text-sm font-bold bg-slate-600 hover:bg-slate-700 text-white",onClick:()=>a(s.toString())})]})}function WA({isOpen:A,onClose:t,onImport:s}){const[r,n]=h.useState(!1),[a,i]=h.useState(""),o=sessionStorage.getItem("auth_token"),l=JSON.parse(sessionStorage.getItem("user")||"{}"),c=e.jsx(q,{label:"Close",variant:"secondary",onClick:t,className:"w-full"});return e.jsxs(ve,{isOpen:A,onClose:t,title:"Scan Customer Cart",subtitle:"Ask customer to show their QR",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),footer:c,size:"lg",contentClassName:"space-y-3",children:[e.jsx("div",{className:"text-blue-800 text-sm font-medium",children:"Ask the customer to show their cart QR code"}),e.jsx("div",{className:"h-[50vh]",children:e.jsx(TA,{onScan:async e=>{const A=e?.[0]?.rawValue;if(A){n(!0),i("");try{let e;try{e=JSON.parse(A)}catch(r){throw new Error("Invalid QR payload")}if("cart"===e.t&&e.transaction_id){const{transaction_id:A,business_id:s}=e,r=l?.businessId||l?.business_id;if(s&&r&&Number(s)!==Number(r))throw new Error("This QR code is not valid for this store.");try{const e=await R(`/api/sales/${A}/complete`,{method:"POST",headers:{Authorization:`Bearer ${o}`}});if(e.transaction_id)return t(),void(window.location.href=`/receipt?tn=${e.transaction_number}`);throw new Error("Failed to complete transaction")}catch(a){throw console.error("Error completing transaction:",a),new Error(a.message||"Failed to complete customer transaction")}}else{if("cart"!==e.t||!Array.isArray(e.items))throw new Error("Unsupported QR code format");{const{items:A,b:r}=e,n=l?.businessId||l?.business_id;if(r&&n&&Number(r)!==Number(n))throw new Error("This QR code is not valid for this store.");const a=[];for(const e of A){if(!e?.p||!e?.q)continue;const A=await R(`/api/products/${encodeURIComponent(e.p)}`,{headers:{Authorization:`Bearer ${o}`}});a.push({product_id:A.product_id,sku:A.sku,name:A.product_name,quantity:Number(e.q),price:Number(A.selling_price||0)})}if(0===a.length)throw new Error("No items to import");s(a),t()}}}catch(r){i(r.message||"Failed to process QR code"),console.error("Scan error:",r)}finally{n(!1)}}},paused:r,onResume:()=>n(!1),className:"w-full h-full"})}),a&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:a})]})}function zA(){const A=d(),[t,s]=h.useState(""),[r,n]=h.useState(1),[a,i]=h.useState([]),[o,l]=h.useState(!1),[c,u]=h.useState(!1),[m,g]=h.useState(""),[x,f]=h.useState(!1),[w,b]=h.useState(!1),[B,y]=h.useState(!1),[v,j]=h.useState(!1),[C,N]=h.useState(null),[Q,U]=h.useState(!1),[k,F]=h.useState(!1),[S,E]=h.useState(""),[I,H]=h.useState(""),[_,L]=h.useState(null),[T,O]=h.useState(!1),[M,P]=h.useState(!1),D=h.useRef(null),K=h.useRef(null),[V,z]=h.useState(!1),$=sessionStorage.getItem("auth_token"),J=JSON.parse(sessionStorage.getItem("user")||"{}"),Y=p.useRef(!1),[X,Z]=h.useState("");h.useEffect(()=>{const e=e=>{if(!e.repeat)switch(e.key){case"F3":e.preventDefault(),K.current?.focus();break;case"F4":e.preventDefault(),b(!0);break;case"F5":e.preventDefault(),l(!0);break;case"F6":e.preventDefault(),u(!0);break;case"F7":e.preventDefault(),f(!0);break;case"F8":e.preventDefault(),a.length>0&&y(!0)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a.length]),h.useEffect(()=>{if(!I){const e=J?.businessId||J?.business_id||"BIZ",A=(new Date).toISOString().replace(/[-:T.Z]/g,"").slice(0,14),t=Math.floor(1e3+9e3*Math.random());H(`T-${e}-${A}-${t}`)}},[]),h.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("payment"),A=J?.businessId||J?.business_id,t=window.opener&&!window.opener.closed,s=async(s,r)=>{const n=localStorage.getItem(s);if("success"===e&&n&&A)try{const e=JSON.parse(n);if(Y.current)return;const A=`${r}_finalize_done`;if("1"===sessionStorage.getItem(A))return;Y.current=!0,sessionStorage.setItem(A,"1");try{E("");const A={items:e.items||[],payment_type:r.toLowerCase(),money_received:e.total||null},s=await R("/api/sales/checkout",{method:"POST",headers:{Authorization:`Bearer ${$}`},body:JSON.stringify(A)});s?.transaction_number&&H(s.transaction_number),s?.transaction_id&&L(s.transaction_id),i([]);try{const e=new URL(window.location.origin+"/receipt");s?.transaction_number&&e.searchParams.set("tn",s.transaction_number),s?.transaction_id&&e.searchParams.set("tid",String(s.transaction_id)),null!=s?.total&&e.searchParams.set("total",String(s.total)),t&&window.opener?(window.opener.location.href=e.toString(),window.close()):window.location.href=e.toString()}catch(a){}}catch(o){E(`Failed to record ${r} payment`)}finally{if(localStorage.removeItem(s),!t){const e=new URL(window.location.href);e.searchParams.delete("payment"),window.history.replaceState({},"",e.toString())}}}catch(a){localStorage.removeItem(s)}else if("cancel"===e&&n)if(localStorage.removeItem(s),t&&window.opener)window.close();else{const e=new URL(window.location.href);e.searchParams.delete("payment"),window.history.replaceState({},"",e.toString())}};s("pending_gcash_cart","GCash"),s("pending_maya_cart","Maya")},[]);const ee=async(e,A=1)=>{if(e&&!(A<1)){E("");try{const t=await R(`/api/products/sku/${encodeURIComponent(e)}`,{headers:{Authorization:`Bearer ${$}`}}),r=Number(t.selling_price||0),a=Number(t.stock_quantity??0);if(a<=0)return void E(`Stock for ${t.product_name} (SKU ${t.sku}) is 0.`);if(A>a)return void E(`Insufficient stock. Available: ${a}, requested: ${A}.`);i(e=>{const s=e.findIndex(e=>e.product_id===t.product_id);if(s>=0){const t=[...e],r=t[s].quantity+A;return r>a?(E(`Insufficient stock. Available: ${a}, requested: ${r}.`),e):(t[s]={...t[s],quantity:r},t)}return[...e,{product_id:t.product_id,sku:t.sku,name:t.product_name,quantity:A,price:r}]}),s(""),n(1),F(!1)}catch(t){E("Product not found")}}},Ae=a.reduce((e,A)=>e+A.price*A.quantity,0),te=async(e,t=null)=>{if(0!==a.length){E("");try{const r={items:a.map(e=>({product_id:e.product_id,quantity:e.quantity,price:e.price})),payment_type:e,money_received:t,transaction_id:_,transaction_number:I},n=await R("/api/sales/checkout",{method:"POST",headers:{Authorization:`Bearer ${$}`},body:JSON.stringify(r)});n?.transaction_number&&H(n.transaction_number),n?.transaction_id&&L(n.transaction_id),i([]);try{const e=new URL(window.location.origin+"/receipt");n?.transaction_number&&e.searchParams.set("tn",n.transaction_number),n?.transaction_id&&e.searchParams.set("tid",String(n.transaction_id)),null!=n?.total&&e.searchParams.set("total",String(n.total)),A(e.pathname+e.search)}catch(s){}const o=J?.businessId||J?.business_id||"BIZ",l=(new Date).toISOString().replace(/[-:T.Z]/g,"").slice(0,14),c=Math.floor(1e3+9e3*Math.random());H(`T-${o}-${l}-${c}`)}catch(r){console.error("Checkout error:",r),E("Checkout failed")}}},[se,re]=h.useState([]),[ne,ae]=h.useState(0),ie=()=>{try{return JSON.parse(sessionStorage.getItem("read_notif_ids")||"[]")}catch(e){return[]}};h.useEffect(()=>{(async()=>{try{const e=await R("/api/logs",{headers:{Authorization:`Bearer ${$}`}}),A=new Set(ie()),t=new Set(JSON.parse(sessionStorage.getItem("deleted_notif_ids")||"[]")),s=(e||[]).filter(e=>!t.has(e.log_id)).map(e=>({id:e.log_id,title:e.action,message:`${e.username} (${e.role}) did an action: ${e.action}`,time:new Date(e.date_time).toLocaleString(),isRead:A.has(e.log_id)}));re(s),ae(s.filter(e=>!e.isRead).length)}catch(e){console.error("Failed to fetch notifications",e)}})()},[]),h.useEffect(()=>{$&&(async()=>{try{const e=await R("/api/business/profile",{headers:{Authorization:`Bearer ${$}`}});e?.business?.business_name&&Z(e.business.business_name)}catch(e){console.error("Failed to fetch business name",e)}})()},[$]),h.useEffect(()=>{const e=e=>{D.current&&!D.current.contains(e.target)&&O(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const oe=e.jsxs("div",{className:"flex items-center gap-1 sm:gap-4 mr-3",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("button",{onClick:async()=>{try{if(!J.store_name)return;await navigator.clipboard.writeText(J.store_name)}catch(e){}},title:"Copy store name",className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg px-2 py-1.5 sm:px-2.5 shadow-sm",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2M8 16h8a2 2 0 002-2v-6m-10 8l-2 2m2-2l2 2"})}),e.jsx("span",{className:"font-mono text-xs sm:text-sm font-bold tracking-wider truncate max-w-[30vw] sm:max-w-[50vw]",children:J.store_name})]})}),e.jsx("div",{className:"relative",ref:D,children:e.jsx(kA,{notifications:se,unreadCount:ne,onMarkAsRead:e=>{const A=ie();A.includes(e)||sessionStorage.setItem("read_notif_ids",JSON.stringify([...A,e])),re(A=>A.map(A=>A.id===e?{...A,isRead:!0}:A)),ae(e=>Math.max(0,e-1))},onMarkAsUnread:e=>{const A=ie().filter(A=>A!==e);sessionStorage.setItem("read_notif_ids",JSON.stringify(A)),re(A=>A.map(A=>A.id===e?{...A,isRead:!1}:A)),ae(e=>e+1)},onDelete:e=>{const A=JSON.parse(sessionStorage.getItem("deleted_notif_ids")||"[]");sessionStorage.setItem("deleted_notif_ids",JSON.stringify([...A,e])),re(A=>A.filter(A=>A.id!==e));const t=se.find(A=>A.id===e);t&&!t.isRead&&ae(e=>Math.max(0,e-1))},isOpen:T,onToggle:()=>O(!T),containerRef:D})}),e.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 bg-white/80 backdrop-blur-sm p-1.5 sm:px-3 sm:py-2 rounded-lg border border-gray-200/80",children:[e.jsx("div",{className:"w-6 h-6 sm:w-7 sm:h-7 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full flex items-center justify-center text-sm font-medium shadow-md",children:J.username?.[0]?.toUpperCase()||"A"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:inline",children:J.username||"Admin"})]})]});return e.jsxs(Ue,{title:X?`${X} - POS`:"POS",sidebar:e.jsx(fA,{}),headerActions:oe,isSidebarOpen:V,setSidebarOpen:z,children:[e.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:e.jsx("main",{className:"flex-1 bg-gradient-to-br from-gray-50/50 via-blue-50/30 to-indigo-50/50 overflow-hidden p-2 sm:p-3 md:p-4 pb-10 lg:pb-4",children:e.jsxs("div",{className:"grid gap-2 sm:gap-3 md:gap-4 h-full grid-cols-1 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(TA,{onScan:async e=>{const A=e?.[0]?.rawValue;A&&(F(!0),c?g(A):await ee(A,1))},paused:k,onResume:()=>F(!1),textMain:"text-blue-700"})}),e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx(OA,{ref:K,sku:t,setSku:s,quantity:r,setQuantity:n,handleAddToCart:async()=>{await ee(t,r)}}),S&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-3 flex items-start gap-2 mt-3",children:[e.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-sm font-medium text-red-700",children:(()=>{try{const e=JSON.parse(S);return e.error||e.message||S}catch{return S}})()})]})]})]}),e.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-2 sm:gap-3 min-h-0",children:[e.jsx("div",{className:"flex-1 min-h-0 max-h-[calc(100vh-280px)]",children:e.jsx(MA,{cart:a,handleRemove:e=>i(a.filter((A,t)=>t!==e)),handleEditQuantity:async(e,A)=>{if(A<1)return void E("Quantity must be at least 1");const t=a[e];if(t){E("");try{const s=await R(`/api/products/sku/${encodeURIComponent(t.sku)}`,{headers:{Authorization:`Bearer ${$}`}}),r=Number(s.stock_quantity??0);if(A>r)return void E(`Insufficient stock. Available: ${r}, requested: ${A}.`);i(t=>t.map((t,s)=>s===e?{...t,quantity:A}:t))}catch(s){E(s.message||"Failed to update quantity")}}},total:Ae,className:"flex-1 h-full"})}),e.jsxs("div",{className:"grid grid-cols-12 gap-2 sm:gap-3 flex-shrink-0",children:[e.jsx("div",{className:"col-span-8",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsx(q,{label:"CASH LEDGER (F4)",size:"md",className:"w-full h-10 sm:h-12 text-xs sm:text-sm font-bold",variant:"secondary",microinteraction:!0,onClick:()=>b(!0),icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),iconPosition:"left"}),e.jsx(q,{label:"DISCOUNT (F5)",size:"md",className:"w-full h-10 sm:h-12 text-xs sm:text-sm font-bold",onClick:()=>l(!0),variant:"secondary",microinteraction:!0,icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),iconPosition:"left"}),e.jsx(q,{label:"PRICE CHECK (F6)",size:"md",className:"w-full h-10 sm:h-12 text-xs sm:text-sm font-bold",onClick:()=>u(!0),variant:"secondary",microinteraction:!0,icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),iconPosition:"left"}),e.jsx(q,{label:"IMPORT CART (F7)",size:"md",className:"w-full h-10 sm:h-12 text-xs sm:text-sm font-bold",onClick:()=>f(!0),variant:"secondary",microinteraction:!0,icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),iconPosition:"left"})]})}),e.jsx("div",{className:"col-span-4",children:e.jsx(q,{label:"CHECKOUT (F8)",size:"md",className:"w-full h-full text-sm sm:text-base font-bold",variant:"primary",microinteraction:!0,onClick:()=>y(!0),disabled:0===a.length,icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),iconPosition:"left"})})]})]})]})})}),e.jsx(DA,{isOpen:o,onClose:()=>l(!1),onApplyDiscount:e=>{l(!1)}}),e.jsx(PA,{isOpen:c,onClose:()=>u(!1),sku:m,setSku:g}),e.jsx(KA,{isOpen:w,onClose:()=>b(!1)}),e.jsx(RA,{isOpen:B,onClose:()=>y(!1),total:Ae,onSelectPayment:e=>{N(e),y(!1),"cash"===e?j(!0):"gcash"===e?(async()=>{try{const e=window.location.origin+"/pos?payment=success",A=window.location.origin+"/pos?payment=cancel";localStorage.setItem("pending_gcash_cart",JSON.stringify({items:a.map(e=>({product_id:e.product_id,quantity:e.quantity})),total:Ae}));const{checkoutUrl:t}=await G({amount:Number(Ae||0),description:"POS Order",referenceNumber:I||`POS-${Date.now()}`,cancelUrl:A,successUrl:e});window.open(t,"_blank")}catch(e){E("Failed to init GCash"),localStorage.removeItem("pending_gcash_cart")}})():"maya"===e?(async()=>{try{const e=window.location.origin+"/pos?payment=success",A=window.location.origin+"/pos?payment=cancel";localStorage.setItem("pending_maya_cart",JSON.stringify({items:a.map(e=>({product_id:e.product_id,quantity:e.quantity})),total:Ae}));const{checkoutUrl:t}=await W({amount:Number(Ae||0),description:"POS Order",referenceNumber:I||`POS-${Date.now()}`,cancelUrl:A,successUrl:e});window.open(t,"_blank")}catch(e){E("Failed to init Maya"),localStorage.removeItem("pending_maya_cart")}})():te(e)}}),e.jsx(GA,{isOpen:v,onClose:()=>j(!1),total:Ae,onConfirm:e=>{te("cash",e),j(!1)}}),e.jsx(QA,{isOpen:M,onClose:()=>P(!1),userData:J}),e.jsx(WA,{isOpen:x,onClose:()=>f(!1),onImport:(e,A)=>{A&&L(A),i(A=>{const t=new Map(A.map(e=>[e.sku,e]));for(const s of e){const e=t.get(s.sku);e?e.quantity+=s.quantity:t.set(s.sku,{...s})}return Array.from(t.values())})}})]})}function $A(){const A=d(),[t,s]=h.useState(""),[r,n]=h.useState(""),[a,i]=h.useState(1),[o,l]=h.useState([]),[c,u]=h.useState(null),[m,g]=h.useState(!1),[x,f]=h.useState(!1),[w,b]=h.useState(!1),[B,y]=h.useState(!1),[v,j]=h.useState(!1),[C,N]=h.useState(null),[Q,U]=h.useState(!1),[k,F]=h.useState(!1),[S,E]=h.useState(!1),[I,H]=h.useState(""),[_,L]=h.useState(!1),[T,O]=h.useState(""),[M,P]=h.useState(null),[D,K]=h.useState(!1),[V,z]=h.useState(!1);h.useRef(null);const[$,J]=h.useState(!1);h.useRef(null),h.useRef(!1);const Y=sessionStorage.getItem("auth_token"),X=JSON.parse(sessionStorage.getItem("user")||"{}"),Z=p.useRef(!1);h.useEffect(()=>{const e=e=>{if(!e.repeat)switch(e.key){case"F4":e.preventDefault(),y(!0);break;case"F5":e.preventDefault(),g(!0);break;case"F6":e.preventDefault(),f(!0);break;case"F7":e.preventDefault(),b(!0);break;case"F8":e.preventDefault(),o.length>0&&j(!0)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o.length]),h.useEffect(()=>{if(!T){const e=X?.businessId||X?.business_id||"BIZ",A=(new Date).toISOString().replace(/[-:T.Z]/g,"").slice(0,14),t=Math.floor(1e3+9e3*Math.random());O(`T-${e.toString().padStart(2,"0")}-${A}-${t}`)}},[]),h.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("payment"),t=window.opener&&!window.opener.closed,s=async(s,r)=>{const n=localStorage.getItem(s);if("success"===e&&n)try{const e=JSON.parse(n);(async()=>{if(Z.current)return;const n=`${r.toLowerCase()}_finalize_done`;if("1"!==sessionStorage.getItem(n)){Z.current=!0,sessionStorage.setItem(n,"1");try{H("");const s={items:e.items||[],payment_type:r.toLowerCase(),money_received:e.total||null,transaction_id:e.transactionId||null,transaction_number:e.transactionNumber||null},n=await R("/api/sales/checkout",{method:"POST",headers:{Authorization:`Bearer ${Y}`},body:JSON.stringify(s)});n?.transaction_number&&O(n.transaction_number),n?.transaction_id&&P(n.transaction_id),l([]);try{const e=new URL(window.location.origin+"/receipt");n?.transaction_number&&e.searchParams.set("tn",n.transaction_number),n?.transaction_id&&e.searchParams.set("tid",String(n.transaction_id)),null!=n?.total&&e.searchParams.set("total",String(n.total)),t&&window.opener?(window.opener.location.href=e.toString(),window.close()):A(e.pathname+e.search)}catch(a){}}catch(i){H(`Failed to record ${r} payment`)}finally{if(localStorage.removeItem(s),!t){const e=new URL(window.location.href);e.searchParams.delete("payment"),window.history.replaceState({},"",e.toString())}}}})()}catch(a){localStorage.removeItem(s)}else if("cancel"===e&&n)if(localStorage.removeItem(s),t&&window.opener)window.close();else{const e=new URL(window.location.href);e.searchParams.delete("payment"),window.history.replaceState({},"",e.toString())}};s("pending_gcash_cart","GCash"),s("pending_maya_cart","Maya")},[]);const ee=async(e,A=1)=>{if(e&&!(A<1)){H("");try{const t=X?.businessId||X?.business_id||null,r=t?`/api/products/sku/${encodeURIComponent(e)}?business_id=${t}`:`/api/products/sku/${encodeURIComponent(e)}`,n=await R(r,{headers:{Authorization:`Bearer ${Y}`}}),a=Number(n.selling_price||0),o=Number(n.stock_quantity??0);if(o<=0)return void H(`Stock for ${n.product_name} (SKU ${n.sku}) is 0.`);if(A>o)return void H(`Insufficient stock. Available: ${o}, requested: ${A}.`);l(e=>{const t=e.findIndex(e=>e.product_id===n.product_id);if(t>=0){const s=[...e],r=s[t].quantity+A;return r>o?(H(`Insufficient stock. Available: ${o}, requested: ${r}.`),e):(s[t]={...s[t],quantity:r},s)}return[...e,{product_id:n.product_id,sku:n.sku,name:n.product_name,quantity:A,price:a}]}),s(""),i(1),E(!1)}catch(t){H("Product not found")}}},Ae=o.reduce((e,A)=>e+A.price*A.quantity,0),te=async(e="cash",t=Ae)=>{if(0!==o.length){H("");try{const r={transaction_id:M||null,transaction_number:T||null,items:o.map(e=>({product_id:e.product_id,quantity:e.quantity})),payment_type:e,money_received:t,...c&&"string"==typeof c.value&&c.value.endsWith("%")?{discount_percentage:parseFloat(c.value)}:c?{discount_amount:Number(c.value)}:{}},n=await R("/api/sales/checkout",{method:"POST",headers:{Authorization:`Bearer ${Y}`},body:JSON.stringify(r)});n?.transaction_number&&O(n.transaction_number),n?.transaction_id&&P(n.transaction_id),l([]);try{const e=new URL(window.location.origin+"/receipt");n?.transaction_number&&e.searchParams.set("tn",n.transaction_number),n?.transaction_id&&e.searchParams.set("tid",String(n.transaction_id)),null!=n?.total&&e.searchParams.set("total",String(n.total)),A(e.pathname+e.search)}catch(s){}const a=X?.businessId||X?.business_id||"BIZ",i=(new Date).toISOString().replace(/[-:T.Z]/g,"").slice(0,14),d=Math.floor(1e3+9e3*Math.random());O(`T-${a.toString().padStart(2,"0")}-${i}-${d}`),u(null),P(null)}catch(r){H("Checkout failed")}}},se=()=>{L(!1)},re=e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>K(!D),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Notifications",children:e.jsx(vA,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{onClick:()=>z(!0),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Profile",children:e.jsx(CA,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{onClick:()=>{L(!0)},className:"p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Logout",children:e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1"})})})]});return e.jsx("div",{className:"bg-white min-h-screen",children:e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[e.jsxs("header",{className:"flex items-center gap-2 px-4 sm:px-6 py-3 bg-white/90 backdrop-blur-md shadow-md border-b border-gray-200/50 h-[64px] min-h-[64px] max-h-[64px] sticky top-0 z-30",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900 tracking-tight",children:"POS"})}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-2",children:e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(X.store_name)},title:"Copy store name",className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg px-2.5 py-1.5 shadow-sm hover:bg-blue-100 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2M8 16h8a2 2 0 002-2v-6m-10 8l-2 2m2-2l2 2"})}),e.jsx("span",{className:"font-mono text-xs sm:text-sm md:text-base font-bold tracking-wider truncate max-w-[50vw]",children:X.store_name})]})}),e.jsx("div",{className:"ml-auto",children:re})]}),e.jsx("main",{className:"flex-1 bg-gradient-to-br from-gray-50/50 via-blue-50/30 to-indigo-50/50 overflow-y-auto p-2 sm:p-3 md:p-4 pb-55 lg:pb-4",children:e.jsxs("div",{className:"grid gap-2 sm:gap-3 md:gap-4 h-full grid-cols-1 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(TA,{onScan:async e=>{const A=e?.[0]?.rawValue;if(A)if(E(!0),x)n(A);else try{let e;try{e=JSON.parse(A)}catch(t){e=null}if(e&&"cart"===e.t&&Array.isArray(e.items)){e.transaction_id&&P(e.transaction_id),e.transaction_number&&O(e.transaction_number);const A=e.items.map(e=>({product_id:e.p,quantity:e.q,sku:e.sku||""}));try{const e=await Promise.all(A.map(async e=>{const A=await R(`/api/products/${e.product_id}`,{headers:{Authorization:`Bearer ${Y}`}});return{product_id:e.product_id,sku:A.sku||e.sku||"",name:A.product_name||"",price:Number(A.selling_price)||0,quantity:e.quantity}}));return void l(A=>{const t=new Map(A.map(e=>[e.product_id,e]));for(const s of e){const e=t.get(s.product_id);e?e.quantity+=s.quantity:t.set(s.product_id,{...s})}return Array.from(t.values())})}catch(s){return console.error("Error fetching product details for scanned cart:",s),void l(e=>{const t=new Map(e.map(e=>[e.product_id,e]));for(const s of A){const e=t.get(s.product_id);e?e.quantity+=s.quantity:t.set(s.product_id,{...s,name:"",price:0})}return Array.from(t.values())})}}await ee(A,1)}catch(s){console.error("Error processing scanned code:",s),await ee(A,1)}},paused:S,onResume:()=>E(!1),textMain:"text-blue-700"})}),e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx(OA,{sku:t,setSku:s,quantity:a,setQuantity:i,handleAddToCart:async()=>{await ee(t,a)}}),I&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-3 flex items-start gap-2 mt-3",children:[e.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-sm font-medium text-red-700",children:(()=>{try{const e=JSON.parse(I);return e.error||e.message||I}catch{return I}})()})]})]})]}),e.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-2 sm:gap-3 min-h-0",children:[e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx(MA,{cart:o,handleRemove:e=>l(o.filter((A,t)=>t!==e)),total:Ae,className:"flex-1 h-full"})}),e.jsxs("div",{className:"grid grid-cols-12 gap-2 sm:gap-3 flex-shrink-0",children:[e.jsx("div",{className:"col-span-8",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsx(q,{label:"CASH LEDGER (F4)",size:"md",className:"w-full h-10 sm:h-12 text-xs sm:text-sm font-bold",variant:"secondary",microinteraction:!0,onClick:()=>y(!0),icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),iconPosition:"left"}),e.jsx(q,{label:"DISCOUNT (F5)",size:"md",className:"w-full h-10 sm:h-12 text-xs sm:text-sm font-bold",onClick:()=>g(!0),variant:"secondary",microinteraction:!0,icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),iconPosition:"left"}),e.jsx(q,{label:"PRICE CHECK (F6)",size:"md",className:"w-full h-10 sm:h-12 text-xs sm:text-sm font-bold",onClick:()=>f(!0),variant:"secondary",microinteraction:!0,icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),iconPosition:"left"}),e.jsx(q,{label:"IMPORT CART (F7)",size:"md",className:"w-full h-10 sm:h-12 text-xs sm:text-sm font-bold",onClick:()=>b(!0),variant:"secondary",microinteraction:!0,icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),iconPosition:"left"})]})}),e.jsx("div",{className:"col-span-4",children:e.jsx(q,{label:"CHECKOUT (F8)",size:"md",className:"w-full h-full text-sm sm:text-base font-bold",variant:"primary",microinteraction:!0,onClick:()=>j(!0),disabled:0===o.length,icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),iconPosition:"left"})})]})]})]})}),_&&e.jsxs("div",{className:"fixed inset-0 z-90 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 z-90",onClick:se}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-[92%] max-w-md z-100 p-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-50 via-red-50/80 to-orange-50/50 border-b border-red-100 px-6 py-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"white",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Confirm Logout"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure you want to log out?"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-6",children:"You will be redirected to the login page and your session will end."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:se,className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:"Cancel"}),e.jsxs("button",{onClick:()=>{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),L(!1),A("/")},className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})]})]}),e.jsx(DA,{isOpen:m,onClose:()=>g(!1),onApplyDiscount:e=>{g(!1)}}),e.jsx(PA,{isOpen:x,onClose:()=>f(!1),sku:r,setSku:n}),e.jsx(KA,{isOpen:B,onClose:()=>y(!1)}),e.jsx(RA,{isOpen:v,onClose:()=>j(!1),total:Ae,onSelectPayment:e=>{N(e),j(!1),"cash"===e?U(!0):"gcash"===e?(async()=>{try{const e=window.location.origin+"/pos?payment=success",A=window.location.origin+"/pos?payment=cancel";localStorage.setItem("pending_gcash_cart",JSON.stringify({items:o.map(e=>({product_id:e.product_id,quantity:e.quantity})),total:Ae,transactionId:M,transactionNumber:T}));const{checkoutUrl:t}=await G({amount:Number(Ae||0),description:"POS Order",referenceNumber:T||`POS-${Date.now()}`,cancelUrl:A,successUrl:e});window.open(t,"_blank")}catch(e){H("Failed to init GCash"),localStorage.removeItem("pending_gcash_cart")}})():"maya"===e?(async()=>{try{const e=window.location.origin+"/pos?payment=success",A=window.location.origin+"/pos?payment=cancel";localStorage.setItem("pending_maya_cart",JSON.stringify({items:o.map(e=>({product_id:e.product_id,quantity:e.quantity})),total:Ae,transactionId:M,transactionNumber:T}));const{checkoutUrl:t}=await W({amount:Number(Ae||0),description:"POS Order",referenceNumber:T||`POS-${Date.now()}`,cancelUrl:A,successUrl:e});window.open(t,"_blank")}catch(e){H("Failed to init Maya"),localStorage.removeItem("pending_maya_cart")}})():te(e)}}),e.jsx(GA,{isOpen:Q,onClose:()=>U(!1),total:Ae,onConfirm:e=>{te("cash",e),U(!1)}}),e.jsx(WA,{isOpen:w,onClose:()=>b(!1),onImport:async(e,A,t)=>{try{if(t&&A)return l([]),P(null),O(null),H(""),b(!1),void(window.location.href=`/receipt?tn=${t.transaction_number||A}`);if(!e||0===e.length)return void H("No items found in QR code");console.log("Scanned items:",e);const s=await Promise.all(e.map(async e=>{const A=await R(`/api/products/${e.product_id}`,{headers:{Authorization:`Bearer ${Y}`}});return console.log("Fetched product for id",e.product_id,":",A),{product_id:e.product_id,sku:A.sku||e.sku||"",name:A.product_name||"",price:Number(A.selling_price)||0,quantity:e.quantity}}));l(e=>{const A=new Map(e.map(e=>[e.sku,e]));for(const t of s){const e=A.get(t.sku);e?e.quantity+=t.quantity:A.set(t.sku,{...t})}return Array.from(A.values())})}catch(s){console.error("Error fetching products for scanned items:",s),l(A=>{const t=new Map(A.map(e=>[e.sku,e]));for(const s of e){const e=t.get(s.sku);e?e.quantity+=s.quantity:t.set(s.sku,{...s})}return Array.from(t.values())})}}}),e.jsx(QA,{isOpen:V,onClose:()=>z(!1),userData:X})]})})}function JA({products:A,allProducts:t,page:s,entriesPerPage:r,totalPages:n,onPageChange:a,onEntriesChange:i,search:o,onSearchChange:l,onEdit:c,onDelete:d,onStockEntry:u,categories:h=[],selectedCategory:m,onCategoryFilter:g,stockFilter:p,onStockFilter:x,sortBy:f,sortOrder:w,onSort:b}){const B=()=>e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 1 1 2.828 2.828L11.828 15.828a4 4 0 0 1-1.414.828l-4.243 1.414 1.414-4.243a4 4 0 0 1 .828-1.414z"})}),y=()=>e.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),e.jsx("path",{d:"M10 11v6M14 11v6"})]}),v=()=>e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 4v16m8-8H4"})}),j=e=>0===e?{label:"Out of Stock",color:"bg-red-100 text-red-700 border-red-200"}:e<10?{label:"Low Stock",color:"bg-orange-100 text-orange-700 border-orange-200"}:{label:"In Stock",color:"bg-green-100 text-green-700 border-green-200"},C=({direction:A})=>e.jsx("svg",{className:"w-4 h-4 "+(A?"text-blue-600":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:"asc"===A?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}):"desc"===A?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),N=e=>{b(e,f===e&&"asc"===w?"desc":"asc")};return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"mb-4 sm:mb-6 p-3 sm:p-4 md:p-6 w-full overflow-hidden",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 w-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 sm:gap-4 w-full",children:[e.jsx("div",{className:"flex-1 w-full min-w-0",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:o,onChange:l,className:"w-full pl-9 sm:pl-12 pr-3 sm:pr-4 py-2 sm:py-3 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl text-xs sm:text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-gray-400",placeholder:"Search products, categories..."})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-600 hidden md:block",children:"Sort:"}),e.jsxs("select",{value:`${f}-${w}`,onChange:e=>{const[A,t]=e.target.value.split("-");b(A,t)},className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl px-2 sm:px-3 py-1.5 sm:py-2 text-xs font-medium text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 cursor-pointer",children:[e.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),e.jsx("option",{value:"quantity-asc",children:"Stock (Low to High)"}),e.jsx("option",{value:"quantity-desc",children:"Stock (High to Low)"}),e.jsx("option",{value:"selling_price-asc",children:"Price (Low to High)"}),e.jsx("option",{value:"selling_price-desc",children:"Price (High to Low)"}),e.jsx("option",{value:"category-asc",children:"Category (A-Z)"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-600 hidden md:block",children:"Show:"}),e.jsx("select",{value:r,onChange:i,className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl px-2 sm:px-3 py-1.5 sm:py-2 text-xs font-medium text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 cursor-pointer",children:[5,10,25,50,100].map(A=>e.jsx("option",{value:A,children:A},A))})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2 sm:pt-3 border-t border-gray-100 w-full",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 shrink-0",children:"Filters:"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:m||"",onChange:e=>g(e.target.value||null),className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-full px-3 sm:px-4 py-1 sm:py-1.5 text-xs font-medium text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 cursor-pointer",children:[e.jsx("option",{value:"",children:"All Categories"}),h.map(A=>e.jsx("option",{value:A.name,children:A.name},A.id||A.name))]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:p||"",onChange:e=>x(e.target.value||null),className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-full px-3 sm:px-4 py-1 sm:py-1.5 text-xs font-medium text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 cursor-pointer",children:[e.jsx("option",{value:"",children:"All Stock Status"}),e.jsx("option",{value:"in_stock",children:"In Stock"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]})}),(m||p)&&e.jsxs("button",{onClick:()=>{g(null),x(null)},className:"px-2 sm:px-3 py-1 sm:py-1.5 rounded-full text-xs font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-all duration-200 flex items-center gap-1 shrink-0",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]})]})}),e.jsxs(Ke,{className:"overflow-hidden w-full",children:[e.jsxs("div",{className:"overflow-x-auto w-full relative hidden sm:block",children:[" ",e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-50/80 to-indigo-50/80 border-b-2 border-blue-100",children:[e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"#"}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-blue-100/50 transition-colors group",onClick:()=>N("name"),children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:["Product",e.jsx(C,{direction:"name"===f?w:null})]})}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider hidden sm:table-cell cursor-pointer hover:bg-blue-100/50 transition-colors group",onClick:()=>N("category"),children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:["Category",e.jsx(C,{direction:"category"===f?w:null})]})}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider hidden md:table-cell",children:"Description"}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider hidden lg:table-cell",children:"Cost Price"}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-blue-100/50 transition-colors group",onClick:()=>N("selling_price"),children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:["Selling Price",e.jsx(C,{direction:"selling_price"===f?w:null})]})}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-blue-100/50 transition-colors group",onClick:()=>N("quantity"),children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:["Stock",e.jsx(C,{direction:"quantity"===f?w:null})]})}),e.jsx("th",{className:"py-3 px-2 sm:py-4 sm:px-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:0===A.length?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"No products found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:o?"Try adjusting your search terms":"Start by adding your first product"})]})})}):A.map((A,t)=>{const n=j(A.quantity);return e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-all duration-200 group",children:[e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4 text-xs sm:text-sm text-gray-600 font-medium",children:(s-1)*r+t+1}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4",children:e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsxs("span",{className:"text-xs sm:text-sm font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:[A.name||"N/A"," "]}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-500 mt-0.5 truncate",children:["SKU: ",A.sku||"N/A"]})]})}),e.jsxs("td",{className:"py-3 px-2 sm:py-4 sm:px-4 hidden sm:table-cell",children:[e.jsx("span",{className:"inline-flex items-center px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-medium bg-indigo-50 text-indigo-700 border border-indigo-200",children:A.category})," "]}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4 max-w-xs truncate hidden md:table-cell text-xs sm:text-sm text-gray-600",title:A.description,children:A.description||"-"}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4 hidden lg:table-cell",children:e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:["â‚±",Number(A.cost_price||0).toFixed(2)," "]})}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4",children:e.jsxs("span",{className:"text-xs sm:text-sm font-bold text-blue-600",children:["â‚±",Number(A.selling_price||0).toFixed(2)," "]})}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:A.quantity}),e.jsx("span",{className:`inline-flex items-center px-1.5 sm:px-2 py-0.5 rounded-full text-[10px] sm:text-xs font-medium border ${n.color}`,children:n.label})]})}),e.jsx("td",{className:"py-3 px-2 sm:py-4 sm:px-4",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>u&&u(A),className:"p-2 rounded-lg bg-green-50 text-green-600 hover:bg-green-100 border border-green-200 transition-all duration-200 hover:scale-110",title:"Add Stock",children:e.jsx(v,{})}),e.jsx("button",{onClick:()=>c(A),className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200 transition-all duration-200 hover:scale-110",title:"Edit Product",children:e.jsx(B,{})}),e.jsx("button",{onClick:()=>d(A.id),className:"p-2 rounded-lg bg-red-50 text-red-600 hover:bg-red-100 border border-red-200 transition-all duration-200 hover:scale-110",title:"Delete Product",children:e.jsx(y,{})})]})})]},A.id)})})]})]}),e.jsx("div",{className:"sm:hidden divide-y divide-gray-100",children:0===A.length?e.jsx("div",{className:"text-center py-16 px-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"No products found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:o?"Try adjusting your search terms":"Start by adding your first product"})]})}):A.map((A,t)=>{const s=j(A.quantity);return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",children:A.name||"N/A"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["SKU: ",A.sku||"N/A"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium bg-indigo-50 text-indigo-700 border border-indigo-200",children:A.category||"N/A"})}),A.description&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 italic truncate",title:A.description,children:['"',A.description,'"']})]}),e.jsxs("div",{className:"flex-shrink-0 text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-blue-600",children:["â‚±",Number(A.selling_price||0).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Cost: â‚±",Number(A.cost_price||0).toFixed(2)]}),e.jsxs("p",{className:`text-xs font-semibold mt-1 ${s.color.replace("bg-","text-").split(" ")[0]}`,children:[A.quantity," in stock"]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2 border-t border-gray-100 pt-3",children:[e.jsx("button",{onClick:()=>u&&u(A),className:"p-2 rounded-lg bg-green-50 text-green-600 hover:bg-green-100 border border-green-200 transition-all duration-200",title:"Add Stock",children:e.jsx(v,{})}),e.jsx("button",{onClick:()=>c(A),className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200 transition-all duration-200",title:"Edit Product",children:e.jsx(B,{})}),e.jsx("button",{onClick:()=>d(A.id),className:"p-2 rounded-lg bg-red-50 text-red-600 hover:bg-red-100 border border-red-200 transition-all duration-200",title:"Delete Product",children:e.jsx(y,{})})]})]},A.id)})}),e.jsx("div",{className:"bg-gray-50/50 border-t border-gray-200 px-3 sm:px-4 md:px-6 py-3 sm:py-4 w-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4 w-full",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:["Showing"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:0===A.length?0:(s-1)*r+1})," ","to"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:Math.min(s*r,A.length)})," ","of"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:A.length})," ","entries"]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-1 sm:gap-2 w-full sm:w-auto",children:[e.jsx(q,{label:"Previous",size:"sm",variant:"secondary",onClick:()=>a(s-1),disabled:1===s,className:"min-w-[80px] sm:min-w-[100px] text-xs sm:text-sm"}),e.jsx("div",{className:"flex items-center gap-1 flex-wrap justify-center",children:Array.from({length:Math.min(n,5)},(A,t)=>{let r;return r=n<=5||s<=3?t+1:s>=n-2?n-4+t:s-2+t,e.jsx(q,{variant:s===r?"paginationActive":"paginationInactive",onClick:()=>a(r),disabled:s===r,className:"min-w-[36px] sm:min-w-[40px] text-xs sm:text-sm",children:r},r)})}),e.jsx(q,{label:"Next",size:"sm",variant:"secondary",onClick:()=>a(s+1),disabled:s===n,className:"min-w-[80px] sm:min-w-[100px] text-xs sm:text-sm"})]})]})})]})]})}function qA({products:A,allProducts:t=A,stats:s,page:r,entriesPerPage:n,totalPages:a,onPageChange:i,onEntriesChange:o,search:l,onSearchChange:c,onEdit:d,onDelete:u,onAddProduct:h,onStockEntry:m,onExport:g,categories:p=[],selectedCategory:x,onCategoryFilter:f,stockFilter:w,onStockFilter:b,sortBy:B,sortOrder:y,onSort:v,className:j=""}){const C=t.reduce((e,A)=>e+Number(A.selling_price||0)*Number(A.quantity||0),0),N=t.filter(e=>Number(e.quantity||0)<10).length;return e.jsxs("div",{className:`w-full max-w-full overflow-x-hidden py-4 sm:py-6 px-4 md:px-6 ${j}`,children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-3 sm:gap-4 mb-4 sm:mb-6 w-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 w-full sm:w-auto",children:[e.jsxs(q,{onClick:()=>{((e,A)=>{const t=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");if(void 0!==s.download){const e=URL.createObjectURL(t);s.setAttribute("href",e),s.setAttribute("download",A),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}})((e=>{if(!e||0===e.length)return"";const A=[];return A.push(["Name","SKU","Category","Description","Cost Price","Selling Price","Stock"].join(",")),e.forEach(e=>{const t=[`"${e.name||""}"`,`"${e.sku||""}"`,`"${e.category||""}"`,`"${e.description||""}"`,e.cost_price||0,e.selling_price||0,e.quantity||0];A.push(t.join(","))}),A.join("\n")})(t),`inventory_export_${(new Date).toISOString().split("T")[0]}.csv`)},size:"lg",variant:"secondary",className:"flex items-center gap-2 w-full sm:w-auto shrink-0",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]}),e.jsxs(q,{onClick:h,size:"lg",variant:"primary",microinteraction:!0,className:"flex items-center gap-2 shadow-lg hover:shadow-xl w-full sm:w-auto shrink-0",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add Product"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})}),e.jsx(Ke,{className:"mb-4 sm:mb-6 p-3 sm:p-4 md:p-6 bg-gradient-to-r from-blue-50/80 to-indigo-50/80 border-blue-100 w-full overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4 w-full",children:[" ",e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 rounded-xl flex items-center justify-center shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide truncate",children:"Total Products"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:[t.length||0," "]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-orange-100 rounded-xl flex items-center justify-center shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide truncate",children:"Low Stock Items"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:[N||0," "]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 sm:col-span-2 lg:col-span-1",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-green-100 rounded-xl flex items-center justify-center shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide truncate",children:"Total Inventory Value"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:["â‚± ",C.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]})}),e.jsx(JA,{products:A,page:r,entriesPerPage:n,totalPages:a,onPageChange:i,onEntriesChange:o,search:l,onSearchChange:c,onEdit:d,onDelete:u,onStockEntry:m,categories:p,selectedCategory:x,onCategoryFilter:f,stockFilter:w,onStockFilter:b,sortBy:B,sortOrder:y,onSort:v})]})}const YA={},XA=function(e,A,t){let s=Promise.resolve();if(A&&A.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),r=t?.nonce||t?.getAttribute("nonce");s=e(A.map(e=>{if((e=function(e){return"/"+e}(e))in YA)return;YA[e]=!0;const A=e.endsWith(".css"),t=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const s=document.createElement("link");return s.rel=A?"stylesheet":"modulepreload",A||(s.as="script"),s.crossOrigin="",s.href=e,r&&s.setAttribute("nonce",r),document.head.appendChild(s),A?new Promise((A,t)=>{s.addEventListener("load",A),s.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=e,window.dispatchEvent(A),!A.defaultPrevented)throw e}return s.then(A=>{for(const e of A||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};class ZA extends Error{constructor(e,A="FunctionsError",t){super(e),this.name=A,this.context=t}}class et extends ZA{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class At extends ZA{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class tt extends ZA{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var st;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(st||(st={}));var rt=function(e,A,t,s){return new(t||(t=Promise))(function(r,n){function a(e){try{o(s.next(e))}catch(A){n(A)}}function i(e){try{o(s.throw(e))}catch(A){n(A)}}function o(e){var A;e.done?r(e.value):(A=e.value,A instanceof t?A:new t(function(e){e(A)})).then(a,i)}o((s=s.apply(e,A||[])).next())})};class nt{constructor(e,{headers:A={},customFetch:t,region:s=st.Any}={}){this.url=e,this.headers=A,this.region=s,this.fetch=(e=>{let A;return A=e||("undefined"==typeof fetch?(...e)=>XA(async()=>{const{default:e}=await Promise.resolve().then(()=>ft);return{default:e}},void 0).then(({default:A})=>A(...e)):fetch),(...e)=>A(...e)})(t)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return rt(this,arguments,void 0,function*(e,A={}){var t;try{const{headers:s,method:r,body:n,signal:a}=A;let i={},{region:o}=A;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),n&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!=typeof Blob&&n instanceof Blob||n instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=n):"string"==typeof n?(i["Content-Type"]="text/plain",c=n):"undefined"!=typeof FormData&&n instanceof FormData?c=n:(i["Content-Type"]="application/json",c=JSON.stringify(n)));const d=yield this.fetch(l.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),s),body:c,signal:a}).catch(e=>{if("AbortError"===e.name)throw e;throw new et(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new At(d);if(!d.ok)throw new tt(d);let h,m=(null!==(t=d.headers.get("Content-Type"))&&void 0!==t?t:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(s){return s instanceof Error&&"AbortError"===s.name?{data:null,error:new et(s)}:{data:null,error:s,response:s instanceof tt||s instanceof At?s.context:void 0}}})}}var at={},it={},ot={},lt={},ct={},dt={},ut=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const ht=ut.fetch,mt=ut.fetch.bind(ut),gt=ut.Headers,pt=ut.Request,xt=ut.Response,ft=Object.freeze(Object.defineProperty({__proto__:null,Headers:gt,Request:pt,Response:xt,default:mt,fetch:ht},Symbol.toStringTag,{value:"Module"})),wt=w(ft);var bt,Bt,yt,vt,jt,Ct,Nt,Qt={};function Ut(){if(bt)return Qt;bt=1,Object.defineProperty(Qt,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return Qt.default=e,Qt}function kt(){if(Bt)return dt;Bt=1;var e=dt&&dt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dt,"__esModule",{value:!0});const A=e(wt),t=e(Ut());return dt.default=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(s=e.isMaybeSingle)&&void 0!==s&&s,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=A.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,A){return this.headers=new Headers(this.headers),this.headers.set(e,A),this}then(e,A){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var A,s,r,n;let a=null,i=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(A=this.headers.get("Accept"))||void 0===A?void 0:A.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}const t=null===(s=this.headers.get("Prefer"))||void 0===s?void 0:s.match(/count=(exact|planned|estimated)/),n=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");t&&n&&n.length>1&&(o=parseInt(n[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(a={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,o=null,l=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const A=await e.text();try{a=JSON.parse(A),Array.isArray(a)&&404===e.status&&(i=[],a=null,l=200,c="OK")}catch(d){404===e.status&&""===A?(l=204,c="No Content"):a={message:A}}if(a&&this.isMaybeSingle&&(null===(n=null==a?void 0:a.details)||void 0===n?void 0:n.includes("0 rows"))&&(a=null,l=200,c="OK"),a&&this.shouldThrowOnError)throw new t.default(a)}return{error:a,data:i,count:o,status:l,statusText:c}});return this.shouldThrowOnError||(s=s.catch(e=>{var A,t,s;return{error:{message:`${null!==(A=null==e?void 0:e.name)&&void 0!==A?A:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(t=null==e?void 0:e.stack)&&void 0!==t?t:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,A)}returns(){return this}overrideTypes(){return this}},dt}function Ft(){if(yt)return ct;yt=1;var e=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ct,"__esModule",{value:!0});const A=e(kt());class t extends A.default{select(e){let A=!1;const t=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!A?"":('"'===e&&(A=!A),e)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:A=!0,nullsFirst:t,foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.order`:"order",a=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${a?`${a},`:""}${e}.${A?"asc":"desc"}${void 0===t?"":t?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:A,referencedTable:t=A}={}){const s=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,A,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"offset":`${s}.offset`,n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(n,""+(A-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:A=!1,settings:t=!1,buffers:s=!1,wal:r=!1,format:n="text"}={}){var a;const i=[e?"analyze":null,A?"verbose":null,t?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),o=null!==(a=this.headers.get("Accept"))&&void 0!==a?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${o}"; options=${i};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return ct.default=t,ct}function St(){if(vt)return lt;vt=1;var e=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lt,"__esModule",{value:!0});const A=e(Ft());class t extends A.default{eq(e,A){return this.url.searchParams.append(e,`eq.${A}`),this}neq(e,A){return this.url.searchParams.append(e,`neq.${A}`),this}gt(e,A){return this.url.searchParams.append(e,`gt.${A}`),this}gte(e,A){return this.url.searchParams.append(e,`gte.${A}`),this}lt(e,A){return this.url.searchParams.append(e,`lt.${A}`),this}lte(e,A){return this.url.searchParams.append(e,`lte.${A}`),this}like(e,A){return this.url.searchParams.append(e,`like.${A}`),this}likeAllOf(e,A){return this.url.searchParams.append(e,`like(all).{${A.join(",")}}`),this}likeAnyOf(e,A){return this.url.searchParams.append(e,`like(any).{${A.join(",")}}`),this}ilike(e,A){return this.url.searchParams.append(e,`ilike.${A}`),this}ilikeAllOf(e,A){return this.url.searchParams.append(e,`ilike(all).{${A.join(",")}}`),this}ilikeAnyOf(e,A){return this.url.searchParams.append(e,`ilike(any).{${A.join(",")}}`),this}is(e,A){return this.url.searchParams.append(e,`is.${A}`),this}in(e,A){const t=Array.from(new Set(A)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${t})`),this}contains(e,A){return"string"==typeof A?this.url.searchParams.append(e,`cs.${A}`):Array.isArray(A)?this.url.searchParams.append(e,`cs.{${A.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(A)}`),this}containedBy(e,A){return"string"==typeof A?this.url.searchParams.append(e,`cd.${A}`):Array.isArray(A)?this.url.searchParams.append(e,`cd.{${A.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(A)}`),this}rangeGt(e,A){return this.url.searchParams.append(e,`sr.${A}`),this}rangeGte(e,A){return this.url.searchParams.append(e,`nxl.${A}`),this}rangeLt(e,A){return this.url.searchParams.append(e,`sl.${A}`),this}rangeLte(e,A){return this.url.searchParams.append(e,`nxr.${A}`),this}rangeAdjacent(e,A){return this.url.searchParams.append(e,`adj.${A}`),this}overlaps(e,A){return"string"==typeof A?this.url.searchParams.append(e,`ov.${A}`):this.url.searchParams.append(e,`ov.{${A.join(",")}}`),this}textSearch(e,A,{config:t,type:s}={}){let r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const n=void 0===t?"":`(${t})`;return this.url.searchParams.append(e,`${r}fts${n}.${A}`),this}match(e){return Object.entries(e).forEach(([e,A])=>{this.url.searchParams.append(e,`eq.${A}`)}),this}not(e,A,t){return this.url.searchParams.append(e,`not.${A}.${t}`),this}or(e,{foreignTable:A,referencedTable:t=A}={}){const s=t?`${t}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,A,t){return this.url.searchParams.append(e,`${A}.${t}`),this}}return lt.default=t,lt}function Et(){if(jt)return ot;jt=1;var e=ot&&ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ot,"__esModule",{value:!0});const A=e(St());return ot.default=class{constructor(e,{headers:A={},schema:t,fetch:s}){this.url=e,this.headers=new Headers(A),this.schema=t,this.fetch=s}select(e,t){const{head:s=!1,count:r}=null!=t?t:{},n=s?"HEAD":"GET";let a=!1;const i=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new A.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const A=e.reduce((e,A)=>e.concat(Object.keys(A)),[]);if(A.length>0){const e=[...new Set(A)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new A.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:n=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const A=e.reduce((e,A)=>e.concat(Object.keys(A)),[]);if(A.length>0){const e=[...new Set(A)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new A.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}update(e,{count:t}={}){var s;return t&&this.headers.append("Prefer",`count=${t}`),new A.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new A.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}},ot}var It=function(){if(Nt)return at;Nt=1;var e=at&&at.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(at,"__esModule",{value:!0}),at.PostgrestError=at.PostgrestBuilder=at.PostgrestTransformBuilder=at.PostgrestFilterBuilder=at.PostgrestQueryBuilder=at.PostgrestClient=void 0;const A=e(function(){if(Ct)return it;Ct=1;var e=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(it,"__esModule",{value:!0});const A=e(Et()),t=e(St());class s{constructor(e,{headers:A={},schema:t,fetch:s}={}){this.url=e,this.headers=new Headers(A),this.schemaName=t,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new A.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,A={},{head:s=!1,get:r=!1,count:n}={}){var a;let i;const o=new URL(`${this.url}/rpc/${e}`);let l;s||r?(i=s?"HEAD":"GET",Object.entries(A).filter(([e,A])=>void 0!==A).map(([e,A])=>[e,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([e,A])=>{o.searchParams.append(e,A)})):(i="POST",l=A);const c=new Headers(this.headers);return n&&c.set("Prefer",`count=${n}`),new t.default({method:i,url:o,headers:c,schema:this.schemaName,body:l,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}}return it.default=s,it}());at.PostgrestClient=A.default;const t=e(Et());at.PostgrestQueryBuilder=t.default;const s=e(St());at.PostgrestFilterBuilder=s.default;const r=e(Ft());at.PostgrestTransformBuilder=r.default;const n=e(kt());at.PostgrestBuilder=n.default;const a=e(Ut());return at.PostgrestError=a.default,at.default={PostgrestClient:A.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:n.default,PostgrestError:a.default},at}();const Ht=f(It),{PostgrestClient:_t,PostgrestQueryBuilder:Lt,PostgrestFilterBuilder:Tt,PostgrestTransformBuilder:Ot,PostgrestBuilder:Mt,PostgrestError:Pt}=Ht;class Dt{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const A=e.node,t=parseInt(A.replace(/^v/,"").split(".")[0]);return t>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let A=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(A+=`\n\nSuggested solution: ${e.workaround}`),new Error(A)}static createWebSocket(e,A){return new(this.getWebSocketConstructor())(e,A)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Kt=1e4;var Rt,Vt,Gt,Wt,zt,$t;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Rt||(Rt={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Vt||(Vt={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Gt||(Gt={})),function(e){e.websocket="websocket"}(Wt||(Wt={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(zt||(zt={}));class Jt{constructor(){this.HEADER_LENGTH=1}decode(e,A){return e.constructor===ArrayBuffer?A(this._binaryDecode(e)):A("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const A=new DataView(e),t=new TextDecoder;return this._decodeBroadcast(e,A,t)}_decodeBroadcast(e,A,t){const s=A.getUint8(1),r=A.getUint8(2);let n=this.HEADER_LENGTH+2;const a=t.decode(e.slice(n,n+s));n+=s;const i=t.decode(e.slice(n,n+r));n+=r;return{ref:null,topic:a,event:i,payload:JSON.parse(t.decode(e.slice(n,e.byteLength)))}}}class qt{constructor(e,A){this.callback=e,this.timerCalc=A,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=A}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}($t||($t={}));const Yt=(e,A,t={})=>{var s;const r=null!==(s=t.skipTypes)&&void 0!==s?s:[];return A?Object.keys(A).reduce((t,s)=>(t[s]=Xt(s,e,A,r),t),{}):{}},Xt=(e,A,t,s)=>{const r=A.find(A=>A.name===e),n=null==r?void 0:r.type,a=t[e];return n&&!s.includes(n)?Zt(n,a):es(a)},Zt=(e,A)=>{if("_"===e.charAt(0)){const t=e.slice(1,e.length);return rs(A,t)}switch(e){case $t.bool:return As(A);case $t.float4:case $t.float8:case $t.int2:case $t.int4:case $t.int8:case $t.numeric:case $t.oid:return ts(A);case $t.json:case $t.jsonb:return ss(A);case $t.timestamp:return ns(A);case $t.abstime:case $t.date:case $t.daterange:case $t.int4range:case $t.int8range:case $t.money:case $t.reltime:case $t.text:case $t.time:case $t.timestamptz:case $t.timetz:case $t.tsrange:case $t.tstzrange:default:return es(A)}},es=e=>e,As=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ts=e=>{if("string"==typeof e){const A=parseFloat(e);if(!Number.isNaN(A))return A}return e},ss=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(A){return console.log(`JSON parse error: ${A}`),e}return e},rs=(e,A)=>{if("string"!=typeof e)return e;const t=e.length-1,s=e[t];if("{"===e[0]&&"}"===s){let s;const n=e.slice(1,t);try{s=JSON.parse("["+n+"]")}catch(r){s=n?n.split(","):[]}return s.map(e=>Zt(A,e))}return e},ns=e=>"string"==typeof e?e.replace(" ","T"):e,as=e=>{let A=e;return A=A.replace(/^ws/i,"http"),A=A.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),A.replace(/\/+$/,"")+"/api/broadcast"};class is{constructor(e,A,t={},s=1e4){this.channel=e,this.event=A,this.payload=t,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,A){var t;return this._hasReceived(e)&&A(null===(t=this.receivedResp)||void 0===t?void 0:t.response),this.recHooks.push({status:e,callback:A}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,A){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:A})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:A}){this.recHooks.filter(A=>A.status===e).forEach(e=>e.callback(A))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var os,ls,cs,ds;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(os||(os={}));class us{constructor(e,A){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const t=(null==A?void 0:A.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(t.state,{},e=>{const{onJoin:A,onLeave:t,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=us.syncState(this.state,e,A,t),this.pendingDiffs.forEach(e=>{this.state=us.syncDiff(this.state,e,A,t)}),this.pendingDiffs=[],s()}),this.channel._on(t.diff,{},e=>{const{onJoin:A,onLeave:t,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=us.syncDiff(this.state,e,A,t),s())}),this.onJoin((e,A,t)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:A,newPresences:t})}),this.onLeave((e,A,t)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:A,leftPresences:t})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,A,t,s){const r=this.cloneDeep(e),n=this.transformState(A),a={},i={};return this.map(r,(e,A)=>{n[e]||(i[e]=A)}),this.map(n,(e,A)=>{const t=r[e];if(t){const s=A.map(e=>e.presence_ref),r=t.map(e=>e.presence_ref),n=A.filter(e=>r.indexOf(e.presence_ref)<0),o=t.filter(e=>s.indexOf(e.presence_ref)<0);n.length>0&&(a[e]=n),o.length>0&&(i[e]=o)}else a[e]=A}),this.syncDiff(r,{joins:a,leaves:i},t,s)}static syncDiff(e,A,t,s){const{joins:r,leaves:n}={joins:this.transformState(A.joins),leaves:this.transformState(A.leaves)};return t||(t=()=>{}),s||(s=()=>{}),this.map(r,(A,s)=>{var r;const n=null!==(r=e[A])&&void 0!==r?r:[];if(e[A]=this.cloneDeep(s),n.length>0){const t=e[A].map(e=>e.presence_ref),s=n.filter(e=>t.indexOf(e.presence_ref)<0);e[A].unshift(...s)}t(A,n,s)}),this.map(n,(A,t)=>{let r=e[A];if(!r)return;const n=t.map(e=>e.presence_ref);r=r.filter(e=>n.indexOf(e.presence_ref)<0),e[A]=r,s(A,r,t),0===r.length&&delete e[A]}),e}static map(e,A){return Object.getOwnPropertyNames(e).map(t=>A(t,e[t]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((A,t)=>{const s=e[t];return A[t]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,A},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(ls||(ls={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(cs||(cs={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(ds||(ds={}));class hs{constructor(e,A={config:{}},t){var s,r;if(this.topic=e,this.params=A,this.socket=t,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},A.config),this.timeout=this.socket.timeout,this.joinPush=new is(this,Gt.join,this.params,this.timeout),this.rejoinTimer=new qt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gt.reply,{},(e,A)=>{this._trigger(this._replyEventName(A),e)}),this.presence=new us(this),this.broadcastEndpointURL=as(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(r=null===(s=this.params.config)||void 0===s?void 0:s.broadcast)||void 0===r?void 0:r.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,A=this.timeout){var t,s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Vt.closed){const{config:{broadcast:n,presence:a,private:i}}=this.params,o=null!==(s=null===(t=this.bindings.postgres_changes)||void 0===t?void 0:t.map(e=>e.filter))&&void 0!==s?s:[],l=!!this.bindings[cs.PRESENCE]&&this.bindings[cs.PRESENCE].length>0||!0===(null===(r=this.params.config.presence)||void 0===r?void 0:r.enabled),c={},d={broadcast:n,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:o,private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(A=>null==e?void 0:e(ds.CHANNEL_ERROR,A)),this._onClose(()=>null==e?void 0:e(ds.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(A),this.joinPush.receive("ok",async({postgres_changes:A})=>{var t;if(this.socket.setAuth(),void 0!==A){const s=this.bindings.postgres_changes,r=null!==(t=null==s?void 0:s.length)&&void 0!==t?t:0,n=[];for(let t=0;t<r;t++){const r=s[t],{filter:{event:a,schema:i,table:o,filter:l}}=r,c=A&&A[t];if(!c||c.event!==a||c.schema!==i||c.table!==o||c.filter!==l)return this.unsubscribe(),this.state=Vt.errored,void(null==e||e(ds.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},r),{id:c.id}))}return this.bindings.postgres_changes=n,void(e&&e(ds.SUBSCRIBED))}null==e||e(ds.SUBSCRIBED)}).receive("error",A=>{this.state=Vt.errored,null==e||e(ds.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(ds.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,A={}){return await this.send({type:"presence",event:"track",payload:e},A.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,A,t){return this.state===Vt.joined&&e===cs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,A,t)}async send(e,A={}){var t,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(t=>{var s,r,n;const a=this._push(e.type,e,A.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===n?void 0:n.ack)||t("ok"),a.receive("ok",()=>t("ok")),a.receive("error",()=>t("error")),a.receive("timeout",()=>t("timed out"))});{const{event:n,payload:a}=e,i={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(t=A.timeout)&&void 0!==t?t:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(r){return"AbortError"===r.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vt.leaving;const A=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gt.close,"leave",this._joinRef())};this.joinPush.destroy();let t=null;return new Promise(s=>{t=new is(this,Gt.leave,{},e),t.receive("ok",()=>{A(),s("ok")}).receive("timeout",()=>{A(),s("timed out")}).receive("error",()=>{s("error")}),t.send(),this._canPush()||t.trigger("ok",{})}).finally(()=>{null==t||t.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vt.closed,this.bindings={}}async _fetchWithTimeout(e,A,t){const s=new AbortController,r=setTimeout(()=>s.abort(),t),n=await this.socket.fetch(e,Object.assign(Object.assign({},A),{signal:s.signal}));return clearTimeout(r),n}_push(e,A,t=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new is(this,e,A,t);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,A,t){return A}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,A,t){var s,r;const n=e.toLocaleLowerCase(),{close:a,error:i,leave:o,join:l}=Gt;if(t&&[a,i,o,l].indexOf(n)>=0&&t!==this._joinRef())return;let c=this._onMessage(n,A,t);if(A&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var A,t,s;return"*"===(null===(A=e.filter)||void 0===A?void 0:A.event)||(null===(s=null===(t=e.filter)||void 0===t?void 0:t.event)||void 0===s?void 0:s.toLocaleLowerCase())===n}).map(e=>e.callback(c,t)):null===(r=this.bindings[n])||void 0===r||r.filter(e=>{var t,s,r,a,i,o;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,a=null===(t=e.filter)||void 0===t?void 0:t.event;return n&&(null===(s=A.ids)||void 0===s?void 0:s.includes(n))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(r=A.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const t=null===(i=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===i?void 0:i.toLocaleLowerCase();return"*"===t||t===(null===(o=null==A?void 0:A.event)||void 0===o?void 0:o.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof c&&"ids"in c){const e=c.data,{schema:A,table:t,commit_timestamp:s,type:r,errors:n}=e,a={schema:A,table:t,commit_timestamp:s,eventType:r,new:{},old:{},errors:n};c=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(c,t)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,A,t){const s=e.toLocaleLowerCase(),r={type:s,filter:A,callback:t};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,A){const t=e.toLocaleLowerCase();return this.bindings[t]&&(this.bindings[t]=this.bindings[t].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===t&&hs.isEqual(e.filter,A))})),this}static isEqual(e,A){if(Object.keys(e).length!==Object.keys(A).length)return!1;for(const t in e)if(e[t]!==A[t])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Gt.close,{},e)}_onError(e){this._on(Gt.error,{},A=>e(A))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const A={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(A.new=Yt(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(A.old=Yt(e.columns,e.old_record)),A}}const ms=()=>{},gs=25e3,ps=10,xs=100,fs=[1e3,2e3,5e3,1e4];class ws{constructor(e,A){var t;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kt,this.transport=null,this.heartbeatIntervalMs=gs,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ms,this.ref=0,this.reconnectTimer=null,this.logger=ms,this.conn=null,this.sendBuffer=[],this.serializer=new Jt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let A;return A=e||("undefined"==typeof fetch?(...e)=>XA(async()=>{const{default:e}=await Promise.resolve().then(()=>ft);return{default:e}},void 0).then(({default:A})=>A(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>A(...e)},!(null===(t=null==A?void 0:A.params)||void 0===t?void 0:t.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=A.params.apikey,this.endPoint=`${e}/${Wt.websocket}`,this.httpEndpoint=as(e),this._initializeOptions(A),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==A?void 0:A.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Dt.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const A=e.message;if(A.includes("Node.js"))throw new Error(`${A}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${A}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,A){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const t=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(t),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=A?A:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const A=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),A}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,A,t){this.logger(e,A,t)}connectionState(){switch(this.conn&&this.conn.readyState){case Rt.connecting:return zt.Connecting;case Rt.open:return zt.Open;case Rt.closing:return zt.Closing;default:return zt.Closed}}isConnected(){return this.connectionState()===zt.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,A={config:{}}){const t=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===t);if(s)return s;{const t=new hs(`realtime:${e}`,A,this);return this.channels.push(t),t}}push(e){const{topic:A,event:t,payload:s,ref:r}=e,n=()=>{this.encode(e,e=>{var A;null===(A=this.conn)||void 0===A||A.send(e)})};this.log("push",`${A} ${t} (${r})`,s),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(A){this.log("error","error in heartbeat callback",A)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},xs)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(A){this.log("error","error in heartbeat callback",A)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(A){this.log("error","error in heartbeat callback",A)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let A=this.channels.find(A=>A.topic===e&&(A._isJoined()||A._isJoining()));A&&(this.log("transport",`leaving duplicate topic "${e}"`),A.unsubscribe())}_remove(e){this.channels=this.channels.filter(A=>A.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(i){this.log("error","error in heartbeat callback",i)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:A,event:t,payload:s,ref:r}=e,n=r?`(${r})`:"",a=s.status||"";this.log("receive",`${a} ${A} ${t} ${n}`.trim(),s),this.channels.filter(e=>e._isMember(A)).forEach(e=>e._trigger(t,s,r)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var A;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(A=this.reconnectTimer)||void 0===A||A.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var A;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(A=this.reconnectTimer)||void 0===A||A.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Gt.error))}_appendParams(e,A){if(0===Object.keys(A).length)return e;const t=e.match(/\?/)?"&":"?";return`${e}${t}${new URLSearchParams(A)}`}_workerObjectUrl(e){let A;if(e)A=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});A=URL.createObjectURL(e)}return A}_setConnectionState(e,A=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=A)}async _performAuth(e=null){let A;A=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=A&&(this.accessTokenValue=A,this.channels.forEach(e=>{const t={access_token:A,version:"realtime-js/2.75.0"};A&&e.updateJoinPayload(t),e.joinedOnce&&e._isJoined()&&e._push(Gt.access_token,{access_token:A})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(A=>{this.log("error",`error setting auth in ${e}`,A)})}_triggerStateCallbacks(e,A){try{this.stateChangeCallbacks[e].forEach(t=>{try{t(A)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new qt(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ps)},this.reconnectAfterMs)}_initializeOptions(e){var A,t,s,r,n,a,i,o,l;if(this.transport=null!==(A=null==e?void 0:e.transport)&&void 0!==A?A:null,this.timeout=null!==(t=null==e?void 0:e.timeout)&&void 0!==t?t:Kt,this.heartbeatIntervalMs=null!==(s=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:gs,this.worker=null!==(r=null==e?void 0:e.worker)&&void 0!==r&&r,this.accessToken=null!==(n=null==e?void 0:e.accessToken)&&void 0!==n?n:null,this.heartbeatCallback=null!==(a=null==e?void 0:e.heartbeatCallback)&&void 0!==a?a:ms,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null==e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>fs[e-1]||1e4,this.encode=null!==(o=null==e?void 0:e.encode)&&void 0!==o?o:(e,A)=>A(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class bs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Bs(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class ys extends bs{constructor(e,A,t){super(e),this.name="StorageApiError",this.status=A,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vs extends bs{constructor(e,A){super(e),this.name="StorageUnknownError",this.originalError=A}}var js=function(e,A,t,s){return new(t||(t=Promise))(function(r,n){function a(e){try{o(s.next(e))}catch(A){n(A)}}function i(e){try{o(s.throw(e))}catch(A){n(A)}}function o(e){var A;e.done?r(e.value):(A=e.value,A instanceof t?A:new t(function(e){e(A)})).then(a,i)}o((s=s.apply(e,A||[])).next())})};const Cs=e=>{let A;return A=e||("undefined"==typeof fetch?(...e)=>XA(async()=>{const{default:e}=await Promise.resolve().then(()=>ft);return{default:e}},void 0).then(({default:A})=>A(...e)):fetch),(...e)=>A(...e)},Ns=e=>{if(Array.isArray(e))return e.map(e=>Ns(e));if("function"==typeof e||e!==Object(e))return e;const A={};return Object.entries(e).forEach(([e,t])=>{const s=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));A[s]=Ns(t)}),A};var Qs=function(e,A,t,s){return new(t||(t=Promise))(function(r,n){function a(e){try{o(s.next(e))}catch(A){n(A)}}function i(e){try{o(s.throw(e))}catch(A){n(A)}}function o(e){var A;e.done?r(e.value):(A=e.value,A instanceof t?A:new t(function(e){e(A)})).then(a,i)}o((s=s.apply(e,A||[])).next())})};const Us=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ks=(e,A,t)=>Qs(void 0,void 0,void 0,function*(){const s=yield js(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield XA(()=>Promise.resolve().then(()=>ft),void 0)).Response:Response});e instanceof s&&!(null==t?void 0:t.noResolveJson)?e.json().then(t=>{const s=e.status||500,r=(null==t?void 0:t.statusCode)||s+"";A(new ys(Us(t),s,r))}).catch(e=>{A(new vs(Us(e),e))}):A(new vs(Us(e),e))}),Fs=(e,A,t,s)=>{const r={method:e,headers:(null==A?void 0:A.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!=typeof e||null===e)return!1;const A=Object.getPrototypeOf(e);return!(null!==A&&A!==Object.prototype&&null!==Object.getPrototypeOf(A)||Symbol.toStringTag in e||Symbol.iterator in e)})(s)?(r.headers=Object.assign({"Content-Type":"application/json"},null==A?void 0:A.headers),r.body=JSON.stringify(s)):r.body=s,(null==A?void 0:A.duplex)&&(r.duplex=A.duplex),Object.assign(Object.assign({},r),t)):r};function Ss(e,A,t,s,r,n){return Qs(this,void 0,void 0,function*(){return new Promise((a,i)=>{e(t,Fs(A,s,r,n)).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>ks(e,i,s))})})}function Es(e,A,t,s){return Qs(this,void 0,void 0,function*(){return Ss(e,"GET",A,t,s)})}function Is(e,A,t,s,r){return Qs(this,void 0,void 0,function*(){return Ss(e,"POST",A,s,r,t)})}function Hs(e,A,t,s,r){return Qs(this,void 0,void 0,function*(){return Ss(e,"PUT",A,s,r,t)})}function _s(e,A,t,s,r){return Qs(this,void 0,void 0,function*(){return Ss(e,"DELETE",A,s,r,t)})}var Ls=function(e,A,t,s){return new(t||(t=Promise))(function(r,n){function a(e){try{o(s.next(e))}catch(A){n(A)}}function i(e){try{o(s.throw(e))}catch(A){n(A)}}function o(e){var A;e.done?r(e.value):(A=e.value,A instanceof t?A:new t(function(e){e(A)})).then(a,i)}o((s=s.apply(e,A||[])).next())})};class Ts{constructor(e,A){this.downloadFn=e,this.shouldThrowOnError=A}then(e,A){return this.execute().then(e,A)}execute(){return Ls(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Bs(e))return{data:null,error:e};throw e}})}}var Os=function(e,A,t,s){return new(t||(t=Promise))(function(r,n){function a(e){try{o(s.next(e))}catch(A){n(A)}}function i(e){try{o(s.throw(e))}catch(A){n(A)}}function o(e){var A;e.done?r(e.value):(A=e.value,A instanceof t?A:new t(function(e){e(A)})).then(a,i)}o((s=s.apply(e,A||[])).next())})};class Ms{constructor(e,A){this.downloadFn=e,this.shouldThrowOnError=A}asStream(){return new Ts(this.downloadFn,this.shouldThrowOnError)}then(e,A){return this.execute().then(e,A)}execute(){return Os(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Bs(e))return{data:null,error:e};throw e}})}}var Ps=function(e,A,t,s){return new(t||(t=Promise))(function(r,n){function a(e){try{o(s.next(e))}catch(A){n(A)}}function i(e){try{o(s.throw(e))}catch(A){n(A)}}function o(e){var A;e.done?r(e.value):(A=e.value,A instanceof t?A:new t(function(e){e(A)})).then(a,i)}o((s=s.apply(e,A||[])).next())})};const Ds={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ks={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Rs{constructor(e,A={},t,s){this.shouldThrowOnError=!1,this.url=e,this.headers=A,this.bucketId=t,this.fetch=Cs(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,A,t,s){return Ps(this,void 0,void 0,function*(){try{let r;const n=Object.assign(Object.assign({},Ks),s);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const i=n.metadata;"undefined"!=typeof Blob&&t instanceof Blob?(r=new FormData,r.append("cacheControl",n.cacheControl),i&&r.append("metadata",this.encodeMetadata(i)),r.append("",t)):"undefined"!=typeof FormData&&t instanceof FormData?(r=t,r.append("cacheControl",n.cacheControl),i&&r.append("metadata",this.encodeMetadata(i))):(r=t,a["cache-control"]=`max-age=${n.cacheControl}`,a["content-type"]=n.contentType,i&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(i)))),(null==s?void 0:s.headers)&&(a=Object.assign(Object.assign({},a),s.headers));const o=this._removeEmptyFolders(A),l=this._getFinalPath(o),c=yield("PUT"==e?Hs:Is)(this.fetch,`${this.url}/object/${l}`,r,Object.assign({headers:a},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:o,id:c.Id,fullPath:c.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bs(r))return{data:null,error:r};throw r}})}upload(e,A,t){return Ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,A,t)})}uploadToSignedUrl(e,A,t,s){return Ps(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),n=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${n}`);a.searchParams.set("token",A);try{let e;const A=Object.assign({upsert:Ks.upsert},s),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(A.upsert)});"undefined"!=typeof Blob&&t instanceof Blob?(e=new FormData,e.append("cacheControl",A.cacheControl),e.append("",t)):"undefined"!=typeof FormData&&t instanceof FormData?(e=t,e.append("cacheControl",A.cacheControl)):(e=t,n["cache-control"]=`max-age=${A.cacheControl}`,n["content-type"]=A.contentType);return{data:{path:r,fullPath:(yield Hs(this.fetch,a.toString(),e,{headers:n})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Bs(i))return{data:null,error:i};throw i}})}createSignedUploadUrl(e,A){return Ps(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const s=Object.assign({},this.headers);(null==A?void 0:A.upsert)&&(s["x-upsert"]="true");const r=yield Is(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:s}),n=new URL(this.url+r.url),a=n.searchParams.get("token");if(!a)throw new bs("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:a},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bs(t))return{data:null,error:t};throw t}})}update(e,A,t){return Ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,A,t)})}move(e,A,t){return Ps(this,void 0,void 0,function*(){try{return{data:yield Is(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:A,destinationBucket:null==t?void 0:t.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bs(s))return{data:null,error:s};throw s}})}copy(e,A,t){return Ps(this,void 0,void 0,function*(){try{return{data:{path:(yield Is(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:A,destinationBucket:null==t?void 0:t.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bs(s))return{data:null,error:s};throw s}})}createSignedUrl(e,A,t){return Ps(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),r=yield Is(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:A},(null==t?void 0:t.transform)?{transform:t.transform}:{}),{headers:this.headers});const n=(null==t?void 0:t.download)?`&download=${!0===t.download?"":t.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${n}`)},{data:r,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bs(s))return{data:null,error:s};throw s}})}createSignedUrls(e,A,t){return Ps(this,void 0,void 0,function*(){try{const s=yield Is(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:A,paths:e},{headers:this.headers}),r=(null==t?void 0:t.download)?`&download=${!0===t.download?"":t.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${r}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bs(s))return{data:null,error:s};throw s}})}download(e,A){const t=void 0!==(null==A?void 0:A.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==A?void 0:A.transform)||{}),r=s?`?${s}`:"",n=this._getFinalPath(e);return new Ms(()=>Es(this.fetch,`${this.url}/${t}/${n}${r}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return Ps(this,void 0,void 0,function*(){const A=this._getFinalPath(e);try{const e=yield Es(this.fetch,`${this.url}/object/info/${A}`,{headers:this.headers});return{data:Ns(e),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bs(t))return{data:null,error:t};throw t}})}exists(e){return Ps(this,void 0,void 0,function*(){const A=this._getFinalPath(e);try{return yield function(e,A,t,s){return Qs(this,void 0,void 0,function*(){return Ss(e,"HEAD",A,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}(this.fetch,`${this.url}/object/${A}`,{headers:this.headers}),{data:!0,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bs(t)&&t instanceof vs){const e=t.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:t}}throw t}})}getPublicUrl(e,A){const t=this._getFinalPath(e),s=[],r=(null==A?void 0:A.download)?`download=${!0===A.download?"":A.download}`:"";""!==r&&s.push(r);const n=void 0!==(null==A?void 0:A.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==A?void 0:A.transform)||{});""!==a&&s.push(a);let i=s.join("&");return""!==i&&(i=`?${i}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${t}${i}`)}}}remove(e){return Ps(this,void 0,void 0,function*(){try{return{data:yield _s(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(Bs(A))return{data:null,error:A};throw A}})}list(e,A,t){return Ps(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Ds),A),{prefix:e||""});return{data:yield Is(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bs(s))return{data:null,error:s};throw s}})}listV2(e,A){return Ps(this,void 0,void 0,function*(){try{const t=Object.assign({},e);return{data:yield Is(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,t,{headers:this.headers},A),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bs(t))return{data:null,error:t};throw t}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const A=[];return e.width&&A.push(`width=${e.width}`),e.height&&A.push(`height=${e.height}`),e.resize&&A.push(`resize=${e.resize}`),e.format&&A.push(`format=${e.format}`),e.quality&&A.push(`quality=${e.quality}`),A.join("&")}}const Vs={"X-Client-Info":"storage-js/2.75.0"};var Gs=function(e,A,t,s){return new(t||(t=Promise))(function(r,n){function a(e){try{o(s.next(e))}catch(A){n(A)}}function i(e){try{o(s.throw(e))}catch(A){n(A)}}function o(e){var A;e.done?r(e.value):(A=e.value,A instanceof t?A:new t(function(e){e(A)})).then(a,i)}o((s=s.apply(e,A||[])).next())})};class Ws{constructor(e,A={},t,s){this.shouldThrowOnError=!1;const r=new URL(e);if(null==s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."))}this.url=r.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Vs),A),this.fetch=Cs(t)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Gs(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Bs(e))return{data:null,error:e};throw e}})}getBucket(e){return Gs(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(Bs(A))return{data:null,error:A};throw A}})}createBucket(e){return Gs(this,arguments,void 0,function*(e,A={public:!1}){try{return{data:yield Is(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:A.type,public:A.public,file_size_limit:A.fileSizeLimit,allowed_mime_types:A.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bs(t))return{data:null,error:t};throw t}})}updateBucket(e,A){return Gs(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:A.public,file_size_limit:A.fileSizeLimit,allowed_mime_types:A.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bs(t))return{data:null,error:t};throw t}})}emptyBucket(e){return Gs(this,void 0,void 0,function*(){try{return{data:yield Is(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(Bs(A))return{data:null,error:A};throw A}})}deleteBucket(e){return Gs(this,void 0,void 0,function*(){try{return{data:yield _s(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(Bs(A))return{data:null,error:A};throw A}})}}class zs extends Ws{constructor(e,A={},t,s){super(e,A,t,s)}from(e){return new Rs(this.url,this.headers,e,this.fetch)}}let $s="";$s="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Js={headers:{"X-Client-Info":`supabase-js-${$s}/2.75.0`}},qs={schema:"public"},Ys={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xs={};var Zs=function(e,A,t,s){return new(t||(t=Promise))(function(r,n){function a(e){try{o(s.next(e))}catch(A){n(A)}}function i(e){try{o(s.throw(e))}catch(A){n(A)}}function o(e){var A;e.done?r(e.value):(A=e.value,A instanceof t?A:new t(function(e){e(A)})).then(a,i)}o((s=s.apply(e,A||[])).next())})};const er=e=>{let A;return A=e||("undefined"==typeof fetch?mt:fetch),(...e)=>A(...e)},Ar=(e,A,t)=>{const s=er(t),r="undefined"==typeof Headers?gt:Headers;return(t,n)=>Zs(void 0,void 0,void 0,function*(){var a;const i=null!==(a=yield A())&&void 0!==a?a:e;let o=new r(null==n?void 0:n.headers);return o.has("apikey")||o.set("apikey",e),o.has("Authorization")||o.set("Authorization",`Bearer ${i}`),s(t,Object.assign(Object.assign({},n),{headers:o}))})};var tr=function(e,A,t,s){return new(t||(t=Promise))(function(r,n){function a(e){try{o(s.next(e))}catch(A){n(A)}}function i(e){try{o(s.throw(e))}catch(A){n(A)}}function o(e){var A;e.done?r(e.value):(A=e.value,A instanceof t?A:new t(function(e){e(A)})).then(a,i)}o((s=s.apply(e,A||[])).next())})};const sr="2.75.0",rr=3e4,nr=9e4,ar={"X-Client-Info":`gotrue-js/${sr}`},ir="X-Supabase-Api-Version",or={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},lr=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class cr extends Error{constructor(e,A,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=A,this.code=t}}function dr(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class ur extends cr{constructor(e,A,t){super(e,A,t),this.name="AuthApiError",this.status=A,this.code=t}}class hr extends cr{constructor(e,A){super(e),this.name="AuthUnknownError",this.originalError=A}}class mr extends cr{constructor(e,A,t,s){super(e,t,s),this.name=A,this.status=t}}class gr extends mr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class pr extends mr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xr extends mr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fr extends mr{constructor(e,A=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=A}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wr extends mr{constructor(e,A=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=A}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class br extends mr{constructor(e,A){super(e,"AuthRetryableFetchError",A,void 0)}}function Br(e){return dr(e)&&"AuthRetryableFetchError"===e.name}class yr extends mr{constructor(e,A,t){super(e,"AuthWeakPasswordError",A,"weak_password"),this.reasons=t}}class vr extends mr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const jr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cr=" \t\n\r=".split(""),Nr=(()=>{const e=new Array(128);for(let A=0;A<e.length;A+=1)e[A]=-1;for(let A=0;A<Cr.length;A+=1)e[Cr[A].charCodeAt(0)]=-2;for(let A=0;A<jr.length;A+=1)e[jr[A].charCodeAt(0)]=A;return e})();function Qr(e,A,t){if(null!==e)for(A.queue=A.queue<<8|e,A.queuedBits+=8;A.queuedBits>=6;){const e=A.queue>>A.queuedBits-6&63;t(jr[e]),A.queuedBits-=6}else if(A.queuedBits>0)for(A.queue=A.queue<<6-A.queuedBits,A.queuedBits=6;A.queuedBits>=6;){const e=A.queue>>A.queuedBits-6&63;t(jr[e]),A.queuedBits-=6}}function Ur(e,A,t){const s=Nr[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(A.queue=A.queue<<6|s,A.queuedBits+=6;A.queuedBits>=8;)t(A.queue>>A.queuedBits-8&255),A.queuedBits-=8}function kr(e){const A=[],t=e=>{A.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},n=e=>{!function(e,A,t){if(0===A.utf8seq){if(e<=127)return void t(e);for(let t=1;t<6;t+=1)if(!(e>>7-t&1)){A.utf8seq=t;break}if(2===A.utf8seq)A.codepoint=31&e;else if(3===A.utf8seq)A.codepoint=15&e;else{if(4!==A.utf8seq)throw new Error("Invalid UTF-8 sequence");A.codepoint=7&e}A.utf8seq-=1}else if(A.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");A.codepoint=A.codepoint<<6|63&e,A.utf8seq-=1,0===A.utf8seq&&t(A.codepoint)}}(e,s,t)};for(let a=0;a<e.length;a+=1)Ur(e.charCodeAt(a),r,n);return A.join("")}function Fr(e,A){if(!(e<=127)){if(e<=2047)return A(192|e>>6),void A(128|63&e);if(e<=65535)return A(224|e>>12),A(128|e>>6&63),void A(128|63&e);if(e<=1114111)return A(240|e>>18),A(128|e>>12&63),A(128|e>>6&63),void A(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}A(e)}function Sr(e){const A=[],t={queue:0,queuedBits:0},s=e=>{A.push(e)};for(let r=0;r<e.length;r+=1)Ur(e.charCodeAt(r),t,s);return new Uint8Array(A)}function Er(e){const A=[];return function(e,A){for(let t=0;t<e.length;t+=1){let s=e.charCodeAt(t);if(s>55295&&s<=56319){const A=1024*(s-55296)&65535;s=65536+(e.charCodeAt(t+1)-56320&65535|A),t+=1}Fr(s,A)}}(e,e=>A.push(e)),new Uint8Array(A)}function Ir(e){const A=[],t={queue:0,queuedBits:0},s=e=>{A.push(e)};return e.forEach(e=>Qr(e,t,s)),Qr(null,t,s),A.join("")}const Hr=()=>"undefined"!=typeof window&&"undefined"!=typeof document,_r={tested:!1,writable:!1},Lr=()=>{if(!Hr())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(A){return!1}if(_r.tested)return _r.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),_r.tested=!0,_r.writable=!0}catch(A){_r.tested=!0,_r.writable=!1}return _r.writable};const Tr=e=>{let A;return A=e||("undefined"==typeof fetch?(...e)=>XA(async()=>{const{default:e}=await Promise.resolve().then(()=>ft);return{default:e}},void 0).then(({default:A})=>A(...e)):fetch),(...e)=>A(...e)},Or=async(e,A,t)=>{await e.setItem(A,JSON.stringify(t))},Mr=async(e,A)=>{const t=await e.getItem(A);if(!t)return null;try{return JSON.parse(t)}catch(s){return t}},Pr=async(e,A)=>{await e.removeItem(A)};class Dr{constructor(){this.promise=new Dr.promiseConstructor((e,A)=>{this.resolve=e,this.reject=A})}}function Kr(e){const A=e.split(".");if(3!==A.length)throw new vr("Invalid JWT structure");for(let t=0;t<A.length;t++)if(!lr.test(A[t]))throw new vr("JWT not in base64url format");return{header:JSON.parse(kr(A[0])),payload:JSON.parse(kr(A[1])),signature:Sr(A[2]),raw:{header:A[0],payload:A[1]}}}function Rr(e){return("0"+e.toString(16)).substr(-2)}async function Vr(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const A=await async function(e){const A=(new TextEncoder).encode(e),t=await crypto.subtle.digest("SHA-256",A),s=new Uint8Array(t);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(A).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gr(e,A,t=!1){const s=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",A=e.length;let t="";for(let s=0;s<56;s++)t+=e.charAt(Math.floor(Math.random()*A));return t}return crypto.getRandomValues(e),Array.from(e,Rr).join("")}();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await Or(e,`${A}-code-verifier`,r);const n=await Vr(s);return[n,s===n?"plain":"s256"]}Dr.promiseConstructor=Promise;const Wr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const zr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $r(e){if(!zr.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jr(){return new Proxy({},{get:(e,A)=>{if("__isUserNotAvailableProxy"===A)return!0;if("symbol"==typeof A){const e=A.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${A}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,A)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${A}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,A)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${A}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qr(e){return JSON.parse(JSON.stringify(e))}var Yr=function(e,A){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&A.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)A.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(t[s[r]]=e[s[r]])}return t};const Xr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Zr=[502,503,504];async function en(e){var A,t;if(!("object"==typeof(t=e)&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json))throw new br(Xr(e),0);if(Zr.includes(e.status))throw new br(Xr(e),e.status);let s,r;try{s=await e.json()}catch(a){throw new hr(Xr(a),a)}const n=function(e){const A=e.headers.get(ir);if(!A)return null;if(!A.match(Wr))return null;try{return new Date(`${A}T00:00:00.0Z`)}catch(a){return null}}(e);if(n&&n.getTime()>=or.timestamp&&"object"==typeof s&&s&&"string"==typeof s.code?r=s.code:"object"==typeof s&&s&&"string"==typeof s.error_code&&(r=s.error_code),r){if("weak_password"===r)throw new yr(Xr(s),e.status,(null===(A=s.weak_password)||void 0===A?void 0:A.reasons)||[]);if("session_not_found"===r)throw new gr}else if("object"==typeof s&&s&&"object"==typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,A)=>e&&"string"==typeof A,!0))throw new yr(Xr(s),e.status,s.weak_password.reasons);throw new ur(Xr(s),e.status||500,r)}async function An(e,A,t,s){var r;const n=Object.assign({},null==s?void 0:s.headers);n[ir]||(n[ir]=or.name),(null==s?void 0:s.jwt)&&(n.Authorization=`Bearer ${s.jwt}`);const a=null!==(r=null==s?void 0:s.query)&&void 0!==r?r:{};(null==s?void 0:s.redirectTo)&&(a.redirect_to=s.redirectTo);const i=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",o=await async function(e,A,t,s,r,n){const a=((e,A,t,s)=>{const r={method:e,headers:(null==A?void 0:A.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==A?void 0:A.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))})(A,s,r,n);let i;try{i=await e(t,Object.assign({},a))}catch(o){throw console.error(o),new br(Xr(o),0)}i.ok||await en(i);if(null==s?void 0:s.noResolveJson)return i;try{return await i.json()}catch(o){await en(o)}}(e,A,t+i,{headers:n,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(o):{data:Object.assign({},o),error:null}}function tn(e){var A;let t=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(t=Object.assign({},e),e.expires_at||(t.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:t,user:null!==(A=e.user)&&void 0!==A?A:e},error:null}}function sn(e){const A=tn(e);return!A.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,A)=>e&&"string"==typeof A,!0)&&(A.data.weak_password=e.weak_password),A}function rn(e){var A;return{data:{user:null!==(A=e.user)&&void 0!==A?A:e},error:null}}function nn(e){return{data:e,error:null}}function an(e){const{action_link:A,email_otp:t,hashed_token:s,redirect_to:r,verification_type:n}=e,a=Yr(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:A,email_otp:t,hashed_token:s,redirect_to:r,verification_type:n},user:Object.assign({},a)},error:null}}function on(e){return e}const ln=["global","local","others"];var cn=function(e,A){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&A.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)A.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(t[s[r]]=e[s[r]])}return t};class dn{constructor({url:e="",headers:A={},fetch:t}){this.url=e,this.headers=A,this.fetch=Tr(t),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,A=ln[0]){if(ln.indexOf(A)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ln.join(", ")}`);try{return await An(this.fetch,"POST",`${this.url}/logout?scope=${A}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(dr(t))return{data:null,error:t};throw t}}async inviteUserByEmail(e,A={}){try{return await An(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:A.data},headers:this.headers,redirectTo:A.redirectTo,xform:rn})}catch(t){if(dr(t))return{data:{user:null},error:t};throw t}}async generateLink(e){try{const{options:A}=e,t=cn(e,["options"]),s=Object.assign(Object.assign({},t),A);return"newEmail"in t&&(s.new_email=null==t?void 0:t.newEmail,delete s.newEmail),await An(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:an,redirectTo:null==A?void 0:A.redirectTo})}catch(A){if(dr(A))return{data:{properties:null,user:null},error:A};throw A}}async createUser(e){try{return await An(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rn})}catch(A){if(dr(A))return{data:{user:null},error:A};throw A}}async listUsers(e){var A,t,s,r,n,a,i;try{const o={nextPage:null,lastPage:0,total:0},l=await An(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(t=null===(A=null==e?void 0:e.page)||void 0===A?void 0:A.toString())&&void 0!==t?t:"",per_page:null!==(r=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:on});if(l.error)throw l.error;const c=await l.json(),d=null!==(n=l.headers.get("x-total-count"))&&void 0!==n?n:0,u=null!==(i=null===(a=l.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==i?i:[];return u.length>0&&(u.forEach(e=>{const A=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),t=JSON.parse(e.split(";")[1].split("=")[1]);o[`${t}Page`]=A}),o.total=parseInt(d)),{data:Object.assign(Object.assign({},c),o),error:null}}catch(o){if(dr(o))return{data:{users:[]},error:o};throw o}}async getUserById(e){$r(e);try{return await An(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rn})}catch(A){if(dr(A))return{data:{user:null},error:A};throw A}}async updateUserById(e,A){$r(e);try{return await An(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:A,headers:this.headers,xform:rn})}catch(t){if(dr(t))return{data:{user:null},error:t};throw t}}async deleteUser(e,A=!1){$r(e);try{return await An(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:A},xform:rn})}catch(t){if(dr(t))return{data:{user:null},error:t};throw t}}async _listFactors(e){$r(e.userId);try{const{data:A,error:t}=await An(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:A,error:t}}catch(A){if(dr(A))return{data:null,error:A};throw A}}async _deleteFactor(e){$r(e.userId),$r(e.id);try{return{data:await An(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(A){if(dr(A))return{data:null,error:A};throw A}}async _listOAuthClients(e){var A,t,s,r,n,a,i;try{const o={nextPage:null,lastPage:0,total:0},l=await An(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(t=null===(A=null==e?void 0:e.page)||void 0===A?void 0:A.toString())&&void 0!==t?t:"",per_page:null!==(r=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:on});if(l.error)throw l.error;const c=await l.json(),d=null!==(n=l.headers.get("x-total-count"))&&void 0!==n?n:0,u=null!==(i=null===(a=l.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==i?i:[];return u.length>0&&(u.forEach(e=>{const A=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),t=JSON.parse(e.split(";")[1].split("=")[1]);o[`${t}Page`]=A}),o.total=parseInt(d)),{data:Object.assign(Object.assign({},c),o),error:null}}catch(o){if(dr(o))return{data:{clients:[]},error:o};throw o}}async _createOAuthClient(e){try{return await An(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(A){if(dr(A))return{data:null,error:A};throw A}}async _getOAuthClient(e){try{return await An(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(A){if(dr(A))return{data:null,error:A};throw A}}async _deleteOAuthClient(e){try{return await An(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(A){if(dr(A))return{data:null,error:A};throw A}}async _regenerateOAuthClientSecret(e){try{return await An(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(A){if(dr(A))return{data:null,error:A};throw A}}}function un(e={}){return{getItem:A=>e[A]||null,setItem:(A,t)=>{e[A]=t},removeItem:A=>{delete e[A]}}}const hn=!!(globalThis&&Lr()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class mn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class gn extends mn{}async function pn(e,A,t){hn&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,A);const s=new globalThis.AbortController;return A>0&&setTimeout(()=>{s.abort(),hn&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},A),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===A?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===A)throw hn&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new gn(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(hn)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}hn&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await t()}finally{hn&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}function xn(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function fn(e){const A=(new TextEncoder).encode(e);return"0x"+Array.from(A,e=>e.toString(16).padStart(2,"0")).join("")}class wn extends Error{constructor({message:e,code:A,cause:t,name:s}){var r;super(e,{cause:t}),this.__isWebAuthnError=!0,this.name=null!==(r=null!=s?s:t instanceof Error?t.name:void 0)&&void 0!==r?r:"Unknown Error",this.code=A}}class bn extends wn{constructor(e,A){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:A,message:e}),this.name="WebAuthnUnknownError",this.originalError=A}}function Bn({error:e,options:A}){var t,s,r;const{publicKey:n}=A;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(A.signal instanceof AbortSignal)return new wn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(t=n.authenticatorSelection)||void 0===t?void 0:t.requireResidentKey))return new wn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===A.mediation&&"required"===(null===(s=n.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new wn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(r=n.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new wn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new wn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new wn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===n.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new wn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new wn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const A=window.location.hostname;if(!kn(A))return new wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rp.id!==A)return new wn({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new wn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new wn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function yn({error:e,options:A}){const{publicKey:t}=A;if(!t)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(A.signal instanceof AbortSignal)return new wn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new wn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const A=window.location.hostname;if(!kn(A))return new wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(t.rpId!==A)return new wn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new wn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var vn=function(e,A){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&A.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)A.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(t[s[r]]=e[s[r]])}return t};const jn=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function Cn(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:A,user:t,excludeCredentials:s}=e,r=vn(e,["challenge","user","excludeCredentials"]),n=Sr(A).buffer,a=Object.assign(Object.assign({},t),{id:Sr(t.id).buffer}),i=Object.assign(Object.assign({},r),{challenge:n,user:a});if(s&&s.length>0){i.excludeCredentials=new Array(s.length);for(let e=0;e<s.length;e++){const A=s[e];i.excludeCredentials[e]=Object.assign(Object.assign({},A),{id:Sr(A.id).buffer,type:A.type||"public-key",transports:A.transports})}}return i}function Nn(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:A,allowCredentials:t}=e,s=vn(e,["challenge","allowCredentials"]),r=Sr(A).buffer,n=Object.assign(Object.assign({},s),{challenge:r});if(t&&t.length>0){n.allowCredentials=new Array(t.length);for(let e=0;e<t.length;e++){const A=t[e];n.allowCredentials[e]=Object.assign(Object.assign({},A),{id:Sr(A.id).buffer,type:A.type||"public-key",transports:A.transports})}}return n}function Qn(e){var A;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const t=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ir(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ir(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(A=t.authenticatorAttachment)&&void 0!==A?A:void 0}}function Un(e){var A;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const t=e,s=e.getClientExtensionResults(),r=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ir(new Uint8Array(r.authenticatorData)),clientDataJSON:Ir(new Uint8Array(r.clientDataJSON)),signature:Ir(new Uint8Array(r.signature)),userHandle:r.userHandle?Ir(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:null!==(A=t.authenticatorAttachment)&&void 0!==A?A:void 0}}function kn(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Fn(){var e,A;return!!(Hr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(A=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===A?void 0:A.get))}const Sn={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},En={userVerification:"preferred",hints:["security-key"]};function In(...e){const A=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),s={};for(const r of e)if(r)for(const e in r){const n=r[e];if(void 0!==n)if(Array.isArray(n))s[e]=n;else if(t(n))s[e]=n;else if(A(n)){const t=s[e];A(t)?s[e]=In(t,n):s[e]=In(n)}else s[e]=n}return s}class Hn{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:A,friendlyName:t,signal:s},r){try{const{data:n,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:A});if(!n)return{data:null,error:a};const i=null!=s?s:jn.createNewAbortSignal();if("create"===n.webauthn.type){const{user:e}=n.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${t}`),e.displayName||(e.displayName=e.name)}switch(n.webauthn.type){case"create":{const A=function(e,A){return In(Sn,e,A||{})}(n.webauthn.credential_options.publicKey,null==r?void 0:r.create),{data:t,error:s}=await async function(e){try{const A=await navigator.credentials.create(e);return A?A instanceof PublicKeyCredential?{data:A,error:null}:{data:null,error:new bn("Browser returned unexpected credential type",A)}:{data:null,error:new bn("Empty credential response",A)}}catch(A){return{data:null,error:Bn({error:A,options:e})}}}({publicKey:A,signal:i});return t?{data:{factorId:e,challengeId:n.id,webauthn:{type:n.webauthn.type,credential_response:t}},error:null}:{data:null,error:s}}case"request":{const A=function(e,A){return In(En,e,A||{})}(n.webauthn.credential_options.publicKey,null==r?void 0:r.request),{data:t,error:s}=await async function(e){try{const A=await navigator.credentials.get(e);return A?A instanceof PublicKeyCredential?{data:A,error:null}:{data:null,error:new bn("Browser returned unexpected credential type",A)}:{data:null,error:new bn("Empty credential response",A)}}catch(A){return{data:null,error:yn({error:A,options:e})}}}(Object.assign(Object.assign({},n.webauthn.credential_options),{publicKey:A,signal:i}));return t?{data:{factorId:e,challengeId:n.id,webauthn:{type:n.webauthn.type,credential_response:t}},error:null}:{data:null,error:s}}}}catch(n){return dr(n)?{data:null,error:n}:{data:null,error:new hr("Unexpected error in challenge",n)}}}async _verify({challengeId:e,factorId:A,webauthn:t}){return this.client.mfa.verify({factorId:A,challengeId:e,webauthn:t})}async _authenticate({factorId:e,webauthn:{rpId:A=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:t=("undefined"!=typeof window?[window.location.origin]:void 0),signal:s}},r){if(!A)return{data:null,error:new cr("rpId is required for WebAuthn authentication")};try{if(!Fn())return{data:null,error:new hr("Browser does not support WebAuthn",null)};const{data:n,error:a}=await this.challenge({factorId:e,webauthn:{rpId:A,rpOrigins:t},signal:s},{request:r});if(!n)return{data:null,error:a};const{webauthn:i}=n;return this._verify({factorId:e,challengeId:n.challengeId,webauthn:{type:i.type,rpId:A,rpOrigins:t,credential_response:i.credential_response}})}catch(n){return dr(n)?{data:null,error:n}:{data:null,error:new hr("Unexpected error in authenticate",n)}}}async _register({friendlyName:e,rpId:A=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:t=("undefined"!=typeof window?[window.location.origin]:void 0),signal:s},r){if(!A)return{data:null,error:new cr("rpId is required for WebAuthn registration")};try{if(!Fn())return{data:null,error:new hr("Browser does not support WebAuthn",null)};const{data:n,error:a}=await this._enroll({friendlyName:e});if(!n)return await this.client.mfa.listFactors().then(A=>{var t;return null===(t=A.data)||void 0===t?void 0:t.all.find(A=>"webauthn"===A.factor_type&&A.friendly_name===e&&"unverified"!==A.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:a};const{data:i,error:o}=await this._challenge({factorId:n.id,friendlyName:n.friendly_name,webauthn:{rpId:A,rpOrigins:t},signal:s},{create:r});return i?this._verify({factorId:n.id,challengeId:i.challengeId,webauthn:{rpId:A,rpOrigins:t,type:i.webauthn.type,credential_response:i.webauthn.credential_response}}):{data:null,error:o}}catch(n){return dr(n)?{data:null,error:n}:{data:null,error:new hr("Unexpected error in register",n)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const _n={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ar,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ln(e,A,t){return await t()}const Tn={};class On{get jwks(){var e,A;return null!==(A=null===(e=Tn[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==A?A:{keys:[]}}set jwks(e){Tn[this.storageKey]=Object.assign(Object.assign({},Tn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,A;return null!==(A=null===(e=Tn[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==A?A:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Tn[this.storageKey]=Object.assign(Object.assign({},Tn[this.storageKey]),{cachedAt:e})}constructor(e){var A,t;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=On.nextInstanceID,On.nextInstanceID+=1,this.instanceID>0&&Hr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},_n),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new dn({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Tr(s.fetch),this.lock=s.lock||Ln,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Hr()&&(null===(A=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===A?void 0:A.locks)?this.lock=pn:this.lock=Ln,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Hn(this)},this.persistSession?(s.storage?this.storage=s.storage:Lr()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=un(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=un(this.memoryStorage)),Hr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}null===(t=this.broadcastChannel)||void 0===t||t.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sr}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const A=function(e){const A={},t=new URL(e);if(t.hash&&"#"===t.hash[0])try{new URLSearchParams(t.hash.substring(1)).forEach((e,t)=>{A[t]=e})}catch(s){}return t.searchParams.forEach((e,t)=>{A[t]=e}),A}(window.location.href);let t="none";if(this._isImplicitGrantCallback(A)?t="implicit":await this._isPKCECallback(A)&&(t="pkce"),Hr()&&this.detectSessionInUrl&&"none"!==t){const{data:s,error:r}=await this._getSessionFromURL(A,t);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),function(e){return dr(e)&&"AuthImplicitGrantRedirectError"===e.name}(r)){const A=null===(e=r.details)||void 0===e?void 0:e.code;if("identity_already_exists"===A||"identity_not_found"===A||"single_identity_not_deletable"===A)return{error:r}}return await this._removeSession(),{error:r}}const{session:n,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",a),await this._saveSession(n),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(A){return dr(A)?{error:A}:{error:new hr("Unexpected error during initialization",A)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var A,t,s;try{const r=await An(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(t=null===(A=null==e?void 0:e.options)||void 0===A?void 0:A.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:tn}),{data:n,error:a}=r;if(a||!n)return{data:{user:null,session:null},error:a};const i=n.session,o=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:o,session:i},error:null}}catch(r){if(dr(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var A,t,s;try{let r;if("email"in e){const{email:t,password:s,options:n}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await Gr(this.storage,this.storageKey)),r=await An(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:t,password:s,data:null!==(A=null==n?void 0:n.data)&&void 0!==A?A:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:i},xform:tn})}else{if(!("phone"in e))throw new xr("You must provide either an email or phone number and a password");{const{phone:A,password:n,options:a}=e;r=await An(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:A,password:n,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},channel:null!==(s=null==a?void 0:a.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:tn})}}const{data:n,error:a}=r;if(a||!n)return{data:{user:null,session:null},error:a};const i=n.session,o=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:o,session:i},error:null}}catch(r){if(dr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let A;if("email"in e){const{email:t,password:s,options:r}=e;A=await An(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:t,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:sn})}else{if(!("phone"in e))throw new xr("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:r}=e;A=await An(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:t,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:sn})}}const{data:t,error:s}=A;return s?{data:{user:null,session:null},error:s}:t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({user:t.user,session:t.session},t.weak_password?{weakPassword:t.weak_password}:null),error:s}):{data:{user:null,session:null},error:new pr}}catch(A){if(dr(A))return{data:{user:null,session:null},error:A};throw A}}async signInWithOAuth(e){var A,t,s,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(A=e.options)||void 0===A?void 0:A.redirectTo,scopes:null===(t=e.options)||void 0===t?void 0:t.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:A}=e;switch(A){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${A}"`)}}async signInWithEthereum(e){var A,t,s,r,n,a,i,o,l,c,d;let u,h;if("message"in e)u=e.message,h=e.signature;else{const{chain:c,wallet:d,statement:m,options:g}=e;let p;if(Hr())if("object"==typeof d)p=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");p=e.ethereum}else{if("object"!=typeof d||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=d}const x=new URL(null!==(A=null==g?void 0:g.url)&&void 0!==A?A:window.location.href),f=await p.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!f||0===f.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const w=xn(f[0]);let b=null===(t=null==g?void 0:g.signInWithEthereum)||void 0===t?void 0:t.chainId;if(!b){const e=await p.request({method:"eth_chainId"});b=parseInt(e,16)}u=function(e){var A;const{chainId:t,domain:s,expirationTime:r,issuedAt:n=new Date,nonce:a,notBefore:i,requestId:o,resources:l,scheme:c,uri:d,version:u}=e;if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==u)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${u}`);if(null===(A=e.statement)||void 0===A?void 0:A.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const h=`${c?`${c}://${s}`:s} wants you to sign in with your Ethereum account:\n${xn(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let m=`URI: ${d}\nVersion: ${u}\nChain ID: ${t}${a?`\nNonce: ${a}`:""}\nIssued At: ${n.toISOString()}`;if(r&&(m+=`\nExpiration Time: ${r.toISOString()}`),i&&(m+=`\nNot Before: ${i.toISOString()}`),o&&(m+=`\nRequest ID: ${o}`),l){let e="\nResources:";for(const A of l){if(!A||"string"!=typeof A)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);e+=`\n- ${A}`}m+=e}return`${h}\n${m}`}({domain:x.host,address:w,statement:m,uri:x.href,version:"1",chainId:b,nonce:null===(s=null==g?void 0:g.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(n=null===(r=null==g?void 0:g.signInWithEthereum)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:new Date,expirationTime:null===(a=null==g?void 0:g.signInWithEthereum)||void 0===a?void 0:a.expirationTime,notBefore:null===(i=null==g?void 0:g.signInWithEthereum)||void 0===i?void 0:i.notBefore,requestId:null===(o=null==g?void 0:g.signInWithEthereum)||void 0===o?void 0:o.requestId,resources:null===(l=null==g?void 0:g.signInWithEthereum)||void 0===l?void 0:l.resources}),h=await p.request({method:"personal_sign",params:[fn(u),w]})}try{const{data:A,error:t}=await An(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:u,signature:h},(null===(c=e.options)||void 0===c?void 0:c.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:tn});if(t)throw t;return A&&A.session&&A.user?(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:t}):{data:{user:null,session:null},error:new pr}}catch(m){if(dr(m))return{data:{user:null,session:null},error:m};throw m}}async signInWithSolana(e){var A,t,s,r,n,a,i,o,l,c,d,u;let h,m;if("message"in e)h=e.message,m=e.signature;else{const{chain:d,wallet:u,statement:g,options:p}=e;let x;if(Hr())if("object"==typeof u)x=u;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!=typeof u||!(null==p?void 0:p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=u}const f=new URL(null!==(A=null==p?void 0:p.url)&&void 0!==A?A:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==p?void 0:p.signInWithSolana),{version:"1",domain:f.host,uri:f.href}),g?{statement:g}:null));let A;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])A=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");A=e}if(!("signedMessage"in A&&"signature"in A&&("string"==typeof A.signedMessage||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");h="string"==typeof A.signedMessage?A.signedMessage:(new TextDecoder).decode(A.signedMessage),m=A.signature}else{if(!("signMessage"in x&&"function"==typeof x.signMessage&&"publicKey"in x&&"object"==typeof x&&x.publicKey&&"toBase58"in x.publicKey&&"function"==typeof x.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");h=[`${f.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${f.href}`,`Issued At: ${null!==(s=null===(t=null==p?void 0:p.signInWithSolana)||void 0===t?void 0:t.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...(null===(r=null==p?void 0:p.signInWithSolana)||void 0===r?void 0:r.notBefore)?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...(null===(n=null==p?void 0:p.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...(null===(a=null==p?void 0:p.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...(null===(i=null==p?void 0:p.signInWithSolana)||void 0===i?void 0:i.nonce)?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...(null===(o=null==p?void 0:p.signInWithSolana)||void 0===o?void 0:o.requestId)?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...(null===(c=null===(l=null==p?void 0:p.signInWithSolana)||void 0===l?void 0:l.resources)||void 0===c?void 0:c.length)?["Resources",...p.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(h),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:A,error:t}=await An(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:h,signature:Ir(m)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:tn});if(t)throw t;return A&&A.session&&A.user?(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:t}):{data:{user:null,session:null},error:new pr}}catch(g){if(dr(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const A=await Mr(this.storage,`${this.storageKey}-code-verifier`),[t,s]=(null!=A?A:"").split("/");try{const{data:A,error:r}=await An(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:tn});if(await Pr(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return A&&A.session&&A.user?(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign(Object.assign({},A),{redirectType:null!=s?s:null}),error:r}):{data:{user:null,session:null,redirectType:null},error:new pr}}catch(r){if(dr(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:A,provider:t,token:s,access_token:r,nonce:n}=e,a=await An(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:t,id_token:s,access_token:r,nonce:n,gotrue_meta_security:{captcha_token:null==A?void 0:A.captchaToken}},xform:tn}),{data:i,error:o}=a;return o?{data:{user:null,session:null},error:o}:i&&i.session&&i.user?(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:i,error:o}):{data:{user:null,session:null},error:new pr}}catch(A){if(dr(A))return{data:{user:null,session:null},error:A};throw A}}async signInWithOtp(e){var A,t,s,r,n;try{if("email"in e){const{email:s,options:r}=e;let n=null,a=null;"pkce"===this.flowType&&([n,a]=await Gr(this.storage,this.storageKey));const{error:i}=await An(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(A=null==r?void 0:r.data)&&void 0!==A?A:{},create_user:null===(t=null==r?void 0:r.shouldCreateUser)||void 0===t||t,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:n,code_challenge_method:a},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:A,options:t}=e,{data:a,error:i}=await An(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:A,data:null!==(s=null==t?void 0:t.data)&&void 0!==s?s:{},create_user:null===(r=null==t?void 0:t.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken},channel:null!==(n=null==t?void 0:t.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:i}}throw new xr("You must provide either an email or phone number.")}catch(a){if(dr(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var A,t;try{let s,r;"options"in e&&(s=null===(A=e.options)||void 0===A?void 0:A.redirectTo,r=null===(t=e.options)||void 0===t?void 0:t.captchaToken);const{data:n,error:a}=await An(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:tn});if(a)throw a;if(!n)throw new Error("An error occurred on token verification.");const i=n.session,o=n.user;return(null==i?void 0:i.access_token)&&(await this._saveSession(i),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",i)),{data:{user:o,session:i},error:null}}catch(s){if(dr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var A,t,s;try{let r=null,n=null;return"pkce"===this.flowType&&([r,n]=await Gr(this.storage,this.storageKey)),await An(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(t=null===(A=e.options)||void 0===A?void 0:A.redirectTo)&&void 0!==t?t:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:n}),headers:this.headers,xform:nn})}catch(r){if(dr(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:A},error:t}=e;if(t)throw t;if(!A)throw new gr;const{error:s}=await An(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:A.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(dr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const A=`${this.url}/resend`;if("email"in e){const{email:t,type:s,options:r}=e,{error:n}=await An(this.fetch,"POST",A,{headers:this.headers,body:{email:t,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:t,type:s,options:r}=e,{data:n,error:a}=await An(this.fetch,"POST",A,{headers:this.headers,body:{phone:t,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:a}}throw new xr("You must provide either an email or phone number and a type")}catch(A){if(dr(A))return{data:{user:null,session:null},error:A};throw A}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,A){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),t=(async()=>(await e,await A()))();return this.pendingInLock.push((async()=>{try{await t}catch(e){}})()),t}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=A();for(this.pendingInLock.push((async()=>{try{await e}catch(A){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const A=await this.__loadSession();return await e(A)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const A=await Mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",A),null!==A&&(this._isValidSession(A)?e=A:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const t=!!e.expires_at&&1e3*e.expires_at-Date.now()<nr;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t){if(this.userStorage){const A=await Mr(this.userStorage,this.storageKey+"-user");(null==A?void 0:A.user)?e.user=A.user:e.user=Jr()}if(this.storage.isServer&&e.user){let A=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,t,s)=>(A||"user"!==t||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),A=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,t,s))})}return{data:{session:e},error:null}}const{data:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await An(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rn}):await this._useSession(async e=>{var A,t,s;const{data:r,error:n}=e;if(n)throw n;return(null===(A=r.session)||void 0===A?void 0:A.access_token)||this.hasCustomAuthorizationHeader?await An(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==s?s:void 0,xform:rn}):{data:{user:null},error:new gr}})}catch(A){if(dr(A))return function(e){return dr(e)&&"AuthSessionMissingError"===e.name}(A)&&(await this._removeSession(),await Pr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:A};throw A}}async updateUser(e,A={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,A))}async _updateUser(e,A={}){try{return await this._useSession(async t=>{const{data:s,error:r}=t;if(r)throw r;if(!s.session)throw new gr;const n=s.session;let a=null,i=null;"pkce"===this.flowType&&null!=e.email&&([a,i]=await Gr(this.storage,this.storageKey));const{data:o,error:l}=await An(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==A?void 0:A.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:i}),jwt:n.access_token,xform:rn});if(l)throw l;return n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(t){if(dr(t))return{data:{user:null},error:t};throw t}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new gr;const A=Date.now()/1e3;let t=A,s=!0,r=null;const{payload:n}=Kr(e.access_token);if(n.exp&&(t=n.exp,s=t<=A),s){const{data:A,error:t}=await this._callRefreshToken(e.refresh_token);if(t)return{data:{user:null,session:null},error:t};if(!A)return{data:{user:null,session:null},error:null};r=A}else{const{data:s,error:n}=await this._getUser(e.access_token);if(n)throw n;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:t-A,expires_at:t},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(A){if(dr(A))return{data:{session:null,user:null},error:A};throw A}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async A=>{var t;if(!e){const{data:s,error:r}=A;if(r)throw r;e=null!==(t=s.session)&&void 0!==t?t:void 0}if(!(null==e?void 0:e.refresh_token))throw new gr;const{data:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(A){if(dr(A))return{data:{user:null,session:null},error:A};throw A}}async _getSessionFromURL(e,A){try{if(!Hr())throw new fr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(A){case"implicit":if("pkce"===this.flowType)throw new wr("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new fr("Not a valid implicit grant flow url.")}if("pkce"===A){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wr("No code detected.");const{data:A,error:t}=await this._exchangeCodeForSession(e.code);if(t)throw t;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:t,provider_refresh_token:s,access_token:r,refresh_token:n,expires_in:a,expires_at:i,token_type:o}=e;if(!(r&&a&&n&&o))throw new fr("No session defined in URL");const l=Math.round(Date.now()/1e3),c=parseInt(a);let d=l+c;i&&(d=parseInt(i));const u=d-l;1e3*u<=rr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${u}s, should have been closer to ${c}s`);const h=d-c;l-h>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",h,d,l):l-h<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",h,d,l);const{data:m,error:g}=await this._getUser(r);if(g)throw g;const p={provider_token:t,provider_refresh_token:s,access_token:r,expires_in:c,expires_at:d,refresh_token:n,token_type:o,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(t){if(dr(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const A=await Mr(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!A)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async A=>{var t;const{data:s,error:r}=A;if(r)return{error:r};const n=null===(t=s.session)||void 0===t?void 0:t.access_token;if(n){const{error:A}=await this.admin.signOut(n,e);if(A&&(!function(e){return dr(e)&&"AuthApiError"===e.name}(A)||404!==A.status&&401!==A.status&&403!==A.status))return{error:A}}return"others"!==e&&(await this._removeSession(),await Pr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const A="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const A=16*Math.random()|0;return("x"==e?A:3&A|8).toString(16)}),t={id:A,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",A),this.stateChangeEmitters.delete(A)}};return this._debug("#onAuthStateChange()","registered callback with id",A),this.stateChangeEmitters.set(A,t),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(A)})})(),{data:{subscription:t}}}async _emitInitialSession(e){return await this._useSession(async A=>{var t,s;try{const{data:{session:s},error:r}=A;if(r)throw r;await(null===(t=this.stateChangeEmitters.get(e))||void 0===t?void 0:t.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(r){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,A={}){let t=null,s=null;"pkce"===this.flowType&&([t,s]=await Gr(this.storage,this.storageKey,!0));try{return await An(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:t,code_challenge_method:s,gotrue_meta_security:{captcha_token:A.captchaToken}},headers:this.headers,redirectTo:A.redirectTo})}catch(r){if(dr(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:A,error:t}=await this.getUser();if(t)throw t;return{data:{identities:null!==(e=A.user.identities)&&void 0!==e?e:[]},error:null}}catch(A){if(dr(A))return{data:null,error:A};throw A}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var A;try{const{data:t,error:s}=await this._useSession(async A=>{var t,s,r,n,a;const{data:i,error:o}=A;if(o)throw o;const l=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await An(this.fetch,"GET",l,{headers:this.headers,jwt:null!==(a=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==a?a:void 0})});if(s)throw s;return Hr()&&!(null===(A=e.options)||void 0===A?void 0:A.skipBrowserRedirect)&&window.location.assign(null==t?void 0:t.url),{data:{provider:e.provider,url:null==t?void 0:t.url},error:null}}catch(t){if(dr(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async linkIdentityIdToken(e){return await this._useSession(async A=>{var t;try{const{error:s,data:{session:r}}=A;if(s)throw s;const{options:n,provider:a,token:i,access_token:o,nonce:l}=e,c=await An(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(t=null==r?void 0:r.access_token)&&void 0!==t?t:void 0,body:{provider:a,id_token:i,access_token:o,nonce:l,link_identity:!0,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:tn}),{data:d,error:u}=c;return u?{data:{user:null,session:null},error:u}:d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),{data:d,error:u}):{data:{user:null,session:null},error:new pr}}catch(s){if(dr(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async A=>{var t,s;const{data:r,error:n}=A;if(n)throw n;return await An(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==s?s:void 0})})}catch(A){if(dr(A))return{data:null,error:A};throw A}}async _refreshAccessToken(e){const A=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(A,"begin");try{const t=Date.now();return await function(e,A){const t=new Promise((t,s)=>{(async()=>{for(let n=0;n<1/0;n++)try{const s=await e(n);if(!A(n,null,s))return void t(s)}catch(r){if(!A(n,r))return void s(r)}})()});return t}(async t=>(t>0&&await async function(e){return await new Promise(A=>{setTimeout(()=>A(null),e)})}(200*Math.pow(2,t-1)),this._debug(A,"refreshing attempt",t),await An(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tn})),(e,A)=>{const s=200*Math.pow(2,e);return A&&Br(A)&&Date.now()+s-t<rr})}catch(t){if(this._debug(A,"error",t),dr(t))return{data:{session:null,user:null},error:t};throw t}finally{this._debug(A,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,A){const t=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:A.redirectTo,scopes:A.scopes,queryParams:A.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",A,"url",t),Hr()&&!A.skipBrowserRedirect&&window.location.assign(t),{data:{provider:e,url:t},error:null}}async _recoverAndRefresh(){var e,A;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Mr(this.storage,this.storageKey);if(r&&this.userStorage){let A=await Mr(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||A||(A={user:r.user},await Or(this.userStorage,this.storageKey+"-user",A)),r.user=null!==(e=null==A?void 0:A.user)&&void 0!==e?e:Jr()}else if(r&&!r.user&&!r.user){const e=await Mr(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(r.user=e.user,await Pr(this.storage,this.storageKey+"-user"),await Or(this.storage,this.storageKey,r)):r.user=Jr()}if(this._debug(t,"session from storage",r),!this._isValidSession(r))return this._debug(t,"session is not valid"),void(null!==r&&await this._removeSession());const n=1e3*(null!==(A=r.expires_at)&&void 0!==A?A:1/0)-Date.now()<nr;if(this._debug(t,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),Br(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(r.user&&!0===r.user.__isUserNotAvailableProxy)try{const{data:e,error:A}=await this._getUser(r.access_token);!A&&(null==e?void 0:e.user)?(r.user=e.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(t,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(t,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return this._debug(t,"error",r),void console.error(r)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var A,t;if(!e)throw new gr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Dr;const{data:A,error:t}=await this._refreshAccessToken(e);if(t)throw t;if(!A.session)throw new gr;await this._saveSession(A.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",A.session);const s={data:A.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(r){if(this._debug(s,"error",r),dr(r)){const e={data:null,error:r};return Br(r)||await this._removeSession(),null===(A=this.refreshingDeferred)||void 0===A||A.resolve(e),e}throw null===(t=this.refreshingDeferred)||void 0===t||t.reject(r),r}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,A,t=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",A,`broadcast = ${t}`);try{this.broadcastChannel&&t&&this.broadcastChannel.postMessage({event:e,session:A});const s=[],r=Array.from(this.stateChangeEmitters.values()).map(async t=>{try{await t.callback(e,A)}catch(r){s.push(r)}});if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const A=Object.assign({},e),t=A.user&&!0===A.user.__isUserNotAvailableProxy;if(this.userStorage){!t&&A.user&&await Or(this.userStorage,this.storageKey+"-user",{user:A.user});const e=Object.assign({},A);delete e.user;const s=qr(e);await Or(this.storage,this.storageKey,s)}else{const e=qr(A);await Or(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Pr(this.storage,this.storageKey),await Pr(this.storage,this.storageKey+"-code-verifier"),await Pr(this.storage,this.storageKey+"-user"),this.userStorage&&await Pr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Hr()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(A){console.error("removing visibilitychange callback failed",A)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rr);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const A=Date.now();try{return await this._useSession(async e=>{const{data:{session:t}}=e;if(!t||!t.refresh_token||!t.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*t.expires_at-A)/rr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(t.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof mn))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Hr()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const A=`#_onVisibilityChanged(${e})`;this._debug(A,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(A,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,A,t){const s=[`provider=${encodeURIComponent(A)}`];if((null==t?void 0:t.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&s.push(`scopes=${encodeURIComponent(t.scopes)}`),"pkce"===this.flowType){const[e,A]=await Gr(this.storage,this.storageKey),t=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(A)}`});s.push(t.toString())}if(null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);s.push(e.toString())}return(null==t?void 0:t.skipBrowserRedirect)&&s.push(`skip_http_redirect=${t.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async A=>{var t;const{data:s,error:r}=A;return r?{data:null,error:r}:await An(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(t=null==s?void 0:s.session)||void 0===t?void 0:t.access_token})})}catch(A){if(dr(A))return{data:null,error:A};throw A}}async _enroll(e){try{return await this._useSession(async A=>{var t,s;const{data:r,error:n}=A;if(n)return{data:null,error:n};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:i,error:o}=await An(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(t=null==r?void 0:r.session)||void 0===t?void 0:t.access_token});return o?{data:null,error:o}:("totp"===e.factorType&&"totp"===i.type&&(null===(s=null==i?void 0:i.totp)||void 0===s?void 0:s.qr_code)&&(i.totp.qr_code=`data:image/svg+xml;utf-8,${i.totp.qr_code}`),{data:i,error:null})})}catch(A){if(dr(A))return{data:null,error:A};throw A}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async A=>{var t;const{data:s,error:r}=A;if(r)return{data:null,error:r};const n=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Qn(e.webauthn.credential_response):Un(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:i}=await An(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:n,headers:this.headers,jwt:null===(t=null==s?void 0:s.session)||void 0===t?void 0:t.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(A){if(dr(A))return{data:null,error:A};throw A}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async A=>{var t;const{data:s,error:r}=A;if(r)return{data:null,error:r};const n=await An(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(t=null==s?void 0:s.session)||void 0===t?void 0:t.access_token});if(n.error)return n;const{data:a}=n;if("webauthn"!==a.type)return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Cn(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Nn(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(A){if(dr(A))return{data:null,error:A};throw A}})}async _challengeAndVerify(e){const{data:A,error:t}=await this._challenge({factorId:e.factorId});return t?{data:null,error:t}:await this._verify({factorId:e.factorId,challengeId:A.id,code:e.code})}async _listFactors(){var e;const{data:{user:A},error:t}=await this.getUser();if(t)return{data:null,error:t};const s={all:[],phone:[],totp:[],webauthn:[]};for(const r of null!==(e=null==A?void 0:A.factors)&&void 0!==e?e:[])s.all.push(r),"verified"===r.status&&s[r.factor_type].push(r);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var A,t;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:n}=Kr(s.access_token);let a=null;n.aal&&(a=n.aal);let i=a;(null!==(t=null===(A=s.user.factors)||void 0===A?void 0:A.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(i="aal2");return{data:{currentLevel:a,nextLevel:i,currentAuthenticationMethods:n.amr||[]},error:null}}))}async fetchJwk(e,A={keys:[]}){let t=A.keys.find(A=>A.kid===e);if(t)return t;const s=Date.now();if(t=this.jwks.keys.find(A=>A.kid===e),t&&this.jwks_cached_at+6e5>s)return t;const{data:r,error:n}=await An(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=s,t=r.keys.find(A=>A.kid===e),t||null):null}async getClaims(e,A={}){try{let t=e;if(!t){const{data:e,error:A}=await this.getSession();if(A||!e.session)return{data:null,error:A};t=e.session.access_token}const{header:s,payload:r,signature:n,raw:{header:a,payload:i}}=Kr(t);(null==A?void 0:A.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(r.exp);const o=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null==A?void 0:A.keys)?{keys:A.keys}:null==A?void 0:A.jwks):null;if(!o){const{error:e}=await this.getUser(t);if(e)throw e;return{data:{claims:r,header:s,signature:n},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),c=await crypto.subtle.importKey("jwk",o,l,!0,["verify"]);if(!(await crypto.subtle.verify(l,c,n,Er(`${a}.${i}`))))throw new vr("Invalid JWT signature");return{data:{claims:r,header:s,signature:n},error:null}}catch(t){if(dr(t))return{data:null,error:t};throw t}}}On.nextInstanceID=0;const Mn=On;class Pn extends Mn{constructor(e){super(e)}}var Dn=function(e,A,t,s){return new(t||(t=Promise))(function(r,n){function a(e){try{o(s.next(e))}catch(A){n(A)}}function i(e){try{o(s.throw(e))}catch(A){n(A)}}function o(e){var A;e.done?r(e.value):(A=e.value,A instanceof t?A:new t(function(e){e(A)})).then(a,i)}o((s=s.apply(e,A||[])).next())})};class Kn{constructor(e,A,t){var s,r,n;this.supabaseUrl=e,this.supabaseKey=A;const a=function(e){const A=null==e?void 0:e.trim();if(!A)throw new Error("supabaseUrl is required.");if(!A.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((t=A).endsWith("/")?t:t+"/")}catch(s){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var t}(e);if(!A)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const i=`sb-${a.hostname.split(".")[0]}-auth-token`,o=function(e,A){var t,s;const{db:r,auth:n,realtime:a,global:i}=e,{db:o,auth:l,realtime:c,global:d}=A,u={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),i),{headers:Object.assign(Object.assign({},null!==(t=null==d?void 0:d.headers)&&void 0!==t?t:{}),null!==(s=null==i?void 0:i.headers)&&void 0!==s?s:{})}),accessToken:()=>tr(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}(null!=t?t:{},{db:qs,realtime:Xs,auth:Object.assign(Object.assign({},Ys),{storageKey:i}),global:Js});this.storageKey=null!==(s=o.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(r=o.global.headers)&&void 0!==r?r:{},o.accessToken?(this.accessToken=o.accessToken,this.auth=new Proxy({},{get:(e,A)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(A)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(n=o.auth)&&void 0!==n?n:{},this.headers,o.global.fetch),this.fetch=Ar(A,this._getAccessToken.bind(this),o.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},o.realtime)),this.rest=new _t(new URL("rest/v1",a).href,{headers:this.headers,schema:o.db.schema,fetch:this.fetch}),this.storage=new zs(this.storageUrl.href,this.headers,this.fetch,null==t?void 0:t.storage),o.accessToken||this._listenForAuthEvents()}get functions(){return new nt(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,A={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,A,t)}channel(e,A={config:{}}){return this.realtime.channel(e,A)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Dn(this,void 0,void 0,function*(){var e,A;if(this.accessToken)return yield this.accessToken();const{data:t}=yield this.auth.getSession();return null!==(A=null===(e=t.session)||void 0===e?void 0:e.access_token)&&void 0!==A?A:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:A,detectSessionInUrl:t,storage:s,userStorage:r,storageKey:n,flowType:a,lock:i,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pn({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:n,autoRefreshToken:e,persistSession:A,detectSessionInUrl:t,storage:s,userStorage:r,flowType:a,lock:i,debug:o,fetch:c,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new ws(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,A)=>{this._handleTokenChanged(e,"CLIENT",null==A?void 0:A.access_token)})}_handleTokenChanged(e,A,t){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===t?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==A&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=t,this.realtime.setAuth(t))}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const A=e.match(/^v(\d+)\./);return!!A&&parseInt(A[1],10)<=18})()&&console.warn("âš ï¸  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Rn=((e,A,t)=>new Kn(e,A,t))("https://qzeomarntlrksyenepqe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF6ZW9tYXJudGxya3N5ZW5lcHFlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5Mjg2NjUsImV4cCI6MjA3NTUwNDY2NX0.x3S2nvc2wx-9hlsqwvw_nyB5YJWyHFo4Kmv6zPEJr78");function Vn({stockForm:A,onChange:t,onSubmit:s,loading:r,onClose:n}){return e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[!A?.sku&&e.jsx(NA,{label:"SKU Code",name:"sku",value:A?.sku||"",onChange:t,placeholder:"Enter SKU"}),e.jsx(NA,{label:"Quantity to Add",name:"quantity",type:"number",value:A?.quantity||"",onChange:t,placeholder:"Enter quantity",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(q,{label:"Cancel",variant:"secondary",onClick:n,type:"button"}),e.jsx(q,{label:"Add Stock",variant:"primary",type:"submit",disabled:r})]}),r&&e.jsx(Y,{size:"sm",className:"mt-2"})]})}function Gn({editingProduct:A,productForm:t,onChange:s,categories:r,onSubmit:n,loading:a,onClose:i,businessType:o}){const[l,c]=h.useState(!1),[d,u]=h.useState(!1),m=()=>{const e={"Grocery Store":["Fresh Produce","Meat & Poultry","Seafood","Dairy & Eggs","Bread & Bakery","Snacks & Chips","Beverages","Canned & Packaged Goods","Frozen Food","Rice, Pasta & Grains","Condiments & Spices","Cleaning Supplies","Household Essentials","Baby Products","Pet Supplies"],Pharmacy:["Prescription Medicines","OTC Medicines","Vitamins & Supplements","First Aid Supplies","Medical Devices","Personal Care","Hygiene Products","Beauty & Cosmetics","Baby Care","Adult Care","PPE & Sanitizers"],"Clothing Store":["Menâ€™s Clothing","Womenâ€™s Clothing","Kidsâ€™ Clothing","Baby Clothing","Footwear","Bags & Accessories","Underwear & Socks"],"Electronics Store":["Mobile Devices","Computers & Laptops","Computer Accessories","Phone Accessories","Audio Devices","Cameras & Photography","Home Appliances","Personal Appliances","Gaming Consoles & Accessories","Cables, Adapters & Chargers"],"Hardware Store":["Hand Tools","Power Tools","Construction Materials","Electrical Supplies","Plumbing Supplies","Paint & Painting Supplies","Gardening Tools","Fasteners (Nails, Screws, Bolts)","Safety Gear"],Bookstore:["Fiction Books","Non-Fiction Books","Educational Books","Childrenâ€™s Books","Comics & Manga","School Supplies","Art Materials","Office Supplies","Stationery & Gifts"],"Convenience Store":["Snacks","Beverages","Ready-to-Eat Food","Instant Noodles / Cup Meals","Frozen Food","Basic Grocery Items","Toiletries","Basic OTC Medicines","Household Essentials","Phone Load","Ice Cream & Desserts","Tobacco & Lighters"],Others:["General"]},A="undefined"!=typeof window&&sessionStorage.getItem("business_type")||null;let t=o||A||"Others";if("Others"===t&&"undefined"!=typeof window)try{const e=sessionStorage.getItem("user")||localStorage.getItem("user");if(e){const A=JSON.parse(e),r=A?.business?.business_type||A?.business_type||null;if(r){t=r;try{sessionStorage.setItem("business_type",r)}catch(s){}}}}catch(s){}return(e[t]||e.Others).map((e,A)=>({id:`fb-${A}`,name:e}))},g=(()=>{if(o){const e=m();try{console.debug("ProductForm: using fallback categories for businessType=",o,e)}catch(A){}return e}if(r&&r.length>0){const e=r[0],t=e&&(e.name||e);if(1===r.length&&("General"===t||"Others"===t)){const e=m();try{console.debug("ProductForm: categories prop is generic, using fallback=",e)}catch(A){}return e}const s=r.map((e,A)=>({id:e.id||`p-${A}`,name:e.name||e}));try{console.debug("ProductForm: using provided categories=",s)}catch(A){}return s}const e=m();try{console.debug("ProductForm: no categories provided, using fallback=",e)}catch(A){}return e})();return e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(NA,{label:"SKU Code",name:"sku",value:t.sku,onChange:s,placeholder:"Scan or enter SKU",required:!0}),e.jsx("div",{className:"flex items-end",children:e.jsx(q,{label:l?"Close Scanner":"Scan Barcode",type:"button",variant:"secondary",onClick:()=>c(!l)})})]}),l&&e.jsx("div",{className:"rounded-2xl border border-blue-100 p-4",children:e.jsx(TA,{onScan:e=>{const A=e?.[0]?.rawValue||"";A&&(s({target:{name:"sku",value:A}}),u(!0))},paused:d,onResume:()=>u(!1),textMain:"text-blue-700"})}),e.jsx(NA,{label:"Name",name:"name",value:t.name,onChange:s,required:!0}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"category",value:t.category,onChange:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),g.map(A=>e.jsx("option",{value:A.name,children:A.name},A.id))]}),"Others"===t.category&&e.jsx("div",{className:"mt-2",children:e.jsx(NA,{label:"Custom Category",name:"customCategory",value:t.customCategory||"",onChange:s,placeholder:"Please specify category",required:!0})})]}),e.jsx(NA,{label:"Description",name:"description",value:t.description,onChange:s,required:!0}),e.jsxs("div",{className:`grid grid-cols-1 ${A?"md:grid-cols-2":"md:grid-cols-3"} gap-4`,children:[!A&&e.jsx(NA,{label:"Quantity",name:"quantity",type:"number",value:t.quantity,onChange:s,required:!0}),e.jsx(NA,{label:"Cost Price (â‚±)",name:"cost_price",type:"number",value:t.cost_price,onChange:s,required:!0}),e.jsx(NA,{label:"Selling Price (â‚±)",name:"selling_price",type:"number",value:t.selling_price,onChange:s,required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(q,{label:"Cancel",variant:"secondary",onClick:i,type:"button"}),e.jsx(q,{label:A?"Update":"Add",variant:"primary",type:"submit",disabled:a})]}),a&&e.jsx(Y,{size:"sm",className:"mt-2"})]})}function Wn({isOpen:A,onClose:t,title:s,children:r,size:n="md",variant:a="glass",editingProduct:i,productForm:o,onChange:l,categories:c,onSubmit:d,loading:u,stockForm:m}){if(!A)return null;const[g,p]=h.useState(null);return h.useEffect(()=>{if(!A||"product"!==a)return;(async()=>{try{let A="undefined"!=typeof window&&(localStorage.getItem("business_id")||sessionStorage.getItem("business_id"))||null;if(!A&&"undefined"!=typeof window)try{const e=sessionStorage.getItem("user")||localStorage.getItem("user");if(e){const t=JSON.parse(e);A=t?.businessId||t?.business_id||null}}catch(e){A=null}if(!A)return void console.debug("Modal: no business id available to fetch business_type");console.debug("Modal: loading business_type for business_id=",A);const{data:t,error:s}=await Rn.from("business").select("business_type").eq("business_id",A).maybeSingle();if(s)return void console.debug("Could not fetch business_type:",s.message||s);const r=t?.business_type||null;if(r){console.debug("Modal: got business_type=",r),p(r);try{sessionStorage.setItem("business_type",r)}catch(e){}}}catch(A){console.error(A)}})()},[A,a]),e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:t,"aria-hidden":"true"}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl min-w-[340px] max-w-full z-10 max-h-[90vh] overflow-hidden flex flex-col "+("sm"===n?"w-full max-w-md":"lg"===n?"w-full max-w-4xl":"w-full max-w-xl"),children:[e.jsx("button",{className:"absolute top-4 right-4 z-20 w-8 h-8 flex items-center justify-center rounded-lg text-gray-400 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200",onClick:t,"aria-label":"Close",type:"button",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"overflow-y-auto",children:[s&&e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s})}),"product"===a?e.jsx("div",{className:"p-6",children:e.jsx(Gn,{editingProduct:i,productForm:o,onChange:l,categories:c||[],businessType:g,onSubmit:d,loading:u,onClose:t})}):"stock"===a?e.jsx("div",{className:"p-6",children:e.jsx(Vn,{stockForm:m,onChange:l,onSubmit:d,loading:u,onClose:t})}):r]})]})]})}const zn=[],$n=[];function Jn(e){const A={"Grocery Store":["Fresh Produce","Meat & Poultry","Seafood","Dairy & Eggs","Bread & Bakery","Snacks & Chips","Beverages","Canned & Packaged Goods","Frozen Food","Rice, Pasta & Grains","Condiments & Spices","Cleaning Supplies","Household Essentials","Baby Products","Pet Supplies"],Pharmacy:["Prescription Medicines","OTC Medicines","Vitamins & Supplements","First Aid Supplies","Medical Devices","Personal Care","Hygiene Products","Beauty & Cosmetics","Baby Care","Adult Care","PPE & Sanitizers"],"Clothing Store":["Menâ€™s Clothing","Womenâ€™s Clothing","Kidsâ€™ Clothing","Baby Clothing","Footwear","Bags & Accessories","Underwear & Socks"],"Electronics Store":["Mobile Devices","Computers & Laptops","Computer Accessories","Phone Accessories","Audio Devices","Cameras & Photography","Home Appliances","Personal Appliances","Gaming Consoles & Accessories","Cables, Adapters & Chargers"],"Hardware Store":["Hand Tools","Power Tools","Construction Materials","Electrical Supplies","Plumbing Supplies","Paint & Painting Supplies","Gardening Tools","Fasteners (Nails, Screws, Bolts)","Safety Gear"],Bookstore:["Fiction Books","Non-Fiction Books","Educational Books","Childrenâ€™s Books","Comics & Manga","School Supplies","Art Materials","Office Supplies","Stationery & Gifts"],"Convenience Store":["Snacks","Beverages","Ready-to-Eat Food","Instant Noodles / Cup Meals","Frozen Food","Basic Grocery Items","Toiletries","Basic OTC Medicines","Household Essentials","Phone Load","Ice Cream & Desserts","Tobacco & Lighters"],Others:["General"]};return A[e]||A.Others}function qn(){const[A,t]=h.useState(zn),[s,r]=h.useState(()=>{try{let A=null;try{A="undefined"!=typeof window&&sessionStorage.getItem("business_type")||null}catch(e){A=null}if(!A&&"undefined"!=typeof window)try{const t=sessionStorage.getItem("user")||localStorage.getItem("user");if(t){const s=JSON.parse(t);if(A=s?.business?.business_type||s?.business_type||null,A)try{sessionStorage.setItem("business_type",A)}catch(e){}}}catch(e){A=null}A=A||"Others";return(Jn(A)||[]).map((e,A)=>({id:A+1,name:e}))}catch{return $n}}),[n,a]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState({sku:"",name:"",category:"",customCategory:"",description:"",quantity:"",cost_price:"",selling_price:""}),[m,g]=h.useState({sku:"",quantity:""}),[p,x]=h.useState(!1),[f,w]=h.useState(""),[b,B]=h.useState(10),[y,v]=h.useState(1),[j,C]=h.useState(""),[N,Q]=h.useState(!1);h.useEffect(()=>{(async()=>{try{x(!0),C("");const A=sessionStorage.getItem("auth_token"),s=await R("/api/auth/profile",{headers:V(A)}),n=s?.business?.business_type||"Others";try{"undefined"!=typeof window&&sessionStorage.setItem("business_type",n)}catch(e){console.debug("Could not persist business_type",e)}const a=Jn(n);r(a.map((e,A)=>({id:A+1,name:e})));const i=(await R("/api/inventory",{headers:V(A)})||[]).map(e=>({id:String(e.id||""),name:e.name||"-",category:e.category||"-",quantity:Number(e.quantity||0),cost_price:Number(e.cost_price||0),selling_price:Number(e.selling_price||0),sku:e.sku||"",description:e.description||""}));t(i)}catch(A){C("Failed to load inventory"),t([])}finally{x(!1)}})()},[]);const U=A.reduce((e,A)=>e+Number(A.selling_price||0)*Number(A.quantity||0),0),k=A.filter(e=>Number(e.quantity||0)<10).length,F=[{label:"TOTAL ITEMS",value:A.length,icon:e.jsx("svg",{width:"32",height:"32",fill:"none",stroke:"#2563eb",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),color:"text-blue-800",sub:"Total products in inventory"},{label:"INVENTORY VALUE",value:U,icon:e.jsx("svg",{width:"32",height:"32",fill:"none",stroke:"#2563eb",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"text-green-700",formatValue:e=>`â‚±${e.toLocaleString(void 0,{minimumFractionDigits:2})}`,sub:"Total value of all stock"},{label:"AVAILABLE CATEGORIES",value:s.length,icon:e.jsx("svg",{width:"32",height:"32",fill:"none",stroke:"#2563eb",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 7h16M4 12h16M4 17h16"})}),color:"text-blue-500",sub:"Product categories"},{label:"LOW STOCK ALERTS",value:k,icon:e.jsx("svg",{width:"32",height:"32",fill:"none",stroke:"#2563eb",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),color:"text-orange-600",sub:"Items needing restock"}],[S,E]=h.useState("name"),[I,H]=h.useState("asc"),[_,L]=h.useState(null),[T,O]=h.useState(null),M=h.useMemo(()=>{let e=A.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())||e.category.toLowerCase().includes(f.toLowerCase())||e.description.toLowerCase().includes(f.toLowerCase()));return _&&(e=e.filter(e=>e.category===_)),T&&("out_of_stock"===T?e=e.filter(e=>0===Number(e.quantity||0)):"low_stock"===T?e=e.filter(e=>{const A=Number(e.quantity||0);return A>0&&A<10}):"in_stock"===T&&(e=e.filter(e=>Number(e.quantity||0)>=10))),e.sort((e,A)=>{let t,s;if("name"===S)t=(e.name||"").toLowerCase(),s=(A.name||"").toLowerCase();else if("category"===S)t=(e.category||"").toLowerCase(),s=(A.category||"").toLowerCase();else if("quantity"===S)t=Number(e.quantity||0),s=Number(A.quantity||0);else{if("selling_price"!==S)return 0;t=Number(e.selling_price||0),s=Number(A.selling_price||0)}return t<s?"asc"===I?-1:1:t>s?"asc"===I?1:-1:0}),e},[A,f,_,T,S,I]),P=Math.ceil(M.length/b)||1,D=M.slice((y-1)*b,y*b);return e.jsxs(Ue,{title:"INVENTORY",sidebar:e.jsx(fA,{}),isSidebarOpen:N,setSidebarOpen:Q,showHeader:!0,showNavbar:!1,showFooter:!1,children:[e.jsx(qA,{products:D,allProducts:M,stats:F,page:y,entriesPerPage:b,totalPages:P,onPageChange:e=>{e<1||e>P||v(e)},onEntriesChange:e=>{B(Number(e.target.value)),v(1)},search:f,onSearchChange:e=>{w(e.target.value),v(1)},onEdit:e=>{c(e),u({...e}),a(!0)},onDelete:async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{x(!0),C("");const A=sessionStorage.getItem("auth_token");await R(`/api/inventory/${e}`,{method:"DELETE",headers:V(A)});const s=(await R("/api/inventory",{headers:V(A)})||[]).map(e=>({id:String(e.id||""),name:e.name||"-",category:e.category||"-",quantity:Number(e.quantity||0),cost_price:Number(e.cost_price||0),selling_price:Number(e.selling_price||0),sku:e.sku||"",description:e.description||""}));t(s)}catch(A){C("Failed to delete product")}finally{x(!1)}},onAddProduct:()=>{c(null),u({sku:"",name:"",category:"",customCategory:"",description:"",quantity:"",cost_price:"",selling_price:""}),a(!0)},onStockEntry:e=>{g({sku:e?.sku||"",quantity:""}),o(!0)},categories:s,selectedCategory:_,onCategoryFilter:e=>{L(e),v(1)},stockFilter:T,onStockFilter:e=>{O(e),v(1)},sortBy:S,sortOrder:I,onSort:(e,A)=>{E(e),H(A),v(1)}}),j&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-3 flex items-start gap-2 mt-2",children:[e.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-sm font-medium text-red-700",children:(()=>{try{const e=JSON.parse(j);return e.error||e.message||j}catch{return j}})()})]}),e.jsx(Wn,{isOpen:n,onClose:()=>a(!1),variant:"product",title:l?"Edit Product":"Add New Product",editingProduct:l,productForm:d,onChange:e=>{const{name:A,value:t}=e.target;u(e=>({...e,[A]:t}))},categories:s,onSubmit:async e=>{e.preventDefault();try{x(!0),C("");const e=sessionStorage.getItem("auth_token");l?await R(`/api/inventory/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json",...V(e)},body:JSON.stringify({product_name:(d.name||"").trim(),cost_price:Number(d.cost_price)||0,selling_price:Number(d.selling_price)||0,sku:(d.sku||"").trim(),category:"Others"===d.category?(d.customCategory||"").trim():(d.category||"").trim(),description:(d.description||"").trim()})}):await R("/api/products",{method:"POST",headers:{"Content-Type":"application/json",...V(e)},body:JSON.stringify({product_category_id:null,category:"Others"===d.category?(d.customCategory||"").trim():(d.category||"").trim(),product_name:(d.name||"").trim(),name:(d.name||"").trim(),description:(d.description||"").trim(),cost_price:Number(d.cost_price)||0,selling_price:Number(d.selling_price)||0,price:Number(d.selling_price)||0,sku:(d.sku||"").trim()||`SKU-${Date.now()}`,quantity:Number(d.quantity)||0})});const A=(await R("/api/inventory",{headers:V(e)})||[]).map(e=>({id:String(e.id||""),name:e.name||"-",category:e.category||"-",quantity:Number(e.quantity||0),cost_price:Number(e.cost_price||0),selling_price:Number(e.selling_price||0),sku:e.sku||"",description:e.description||""}));t(A),a(!1)}catch(A){C("Failed to save product")}finally{x(!1)}},loading:p}),e.jsx(Wn,{isOpen:i,onClose:()=>o(!1),title:"Stock Entry",variant:"stock",editingProduct:null,stockForm:m,onChange:e=>g({...m,[e.target.name]:e.target.value}),onSubmit:async e=>{e.preventDefault();try{x(!0),C("");const e=sessionStorage.getItem("auth_token");await R("/api/products/add-stock-by-sku",{method:"POST",headers:V(e),body:JSON.stringify({sku:m.sku,quantity:Number(m.quantity)})});const A=(await R("/api/inventory",{headers:V(e)})||[]).map(e=>({id:String(e.id||""),name:e.name||"-",category:e.category||"-",quantity:Number(e.quantity||0),cost_price:Number(e.cost_price||0),selling_price:Number(e.selling_price||0),sku:e.sku||"",description:e.description||""}));t(A),o(!1)}catch(A){C("Failed to add stock")}finally{x(!1)}},loading:p})]})}function Yn({item:A,onIncrement:t,onDecrement:s,onRemove:r}){return e.jsxs("div",{className:"grid grid-cols-[40px_1fr_80px_80px] items-center gap-2 py-2",children:[e.jsxs("div",{className:"text-sm text-blue-900 font-semibold",children:[A.quantity,"x"]}),e.jsx("div",{children:e.jsx("input",{value:A.name,readOnly:!0,className:"w-full px-3 py-2 rounded-lg border border-blue-200 bg-white text-blue-900 text-sm shadow-sm focus:outline-none"})}),e.jsxs("div",{className:"text-right text-sm text-blue-900 font-semibold",children:["â‚±",A.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:s,className:"text-blue-700",children:"âˆ’"}),e.jsx("button",{onClick:t,className:"text-blue-700",children:"ï¼‹"}),e.jsx("button",{onClick:r,className:"text-red-600",children:"ðŸ—‘"})]})]})}function Xn({cart:A,onIncrement:t,onDecrement:s,onRemove:r}){return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-blue-900 text-lg font-bold mb-3",children:"Your Order"}),e.jsxs("div",{className:"grid grid-cols-[40px_1fr_80px_80px] text-xs text-blue-700 font-semibold px-1 mb-2",children:[e.jsx("div",{children:"QTY"}),e.jsx("div",{children:"Item"}),e.jsx("div",{children:"Price"}),e.jsx("div",{className:"text-right",children:"Settings"})]}),e.jsx("div",{className:"space-y-2 max-h-[45vh] overflow-y-auto pr-1",children:0===A.length?e.jsx("div",{className:"text-blue-500 text-center py-6",children:"Scan items to add them to your order."}):A.map(A=>e.jsx(Yn,{item:A,onIncrement:()=>t(A.sku),onDecrement:()=>s(A.sku),onRemove:()=>r(A.sku)},A.sku))})]})}function Zn({isOpen:t,onClose:s,total:r,method:n,setMethod:a,onPay:i,cart:o=[]}){const l=o.reduce((e,A)=>e+(A.quantity||0),0),c=[{id:"Cash",name:"Cash",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2z"})}),description:"Pay with cash at counter"},{id:"GCash",name:"GCash",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),description:"Pay online with GCash"},{id:"PayMaya",name:"PayMaya",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),description:"Pay online with PayMaya"}];return e.jsx(Wn,{isOpen:t,onClose:s,title:"",children:e.jsxs(A.div,{className:"space-y-8 p-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Order Summary"}),e.jsxs("div",{className:"text-xs text-blue-500",children:[l," item",1!==l?"s":""]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total"}),e.jsxs("div",{className:"text-lg font-bold text-blue-900",children:["â‚±",r.toFixed(2)]})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-6",children:"Choose Payment Method"}),e.jsx("div",{className:"space-y-4",children:c.map(t=>e.jsx(A.div,{className:"relative p-5 rounded-xl border-2 cursor-pointer transition-all duration-200 "+(n===t.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 bg-white"),onClick:()=>a(t.id),whileTap:{scale:.98},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center "+(n===t.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-600"),children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-blue-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-600",children:t.description})]}),e.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center "+(n===t.id?"border-blue-500 bg-blue-500":"border-gray-300"),children:n===t.id&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},t.id))})]}),e.jsx(A.div,{className:"pt-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(q,{label:`Pay â‚±${r.toFixed(2)}`,variant:"primary",onClick:()=>i(n||"Cash"),microinteraction:!0,className:"w-full py-3 text-lg font-semibold"})})]})})}function ea({total:t,onCancel:s,onCheckout:r,disabled:n=!1}){return e.jsx(A.div,{className:"fixed bottom-0 left-0 right-0 px-4 pb-4 sm:pb-6 pt-3 bg-white/95 backdrop-blur-xl border-t border-blue-200/50 shadow-2xl",initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3,ease:"easeOut"},children:e.jsxs("div",{className:"max-w-screen-md mx-auto flex items-center justify-between gap-3",children:[e.jsx(q,{label:"Cancel",variant:"secondary",onClick:s,microinteraction:!0,disabled:n,className:"flex-shrink-0"}),e.jsx(q,{label:"Check Out",variant:"primary",onClick:r,microinteraction:!0,disabled:n,className:"flex-shrink-0"}),e.jsxs(A.div,{className:"text-right text-sm flex-shrink-0 min-w-[100px]",initial:{scale:.9},animate:{scale:1},transition:{delay:.2},children:[e.jsx("div",{className:"text-blue-600 font-medium text-xs sm:text-sm",children:"Order Total:"}),e.jsxs("div",{className:"text-blue-900 font-extrabold text-lg sm:text-xl",children:["â‚±",t.toFixed(2)]})]})]})})}function Aa({isOpen:A,onClose:t,qrPayload:s,transactionId:r,onTransactionComplete:n}){const[a,i]=h.useState("pending"),[o,l]=h.useState(""),c=h.useMemo(()=>s||"{}",[s]);h.useEffect(()=>{if(A&&r){const e=setInterval(async()=>{try{const A=await R(`/sales/public/transaction/${r}`),t=A.data||A;console.log("Transaction status check:",t),t&&"completed"===t.status?(i("completed"),clearInterval(e),n&&n(t.tn||t.transaction_number)):t&&t.status&&i(t.status)}catch(A){console.error("Error fetching transaction status:",A),l("Could not fetch transaction status.")}},3e3);return()=>clearInterval(e)}},[A,r,n]),h.useEffect(()=>{A||setTimeout(()=>{i("pending"),l("")},300)},[A]);const d=h.useMemo(()=>`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(c)}&qzone=2&format=png&_=${Date.now()}`,[c]);return e.jsxs(ve,{isOpen:A,onClose:t,title:"Show to Cashier",subtitle:"Let the cashier scan this QR code to finalize payment.",size:"sm",contentClassName:"text-center space-y-3",children:[e.jsx("img",{src:d,alt:"Customer Cart QR",className:"w-[300px] h-[300px] border-4 border-blue-200 rounded-2xl bg-white mx-auto shadow-lg"}),e.jsxs("div",{className:"h-8",children:["pending"===a&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-800 animate-pulse",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{children:"Waiting for cashier..."})]}),"completed"===a&&e.jsx("div",{className:"text-green-600 font-bold",children:"Transaction Complete! Redirecting..."}),o&&e.jsx("div",{className:"text-red-500 text-sm",children:o})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:t,className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-4 rounded-lg transition-colors duration-300",children:"Cancel"})})]})}function ta(){const t=d(),[s,n]=h.useState([]),[a,i]=h.useState(!1),[o,l]=h.useState(!1),[c,u]=h.useState("GCash"),[m,g]=h.useState(!0),[p,x]=h.useState(!1),[f,w]=h.useState(""),[b,B]=h.useState(""),[y,v]=h.useState(!1),j=h.useRef(!1),[C,N]=h.useState(null),[Q,U]=h.useState(null),[k,F]=h.useState(""),S=h.useMemo(()=>s.reduce((e,A)=>A&&"number"==typeof A.price&&"number"==typeof A.quantity?e+A.price*A.quantity:e,0),[s]);h.useEffect(()=>{const e=localStorage.getItem("business_id");e&&R(`/api/business/public/${e}`).then(e=>{F(e.business_name)}).catch(()=>{B("Could not fetch store name.")})},[]),h.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("payment"),A=localStorage.getItem("business_id"),t=async(t,s)=>{const r=localStorage.getItem(t);if("success"===e&&r&&A)try{const e=JSON.parse(r);if(j.current)return;const A=`${s}_finalize_done_public`;if("1"===sessionStorage.getItem(A))return;j.current=!0,sessionStorage.setItem(A,"1");try{const A=new URL(window.location.origin+"/receipt");e.transaction_number&&A.searchParams.set("tn",e.transaction_number),e.transaction_id&&A.searchParams.set("tid",String(e.transaction_id)),A.searchParams.set("from","customer");window.opener&&!window.opener.closed&&window.opener?(window.opener.location.href=A.toString(),window.close()):window.location.href=A.toString()}catch(n){B("Failed to redirect to receipt")}finally{localStorage.removeItem(t);const e=new URL(window.location.href);e.searchParams.delete("payment"),window.history.replaceState({},"",e.toString())}}catch(a){localStorage.removeItem(t)}};t("pending_gcash_cart_public","GCash"),t("pending_maya_cart_public","Maya")},[]);return e.jsxs(z,{variant:"gradientBlue",pattern:"dots",floatingElements:!0,overlay:!0,children:[e.jsx(A.div,{className:"absolute -top-24 -left-24 w-[28rem] h-[28rem] rounded-full bg-gradient-to-br from-blue-400/15 to-cyan-400/10 blur-3xl",animate:{scale:[1,1.08,1],opacity:[.35,.5,.35]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),e.jsx(A.div,{className:"absolute bottom-0 -right-24 w-[30rem] h-[30rem] rounded-full bg-gradient-to-bl from-indigo-400/15 to-purple-400/10 blur-3xl",animate:{scale:[1,1.12,1],opacity:[.3,.45,.3]},transition:{duration:12,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:"min-h-screen pb-32 pt-4 sm:pt-6",children:[e.jsxs(A.div,{className:"px-4 space-y-4 max-w-screen-md mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"flex items-center justify-center p-2",children:e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(k||"")},title:"Copy store name",className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg px-2.5 py-1.5 shadow-sm hover:bg-blue-100 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2M8 16h8a2 2 0 002-2v-6m-10 8l-2 2m2-2l2 2"})}),e.jsx("span",{className:"font-mono text-xs sm:text-sm md:text-base font-bold tracking-wider truncate max-w-[50vw]",children:k||"Scan Store QR to Begin"})]})}),e.jsx(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:e.jsx(TA,{onScan:async e=>{const A=e?.[0]?.rawValue;if(A){i(!0),B(""),x(!0);try{const e=s.findIndex(e=>e.sku===A);if(-1!==e)return n(A=>{const t=[...A];return t[e]={...t[e],quantity:t[e].quantity+1},t}),void i(!1);const t=localStorage.getItem("business_id"),r=t?`?business_id=${encodeURIComponent(t)}`:"",a=await R(`/api/products/public/sku/${encodeURIComponent(A)}${r}`);if(!a||t&&Number(a.business_id)!==Number(t))throw new Error("Product not found in this store");{const e=Number(a.selling_price||0),t=a.product_name||`Product ${A}`;n(A=>[...A,{product_id:a.product_id,sku:a.sku,name:t,quantity:1,price:e}])}}catch(t){B("Product not found")}finally{x(!1),i(!1)}}},paused:a,onResume:()=>i(!1),className:"w-full",textMain:"text-blue-700"})}),e.jsx(r,{children:b&&e.jsx(A.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-red-50 border border-red-200 rounded-xl p-4 text-red-700 text-sm shadow-lg backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:b})]})})}),e.jsx(r,{children:p&&e.jsx(A.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-blue-700 text-sm text-center shadow-lg backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(A.div,{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),e.jsx("span",{children:"Loading product..."})]})})}),e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(Ke,{className:"w-full",variant:"glass",children:[e.jsx(Xn,{open:m,onToggle:()=>g(e=>!e),cart:s,onIncrement:e=>n(A=>A.map(A=>A.sku===e?{...A,quantity:A.quantity+1}:A)),onDecrement:e=>n(A=>A.map(A=>A.sku===e?{...A,quantity:Math.max(1,A.quantity-1)}:A)),onRemove:e=>n(A=>A.filter(A=>A.sku!==e))}),0===s.length&&e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Cart is empty"})]})})]}),e.jsx(ea,{total:S,onCancel:async()=>{const e=localStorage.getItem("customer_user_id");if(e)try{await R(`/api/cleanup/user/${e}`,{method:"DELETE"})}catch(A){}n([]),t("/")},onCheckout:()=>l(!0)}),s.length>0&&e.jsx(Zn,{isOpen:o,onClose:()=>l(!1),total:S,method:c,setMethod:u,cart:s,onPay:async e=>{const A=localStorage.getItem("business_id");if(!A)return B("No store selected. Please scan the store QR first."),void l(!1);if("Cash"===e){const r=localStorage.getItem("customer_user_id");l(!1);try{const t={items:s.map(e=>({product_id:e.product_id,sku:e.sku,quantity:e.quantity})),payment_type:e.toLowerCase(),money_received:S,business_id:Number(A),customer_user_id:r?Number(r):null,transaction_number:localStorage.getItem("provisionalTransactionNumber")},a=await R("/api/sales/public/checkout",{method:"POST",body:JSON.stringify(t)});n([]),a.qr_payload?(v(!0),w(""),N(a.qr_payload),U(a.transaction_id)):w("Failed to generate payment QR")}catch(t){w("Checkout failed")}return}if("GCash"!==e)if("Maya"!==e)try{const t=localStorage.getItem("customer_user_id"),r={items:s.map(e=>({product_id:e.product_id,sku:e.sku,quantity:e.quantity})),payment_type:e,money_received:S,business_id:Number(A),customer_user_id:t?Number(t):null,transaction_number:localStorage.getItem("provisionalTransactionNumber")},a=await R("/api/sales/public/checkout",{method:"POST",body:JSON.stringify(r)});if(n([]),a.qr_payload)v(!0),w(""),N(a.qr_payload),U(a.transaction_id);else{const e=new URL(window.location.origin+"/receipt");e.searchParams.set("tn",a.transaction_number),e.searchParams.set("tid",String(a.transaction_id)),e.searchParams.set("total",String(a.total||0)),window.location.href=e.toString()}}catch(t){w("Checkout failed")}finally{l(!1)}else try{const e=localStorage.getItem("customer_user_id"),A=localStorage.getItem("business_id"),t=localStorage.getItem("provisionalTransactionNumber")||`T-${String(A).padStart(2,"0")}-${(new Date).toISOString().replace(/[-:T.Z]/g,"").slice(0,14)}-${Math.floor(1e3+9e3*Math.random())}`,r={items:s.map(e=>({product_id:e.product_id,sku:e.sku,quantity:e.quantity})),payment_type:"maya",business_id:Number(A),customer_user_id:e?Number(e):null,transaction_number:t},a=await R("/api/sales/public/checkout",{method:"POST",body:JSON.stringify(r)}),i=window.location.origin+"/customer?payment=success",o=window.location.origin+"/customer?payment=cancel";localStorage.setItem("pending_maya_cart_public",JSON.stringify({transaction_id:a.transaction_id,transaction_number:a.transaction_number}));const{checkoutUrl:l}=await W({amount:Number(S||0),description:"Self-checkout Order",referenceNumber:a.transaction_number,cancelUrl:o,successUrl:i});n([]),window.open(l,"_blank")}catch(r){B("Failed to initialize online payment"),localStorage.removeItem("pending_maya_cart_public")}finally{l(!1)}else try{const e=localStorage.getItem("customer_user_id"),A=localStorage.getItem("business_id"),t=localStorage.getItem("provisionalTransactionNumber")||`T-${String(A).padStart(2,"0")}-${(new Date).toISOString().replace(/[-:T.Z]/g,"").slice(0,14)}-${Math.floor(1e3+9e3*Math.random())}`,r={items:s.map(e=>({product_id:e.product_id,sku:e.sku,quantity:e.quantity})),payment_type:"gcash",business_id:Number(A),customer_user_id:e?Number(e):null,transaction_number:t},a=await R("/api/sales/public/checkout",{method:"POST",body:JSON.stringify(r)}),i=window.location.origin+"/customer?payment=success",o=window.location.origin+"/customer?payment=cancel";localStorage.setItem("pending_gcash_cart_public",JSON.stringify({transaction_id:a.transaction_id,transaction_number:a.transaction_number}));const{checkoutUrl:l}=await G({amount:Number(S||0),description:"Self-checkout Order",referenceNumber:a.transaction_number,cancelUrl:o,successUrl:i});n([]),window.open(l,"_blank")}catch(r){B("Failed to initialize online payment"),localStorage.removeItem("pending_gcash_cart_public")}finally{l(!1)}}}),e.jsx(Aa,{isOpen:y,onClose:()=>v(!1),onTransactionComplete:e=>{e&&(v(!1),window.location.href=`/receipt?tn=${e}&from=customer`)},qrPayload:C,transactionId:Q}),e.jsx(r,{children:f&&e.jsx(A.div,{className:"px-4 mt-4 max-w-screen-md mx-auto",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-green-700 text-sm shadow-lg backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:f})]})})})})]})]})}function sa(){return e.jsx(ta,{})}function ra(){const A=d();return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Select Role"}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx("button",{onClick:()=>A("/cashier-pos"),className:"bg-blue-600 text-white font-semibold px-10 py-4 rounded-xl shadow-lg text-xl hover:bg-blue-700 transition",children:"Cashier"}),e.jsx("button",{onClick:()=>A("/login"),className:"bg-gray-800 text-white font-semibold px-10 py-4 rounded-xl shadow-lg text-xl hover:bg-gray-900 transition",children:"Admin"})]})]})}function na(){return e.jsx(ta,{})}function aa(){const[t,s]=h.useState(!1),[r,n]=h.useState(!1),[a,i]=h.useState(null),o=d(),l={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}};return e.jsxs(z,{variant:"gradientBlue",pattern:"dots",floatingElements:!0,overlay:!0,children:[e.jsx(A.div,{className:"absolute -top-24 -left-24 w-[28rem] h-[28rem] rounded-full bg-gradient-to-br from-blue-400/15 to-cyan-400/10 blur-3xl",animate:{scale:[1,1.08,1],opacity:[.35,.5,.35]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),e.jsx(A.div,{className:"absolute bottom-0 -right-24 w-[30rem] h-[30rem] rounded-full bg-gradient-to-bl from-indigo-400/15 to-purple-400/10 blur-3xl",animate:{scale:[1,1.12,1],opacity:[.3,.45,.3]},transition:{duration:12,repeat:1/0,ease:"easeInOut"}}),e.jsxs(A.div,{className:"min-h-screen flex flex-col items-center justify-center p-4 sm:p-6 pt-6 sm:pt-8 relative z-10",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},initial:"hidden",animate:"visible",children:[e.jsx(A.div,{className:"absolute top-4 sm:top-6 left-4 sm:left-6 z-20",variants:l,children:e.jsxs(g,{to:"/",className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-full bg-white/80 backdrop-blur-md border border-white/40 hover:bg-white/90 transition-all duration-300 shadow-lg hover:shadow-xl group",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"font-semibold text-gray-700 hidden sm:inline",children:"Back Home"})]})}),e.jsxs("div",{className:"w-full max-w-4xl flex flex-col gap-6 sm:gap-8",children:[e.jsxs(A.div,{className:"text-center",variants:l,children:[e.jsx(A.div,{className:"inline-flex items-center justify-center gap-3 mb-6",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:180},children:e.jsxs(A.div,{className:"p-4 bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-700 rounded-2xl shadow-2xl relative group",animate:{boxShadow:["0 10px 30px rgba(59, 130, 246, 0.3)","0 20px 40px rgba(59, 130, 246, 0.4)","0 10px 30px rgba(59, 130, 246, 0.3)"]},transition:{duration:2.5,repeat:1/0},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("svg",{className:"w-8 h-8 sm:w-9 sm:h-9 text-white relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})]})}),e.jsxs(A.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-3",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Welcome to the Store !!!"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600 max-w-xl mx-auto leading-relaxed",children:"Scan the store's QR code to access the self-checkout experience"})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2 items-center",children:[e.jsx(A.div,{className:"flex items-center justify-center relative w-full",variants:{hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.4,ease:"easeOut"}}},children:e.jsxs("div",{className:"w-full aspect-square relative max-w-sm lg:max-w-md",children:[e.jsx(A.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-500/20 to-indigo-600/20 rounded-2xl sm:rounded-lg blur-2xl -z-10",animate:{scale:[1,1.1,1],opacity:[.4,.6,.4]},transition:{duration:4,repeat:1/0}}),e.jsxs("div",{className:"relative h-full rounded-2xl sm:rounded-3xl overflow-hidden border-3 sm:border-4 border-white/60 shadow-lg sm:shadow-2xl bg-white/10 backdrop-blur-sm",children:[r&&!a&&e.jsx(A.div,{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/40 backdrop-blur-md",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(A.div,{className:"bg-white/95 backdrop-blur-md rounded-xl sm:rounded-2xl p-6 sm:p-8 shadow-xl sm:shadow-2xl border border-white/20 mx-4",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200},children:e.jsxs("div",{className:"flex flex-col items-center gap-3 sm:gap-4",children:[e.jsx(A.div,{className:"w-12 h-12 sm:w-14 sm:h-14 border-3 sm:border-4 border-blue-500 border-t-indigo-600 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-900 font-semibold text-sm sm:text-base",children:"Recognizing store..."}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Please wait"})]})]})})}),a&&e.jsx(A.div,{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/40 backdrop-blur-md",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(A.div,{className:"bg-white/95 backdrop-blur-md rounded-xl sm:rounded-2xl p-6 sm:p-8 shadow-xl sm:shadow-2xl border border-white/20 mx-4",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200},children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(A.div,{className:"w-12 h-12 sm:w-14 sm:h-14 flex items-center justify-center bg-red-100 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-900 font-semibold text-sm sm:text-base",children:"Invalid QR Code"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:a})]}),e.jsx(q,{label:"Try Again",variant:"primary",onClick:()=>{i(null),s(!1),n(!1)}})]})})}),e.jsx(TA,{onScan:async e=>{const A=e?.[0]?.rawValue;if(A){s(!0),n(!0),i(null);try{const e=new URL(A),r=e.searchParams.get("business_id");if(e.pathname.endsWith("/enter-store")&&r){localStorage.setItem("business_id",String(r)),localStorage.removeItem("provisionalTransactionNumber"),localStorage.removeItem("customerCart");const e=(new Date).toISOString().replace(/[-:T.Z]/g,"").slice(0,14),A=Math.floor(1e3+9e3*Math.random()),s=`T-${String(r).padStart(2,"0")}-${e}-${A}`;localStorage.setItem("provisionalTransactionNumber",s);try{const e=await fetch("/api/sales/public/enter-store",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({business_id:r})});if(e.ok){const A=await e.json();A.user_id&&(localStorage.setItem("customer_user_id",String(A.user_id)),console.log("Customer user created:",A.user_id)),A.username&&localStorage.setItem("customer_username",A.username)}else{const A=await e.json().catch(()=>({error:"Failed to create customer"}));console.error("Failed to create customer user:",A)}}catch(t){console.error("Error creating customer user:",t)}setTimeout(()=>{o("/customer")},300)}else i("Invalid QR Code. Please scan a valid store QR code."),n(!1),s(!1)}catch(r){i("Invalid QR Code. Please scan a valid store QR code."),alert("Invalid QR Code. Please scan a valid store QR code."),n(!1),s(!1)}}},paused:t,onResume:()=>{s(!1),n(!1),i(null)},className:"w-full h-full"})]}),e.jsx("div",{className:"absolute -top-1.5 -left-1.5 sm:-top-2 sm:-left-2 w-5 h-5 sm:w-8 sm:h-8 border-2 border-white/40 rounded-tl-lg sm:rounded-tl-2xl"}),e.jsx("div",{className:"absolute -top-1.5 -right-1.5 sm:-top-2 sm:-right-2 w-5 h-5 sm:w-8 sm:h-8 border-2 border-white/40 rounded-tr-lg sm:rounded-tr-2xl"}),e.jsx("div",{className:"absolute -bottom-1.5 -left-1.5 sm:-bottom-2 sm:-left-2 w-5 h-5 sm:w-8 sm:h-8 border-2 border-white/40 rounded-bl-lg sm:rounded-bl-2xl"}),e.jsx("div",{className:"absolute -bottom-1.5 -right-1.5 sm:-bottom-2 sm:-right-2 w-5 h-5 sm:w-8 sm:h-8 border-2 border-white/40 rounded-br-lg sm:rounded-br-2xl"}),e.jsx("div",{className:"absolute -top-2 -left-2 w-8 h-8 border-2 border-white/40 rounded-tl-2xl"}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 border-2 border-white/40 rounded-tr-2xl"}),e.jsx("div",{className:"absolute -bottom-2 -left-2 w-8 h-8 border-2 border-white/40 rounded-bl-2xl"}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 border-2 border-white/40 rounded-br-2xl"})]})}),e.jsx(A.div,{className:"flex flex-col gap-4",variants:l,children:e.jsxs(A.div,{className:"bg-white/80 backdrop-blur-xl border border-white/60 rounded-lg shadow-2xl p-6 sm:p-8 hover:shadow-3xl transition-all duration-300 group overflow-hidden",whileTap:{scale:.98},children:[e.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/30 to-transparent"}),e.jsxs("div",{className:"relative z-10 space-y-5",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex items-center justify-center h-12 w-12 rounded-2xl bg-blue-600 text-white font-bold shadow-lg",children:"1"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Point Your Camera"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Position your device to scan the QR code displayed in the store"})]})]}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex items-center justify-center h-12 w-12 rounded-2xl bg-blue-600 text-white font-bold shadow-lg",children:"2"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Scan the Code"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow camera access and keep the QR code in frame"})]})]}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex items-center justify-center h-12 w-12 rounded-2xl bg-blue-600 to-pink-600 text-white font-bold shadow-lg",children:"3"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Start Shopping"}),e.jsx("p",{className:"text-sm text-gray-600",children:"You'll be connected to the store's self-checkout system"})]})]})]})]})})]}),e.jsx(A.div,{className:"mt-4 sm:mt-8",variants:l,children:e.jsx("div",{className:"bg-gradient-to-r from-blue-50/80 via-indigo-50/60 to-purple-50/80 backdrop-blur-md rounded-2xl border border-blue-200/40 p-6 sm:p-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(A.div,{className:"flex items-center justify-center h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white shadow-lg",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Need Help?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Make sure your device has camera permissions enabled. The QR code is typically displayed at the store entrance or on staff uniforms."})]})]})})})]})]})]})}function ia(){const A=d(),[t,s]=h.useState(!1),[r,n]=h.useState("");return e.jsx(z,{variant:"gradientBlue",pattern:"dots",overlay:!0,floatingElements:!0,children:e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"pt-20 px-4",children:e.jsx(re,{})}),e.jsxs("div",{className:"px-4 mt-6 grid gap-4",children:[e.jsxs(Ke,{className:"p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:"Scan Store QR"}),e.jsx("div",{className:"text-blue-700 mt-1",children:"Point your camera at the store QR to start self-checkout."})]}),r?e.jsxs(Ke,{className:"p-4 border-red-200",children:[e.jsx("div",{className:"text-red-700",children:r}),e.jsx("div",{className:"mt-2",children:e.jsx(q,{label:"Try again",variant:"secondary",onClick:()=>{n(""),s(!1)}})})]}):null,e.jsx("div",{className:"h-[60vh]",children:e.jsx(TA,{onScan:async e=>{const t=e?.[0]?.rawValue;if(!t)return;s(!0),n("");const r=function(e){try{const A=new URL(e),t=A.searchParams.get("business_id")||A.searchParams.get("b")||A.searchParams.get("store");if(t)return t}catch(A){}try{const A=JSON.parse(e);if(A&&(A.business_id||A.businessId||A.storeId))return A.business_id||A.businessId||A.storeId}catch(A){}return e}(t);if(!r)return n("Invalid store QR"),void s(!1);localStorage.setItem("business_id",String(r)),localStorage.removeItem("provisionalTransactionNumber"),localStorage.removeItem("customerCart");const a=(new Date).toISOString().replace(/[-:T.Z]/g,"").slice(0,14),i=Math.floor(1e3+9e3*Math.random()),o=`T-${String(r).padStart(2,"0")}-${a}-${i}`;localStorage.setItem("provisionalTransactionNumber",o);try{const e=await fetch("/api/sales/public/enter-store",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({business_id:r})});if(e.ok){const A=await e.json();A.user_id&&(localStorage.setItem("customer_user_id",String(A.user_id)),console.log("Customer user created:",A.user_id)),A.username&&localStorage.setItem("customer_username",A.username)}else{const A=await e.json().catch(()=>({error:"Failed to create customer"}));console.error("Failed to create customer user:",A)}}catch(l){console.error("Error creating customer user:",l)}A("/customer")},paused:t,onResume:()=>s(!1),className:"w-full h-full"})})]})]})})}function oa({isOpen:A,onClose:t,onSubmit:s,title:r="Add Cashier",submitButtonText:n="Save",initialData:a={name:"",password:"",number:"",email:"",status:"ACTIVE"},isLoading:i=!1}){const[o,l]=h.useState(a),[c,d]=h.useState({}),[u,m]=h.useState({}),g=(e,A)=>{const t={...c};switch(e){case"name":A.trim()?A.trim().length<2?t.name="Name must be at least 2 characters":delete t.name:t.name="Name is required";break;case"password":A?A.length<6?t.password="Password must be at least 6 characters":delete t.password:t.password="Password is required";break;case"number":A.trim()?A.trim().length<7?t.number="Phone number must be at least 7 digits":delete t.number:t.number="Phone number is required";break;case"email":A.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.trim())?delete t.email:t.email="Please enter a valid email":t.email="Email is required"}d(t)},p=e=>{const{name:A,value:t}=e.target;l(e=>({...e,[A]:t})),u[A]&&g(A,t)},x=e=>{const{name:A,value:t}=e.target;m(e=>({...e,[A]:!0})),g(A,t)},f=async e=>{e.preventDefault(),Object.keys(o).forEach(e=>{"status"!==e&&g(e,o[e])});Object.keys(c).length>0||(await s(o),w())},w=()=>{l(a),d({}),m({}),t()};if(!A)return null;const b=0===Object.keys(c).length&&o.name.trim()&&o.password&&o.number.trim()&&o.email.trim(),B=e.jsxs(e.Fragment,{children:[e.jsx(q,{label:"Cancel",variant:"secondary",onClick:w,type:"button",disabled:i}),e.jsx(q,{label:n,variant:"primary",type:"submit",onClick:f,disabled:!b||i})]});return e.jsx(ve,{isOpen:A,onClose:w,title:r,subtitle:"Please fill in all required fields",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 10H9m6 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),footer:B,disabled:i,size:"md",contentClassName:"space-y-4",children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx(NA,{label:"Full Name",name:"name",value:o.name,onChange:p,onBlur:x,placeholder:"Enter cashier name",error:u.name&&c.name?c.name:null,required:!0}),e.jsx(NA,{label:"Password",name:"password",type:"password",value:o.password,onChange:p,onBlur:x,placeholder:"Min. 6 characters",error:u.password&&c.password?c.password:null,required:!0}),e.jsx(NA,{label:"Phone Number",name:"number",value:o.number,onChange:p,onBlur:x,placeholder:"Enter phone number",error:u.number&&c.number?c.number:null,required:!0}),e.jsx(NA,{label:"Email Address",name:"email",type:"email",value:o.email,onChange:p,onBlur:x,placeholder:"Enter email address",error:u.email&&c.email?c.email:null,required:!0}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"status",value:o.status,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]})]})})}const la=[];function ca(){const[A,t]=h.useState(la),[s,r]=h.useState(!1),[n,a]=h.useState(""),[i,o]=h.useState(""),[l,c]=h.useState("ALL"),[d,u]=h.useState(!1),[m,g]=h.useState(!1),[x,f]=h.useState(null),[w,b]=h.useState(!1),[B,y]=h.useState({name:"",password:"",number:"",email:"",status:"ACTIVE"}),[v,j]=h.useState(!1);h.useEffect(()=>{(async()=>{try{r(!0),a("");const e=sessionStorage.getItem("auth_token"),A=(await R("/api/business/cashiers",{headers:V(e)})||[]).map(e=>({name:e.username||"-",id:e.user_id||"-",number:e.contact_number||"-",email:e.email||"-",status:"ACTIVE"}));t(A)}catch(e){a(e.message||"Failed to load cashiers")}finally{r(!1)}})()},[]);const C=p.useMemo(()=>{const e=(i||"").toLowerCase();return A.filter(A=>{const t=A.name.toLowerCase().includes(e)||String(A.id).toLowerCase().includes(e)||(A.email||"").toLowerCase().includes(e)||(A.number||"").toLowerCase().includes(e),s="ALL"===l||A.status===l;return t&&s})},[A,i,l]),N=e=>{f(e),y({...A[e]}),g(!0)},Q=e=>{window.confirm("Are you sure you want to delete this cashier?")&&t(A.filter((A,t)=>t!==e))},U=e.jsxs("div",{className:"flex gap-2 pr-10 sm:pr-2 w-full sm:w-auto  justify-end",children:[e.jsx(q,{className:"bg-blue-600 text-white font-semibold !p-1.5 sm:!px-4 sm:!py-1.5 rounded-lg shadow hover:bg-blue-700 transition",onClick:()=>{y({name:"",password:"",number:"",email:"",status:"ACTIVE"}),f(null),u(!0)},children:e.jsxs("div",{className:"flex items-center sm:gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add Cashier"})]})}),e.jsx(q,{onClick:()=>{const e=[["Name","Cashier ID","Number","Email","Status"],...C.map(e=>[e.name,e.id,e.number,e.email,e.status])].map(e=>e.join(",")).join("\n"),A=new Blob([e],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(A),t.download="cashiers.csv",t.click()},size:"sm",variant:"secondary",className:"w-auto shrink-0 !p-1 sm:!px-4 sm:!py-1.5",children:e.jsxs("div",{className:"flex items-center sm:gap-2",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]})})]});return e.jsxs(Ue,{title:"CASHIERS",sidebar:e.jsx(fA,{}),isSidebarOpen:v,headerActions:U,setSidebarOpen:j,className:"min-h-screen bg-white",children:[e.jsx("div",{className:"flex-1 bg-transparent overflow-hidden p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-full max-w-5xl mb-3 flex flex-col sm:flex-row gap-2.5 sm:items-center",children:e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{value:i,onChange:e=>o(e.target.value),className:"w-full sm:w-72 pl-9 pr-3 py-1.5 rounded-xl border border-gray-200 bg-white/80 backdrop-blur-sm text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search cashier by name, ID, email or number"})]}),e.jsxs("select",{value:l,onChange:e=>c(e.target.value),className:"rounded-xl border border-gray-200 bg-white/80 backdrop-blur-sm px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"ALL",children:"All"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]})}),n&&e.jsx("div",{className:"w-full max-w-5xl mb-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded-xl px-4 py-3",children:n}),e.jsxs("div",{className:"w-full max-w-5xl bg-white rounded-2xl shadow-lg border border-blue-100 p-0",children:[e.jsx("div",{className:"w-full overflow-x-auto hidden [@media (orientation: landscape)]:block md:block",children:e.jsxs("table",{className:"w-full min-w-0 md:min-w-[720px] text-left rounded-xl overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-50/80 to-indigo-50/80 text-gray-700 font-semibold text-xs uppercase tracking-wider border-b border-blue-100",children:[e.jsx("th",{className:"py-2 px-3 sm:px-5",children:"Name"}),e.jsx("th",{className:"py-2 px-3 sm:px-5",children:"Cashier ID"}),e.jsx("th",{className:"py-2 px-3 sm:px-5",children:"Number"}),e.jsx("th",{className:"py-2 px-3 sm:px-5",children:"Email"}),e.jsx("th",{className:"py-2 px-3 sm:px-5",children:"Status"}),e.jsx("th",{className:"py-2 px-3 sm:px-5 text-center",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[s&&Array.from({length:5}).map((A,t)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"py-3 px-3 sm:px-5",children:e.jsx("div",{className:"h-3 w-28 bg-gray-200 rounded"})}),e.jsx("td",{className:"py-3 px-3 sm:px-5",children:e.jsx("div",{className:"h-3 w-16 bg-gray-200 rounded"})}),e.jsx("td",{className:"py-3 px-3 sm:px-5",children:e.jsx("div",{className:"h-3 w-24 bg-gray-200 rounded"})}),e.jsx("td",{className:"py-3 px-3 sm:px-5",children:e.jsx("div",{className:"h-3 w-40 bg-gray-200 rounded"})}),e.jsx("td",{className:"py-3 px-3 sm:px-5",children:e.jsx("div",{className:"h-3 w-16 bg-gray-200 rounded"})}),e.jsx("td",{className:"py-3 px-3 sm:px-5",children:e.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded"})})]},`skeleton-${t}`)),!s&&0===C.length&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-100 flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-7 h-7 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h18M5 7V5a2 2 0 012-2h10a2 2 0 012 2v2M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7"})})}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"No cashiers found"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Try changing filters or add a new cashier"})]})})}),!s&&C.map((A,t)=>e.jsxs("tr",{className:"hover:bg-blue-50/40 transition-colors",children:[e.jsx("td",{className:"py-2.5 px-3 sm:px-5 font-medium text-gray-900",children:A.name}),e.jsx("td",{className:"py-2.5 px-3 sm:px-5 text-gray-700",children:A.id}),e.jsx("td",{className:"py-2.5 px-3 sm:px-5 text-gray-700",children:A.number}),e.jsx("td",{className:"py-2.5 px-3 sm:px-5 text-gray-700",children:A.email}),e.jsx("td",{className:"py-2.5 px-3 sm:px-5",children:e.jsx("span",{className:"ACTIVE"===A.status?"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700 border border-green-200":"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-red-100 text-red-700 border border-red-200",children:A.status})}),e.jsx("td",{className:"py-2.5 px-3 sm:px-5",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(q,{variant:"icon",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-full p-1.5 border border-blue-200",onClick:()=>N(t),title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 112.828 2.828L11.828 15.828a4 4 0 01-1.414.828l-4.243 1.414 1.414-4.243a4 4 0 01.828-1.414z"})})}),e.jsx(q,{variant:"icon",className:"bg-red-50 hover:bg-red-100 text-red-700 rounded-full p-1.5 border border-red-200",onClick:()=>Q(t),title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},t))]})]})}),e.jsxs("div",{className:"w-full sm:hidden px-3 py-3 space-y-3",children:[s&&Array.from({length:4}).map((A,t)=>e.jsxs("div",{className:"animate-pulse bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 w-24 bg-gray-200 rounded mb-1"}),e.jsx("div",{className:"h-3 w-40 bg-gray-200 rounded"})]},`card-skel-${t}`)),!s&&0===C.length&&e.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h18M5 7V5a2 2 0 012-2h10a2 2 0 012 2v2M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7"})})}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"No cashiers found"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Try changing filters or add a new cashier"})]}),!s&&C.map((A,t)=>e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:A.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",A.id]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"mb-1",children:e.jsx("span",{className:"ACTIVE"===A.status?"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700 border border-green-200":"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-red-100 text-red-700 border border-red-200",children:A.status})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{variant:"icon",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-full p-1.5 border border-blue-200",onClick:()=>N(t),title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 112.828 2.828L11.828 15.828a4 4 0 01-1.414.828l-4.243 1.414 1.414-4.243a4 4 0 01.828-1.414z"})})}),e.jsx(q,{variant:"icon",className:"bg-red-50 hover:bg-red-100 text-red-700 rounded-full p-1.5 border border-red-200",onClick:()=>Q(t),title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-700",children:[e.jsxs("div",{className:"truncate",children:[e.jsx("strong",{children:"Number:"})," ",A.number]}),e.jsxs("div",{className:"truncate",children:[e.jsx("strong",{children:"Email:"})," ",A.email]})]})]},`card-${t}`))]})]}),e.jsx("div",{className:"h-4"})]})}),e.jsx(oa,{isOpen:d,onClose:()=>u(!1),onSubmit:async e=>{try{b(!0),a("");const A=sessionStorage.getItem("auth_token");await R("/api/business/cashiers",{method:"POST",headers:{"Content-Type":"application/json",...V(A)},body:JSON.stringify({username:(e.name||"").trim(),password:(e.password||"").trim(),contact_number:(e.number||"").trim()||null,email:(e.email||"").trim()||null})});const s=(await R("/api/business/cashiers",{headers:V(A)})||[]).map(e=>({name:e.username||"-",id:e.user_id||"-",number:e.contact_number||"-",email:e.email||"-",status:"ACTIVE"}));t(s),u(!1)}catch(A){a(A.message||"Failed to create cashier")}finally{b(!1)}},title:"Add New Cashier",submitButtonText:"Create Cashier",isLoading:w}),e.jsx(oa,{isOpen:m,onClose:()=>g(!1),onSubmit:async e=>{try{b(!0);const s=[...A];s[x]=e,t(s),g(!1),f(null)}catch(s){a(s.message||"Failed to update cashier")}finally{b(!1)}},title:"Edit Cashier",submitButtonText:"Update Cashier",initialData:B,isLoading:w})]})}const da=()=>{const[A,t]=h.useState([]),[s,r]=h.useState(""),[n,a]=h.useState(""),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState("all"),[m,g]=h.useState("desc"),[p,x]=h.useState(!1),[f,w]=h.useState(!1),b=h.useRef(null),B=async()=>{try{o(!0),r("");const e=sessionStorage.getItem("auth_token"),A=(await R("/api/logs",{headers:V(e)})||[]).map(e=>({id:e.log_id,userId:e.user_id,username:e.username||"",action:e.action||`Action by ${e.username||e.user_id}`,time:e.date_time?new Date(e.date_time).toLocaleString():"Invalid date",dateTime:e.date_time,role:("business_owner"===e.role?"admin":e.role||"").toLowerCase()}));t(A)}catch(e){r("Failed to load logs")}finally{o(!1)}};h.useEffect(()=>{B()},[]),h.useEffect(()=>{const e=e=>{b.current&&!b.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const y=h.useMemo(()=>{let e=A;if("all"!==d&&(e=e.filter(e=>e.role===d)),n){const A=n.toLowerCase();e=e.filter(e=>(e.action||"").toLowerCase().includes(A)||(e.username||"").toLowerCase().includes(A))}return e.sort((e,A)=>{const t=new Date(e.dateTime),s=new Date(A.dateTime);return"asc"===m?t-s:s-t}),e},[A,d,n,m]),v=()=>{try{const e=[["User ID","Username","Role","Action","Time"].join(","),...y.map(e=>[e.userId||e.id||"",`"${(e.username||"").replace(/"/g,'""')}"`,e.role||"",`"${(e.action||"").replace(/"/g,'""')}"`,`"${(e.time||"").replace(/"/g,'""')}"`].join(","))].join("\n"),A=new Blob([e],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),s=URL.createObjectURL(A);t.setAttribute("href",s),t.setAttribute("download",`logs_export_${(new Date).toISOString().split("T")[0]}.csv`),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){r("Failed to export logs as CSV"),console.error("CSV export error:",e)}},j=[{value:"all",label:"All Roles"},{value:"cashier",label:"Cashier"},{value:"admin",label:"Admin"},{value:"user",label:"User"}],C=j.find(e=>e.value===d);return y.length,e.jsx(Ue,{title:"LOGS",sidebar:e.jsx(fA,{}),isSidebarOpen:f,setSidebarOpen:w,className:"h-screen overflow-hidden",children:e.jsxs("div",{className:"flex-1 bg-transparent overflow-hidden p-4 flex flex-col",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-xl w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search logs...",value:n,onChange:e=>a(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-gray-400"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative",ref:b,children:[e.jsxs("button",{onClick:()=>x(!p),className:"w-full sm:w-auto pl-4 pr-10 py-3 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:C.icon}),e.jsx("span",{children:C.label})]}),e.jsx("svg",{className:"w-4 h-4 transition-transform duration-200 "+(p?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-xl shadow-lg max-h-60 overflow-auto",children:j.map(A=>e.jsxs("button",{onClick:()=>{u(A.value),x(!1)},className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-50 flex items-center gap-2 transition-colors duration-150 "+(d===A.value?"bg-blue-50 text-blue-600":"text-gray-700"),children:[e.jsx("span",{children:A.icon}),e.jsx("span",{children:A.label})]},A.value))})]}),e.jsxs(q,{onClick:()=>g("asc"===m?"desc":"asc"),variant:"secondary",size:"md",className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),"Sort (","asc"===m?"Oldest":"Newest",")"]}),e.jsxs(q,{onClick:v,variant:"secondary",size:"md",className:"flex items-center gap-2",disabled:0===y.length||i,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export as CSV"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("table",{className:"min-w-full bg-white/80 backdrop-blur-md rounded-xl overflow-hidden hidden sm:table",children:[e.jsx("thead",{className:"bg-gray-100/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200/50",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center py-8 text-gray-500",children:"Loading logs..."})}):0===y.length?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center py-8 text-gray-500",children:"No logs found."})}):y.map(A=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.username}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",A.userId]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("admin"===A.role||"business_owner"===A.role?"bg-purple-100 text-purple-800":"cashier"===A.role?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:A.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:A.action}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.time})]},A.id))})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto sm:hidden space-y-3",children:i?Array.from({length:5}).map((A,t)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-md rounded-xl p-4 border border-gray-200/50 animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},t)):0===y.length?e.jsx("div",{className:"text-center py-8 text-gray-500 bg-white/80 backdrop-blur-md rounded-xl",children:"No logs found."}):y.map(A=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-md rounded-xl p-4 border border-gray-200/50 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:A.username}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",A.userId]})]}),e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full capitalize "+("admin"===A.role||"business_owner"===A.role?"bg-purple-100 text-purple-800":"cashier"===A.role?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:A.role})]}),e.jsx("p",{className:"text-sm text-gray-800 mb-2",children:A.action}),e.jsx("div",{className:"text-xs text-gray-500 text-right border-t border-gray-200/50 pt-2 mt-2",children:A.time})]},A.id))}),s&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-3 flex items-start gap-2 mt-4",children:[e.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-sm font-medium text-red-700",children:(()=>{try{const e=JSON.parse(s);return e.error||e.message||s}catch{return s}})()})]})]})})},ua=A=>e.jsx("svg",{className:`w-5 h-5 ${A.className||""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),ha=A=>e.jsx("svg",{className:`w-5 h-5 ${A.className||""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ma=A=>e.jsx("svg",{className:`w-5 h-5 ${A.className||""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),ga=A=>e.jsx("svg",{className:`w-5 h-5 ${A.className||""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),pa=A=>e.jsx("svg",{className:`w-5 h-5 ${A.className||""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),xa=A=>e.jsxs("svg",{className:`w-5 h-5 ${A.className||""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),fa=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),wa=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),ba=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Ba=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h4a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),ya=e=>{const A=e?.business?.business_id||e?.user?.businessId||JSON.parse(sessionStorage.getItem("user")||"{}")?.businessId||JSON.parse(localStorage.getItem("user")||"{}")?.businessId;if(!A)return{url:"N/A",qrSrc:null,businessId:null};const t=new URL(window.location.origin+"/enter-store");t.searchParams.set("business_id",String(A));const s=t.toString(),r=encodeURIComponent(s);return{url:s,qrSrc:`https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=${r}&qzone=2&format=png&_=${Date.now()}`,downloadSrc:`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${r}&qzone=2&format=png&_=${Date.now()}`,businessId:A}},va=()=>{const[A,t]=h.useState(null),[s,r]=h.useState(!0),[n,a]=h.useState(""),[i,o]=h.useState(!1),[l,c]=h.useState(!1),d=h.useRef(!1);h.useEffect(()=>{d.current||(d.current=!0,u())},[]);const u=async()=>{try{r(!0),a("");const e=sessionStorage.getItem("auth_token")||localStorage.getItem("auth_token");if(!e)throw new Error("No authentication token found");console.log("Fetching profile data from /auth/profile");const A=await R("/auth/profile",{headers:{Authorization:`Bearer ${e}`}});console.log("Profile data received:",A),A&&(A.user||A.business)?t(A):t({user:{first_name:A?.first_name||"",last_name:A?.last_name||"",email:A?.email||"",role:A?.role||"",...A},business:A?.business||{}})}catch(e){console.error("Failed to fetch profile data:",e),a("Failed to load profile information. Please check your connection and try again.")}finally{r(!1)}},m=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",g=e.jsxs("div",{className:"flex items-center justify-end gap-2 sm:gap-3",children:[e.jsx(q,{onClick:u,variant:"secondary",size:"sm",icon:e.jsx(fa,{}),iconPosition:"left",className:"whitespace-nowrap [&>span]:hidden sm:[&>span]:inline",children:e.jsx("span",{children:"Refresh"})}),e.jsx(q,{variant:"primary",size:"sm",icon:e.jsx(wa,{}),iconPosition:"left",onClick:()=>c(!0),className:"whitespace-nowrap [&>span]:hidden sm:[&>span]:inline",children:e.jsx("span",{children:"Edit Profile"})})]});return s?e.jsx(Ue,{title:"PROFILE",subtitle:"Store and admin credentials",sidebar:e.jsx(fA,{}),isSidebarOpen:i,setSidebarOpen:o,className:"bg-gray-50",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Y,{})})}):e.jsxs(Ue,{title:"PROFILE",subtitle:"",sidebar:e.jsx(fA,{}),headerActions:g,isSidebarOpen:i,setSidebarOpen:o,className:"bg-gray-50",children:[e.jsx(QA,{isOpen:l,onClose:()=>c(!1),userData:A?.user}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[n&&e.jsx(Ke,{className:"bg-gradient-to-br from-red-50 to-orange-50 border-red-200/50",children:e.jsxs("div",{className:"flex items-start gap-4 p-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-900 mb-1",children:"Error Loading Profile"}),e.jsx("p",{className:"text-sm text-red-700",children:n})]})]})}),!s&&!n&&!A&&e.jsx(Ke,{className:"bg-gradient-to-br from-gray-50 to-blue-50/30 border-gray-200/50",children:e.jsxs("div",{className:"p-8 md:p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-200 to-gray-300 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx("svg",{className:"w-10 h-10 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Profile Data Available"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Unable to load your profile information. Please try refreshing or check your connection."}),e.jsx(q,{onClick:u,variant:"primary",size:"md",icon:e.jsx(fa,{}),iconPosition:"left",children:"Try Again"})]})}),A&&e.jsxs(p.Fragment,{children:[e.jsx(Ke,{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 border-blue-200/50 overflow-hidden",children:e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-2xl flex items-center justify-center text-3xl md:text-4xl font-bold shadow-lg ring-4 ring-white/50",children:A?.user?.first_name?.charAt(0)?.toUpperCase()||"A"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 rounded-full border-4 border-white flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:A?.business?.business_name||"Admin User"}),e.jsxs("p",{className:"text-gray-600 mb-4 flex items-center gap-2",children:[e.jsx(ha,{}),e.jsx("span",{className:"truncate",children:A?.user?.email||"N/A"})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-semibold bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-800 border border-blue-200",children:[e.jsx("div",{className:"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(pa,{className:"w-3 h-3 text-blue-600"})}),e.jsxs("span",{children:[A?.user?.role?.replace("_"," ").toUpperCase()||"ADMIN",A?.business?.business_type&&` â€¢ ${A.business.business_type}`]})]})})]})]})})}),e.jsx(Ke,{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl flex items-center justify-center mr-3",children:e.jsx(ua,{})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Account Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Personal details and credentials"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"First Name"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ua,{className:"text-blue-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:A?.user?.first_name||"N/A"})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last Name"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ua,{className:"text-blue-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:A?.user?.last_name||"N/A"})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Email Address"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ha,{className:"text-blue-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1 truncate",children:A?.user?.email||"N/A"})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Role"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-blue-100 text-blue-800 border border-blue-200 capitalize",children:A?.user?.role?.replace("_"," ")||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Contact Number"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ma,{className:"text-green-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:A?.user?.contact_number||"N/A"})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Account Created"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ga,{className:"text-purple-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:m(A?.user?.created_at)})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last Updated"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ga,{className:"text-orange-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:m(A?.user?.updated_at)})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-xl flex items-center justify-center",children:e.jsx(Ba,{})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Store Entry QR Code"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Share this QR code for customer self-checkout"})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50/30 rounded-2xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl blur-xl opacity-20"}),e.jsx("img",{src:ya(A).qrSrc,alt:"Store Entry QR",className:"relative w-[260px] h-[260px] border-4 border-white rounded-2xl bg-white shadow-xl"})]}),e.jsxs("div",{className:"flex-1 space-y-4 min-w-0",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"QR Code URL"}),e.jsx("div",{className:"bg-white px-4 py-3 rounded-xl border border-gray-200 break-all text-sm text-gray-700 font-mono",children:ya(A).url})]}),e.jsx(q,{variant:"primary",size:"md",icon:e.jsx(ba,{}),iconPosition:"left",onClick:async()=>{const{downloadSrc:e,businessId:t}=ya(A);if(e)try{const A=await fetch(e);if(!A.ok)throw new Error("Failed to fetch QR code image");const s=await A.blob(),r=window.URL.createObjectURL(s),n=document.createElement("a");n.href=r,n.download=`store-${t||"qr"}.png`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r)}catch(s){console.error("Error downloading QR code:",s),alert("Failed to download QR code. Please try again.")}else alert("Business ID not found to generate QR code.")},className:"w-full md:w-auto",children:"Download QR Code"})]})]})})]})]})}),e.jsx(Ke,{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 text-white rounded-xl flex items-center justify-center mr-3",children:e.jsx(pa,{})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Store Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Business details and credentials"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Business Name"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(pa,{className:"text-green-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:A?.business?.business_name||"N/A"})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Business Type"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:A?.business?.business_type||"N/A"})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Country"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-teal-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(xa,{className:"text-teal-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:A?.business?.country||"N/A"})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Business Email"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ha,{className:"text-blue-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1 truncate",children:A?.business?.email||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Business Address"}),e.jsxs("div",{className:"flex items-start gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(xa,{className:"text-indigo-600"})}),e.jsxs("span",{className:"text-gray-900 font-medium flex-1",children:[A?.business?.business_address||"N/A",A?.business?.house_number&&`, ${A.business.house_number}`]})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Mobile Number"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ma,{className:"text-green-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:A?.business?.mobile||"N/A"})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Business Established"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ga,{className:"text-purple-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:m(A?.business?.created_at)})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last Updated"}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ga,{className:"text-orange-600"})}),e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:m(A?.business?.updated_at)})]})]})]})]})]})}),A?.business?.users&&A.business.users.length>0&&e.jsx(e.Fragment,{children:(()=>{const t=A.business.users.filter(e=>"admin"===e.user_type_name||"cashier"===e.user_type_name||"admin"===e.role||"cashier"===e.role||"business_owner"===e.role);return e.jsx(Ke,{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br bg-blue-500 text-white rounded-xl flex items-center justify-center mr-3",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Business Team"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["All users associated with this business (",t.length," total)"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:t.map((A,t)=>e.jsxs("div",{className:"group bg-gradient-to-br from-white to-gray-50/50 rounded-2xl p-5 border border-gray-200/50 hover:border-purple-300 hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br bg-blue-500 text-white rounded-xl flex items-center justify-center text-lg font-bold shadow-md ring-2 ring-white",children:A.username?.charAt(0)?.toUpperCase()||"U"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-gray-900 truncate",children:A.username}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold mt-1 "+("admin"===A.user_type_name||"business_owner"===A.role?"bg-red-100 text-red-800 border border-red-200":"cashier"===A.user_type_name||"cashier"===A.role?"bg-green-100 text-green-800 border border-green-200":"bg-gray-100 text-gray-800 border border-gray-200"),children:A.user_type_name||A.role})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ha,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-0.5",children:"Email"}),e.jsx("div",{className:"font-medium text-gray-900 truncate",children:A.email})]})]}),A.contact_number&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ma,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-0.5",children:"Contact"}),e.jsx("div",{className:"font-medium text-gray-900",children:A.contact_number})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ga,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-0.5",children:"Joined"}),e.jsx("div",{className:"font-medium text-gray-900",children:m(A.created_at)})]})]})]})]},A.user_id))})]})})})()})]})]})]})};function ja({isOpen:A,onClose:t,documentUrl:s,documentName:r}){if(!s)return null;const n=s.toLowerCase().includes(".pdf"),a=/\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(s);return e.jsx(ve,{isOpen:A,onClose:t,title:"View Document",subtitle:r,size:"full",icon:e.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),children:e.jsx("div",{className:"w-full h-full min-h-[70vh]",children:n?e.jsx("iframe",{src:s,className:"w-full h-full border-0 rounded-lg",title:`View ${r}`,allowFullScreen:!0}):a?e.jsxs("div",{className:"flex items-center justify-center h-full",children:[e.jsx("img",{src:s,alt:r,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),e.jsxs("div",{className:"hidden text-center text-gray-500",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Unable to load document"}),e.jsx("p",{className:"text-sm",children:"The document may not be available or supported"})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Document Preview Not Available"}),e.jsx("p",{className:"text-sm",children:"This document type cannot be previewed inline"}),e.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open in New Tab"]})]})})})})}function Ca({isRefreshing:A}){const[t,s]=h.useState([]),[r,n]=h.useState(null),[a,i]=h.useState(null),[o,l]=h.useState(!0),[c,d]=h.useState(!1),[u,m]=h.useState(!1),[g,p]=h.useState({url:"",name:"",isOpen:!1}),[x,f]=h.useState({total:0,pending:0,approved:0,rejected:0});h.useEffect(()=>{w(),b()},[]),h.useEffect(()=>{A&&(w(),b())},[A]);const w=async()=>{m(!0);try{const e=sessionStorage.getItem("auth_token"),A=await R("/documents/pending",{headers:{Authorization:`Bearer ${e}`}});s(A)}catch(e){}finally{l(!1),m(!1)}},b=async()=>{m(!0);try{const e=sessionStorage.getItem("auth_token"),A=await R("/documents/stats",{headers:{Authorization:`Bearer ${e}`}}),t={total:A.total||0,pending:A.pending||0,approved:A.approved||0,rejected:A.rejected||0,repass:A.repass||0};f(t)}catch(e){}finally{m(!1)}},B=async e=>{try{const A=sessionStorage.getItem("auth_token"),t=await R(`/documents/business/${e}/verification`,{headers:{Authorization:`Bearer ${A}`}});i(t)}catch(A){}};return o?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Y,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-10 flex items-center justify-center z-50",children:e.jsx(Y,{size:"lg"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Ke,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.total||(x.pending||0)+(x.approved||0)+(x.rejected||0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Businesses"})]})}),e.jsx(Ke,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.pending||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]})}),e.jsx(Ke,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.approved||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]})}),e.jsx(Ke,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:x.rejected||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Rejected"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(Ke,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"All Businesses with Documents"}),0===t.length?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No businesses with documents"}):e.jsx("div",{className:"space-y-3",children:t.map(A=>e.jsxs("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors "+(r?.business_id===A.business_id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>(e=>{n(e),B(e.business_id)})(A),children:[e.jsx("div",{className:"font-medium",children:A.business_name}),e.jsx("div",{className:"text-sm text-gray-600",children:A.business_type}),e.jsxs("div",{className:"text-xs text-gray-500",children:[A.total_documents," documents â€¢ Status:"," ",A.verification_status]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Submitted"," ",A.verification_submitted_at?new Date(A.verification_submitted_at).toLocaleDateString():"N/A"]})]},A.business_id))})]})}),e.jsx("div",{className:"lg:col-span-2",children:r?e.jsx(Na,{business:a,onDocumentAction:async(e,A,t="")=>{d(!0);try{const s=sessionStorage.getItem("auth_token");await R(`/documents/document/${e}/verify`,{method:"PUT",headers:{Authorization:`Bearer ${s}`},body:JSON.stringify({status:A,notes:t})}),B(r.business_id),alert(`Document ${A} successfully`)}catch(s){alert("Error updating document status")}finally{d(!1)}},onCompleteVerification:async(e,A="")=>{d(!0);try{const t=sessionStorage.getItem("auth_token");await R(`/documents/business/${r.business_id}/complete`,{method:"PUT",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify({status:e,rejection_reason:A})}),alert(`Business verification ${e} successfully`),n(null),i(null),w(),b()}catch(t){alert("Error completing verification")}finally{d(!1)}},onDownloadDocument:async(e,A)=>{try{const t=sessionStorage.getItem("auth_token"),s=await R(`/documents/download/${e}`,{headers:{Authorization:`Bearer ${t}`}},!0),r=await s.blob(),n=window.URL.createObjectURL(r),a=document.createElement("a");a.style.display="none",a.href=n,a.download=A,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(n),document.body.removeChild(a)}catch(t){console.error("Error downloading document:",t),alert(t.message||"Error downloading document")}},onViewDocument:async(e,A)=>{try{const t=sessionStorage.getItem("auth_token"),s=await R(`/documents/download/${e}`,{headers:{Authorization:`Bearer ${t}`}},!0),r=await s.blob(),n=window.URL.createObjectURL(r);p({url:n,name:A,isOpen:!0})}catch(t){console.error("Error viewing document:",t),alert("Error viewing document")}},actionLoading:c}):e.jsx(Ke,{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Business to Review"}),e.jsx("p",{className:"text-gray-500",children:"Choose a business from the list to review their documents."})]})})})]}),e.jsx(ja,{isOpen:g.isOpen,onClose:()=>p(e=>({...e,isOpen:!1})),documentUrl:g.url,documentName:g.name})]})}function Na({business:A,onDocumentAction:t,onCompleteVerification:s,onDownloadDocument:r,onViewDocument:n,actionLoading:a}){const[i,o]=h.useState(""),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[m,g]=h.useState(!1);if(!A)return e.jsx(Ke,{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx(Y,{})})});const p=e=>{switch(e){case"approved":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-yellow-600 bg-yellow-100"}},x=A.documents?.every(e=>"approved"===e.verification_status),f=A.documents?.some(e=>"rejected"===e.verification_status);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ke,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Name"}),e.jsx("p",{className:"text-gray-900",children:A.business_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Type"}),e.jsx("p",{className:"text-gray-900",children:A.business_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:A.business_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile"}),e.jsx("p",{className:"text-gray-900",children:A.mobile})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsxs("p",{className:"text-gray-900",children:[A.business_address,A.house_number&&`, ${A.house_number}`,","," ",A.country]})]})]})]}),e.jsxs(Ke,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Submitted Documents"}),0===A.documents?.length?e.jsx("p",{className:"text-gray-500",children:"No documents uploaded"}):e.jsx("div",{className:"space-y-4",children:A.documents?.map(A=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:A.document_type}),e.jsx("p",{className:"text-sm text-gray-600",children:A.document_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded"," ",new Date(A.uploaded_at).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p(A.verification_status)}`,children:A.verification_status})]}),A.verification_notes&&e.jsxs("div",{className:"mb-3 p-2 bg-gray-50 rounded text-sm",children:[e.jsx("strong",{children:"Notes:"})," ",A.verification_notes]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(q,{size:"sm",variant:"outline",onClick:()=>n(A.document_id,A.document_name||A.document_type),children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),e.jsxs(q,{size:"sm",variant:"outline",onClick:()=>r(A.document_id,A.document_name),children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download"]}),"pending"===A.verification_status&&e.jsxs(e.Fragment,{children:[e.jsxs(q,{size:"sm",onClick:()=>t(A.document_id,"approved"),disabled:a,children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]}),e.jsxs(q,{size:"sm",variant:"outline",onClick:()=>{const e=prompt("Enter notes for rejection:");null!==e&&t(A.document_id,"rejected",e)},disabled:a,children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Reject"]})]})]})]},A.document_id))})]}),"approved"!==A.verification_status&&e.jsxs(Ke,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Complete Verification"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(q,{onClick:()=>s("approved"),disabled:!x||a,className:"bg-green-600 hover:bg-green-700",children:"Approve Business"}),e.jsx(q,{variant:"outline",onClick:()=>c(!0),disabled:a,children:"Reject Application"})]}),!x&&!f&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"All documents must be reviewed before completing verification."})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reject Application"}),e.jsx("textarea",{value:i,onChange:e=>o(e.target.value),placeholder:"Enter reason for rejection...",className:"w-full p-3 border rounded-lg resize-none h-32"}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsx(q,{variant:"outline",onClick:()=>{c(!1),o("")},children:"Cancel"}),e.jsx(q,{onClick:()=>{s("rejected",i),c(!1),o("")},disabled:!i.trim(),className:"bg-red-600 hover:bg-red-700",children:"Reject"})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Request Resubmission"}),e.jsx("textarea",{value:resubmissionNotes,onChange:e=>setResubmissionNotes(e.target.value),placeholder:"Enter notes about document quality issues...",className:"w-full p-3 border rounded-lg resize-none h-32"}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsx(q,{variant:"outline",onClick:()=>{u(!1),setResubmissionNotes("")},children:"Cancel"}),e.jsx(q,{onClick:()=>{s("repass","",resubmissionNotes),u(!1),setResubmissionNotes("")},disabled:!resubmissionNotes.trim(),className:"bg-orange-600 hover:bg-orange-700",children:"Request Resubmission"})]})]})})]})}const Qa=()=>e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Ua=()=>e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})});function ka(){const[A,t]=h.useState("verification"),[s,r]=h.useState([{id:"sample-1",name:"ABC Store",email:"abc@store.com",status:"approved"}]),[n,a]=h.useState(!1),[i,o]=h.useState(""),[l,c]=h.useState({isOpen:!1,store:null}),[m,g]=h.useState(""),[p,x]=h.useState(!1),[f,w]=h.useState(""),[b,B]=h.useState(!1),y=d(),v=u(),j=sessionStorage.getItem("auth_token")||localStorage.getItem("token"),[C,N]=h.useState(!1),[Q,U]=h.useState(""),[k,F]=h.useState(!1),[S,E]=h.useState(!1),[I,H]=h.useState(null),[_,L]=h.useState({firstName:"",lastName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:"",contactNumber:""}),[T,O]=h.useState("account"),[M,P]=h.useState({isOpen:!1}),D=()=>{P({isOpen:!1})},K=(()=>{try{const e=sessionStorage.getItem("user");if(e)return JSON.parse(e);const A=localStorage.getItem("user");return A?JSON.parse(A):{}}catch{return{}}})();h.useEffect(()=>{"storeManagement"===v.state?.from&&t("stores"),V()},[v.state]);const V=async()=>{a(!0),o("");try{const e=await R("/api/superadmin/stores",{headers:{Authorization:`Bearer ${j}`}});Array.isArray(e)&&e.length>0&&r(e)}catch(e){o("Using sample data")}finally{a(!1)}},G=()=>{c({isOpen:!1,store:null}),g(""),w("")},W=()=>{N(!1),U(""),L({firstName:"",lastName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:"",contactNumber:""})},$=e=>{const{name:A,value:t}=e.target;L(e=>({...e,[A]:t})),U("")};return e.jsxs(z,{variant:"gradientBlue",pattern:"dots",floatingElements:!0,overlay:!0,children:[e.jsx("div",{className:"flex h-screen overflow-hidden",children:e.jsxs("div",{className:"flex-1 flex flex-col h-screen",children:[e.jsxs("header",{className:"sticky top-0 z-50 flex items-center justify-between px-3 sm:px-4 md:px-6 py-3 sm:py-4 bg-white/95 backdrop-blur-md border-b border-gray-200/50 shadow-sm gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 min-w-0 flex-1",children:e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold bg-gradient-to-r from-gray-900 via-gray-800 to-gray-700 bg-clip-text text-transparent tracking-tight truncate",children:"Super Admin Dashboard"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:"Manage stores and verifications"})]})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[e.jsx("button",{onClick:async()=>{N(!0),U(""),F(!0);try{const e=await R("/api/auth/profile",{headers:{Authorization:`Bearer ${j}`}});H(e),L({firstName:e?.user?.firstName||"",lastName:e?.user?.lastName||"",email:e?.user?.email||"",currentPassword:"",newPassword:"",confirmPassword:"",contactNumber:e?.user?.contact_number||""})}catch(e){U("Failed to load profile data")}finally{F(!1)}},className:"p-2.5 rounded-lg bg-white border border-blue-200 shadow-sm hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 group",title:"Edit Profile",children:e.jsx(Qa,{})}),e.jsx("button",{onClick:()=>{B(!0),V(),setTimeout(()=>{B(!1)},500)},disabled:b,className:"p-2.5 rounded-lg bg-white border border-gray-200 shadow-sm hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 group disabled:opacity-50",title:"Refresh Data",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 "+(b?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("button",{onClick:()=>{P({isOpen:!0})},className:"p-2.5 rounded-lg bg-white border border-red-200 shadow-sm hover:bg-red-50 hover:border-red-300 transition-all duration-200 group",title:"Logout",children:e.jsx(Ua,{})})]})]}),e.jsxs("main",{className:"flex-1 p-3 sm:p-4 md:p-6 lg:p-8 overflow-auto bg-gradient-to-br from-gray-50 via-blue-50/30 to-green-50/20",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-xl mb-4 sm:mb-5 md:mb-6 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"flex overflow-x-auto",children:[e.jsxs("button",{onClick:()=>t("stores"),className:"relative px-4 sm:px-5 md:px-6 py-3 sm:py-3.5 md:py-4 font-semibold text-xs sm:text-sm transition-all duration-300 whitespace-nowrap flex-shrink-0 "+("stores"===A?"text-blue-700 bg-blue-50/50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50/50"),children:[e.jsxs("span",{className:"relative z-10 flex items-center gap-1.5 sm:gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Store Management"}),e.jsx("span",{className:"sm:hidden",children:"Stores"})]}),"stores"===A&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-600 to-blue-700"})]}),e.jsxs("button",{onClick:()=>t("verification"),className:"relative px-4 sm:px-5 md:px-6 py-3 sm:py-3.5 md:py-4 font-semibold text-xs sm:text-sm transition-all duration-300 whitespace-nowrap flex-shrink-0 "+("verification"===A?"text-blue-700 bg-blue-50/50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50/50"),children:[e.jsxs("span",{className:"relative z-10 flex items-center gap-1.5 sm:gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Document Verification"}),e.jsx("span",{className:"sm:hidden",children:"Verification"})]}),"verification"===A&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-green-600 to-blue-600"})]})]})}),"verification"===A?e.jsx(Ca,{isRefreshing:b},A):e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50/50 via-blue-50/30 to-green-50/20 border-b border-gray-200/50 px-4 sm:px-5 md:px-6 py-4 sm:py-4.5 md:py-5",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent truncate",children:"Store Management"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 truncate",children:"Manage and monitor all registered stores"})]})})}),e.jsxs("div",{className:"p-4 sm:p-5 md:p-6",children:[i&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-700 text-sm font-medium",children:(()=>{try{const e=JSON.parse(i);return e.error||e.message||i}catch{return i}})()})]}),n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Loading stores..."})]})}):0===s.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No stores found"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get started by approving new store registrations."})]}):e.jsx("div",{className:"overflow-x-auto -mx-4 sm:-mx-5 md:-mx-6 px-4 sm:px-5 md:px-6",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 sm:py-4 px-2 sm:px-3 md:px-4 text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[150px]",children:"Store Name"}),e.jsx("th",{className:"text-left py-3 sm:py-4 px-2 sm:px-3 md:px-4 text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[180px]",children:"Email"}),e.jsx("th",{className:"text-left py-3 sm:py-4 px-2 sm:px-3 md:px-4 text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[150px]",children:"Business Type"}),e.jsx("th",{className:"text-left py-3 sm:py-4 px-2 sm:px-3 md:px-4 text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[100px]",children:"Status"}),e.jsx("th",{className:"text-right py-3 sm:py-4 px-2 sm:px-3 md:px-4 text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[200px]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(A=>e.jsxs("tr",{className:"hover:bg-blue-50/30 transition-colors duration-150 group",children:[e.jsx("td",{className:"py-3 sm:py-4 px-2 sm:px-3 md:px-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold text-xs sm:text-sm shadow-sm flex-shrink-0",children:A.name?.charAt(0)?.toUpperCase()||"S"}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 group-hover:text-blue-700 transition-colors truncate",children:A.name})})]})}),e.jsx("td",{className:"py-3 sm:py-4 px-2 sm:px-3 md:px-4",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate max-w-[200px] sm:max-w-none",children:A.email})}),e.jsx("td",{className:"py-3 sm:py-4 px-2 sm:px-3 md:px-4",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate max-w-[150px] sm:max-w-none",children:A.business_type||"N/A"})}),e.jsx("td",{className:"py-3 sm:py-4 px-2 sm:px-3 md:px-4",children:"approved"===A.status?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold bg-green-100 text-green-700 border border-green-200",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-600"}),"Active"]}):"suspended"===A.status?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-700 border border-yellow-200",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-yellow-600"}),"Suspended"]}):"rejected"===A.status?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold bg-red-100 text-red-700 border border-red-200",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-600"}),"Rejected"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-700 border border-blue-200",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-600 animate-pulse"}),"Pending"]})}),e.jsx("td",{className:"py-3 sm:py-4 px-2 sm:px-3 md:px-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 sm:gap-1.5 md:gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>{y(`/superadmin/stores/${A.id}`)},className:"px-3 py-1.5 text-xs font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",title:"View Details",children:"View"}),e.jsx("button",{onClick:()=>(c({isOpen:!0,store:A}),g(""),void w("")),className:"p-1.5 sm:p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200 border border-transparent hover:border-red-200 flex-shrink-0",title:"Delete Store",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},A.id))})]})})]})]})]})]})}),e.jsx(Wn,{isOpen:l.isOpen,onClose:G,title:"",size:"md",children:e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-50 via-red-50/80 to-orange-50/50 border-b border-red-100 px-6 py-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Confirm Store Deletion"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-red-50/50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-1",children:["You are about to delete:"," ",e.jsx("span",{className:"text-red-700 font-bold",children:l.store?.name})]}),e.jsx("p",{className:"text-sm text-red-700",children:"All associated data including users, products, inventory, and sales records will be permanently deleted."})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"deletePassword",className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("div",{className:"w-5 h-5 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),"Enter your password to confirm"]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"password",id:"deletePassword",value:m,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 bg-gray-50 focus:bg-white",placeholder:"Enter your password",disabled:p})}),f&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:f})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:G,disabled:p,className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(l.store&&m){x(!0),w("");try{await R(`/api/superadmin/stores/${l.store.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${j}`},body:JSON.stringify({password:m})}),r(e=>e.filter(e=>e.id!==l.store.id)),c({isOpen:!1,store:null}),o("")}catch(e){w("Unknown error")}finally{x(!1)}}},disabled:!m||p,className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Store"]})})]})]})]})}),e.jsx(Wn,{isOpen:C,onClose:W,title:"",size:"md",children:e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 via-blue-50/80 to-green-50/50 border-b border-blue-100 px-5 py-4 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Edit Super Admin Credentials"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Update your account information and security settings"})]})]})}),e.jsx("div",{className:"p-5",children:k?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mb-3"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Loading profile data..."})]}):e.jsxs("div",{className:"space-y-4",children:[Q&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-3 flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-sm font-medium text-red-700",children:Q.replace(/^\{|\}$/g,"")})]}),e.jsxs("div",{className:"flex gap-1 border-b border-slate-200/10 -mx-6 px-6",children:[e.jsxs("button",{onClick:()=>O("account"),className:"px-4 py-2 rounded-t-xl font-medium transition-all duration-200 relative "+("account"===T?"text-blue-600 bg-blue-50/30":"text-slate-500 hover:text-slate-700"),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Account"]}),"account"===T&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full"})]}),e.jsxs("button",{onClick:()=>O("security"),className:"px-4 py-2 rounded-t-xl font-medium transition-all duration-200 relative "+("security"===T?"text-blue-600 bg-blue-50/30":"text-slate-500 hover:text-slate-700"),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Security"]}),"security"===T&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full"})]})]}),"account"===T&&e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[e.jsx("div",{className:"w-5 h-5 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Personal Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"firstName",className:"flex items-center gap-1.5 text-xs font-semibold text-gray-700 mb-1.5",children:[e.jsx("div",{className:"w-4 h-4 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-2.5 h-2.5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),"First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:_.firstName,onChange:$,className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 focus:bg-white text-sm",placeholder:"Enter first name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"lastName",className:"flex items-center gap-1.5 text-xs font-semibold text-gray-700 mb-1.5",children:[e.jsx("div",{className:"w-4 h-4 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-2.5 h-2.5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),"Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:_.lastName,onChange:$,className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 focus:bg-white text-sm",placeholder:"Enter last name",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"flex items-center gap-1.5 text-xs font-semibold text-gray-700 mb-1.5",children:[e.jsx("div",{className:"w-4 h-4 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-2.5 h-2.5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),"Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",name:"email",value:_.email,onChange:$,className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 focus:bg-white text-sm",placeholder:"Enter email",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contactNumber",className:"flex items-center gap-1.5 text-xs font-semibold text-gray-700 mb-1.5",children:[e.jsx("div",{className:"w-4 h-4 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-2.5 h-2.5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),"Contact Number"]}),e.jsx("input",{type:"tel",id:"contactNumber",name:"contactNumber",value:_.contactNumber,onChange:$,className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 focus:bg-white text-sm",placeholder:"Enter contact number (optional)"})]})]}),"security"===T&&e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-1.5",children:[e.jsx("div",{className:"w-5 h-5 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Change Password"})]}),e.jsx("p",{className:"text-xs text-slate-500 bg-amber-50 border border-amber-100/50 rounded-xl px-3 py-2",children:"Leave blank to keep your current password"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"currentPassword",className:"flex items-center gap-1.5 text-xs font-semibold text-gray-700 mb-1.5",children:[e.jsx("div",{className:"w-4 h-4 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-2.5 h-2.5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),"Current Password"]}),e.jsx(ze,{name:"currentPassword",value:_.currentPassword,onChange:$,placeholder:"Enter current password",className:"w-full text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"newPassword",className:"flex items-center gap-1.5 text-xs font-semibold text-gray-700 mb-1.5",children:[e.jsx("div",{className:"w-4 h-4 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-2.5 h-2.5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),"New Password"]}),e.jsx(ze,{name:"newPassword",value:_.newPassword,onChange:$,placeholder:"Min 6 characters",className:"w-full text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirmPassword",className:"flex items-center gap-1.5 text-xs font-semibold text-gray-700 mb-1.5",children:[e.jsx("div",{className:"w-4 h-4 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-2.5 h-2.5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"Confirm Password"]}),e.jsx(ze,{name:"confirmPassword",value:_.confirmPassword,onChange:$,placeholder:"Confirm new password",className:"w-full text-sm"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:W,disabled:S,className:"px-4 py-2 rounded-lg text-sm font-semibold text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(U(""),!_.firstName.trim())return void U("First name is required");if(!_.lastName.trim())return void U("Last name is required");if(!_.email.trim())return void U("Email is required");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){if(_.newPassword){if(!_.currentPassword)return void U("Current password is required to change password");if(_.newPassword.length<6)return void U("New password must be at least 6 characters");if(_.newPassword!==_.confirmPassword)return void U("New passwords do not match")}E(!0);try{const e=`${_.firstName.trim()} ${_.lastName.trim()}`,A={firstname:_.firstName.trim(),lastname:_.lastName.trim(),email:_.email,contact_number:_.contactNumber||null};_.newPassword&&(A.currentPassword=_.currentPassword,A.newPassword=_.newPassword),await R("/api/auth/profile",{method:"PUT",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"},body:JSON.stringify(A)});const t={...K,name:e,email:_.email};sessionStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("user",JSON.stringify(t)),alert("Profile updated successfully!"),W(),window.location.reload()}catch(e){U("Failed to update profile. Please try again.")}finally{E(!1)}}else U("Please enter a valid email address")},disabled:S,className:"px-4 py-2 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:S?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Changes"]})})]})]})})]})}),e.jsx(Wn,{isOpen:M.isOpen,onClose:D,title:"",size:"sm",children:e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-50 via-red-50/80 to-orange-50/50 border-b border-red-100 px-6 py-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Confirm Logout"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure you want to log out?"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-6",children:"You will be redirected to the login page and your session will end."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:D,className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:"Cancel"}),e.jsxs("button",{onClick:()=>{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),y("/")},className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})]})})]})}function Fa(){const{id:A}=b(),t=d(),[s,r]=h.useState(null),[n,a]=h.useState(!0),[i,o]=h.useState(""),[l,c]=h.useState(!1),[u,m]=h.useState(!1),[g,p]=h.useState(null);h.useEffect(()=>{(async()=>{a(!0),o("");try{const e=sessionStorage.getItem("auth_token"),t=await R(`/api/superadmin/stores/${A}`,{headers:e?{Authorization:`Bearer ${e}`}:void 0});r(t)}catch(e){o(e?.message||"Failed to fetch store details"),r(null)}finally{a(!1)}})()},[A]);const x=e=>e?new Date(e).toLocaleString():"N/A",f=A=>{const t=(A||"pending").toLowerCase(),s={approved:"bg-green-100 text-green-700 border-green-200",rejected:"bg-red-100 text-red-700 border-red-200",pending:"bg-yellow-100 text-yellow-700 border-yellow-200"},r=s[t]||s.pending,n=t.charAt(0).toUpperCase()+t.slice(1);return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold border ${r}`,children:n})};return n?e.jsx(z,{variant:"gradientBlue",pattern:"dots",floatingElements:!0,overlay:!0,children:e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 sm:p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 border-2 sm:border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 font-medium text-center",children:"Loading store details..."})]})})}):s?e.jsx(z,{variant:"gradientBlue",pattern:"dots",floatingElements:!0,overlay:!0,children:e.jsx("div",{className:"min-h-screen p-3 sm:p-4 md:p-6 lg:p-8 bg-gradient-to-br from-gray-50 via-blue-50/30 to-green-50/20",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-200/50 p-4 sm:p-5 md:p-6 mb-4 sm:mb-5 md:mb-6 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-lg ring-2 sm:ring-4 ring-blue-100/50 flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold bg-gradient-to-r from-gray-900 via-gray-800 to-gray-700 bg-clip-text text-transparent break-words",children:"Tenant Review"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-0.5 sm:mt-1",children:"Comprehensive business verification details"})]})]}),e.jsxs("button",{onClick:()=>t("/superadmin",{state:{from:"storeManagement"}}),children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),e.jsx("span",{className:"whitespace-nowrap",children:"Back to List"})]})]})}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4 mb-4 sm:mb-5 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("span",{className:"text-sm sm:text-base text-red-700 font-medium break-words",children:i})]})}),e.jsx("section",{className:"mb-4 sm:mb-5 md:mb-6",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-200/50 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50/50 via-blue-50/30 to-blue-50/20 border-b border-gray-200/50 px-4 sm:px-5 md:px-6 py-3 sm:py-3.5 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-blue-600 rounded-lg flex items-center justify-center shadow-sm flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-4 sm:h-4 md:w-5 md:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Personal Overview"})]})}),e.jsx("div",{className:"p-4 sm:p-5 md:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsx("div",{className:"group bg-gradient-to-br from-blue-50/50 to-indigo-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-blue-100/50 hover:border-blue-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"First Name"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.firstName||"N/A"})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-blue-50/50 to-indigo-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-blue-100/50 hover:border-blue-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Last Name"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.lastName||"N/A"})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-blue-50/50 to-blue-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-blue-100/50 hover:border-blue-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Email"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-all",children:s.email||"N/A"})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-blue-50/50 to-indigo-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-blue-100/50 hover:border-blue-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Phone"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.phone||"N/A"})]})]})})]})})]})}),e.jsx("section",{className:"mb-4 sm:mb-5 md:mb-6",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-200/50 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50/50 via-green-50/30 to-green-50/20 border-b border-gray-200/50 px-4 sm:px-5 md:px-6 py-3 sm:py-3.5 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center shadow-sm flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-4 sm:h-4 md:w-5 md:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Business Information"})]})}),e.jsx("div",{className:"p-4 sm:p-5 md:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx("div",{className:"group bg-gradient-to-br from-green-50/50 to-emerald-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-green-100/50 hover:border-green-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0 mt-1",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1",children:"Store Name"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words mb-2",children:s.storeName||s.name||"N/A"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2h-1V1h-2v2H8V1H6v2H5a2 2 0 00-2 2v16a2 2 0 002 2h14a2 2 0 002-2zM9 3h6v2H9V3zm0 4h6v2H9V7z"})}),s.business_type||"N/A"]})})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-green-50/50 to-green-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-green-100/50 hover:border-green-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsxs("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Location"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.location||"N/A"})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-green-50/50 to-green-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-green-100/50 hover:border-green-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Established"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.established||"N/A"})]})]})})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-5 md:gap-6 mb-4 sm:mb-5 md:mb-6",children:[e.jsx("section",{children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-200/50 overflow-hidden h-full",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50/50 via-blue-50/30 to-blue-50/20 border-b border-gray-200/50 px-4 sm:px-5 md:px-6 py-3 sm:py-3.5 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-4 sm:h-4 md:w-5 md:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Business Documents"})]})}),e.jsxs("div",{className:"p-4 sm:p-5 md:p-6 space-y-2 sm:space-y-3",children:[(s.documents||[]).map(A=>e.jsxs("div",{className:"flex items-center gap-3 md:gap-4 p-3 sm:p-3.5 md:p-4 bg-gradient-to-r from-blue-50/50 to-blue-50/30 rounded-xl border border-blue-100/50 hover:border-blue-200 transition-all duration-300 hover:shadow-md",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:A.name}),f(A.verificationStatus)]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[A.documentType||"Document"," â€¢ Uploaded ",x(A.uploadedAt)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{p(A),m(!0)},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"View Document",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("a",{href:A.url||"#",download:!0,className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"Download Document",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})]},A.documentId||A.name)),(!s.documents||0===s.documents.length)&&e.jsxs("div",{className:"text-center py-8 sm:py-10 md:py-12 text-gray-500",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 mx-auto mb-3 sm:mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("p",{className:"text-sm sm:text-base font-medium",children:"No documents available"})]})]})]})}),e.jsx("section",{children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-200/50 overflow-hidden h-full",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50/50 via-green-50/30 to-green-50/20 border-b border-gray-200/50 px-4 sm:px-5 md:px-6 py-3 sm:py-3.5 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center shadow-sm flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-4 sm:h-4 md:w-5 md:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Verified Documents"})]})}),e.jsxs("div",{className:"p-4 sm:p-5 md:p-6 space-y-2 sm:space-y-3",children:[(s.verifiedDocuments||[]).map(A=>e.jsxs("div",{className:"flex items-center gap-3 md:gap-4 p-3 sm:p-3.5 md:p-4 bg-gradient-to-r from-green-50/50 to-green-50/30 rounded-xl border border-green-100/50 hover:border-green-200 transition-all duration-300 hover:shadow-md",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:A.name}),f(A.verificationStatus||"approved")]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[A.documentType||"Document"," â€¢ Uploaded ",x(A.uploadedAt)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{A.url&&"#"!==A.url?(p(A),m(!0)):window.open("#","_blank")},className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-50 rounded transition-colors",title:"View Document",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("a",{href:A.url||"#",download:!0,className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-50 rounded transition-colors",title:"Download Document",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})]},A.documentId||A.name)),(!s.verifiedDocuments||0===s.verifiedDocuments.length)&&e.jsxs("div",{className:"text-center py-8 sm:py-10 md:py-12 text-gray-500",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 mx-auto mb-3 sm:mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-sm sm:text-base font-medium",children:"No verified documents"})]})]})]})})]}),e.jsx("section",{className:"mb-4 sm:mb-5 md:mb-6",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-200/50 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50/50 via-blue-50/30 to-green-50/20 border-b border-gray-200/50 px-4 sm:px-5 md:px-6 py-3 sm:py-3.5 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 bg-blue-500 rounded-lg flex items-center justify-center shadow-sm flex-shrink-0",children:e.jsxs("svg",{className:"w-4 h-4 sm:w-4 sm:h-4 md:w-5 md:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Account & Security"})]})}),e.jsx("div",{className:"p-4 sm:p-5 md:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx("div",{className:"group bg-gradient-to-br from-green-50/50 to-green-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-green-100/50 hover:border-green-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Password"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.account?.passwordHint||"N/A"})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-blue-50/50 to-blue-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-blue-100/50 hover:border-blue-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Last Login"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.account?.lastLogin||"N/A"})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-green-50/50 to-green-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-green-100/50 hover:border-green-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Created"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.account?.createdAt||"N/A"})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-blue-50/50 to-blue-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-blue-100/50 hover:border-blue-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Password Changed"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.account?.lastPasswordChange||"N/A"})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-green-50/50 to-green-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-green-100/50 hover:border-green-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Login Attempts"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.account?.loginAttemptsToday??"N/A"})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-blue-50/50 to-green-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-blue-100/50 hover:border-blue-200 hover:shadow-md transition-all duration-300 sm:col-span-2 lg:col-span-3",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsxs("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Store Address"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.account?.storeAddress||"N/A"})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-green-50/50 to-green-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-green-100/50 hover:border-green-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Status"}),e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-full text-xs font-semibold bg-green-100 text-green-700 border border-green-200",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-600"}),(e=>{if(!e)return"N/A";const A=e.toLowerCase();return A.charAt(0).toUpperCase()+A.slice(1)})(s.account?.status||s.verificationStatus)]})]})]})}),e.jsx("div",{className:"group bg-gradient-to-br from-blue-50/50 to-blue-50/30 rounded-xl p-3 sm:p-4 md:p-5 border border-blue-100/50 hover:border-blue-200 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 bg-white rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-5 sm:h-5 md:w-6 md:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:"Session Timeout"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 break-words",children:s.account?.sessionTimeout||"N/A"})]})]})})]})})]})}),e.jsx("section",{className:"mb-4 sm:mb-5 md:mb-6",children:e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-blue-100/60 overflow-hidden",children:e.jsxs("div",{className:"p-4 sm:p-5 md:p-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Verification Actions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Approvals and rejections now happen inside the Document Verification tab."})]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Use the ",e.jsx("span",{className:"font-semibold text-gray-800",children:"Document Verification"})," tab to review uploads, update document statuses, and complete the final decision for this business. The information on this page will automatically reflect those updates."]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-blue-50 text-blue-700 border border-blue-100 text-xs font-medium",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Current Status: ",s.verificationStatus?.charAt(0).toUpperCase()+s.verificationStatus?.slice(1)]})})]})})})]})})}):e.jsx(z,{variant:"gradientBlue",pattern:"dots",floatingElements:!0,overlay:!0,children:e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white/90 border border-gray-200 rounded-xl shadow-sm p-8 text-center max-w-md",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Store Unavailable"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i||"We couldn't find the store details you're looking for."}),e.jsxs("button",{onClick:()=>t("/superadmin"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})]})})})}function Sa(){const A=d(),[t,s]=h.useState({name:"",email:"",password:"",confirmPassword:""}),[r,n]=h.useState({}),[a,i]=h.useState(!1),[o,l]=h.useState(""),[c,u]=h.useState(!1),[m,g]=h.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1}),p=e=>{const{name:A,value:a}=e.target;s({...t,[A]:a}),r[A]&&n({...r,[A]:""}),"password"===A&&g({length:a.length>=8,uppercase:/[A-Z]/.test(a),lowercase:/[a-z]/.test(a),number:/\d/.test(a),special:/[!@#$%^&*(),.?":{}|<>]/.test(a)})};return c?e.jsx(z,{variant:"gradientGreen",pattern:"dots",overlay:!0,floatingElements:!0,children:e.jsx("main",{className:"flex h-screen items-center justify-center px-2 relative z-10",children:e.jsxs(Ke,{variant:"glass",className:"w-full max-w-md p-8 text-center animate-fadeIn",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx(Ee,{variant:"light",size:"lg",className:"mb-4",children:"Setup Complete!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your SuperAdmin account has been created successfully."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to login page..."})]}),e.jsx(Y,{size:"sm"})]})})}):e.jsxs(z,{variant:"gradientBlue",pattern:"dots",overlay:!0,floatingElements:!0,children:[e.jsx("main",{className:"flex h-screen items-center justify-center px-2 relative z-10 overflow-hidden",children:e.jsxs(Ke,{variant:"glass",className:"w-full max-w-4xl flex flex-col md:flex-row overflow-hidden p-0 animate-fadeIn",children:[e.jsxs("aside",{className:"hidden md:flex flex-col justify-center items-center bg-gradient-to-br from-blue-500 via-blue-300 to-blue-500 w-1/2 p-15 gap-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 -z-10 pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-[radial-gradient(circle_at_1px_1px,rgba(255,255,255,0.3)_1px,transparent_0)] bg-[length:20px_20px]"})}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsxs(Ee,{variant:"white",size:"xl",className:"mb-4 mt-4 text-center",children:[e.jsx(se,{size:64,className:"mb-10"}),"Initial Setup"]}),e.jsx("p",{className:"text-white/90 text-center text-lg max-w-xs font-medium leading-relaxed mb-4",children:"Welcome to eKahera! Let's create your SuperAdmin account to get started."}),e.jsxs("div",{className:"text-white/80 text-sm space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Full system access"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Manage all stores"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Advanced analytics"})]})]})]})]}),e.jsx("section",{className:"w-full md:w-1/2 flex flex-col justify-center items-center p-8 md:p-12 bg-white/95 backdrop-blur-sm",children:e.jsxs("div",{className:"w-full max-w-sm",children:[e.jsx(Ee,{variant:"light",size:"lg",className:"mb-8 text-center",children:"Create SuperAdmin"}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return t.name.trim()||(e.name="Full name is required"),t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(e.email="Please enter a valid email address"):e.email="Email address is required",t.password?t.password.length<8?e.password="Password must be at least 8 characters long":Object.values(m).every(Boolean)||(e.password="Password does not meet security requirements"):e.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",n(e),0===Object.keys(e).length})()){i(!0),l("");try{await R("/api/auth/setup/superadmin",{method:"POST",body:JSON.stringify({name:t.name.trim(),email:t.email.trim(),password:t.password,confirmPassword:t.confirmPassword})});u(!0),setTimeout(()=>{A("/login?role=admin&setup=complete")},3e3)}catch(s){l("Setup failed. Please try again.")}finally{i(!1)}}},className:"w-full flex flex-col gap-6",noValidate:!0,children:[e.jsx(We,{name:"name",value:t.name,onChange:p,placeholder:"Enter your full name",type:"text",error:r.name,autoComplete:"name",required:!0}),e.jsx(We,{name:"email",value:t.email,onChange:p,placeholder:"Enter your email address",type:"email",error:r.email,autoComplete:"email",required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ze,{name:"password",value:t.password,onChange:p,placeholder:"Create a strong password",error:r.password,autoComplete:"new-password",required:!0}),t.password&&e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsx("div",{className:"text-gray-600 font-medium",children:"Password Requirements:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 "+(m.length?"text-green-600":"text-gray-400"),children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"8+ chars"})]}),e.jsxs("div",{className:"flex items-center gap-1 "+(m.uppercase?"text-green-600":"text-gray-400"),children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Uppercase"})]}),e.jsxs("div",{className:"flex items-center gap-1 "+(m.lowercase?"text-green-600":"text-gray-400"),children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Lowercase"})]}),e.jsxs("div",{className:"flex items-center gap-1 "+(m.number?"text-green-600":"text-gray-400"),children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Number"})]}),e.jsxs("div",{className:"flex items-center gap-1 "+(m.special?"text-green-600":"text-gray-400"),children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Special (!@#$)"})]})]})]})]}),e.jsx(ze,{name:"confirmPassword",value:t.confirmPassword,onChange:p,placeholder:"Confirm your password",error:r.confirmPassword,autoComplete:"new-password",required:!0}),o&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-3 flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-sm font-medium text-red-700",children:o.replace(/^\{|\}$/g,"")})]}),e.jsxs(q,{type:"submit",variant:"primary",disabled:a||!Object.values(m).every(Boolean),className:"w-full flex items-center justify-center h-12 mt-4 text-lg font-medium transition-all duration-300 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]",children:[a&&e.jsx(Y,{size:"sm",className:"mr-2"}),a?"Creating Account...":"Create SuperAdmin Account"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"This account will have full system access"})})]})})]})}),e.jsx("style",{children:"\n        html, body, #root {\n          height: 100%;\n          margin: 0;\n          padding: 0;\n          overflow: hidden; /* No scroll */\n        }\n      "})]})}function Ea(){const A=h.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem("user")||"{}")}catch{return{}}},[]),t=A?.businessId||A?.business_id,[s,r]=h.useState(()=>String(Date.now())),n=h.useRef(null),a=h.useMemo(()=>{const e=new URL(window.location.origin+"/enter-store");return t&&e.searchParams.set("business_id",String(t)),e.toString()},[t]),i=h.useMemo(()=>`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(a)}&qzone=2&format=png&_=${s}`,[a,s]);return e.jsx(z,{variant:"gradientBlue",pattern:"dots",overlay:!0,floatingElements:!0,children:e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"pt-20 px-4",children:e.jsx(re,{})}),e.jsxs("div",{className:"px-4 mt-6 grid gap-4",children:[e.jsxs(Ke,{className:"p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:"Store QR"}),e.jsx("div",{className:"text-blue-700 mt-1",children:"Customers scan this once when they enter your store."})]}),e.jsx(Ke,{className:"p-6 flex flex-col items-center gap-4",children:t?e.jsxs(e.Fragment,{children:[e.jsx("img",{ref:n,src:i,alt:"Store QR",className:"w-[300px] h-[300px] border rounded-xl bg-white"}),e.jsx("div",{className:"text-blue-800 break-all text-sm",children:a}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(q,{label:"Download PNG",variant:"primary",onClick:async()=>{if(i)try{const e=await fetch(i);if(!e.ok)throw new Error("Failed to fetch QR code image");const A=await e.blob(),s=window.URL.createObjectURL(A),r=document.createElement("a");r.href=s,r.download=`store-${t||"qr"}.png`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(s)}catch(e){console.error("Error downloading QR code:",e),alert("Failed to download QR code. Please try again.")}else alert("QR code not available for download.")}}),e.jsx(q,{label:"Regenerate",variant:"secondary",onClick:()=>r(String(Date.now()))})]})]}):e.jsx("div",{className:"text-red-700",children:"Business ID not found. Please ensure you're logged in as an admin."})})]})]})})}var Ia,Ha,_a,La={};function Ta(){if(Ia)return La;Ia=1;var e=B();function A(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=A(e);function s(e,A,t){return A&&function(e,A){for(var t=0;t<A.length;t++){var s=A[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,A),e}var r="undefined"!=typeof process&&{}&&!0,n=function(e){return"[object String]"===Object.prototype.toString.call(e)},a=function(){function e(e){var A=void 0===e?{}:e,t=A.name,s=void 0===t?"stylesheet":t,a=A.optimizeForSpeed,o=void 0===a?r:a;i(n(s),"`name` must be a string"),this._name=s,this._deletedRulePlaceholder="#"+s+"-deleted-rule____{}",i("boolean"==typeof o,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=o,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var A=e.prototype;return A.setOptimizeForSpeed=function(e){i("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),i(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},A.isOptimizeForSpeed=function(){return this._optimizeForSpeed},A.inject=function(){var e=this;if(i(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed)return this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),void(this._optimizeForSpeed||(r||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0));this._serverSheet={cssRules:[],insertRule:function(A,t){return"number"==typeof t?e._serverSheet.cssRules[t]={cssText:A}:e._serverSheet.cssRules.push({cssText:A}),t},deleteRule:function(A){e._serverSheet.cssRules[A]=null}}},A.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var A=0;A<document.styleSheets.length;A++)if(document.styleSheets[A].ownerNode===e)return document.styleSheets[A]},A.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},A.insertRule=function(e,A){if(i(n(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof A&&(A=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,A),this._rulesCount++;if(this._optimizeForSpeed){var t=this.getSheet();"number"!=typeof A&&(A=t.cssRules.length);try{t.insertRule(e,A)}catch(a){return r||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var s=this._tags[A];this._tags.push(this.makeStyleTag(this._name,e,s))}return this._rulesCount++},A.replaceRule=function(e,A){if(this._optimizeForSpeed||"undefined"==typeof window){var t="undefined"!=typeof window?this.getSheet():this._serverSheet;if(A.trim()||(A=this._deletedRulePlaceholder),!t.cssRules[e])return e;t.deleteRule(e);try{t.insertRule(A,e)}catch(n){r||console.warn("StyleSheet: illegal rule: \n\n"+A+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),t.insertRule(this._deletedRulePlaceholder,e)}}else{var s=this._tags[e];i(s,"old rule at index `"+e+"` not found"),s.textContent=A}return e},A.deleteRule=function(e){if("undefined"!=typeof window)if(this._optimizeForSpeed)this.replaceRule(e,"");else{var A=this._tags[e];i(A,"rule at index `"+e+"` not found"),A.parentNode.removeChild(A),this._tags[e]=null}else this._serverSheet.deleteRule(e)},A.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},A.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(A,t){return t?A=A.concat(Array.prototype.map.call(e.getSheetForTag(t).cssRules,function(A){return A.cssText===e._deletedRulePlaceholder?null:A})):A.push(null),A},[])},A.makeStyleTag=function(e,A,t){A&&i(n(A),"makeStyleTag accepts only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),A&&s.appendChild(document.createTextNode(A));var r=document.head||document.getElementsByTagName("head")[0];return t?r.insertBefore(s,t):r.appendChild(s),s},s(e,[{key:"length",get:function(){return this._rulesCount}}]),e}();function i(e,A){if(!e)throw new Error("StyleSheet: "+A+".")}var o=function(e){for(var A=5381,t=e.length;t;)A=33*A^e.charCodeAt(--t);return A>>>0},l={};function c(e,A){if(!A)return"jsx-"+e;var t=String(A),s=e+t;return l[s]||(l[s]="jsx-"+o(e+"-"+t)),l[s]}function d(e,A){"undefined"==typeof window&&(A=A.replace(/\/style/gi,"\\/style"));var t=e+A;return l[t]||(l[t]=A.replace(/__jsx-style-dynamic-selector/g,e)),l[t]}var u=function(){function e(e){var A=void 0===e?{}:e,t=A.styleSheet,s=void 0===t?null:t,r=A.optimizeForSpeed,n=void 0!==r&&r;this._sheet=s||new a({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),s&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var A=e.prototype;return A.add=function(e){var A=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,A){return e[A]=0,e},{}));var t=this.getIdAndRules(e),s=t.styleId,r=t.rules;if(s in this._instancesCounts)this._instancesCounts[s]+=1;else{var n=r.map(function(e){return A._sheet.insertRule(e)}).filter(function(e){return-1!==e});this._indices[s]=n,this._instancesCounts[s]=1}},A.remove=function(e){var A=this,t=this.getIdAndRules(e).styleId;if(function(e,A){if(!e)throw new Error("StyleSheetRegistry: "+A+".")}(t in this._instancesCounts,"styleId: `"+t+"` not found"),this._instancesCounts[t]-=1,this._instancesCounts[t]<1){var s=this._fromServer&&this._fromServer[t];s?(s.parentNode.removeChild(s),delete this._fromServer[t]):(this._indices[t].forEach(function(e){return A._sheet.deleteRule(e)}),delete this._indices[t]),delete this._instancesCounts[t]}},A.update=function(e,A){this.add(A),this.remove(e)},A.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},A.cssRules=function(){var e=this,A=this._fromServer?Object.keys(this._fromServer).map(function(A){return[A,e._fromServer[A]]}):[],t=this._sheet.cssRules();return A.concat(Object.keys(this._indices).map(function(A){return[A,e._indices[A].map(function(e){return t[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return Boolean(e[1])}))},A.styles=function(e){return function(e,A){return void 0===A&&(A={}),e.map(function(e){var s=e[0],r=e[1];return t.default.createElement("style",{id:"__"+s,key:"__"+s,nonce:A.nonce?A.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})}(this.cssRules(),e)},A.getIdAndRules=function(e){var A=e.children,t=e.dynamic,s=e.id;if(t){var r=c(s,t);return{styleId:r,rules:Array.isArray(A)?A.map(function(e){return d(r,e)}):[d(r,A)]}}return{styleId:c(s),rules:Array.isArray(A)?A:[A]}},A.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,A){return e[A.id.slice(2)]=A,e},{})},e}();var h=e.createContext(null);function m(){return new u}function g(){return e.useContext(h)}h.displayName="StyleSheetContext";var p=t.default.useInsertionEffect||e.useLayoutEffect,x="undefined"!=typeof window?m():void 0;function f(A){var t=x||g(),s=e.useRef(!1);return t?"undefined"==typeof window?(t.add(A),null):(p(function(){if(document.head)return t.add(A),s.current=!0,function(){s.current=!1,t.remove(A)}},[A.id,String(A.dynamic)]),e.useLayoutEffect(function(){if(document.head&&!s.current)return t.add(A),function(){t.remove(A)}},[A.id,String(A.dynamic)]),null):null}return f.dynamic=function(e){return e.map(function(e){return c(e[0],e[1])}).join(" ")},La.StyleRegistry=function(A){var s=A.registry,r=A.children,n=e.useContext(h),a=e.useState(function(){return n||s||m()})[0];return t.default.createElement(h.Provider,{value:a},r)},La.createStyleRegistry=m,La.style=f,La.useStyleRegistry=g,La}const Oa=f(_a?Ha:(_a=1,Ha=Ta().style));
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ma=function(e,A){return Ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,A){e.__proto__=A}||function(e,A){for(var t in A)Object.prototype.hasOwnProperty.call(A,t)&&(e[t]=A[t])},Ma(e,A)};function Pa(e,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function t(){this.constructor=e}Ma(e,A),e.prototype=null===A?Object.create(A):(t.prototype=A.prototype,new t)}var Da=function(){return Da=Object.assign||function(e){for(var A,t=1,s=arguments.length;t<s;t++)for(var r in A=arguments[t])Object.prototype.hasOwnProperty.call(A,r)&&(e[r]=A[r]);return e},Da.apply(this,arguments)};function Ka(e,A,t,s){return new(t||(t=Promise))(function(A,r){function n(e){try{i(s.next(e))}catch(A){r(A)}}function a(e){try{i(s.throw(e))}catch(A){r(A)}}function i(e){var s;e.done?A(e.value):(s=e.value,s instanceof t?s:new t(function(e){e(s)})).then(n,a)}i((s=s.apply(e,[])).next())})}function Ra(e,A){var t,s,r,n,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function i(n){return function(i){return function(n){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(r=2&n[0]?s.return:n[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,s=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){a.label=n[1];break}if(6===n[0]&&a.label<r[1]){a.label=r[1],r=n;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(n);break}r[2]&&a.ops.pop(),a.trys.pop();continue}n=A.call(e,a)}catch(i){n=[6,i],s=0}finally{t=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}}function Va(e,A,t){if(2===arguments.length)for(var s,r=0,n=A.length;r<n;r++)!s&&r in A||(s||(s=Array.prototype.slice.call(A,0,r)),s[r]=A[r]);return e.concat(s||A)}for(var Ga=function(){function e(e,A,t,s){this.left=e,this.top=A,this.width=t,this.height=s}return e.prototype.add=function(A,t,s,r){return new e(this.left+A,this.top+t,this.width+s,this.height+r)},e.fromClientRect=function(A,t){return new e(t.left+A.windowBounds.left,t.top+A.windowBounds.top,t.width,t.height)},e.fromDOMRectList=function(A,t){var s=Array.from(t).find(function(e){return 0!==e.width});return s?new e(s.left+A.windowBounds.left,s.top+A.windowBounds.top,s.width,s.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),Wa=function(e,A){return Ga.fromClientRect(e,A.getBoundingClientRect())},za=function(e){for(var A=[],t=0,s=e.length;t<s;){var r=e.charCodeAt(t++);if(r>=55296&&r<=56319&&t<s){var n=e.charCodeAt(t++);56320==(64512&n)?A.push(((1023&r)<<10)+(1023&n)+65536):(A.push(r),t--)}else A.push(r)}return A},$a=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var t=e.length;if(!t)return"";for(var s=[],r=-1,n="";++r<t;){var a=e[r];a<=65535?s.push(a):(a-=65536,s.push(55296+(a>>10),a%1024+56320)),(r+1===t||s.length>16384)&&(n+=String.fromCharCode.apply(String,s),s.length=0)}return n},Ja="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qa="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ya=0;Ya<64;Ya++)qa[Ja.charCodeAt(Ya)]=Ya;for(var Xa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Za="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ei=0;ei<64;ei++)Za[Xa.charCodeAt(ei)]=ei;for(var Ai=function(e,A,t){return e.slice?e.slice(A,t):new Uint16Array(Array.prototype.slice.call(e,A,t))},ti=function(){function e(e,A,t,s,r,n){this.initialValue=e,this.errorValue=A,this.highStart=t,this.highValueIndex=s,this.index=r,this.data=n}return e.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=((A=this.index[e>>5])<<2)+(31&e),this.data[A];if(e<=65535)return A=((A=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[A];if(e<this.highStart)return A=2080+(e>>11),A=this.index[A],A+=e>>5&63,A=((A=this.index[A])<<2)+(31&e),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ri="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ni=0;ni<64;ni++)ri[si.charCodeAt(ni)]=ni;var ai=10,ii=13,oi=15,li=17,ci=18,di=19,ui=20,hi=21,mi=22,gi=24,pi=25,xi=26,fi=27,wi=28,bi=30,Bi=32,yi=33,vi=34,ji=35,Ci=37,Ni=38,Qi=39,Ui=40,ki=42,Fi=[9001,65288],Si="Ã—",Ei="Ã·",Ii=function(e){var A,t,s,r=function(e){var A,t,s,r,n,a=.75*e.length,i=e.length,o=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),c=Array.isArray(l)?l:new Uint8Array(l);for(A=0;A<i;A+=4)t=Za[e.charCodeAt(A)],s=Za[e.charCodeAt(A+1)],r=Za[e.charCodeAt(A+2)],n=Za[e.charCodeAt(A+3)],c[o++]=t<<2|s>>4,c[o++]=(15&s)<<4|r>>2,c[o++]=(3&r)<<6|63&n;return l}(e),n=Array.isArray(r)?function(e){for(var A=e.length,t=[],s=0;s<A;s+=4)t.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return t}(r):new Uint32Array(r),a=Array.isArray(r)?function(e){for(var A=e.length,t=[],s=0;s<A;s+=2)t.push(e[s+1]<<8|e[s]);return t}(r):new Uint16Array(r),i=Ai(a,12,n[4]/2),o=2===n[5]?Ai(a,(24+n[4])/2):(A=n,t=Math.ceil((24+n[4])/4),A.slice?A.slice(t,s):new Uint32Array(Array.prototype.slice.call(A,t,s)));return new ti(n[0],n[1],n[2],n[3],i,o)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Hi=[bi,36],_i=[1,2,3,5],Li=[ai,8],Ti=[fi,xi],Oi=_i.concat(Li),Mi=[Ni,Qi,Ui,vi,ji],Pi=[oi,ii],Di=function(e,A,t,s){var r=s[t];if(Array.isArray(e)?-1!==e.indexOf(r):e===r)for(var n=t;n<=s.length;){if((o=s[++n])===A)return!0;if(o!==ai)break}if(r===ai)for(n=t;n>0;){var a=s[--n];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var i=t;i<=s.length;){var o;if((o=s[++i])===A)return!0;if(o!==ai)break}if(a!==ai)break}return!1},Ki=function(e,A){for(var t=e;t>=0;){var s=A[t];if(s!==ai)return s;t--}return 0},Ri=function(e,A,t,s,r){if(0===t[s])return Si;var n=s-1;if(Array.isArray(r)&&!0===r[n])return Si;var a=n-1,i=n+1,o=A[n],l=a>=0?A[a]:0,c=A[i];if(2===o&&3===c)return Si;if(-1!==_i.indexOf(o))return"!";if(-1!==_i.indexOf(c))return Si;if(-1!==Li.indexOf(c))return Si;if(8===Ki(n,A))return Ei;if(11===Ii.get(e[n]))return Si;if((o===Bi||o===yi)&&11===Ii.get(e[i]))return Si;if(7===o||7===c)return Si;if(9===o)return Si;if(-1===[ai,ii,oi].indexOf(o)&&9===c)return Si;if(-1!==[li,ci,di,gi,wi].indexOf(c))return Si;if(Ki(n,A)===mi)return Si;if(Di(23,mi,n,A))return Si;if(Di([li,ci],hi,n,A))return Si;if(Di(12,12,n,A))return Si;if(o===ai)return Ei;if(23===o||23===c)return Si;if(16===c||16===o)return Ei;if(-1!==[ii,oi,hi].indexOf(c)||14===o)return Si;if(36===l&&-1!==Pi.indexOf(o))return Si;if(o===wi&&36===c)return Si;if(c===ui)return Si;if(-1!==Hi.indexOf(c)&&o===pi||-1!==Hi.indexOf(o)&&c===pi)return Si;if(o===fi&&-1!==[Ci,Bi,yi].indexOf(c)||-1!==[Ci,Bi,yi].indexOf(o)&&c===xi)return Si;if(-1!==Hi.indexOf(o)&&-1!==Ti.indexOf(c)||-1!==Ti.indexOf(o)&&-1!==Hi.indexOf(c))return Si;if(-1!==[fi,xi].indexOf(o)&&(c===pi||-1!==[mi,oi].indexOf(c)&&A[i+1]===pi)||-1!==[mi,oi].indexOf(o)&&c===pi||o===pi&&-1!==[pi,wi,gi].indexOf(c))return Si;if(-1!==[pi,wi,gi,li,ci].indexOf(c))for(var d=n;d>=0;){if((u=A[d])===pi)return Si;if(-1===[wi,gi].indexOf(u))break;d--}if(-1!==[fi,xi].indexOf(c))for(d=-1!==[li,ci].indexOf(o)?a:n;d>=0;){var u;if((u=A[d])===pi)return Si;if(-1===[wi,gi].indexOf(u))break;d--}if(Ni===o&&-1!==[Ni,Qi,vi,ji].indexOf(c)||-1!==[Qi,vi].indexOf(o)&&-1!==[Qi,Ui].indexOf(c)||-1!==[Ui,ji].indexOf(o)&&c===Ui)return Si;if(-1!==Mi.indexOf(o)&&-1!==[ui,xi].indexOf(c)||-1!==Mi.indexOf(c)&&o===fi)return Si;if(-1!==Hi.indexOf(o)&&-1!==Hi.indexOf(c))return Si;if(o===gi&&-1!==Hi.indexOf(c))return Si;if(-1!==Hi.concat(pi).indexOf(o)&&c===mi&&-1===Fi.indexOf(e[i])||-1!==Hi.concat(pi).indexOf(c)&&o===ci)return Si;if(41===o&&41===c){for(var h=t[n],m=1;h>0&&41===A[--h];)m++;if(m%2!=0)return Si}return o===Bi&&c===yi?Si:Ei},Vi=function(e,A){A||(A={lineBreak:"normal",wordBreak:"normal"});var t=function(e,A){void 0===A&&(A="strict");var t=[],s=[],r=[];return e.forEach(function(e,n){var a=Ii.get(e);if(a>50?(r.push(!0),a-=50):r.push(!1),-1!==["normal","auto","loose"].indexOf(A)&&-1!==[8208,8211,12316,12448].indexOf(e))return s.push(n),t.push(16);if(4===a||11===a){if(0===n)return s.push(n),t.push(bi);var i=t[n-1];return-1===Oi.indexOf(i)?(s.push(s[n-1]),t.push(i)):(s.push(n),t.push(bi))}return s.push(n),31===a?t.push("strict"===A?hi:Ci):a===ki||29===a?t.push(bi):43===a?e>=131072&&e<=196605||e>=196608&&e<=262141?t.push(Ci):t.push(bi):void t.push(a)}),[s,t,r]}(e,A.lineBreak),s=t[0],r=t[1],n=t[2];"break-all"!==A.wordBreak&&"break-word"!==A.wordBreak||(r=r.map(function(e){return-1!==[pi,bi,ki].indexOf(e)?Ci:e}));var a="keep-all"===A.wordBreak?n.map(function(A,t){return A&&e[t]>=19968&&e[t]<=40959}):void 0;return[s,r,a]},Gi=function(){function e(e,A,t,s){this.codePoints=e,this.required="!"===A,this.start=t,this.end=s}return e.prototype.slice=function(){return $a.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Wi=45,zi=43,$i=-1,Ji=function(e){return e>=48&&e<=57},qi=function(e){return Ji(e)||e>=65&&e<=70||e>=97&&e<=102},Yi=function(e){return 10===e||9===e||32===e},Xi=function(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||function(e){return e>=128}(e)||95===e},Zi=function(e){return Xi(e)||Ji(e)||e===Wi},eo=function(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e},Ao=function(e,A){return 92===e&&10!==A},to=function(e,A,t){return e===Wi?Xi(A)||Ao(A,t):!!Xi(e)||!(92!==e||!Ao(e,A))},so=function(e,A,t){return e===zi||e===Wi?!!Ji(A)||46===A&&Ji(t):Ji(46===e?A:e)},ro=function(e){var A=0,t=1;e[A]!==zi&&e[A]!==Wi||(e[A]===Wi&&(t=-1),A++);for(var s=[];Ji(e[A]);)s.push(e[A++]);var r=s.length?parseInt($a.apply(void 0,s),10):0;46===e[A]&&A++;for(var n=[];Ji(e[A]);)n.push(e[A++]);var a=n.length,i=a?parseInt($a.apply(void 0,n),10):0;69!==e[A]&&101!==e[A]||A++;var o=1;e[A]!==zi&&e[A]!==Wi||(e[A]===Wi&&(o=-1),A++);for(var l=[];Ji(e[A]);)l.push(e[A++]);var c=l.length?parseInt($a.apply(void 0,l),10):0;return t*(r+i*Math.pow(10,-a))*Math.pow(10,o*c)},no={type:2},ao={type:3},io={type:4},oo={type:13},lo={type:8},co={type:21},uo={type:9},ho={type:10},mo={type:11},go={type:12},po={type:14},xo={type:23},fo={type:1},wo={type:25},bo={type:24},Bo={type:26},yo={type:27},vo={type:28},jo={type:29},Co={type:31},No={type:32},Qo=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(za(e))},e.prototype.read=function(){for(var e=[],A=this.consumeToken();A!==No;)e.push(A),A=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var A=this.peekCodePoint(0),t=this.peekCodePoint(1),s=this.peekCodePoint(2);if(Zi(A)||Ao(t,s)){var r=to(A,t,s)?2:1;return{type:5,value:this.consumeName(),flags:r}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),oo;break;case 39:return this.consumeStringToken(39);case 40:return no;case 41:return ao;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),po;break;case zi:if(so(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return io;case Wi:var n=e,a=this.peekCodePoint(0),i=this.peekCodePoint(1);if(so(n,a,i))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(to(n,a,i))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===Wi&&62===i)return this.consumeCodePoint(),this.consumeCodePoint(),bo;break;case 46:if(so(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var o=this.consumeCodePoint();if(42===o&&47===(o=this.consumeCodePoint()))return this.consumeToken();if(o===$i)return this.consumeToken()}break;case 58:return Bo;case 59:return yo;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===Wi&&this.peekCodePoint(2)===Wi)return this.consumeCodePoint(),this.consumeCodePoint(),wo;break;case 64:var l=this.peekCodePoint(0),c=this.peekCodePoint(1),d=this.peekCodePoint(2);if(to(l,c,d))return{type:7,value:this.consumeName()};break;case 91:return vo;case 92:if(Ao(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return jo;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),lo;break;case 123:return mo;case 125:return go;case 117:case 85:var u=this.peekCodePoint(0),h=this.peekCodePoint(1);return u!==zi||!qi(h)&&63!==h||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),uo;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),co;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ho;break;case $i:return No}return Yi(e)?(this.consumeWhiteSpace(),Co):Ji(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Xi(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:$a(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],A=this.consumeCodePoint();qi(A)&&e.length<6;)e.push(A),A=this.consumeCodePoint();for(var t=!1;63===A&&e.length<6;)e.push(A),A=this.consumeCodePoint(),t=!0;if(t)return{type:30,start:parseInt($a.apply(void 0,e.map(function(e){return 63===e?48:e})),16),end:parseInt($a.apply(void 0,e.map(function(e){return 63===e?70:e})),16)};var s=parseInt($a.apply(void 0,e),16);if(this.peekCodePoint(0)===Wi&&qi(this.peekCodePoint(1))){this.consumeCodePoint(),A=this.consumeCodePoint();for(var r=[];qi(A)&&r.length<6;)r.push(A),A=this.consumeCodePoint();return{type:30,start:s,end:parseInt($a.apply(void 0,r),16)}}return{type:30,start:s,end:s}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===$i)return{type:22,value:""};var A=this.peekCodePoint(0);if(39===A||34===A){var t=this.consumeStringToken(this.consumeCodePoint());return 0===t.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===$i||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:t.value}):(this.consumeBadUrlRemnants(),xo)}for(;;){var s=this.consumeCodePoint();if(s===$i||41===s)return{type:22,value:$a.apply(void 0,e)};if(Yi(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===$i||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:$a.apply(void 0,e)}):(this.consumeBadUrlRemnants(),xo);if(34===s||39===s||40===s||eo(s))return this.consumeBadUrlRemnants(),xo;if(92===s){if(!Ao(s,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),xo;e.push(this.consumeEscapedCodePoint())}else e.push(s)}},e.prototype.consumeWhiteSpace=function(){for(;Yi(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||e===$i)return;Ao(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var A="";e>0;){var t=Math.min(5e4,e);A+=$a.apply(void 0,this._value.splice(0,t)),e-=t}return this._value.shift(),A},e.prototype.consumeStringToken=function(e){for(var A="",t=0;;){var s=this._value[t];if(s===$i||void 0===s||s===e)return{type:0,value:A+=this.consumeStringSlice(t)};if(10===s)return this._value.splice(0,t),fo;if(92===s){var r=this._value[t+1];r!==$i&&void 0!==r&&(10===r?(A+=this.consumeStringSlice(t),t=-1,this._value.shift()):Ao(s,r)&&(A+=this.consumeStringSlice(t),A+=$a(this.consumeEscapedCodePoint()),t=-1))}t++}},e.prototype.consumeNumber=function(){var e=[],A=4,t=this.peekCodePoint(0);for(t!==zi&&t!==Wi||e.push(this.consumeCodePoint());Ji(this.peekCodePoint(0));)e.push(this.consumeCodePoint());t=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(46===t&&Ji(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=8;Ji(this.peekCodePoint(0));)e.push(this.consumeCodePoint());t=this.peekCodePoint(0),s=this.peekCodePoint(1);var r=this.peekCodePoint(2);if((69===t||101===t)&&((s===zi||s===Wi)&&Ji(r)||Ji(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=8;Ji(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[ro(e),A]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),A=e[0],t=e[1],s=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);return to(s,r,n)?{type:15,number:A,flags:t,unit:this.consumeName()}:37===s?(this.consumeCodePoint(),{type:16,number:A,flags:t}):{type:17,number:A,flags:t}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qi(e)){for(var A=$a(e);qi(this.peekCodePoint(0))&&A.length<6;)A+=$a(this.consumeCodePoint());Yi(this.peekCodePoint(0))&&this.consumeCodePoint();var t=parseInt(A,16);return 0===t||function(e){return e>=55296&&e<=57343}(t)||t>1114111?65533:t}return e===$i?65533:e},e.prototype.consumeName=function(){for(var e="";;){var A=this.consumeCodePoint();if(Zi(A))e+=$a(A);else{if(!Ao(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),e;e+=$a(this.consumeEscapedCodePoint())}}},e}(),Uo=function(){function e(e){this._tokens=e}return e.create=function(A){var t=new Qo;return t.write(A),new e(t.read())},e.parseValue=function(A){return e.create(A).parseComponentValue()},e.parseValues=function(A){return e.create(A).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var A=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return A;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var A=this.consumeComponentValue();if(32===A.type)return e;e.push(A),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var A={type:e,values:[]},t=this.consumeToken();;){if(32===t.type||To(t,e))return A;this.reconsumeToken(t),A.values.push(this.consumeComponentValue()),t=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var A={name:e.value,values:[],type:18};;){var t=this.consumeToken();if(32===t.type||3===t.type)return A;this.reconsumeToken(t),A.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?No:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),ko=function(e){return 15===e.type},Fo=function(e){return 17===e.type},So=function(e){return 20===e.type},Eo=function(e){return 0===e.type},Io=function(e,A){return So(e)&&e.value===A},Ho=function(e){return 31!==e.type},_o=function(e){return 31!==e.type&&4!==e.type},Lo=function(e){var A=[],t=[];return e.forEach(function(e){if(4===e.type){if(0===t.length)throw new Error("Error parsing function args, zero tokens for arg");return A.push(t),void(t=[])}31!==e.type&&t.push(e)}),t.length&&A.push(t),A},To=function(e,A){return 11===A&&12===e.type||(28===A&&29===e.type||2===A&&3===e.type)},Oo=function(e){return 17===e.type||15===e.type},Mo=function(e){return 16===e.type||Oo(e)},Po=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Do={type:17,number:0,flags:4},Ko={type:16,number:50,flags:4},Ro={type:16,number:100,flags:4},Vo=function(e,A,t){var s=e[0],r=e[1];return[Go(s,A),Go(void 0!==r?r:s,t)]},Go=function(e,A){if(16===e.type)return e.number/100*A;if(ko(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},Wo="grad",zo="turn",$o=function(e,A){if(15===A.type)switch(A.unit){case"deg":return Math.PI*A.number/180;case Wo:return Math.PI/200*A.number;case"rad":return A.number;case zo:return 2*Math.PI*A.number}throw new Error("Unsupported angle type")},Jo=function(e){return 15===e.type&&("deg"===e.unit||e.unit===Wo||"rad"===e.unit||e.unit===zo)},qo=function(e){switch(e.filter(So).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Do,Do];case"to top":case"bottom":return Yo(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Do,Ro];case"to right":case"left":return Yo(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ro,Ro];case"to bottom":case"top":return Yo(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ro,Do];case"to left":case"right":return Yo(270)}return 0},Yo=function(e){return Math.PI*e/180},Xo=function(e,A){if(18===A.type){var t=al[A.name];if(void 0===t)throw new Error('Attempting to parse an unsupported color function "'+A.name+'"');return t(e,A.values)}if(5===A.type){if(3===A.value.length){var s=A.value.substring(0,1),r=A.value.substring(1,2),n=A.value.substring(2,3);return Al(parseInt(s+s,16),parseInt(r+r,16),parseInt(n+n,16),1)}if(4===A.value.length){s=A.value.substring(0,1),r=A.value.substring(1,2),n=A.value.substring(2,3);var a=A.value.substring(3,4);return Al(parseInt(s+s,16),parseInt(r+r,16),parseInt(n+n,16),parseInt(a+a,16)/255)}if(6===A.value.length){s=A.value.substring(0,2),r=A.value.substring(2,4),n=A.value.substring(4,6);return Al(parseInt(s,16),parseInt(r,16),parseInt(n,16),1)}if(8===A.value.length){s=A.value.substring(0,2),r=A.value.substring(2,4),n=A.value.substring(4,6),a=A.value.substring(6,8);return Al(parseInt(s,16),parseInt(r,16),parseInt(n,16),parseInt(a,16)/255)}}if(20===A.type){var i=ol[A.value.toUpperCase()];if(void 0!==i)return i}return ol.TRANSPARENT},Zo=function(e){return!(255&e)},el=function(e){var A=255&e,t=255&e>>8,s=255&e>>16,r=255&e>>24;return A<255?"rgba("+r+","+s+","+t+","+A/255+")":"rgb("+r+","+s+","+t+")"},Al=function(e,A,t,s){return(e<<24|A<<16|t<<8|Math.round(255*s))>>>0},tl=function(e,A){if(17===e.type)return e.number;if(16===e.type){var t=3===A?1:255;return 3===A?e.number/100*t:Math.round(e.number/100*t)}return 0},sl=function(e,A){var t=A.filter(_o);if(3===t.length){var s=t.map(tl),r=s[0],n=s[1],a=s[2];return Al(r,n,a,1)}if(4===t.length){var i=t.map(tl),o=(r=i[0],n=i[1],a=i[2],i[3]);return Al(r,n,a,o)}return 0};function rl(e,A,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(A-e)*t*6+e:t<.5?A:t<2/3?6*(A-e)*(2/3-t)+e:e}var nl=function(e,A){var t=A.filter(_o),s=t[0],r=t[1],n=t[2],a=t[3],i=(17===s.type?Yo(s.number):$o(e,s))/(2*Math.PI),o=Mo(r)?r.number/100:0,l=Mo(n)?n.number/100:0,c=void 0!==a&&Mo(a)?Go(a,1):1;if(0===o)return Al(255*l,255*l,255*l,1);var d=l<=.5?l*(o+1):l+o-l*o,u=2*l-d,h=rl(u,d,i+1/3),m=rl(u,d,i),g=rl(u,d,i-1/3);return Al(255*h,255*m,255*g,c)},al={hsl:nl,hsla:nl,rgb:sl,rgba:sl},il=function(e,A){return Xo(e,Uo.create(A).parseComponentValue())},ol={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ll={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,A){return A.map(function(e){if(So(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},cl={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dl=function(e,A){var t=Xo(e,A[0]),s=A[1];return s&&Mo(s)?{color:t,stop:s}:{color:t,stop:null}},ul=function(e,A){var t=e[0],s=e[e.length-1];null===t.stop&&(t.stop=Do),null===s.stop&&(s.stop=Ro);for(var r=[],n=0,a=0;a<e.length;a++){var i=e[a].stop;if(null!==i){var o=Go(i,A);o>n?r.push(o):r.push(n),n=o}else r.push(null)}var l=null;for(a=0;a<r.length;a++){var c=r[a];if(null===c)null===l&&(l=a);else if(null!==l){for(var d=a-l,u=(c-r[l-1])/(d+1),h=1;h<=d;h++)r[l+h-1]=u*h;l=null}}return e.map(function(e,t){return{color:e.color,stop:Math.max(Math.min(1,r[t]/A),0)}})},hl=function(e,A,t){var s="number"==typeof e?e:function(e,A,t){var s=A/2,r=t/2,n=Go(e[0],A)-s,a=r-Go(e[1],t);return(Math.atan2(a,n)+2*Math.PI)%(2*Math.PI)}(e,A,t),r=Math.abs(A*Math.sin(s))+Math.abs(t*Math.cos(s)),n=A/2,a=t/2,i=r/2,o=Math.sin(s-Math.PI/2)*i,l=Math.cos(s-Math.PI/2)*i;return[r,n-l,n+l,a-o,a+o]},ml=function(e,A){return Math.sqrt(e*e+A*A)},gl=function(e,A,t,s,r){return[[0,0],[0,A],[e,0],[e,A]].reduce(function(e,A){var n=A[0],a=A[1],i=ml(t-n,s-a);return(r?i<e.optimumDistance:i>e.optimumDistance)?{optimumCorner:A,optimumDistance:i}:e},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},pl=function(e,A){var t=Yo(180),s=[];return Lo(A).forEach(function(A,r){if(0===r){var n=A[0];if(20===n.type&&-1!==["top","left","right","bottom"].indexOf(n.value))return void(t=qo(A));if(Jo(n))return void(t=($o(e,n)+Yo(270))%Yo(360))}var a=dl(e,A);s.push(a)}),{angle:t,stops:s,type:1}},xl="closest-side",fl="farthest-side",wl="closest-corner",bl="farthest-corner",Bl="circle",yl="ellipse",vl="cover",jl="contain",Cl=function(e,A){var t=0,s=3,r=[],n=[];return Lo(A).forEach(function(A,a){var i=!0;if(0===a?i=A.reduce(function(e,A){if(So(A))switch(A.value){case"center":return n.push(Ko),!1;case"top":case"left":return n.push(Do),!1;case"right":case"bottom":return n.push(Ro),!1}else if(Mo(A)||Oo(A))return n.push(A),!1;return e},i):1===a&&(i=A.reduce(function(e,A){if(So(A))switch(A.value){case Bl:return t=0,!1;case yl:return t=1,!1;case jl:case xl:return s=0,!1;case fl:return s=1,!1;case wl:return s=2,!1;case vl:case bl:return s=3,!1}else if(Oo(A)||Mo(A))return Array.isArray(s)||(s=[]),s.push(A),!1;return e},i)),i){var o=dl(e,A);r.push(o)}}),{size:s,shape:t,stops:r,position:n,type:2}},Nl=function(e,A){if(22===A.type){var t={url:A.value,type:0};return e.cache.addImage(A.value),t}if(18===A.type){var s=Ul[A.name];if(void 0===s)throw new Error('Attempting to parse an unsupported image function "'+A.name+'"');return s(e,A.values)}throw new Error("Unsupported image type "+A.type)};var Ql,Ul={"linear-gradient":function(e,A){var t=Yo(180),s=[];return Lo(A).forEach(function(A,r){if(0===r){var n=A[0];if(20===n.type&&"to"===n.value)return void(t=qo(A));if(Jo(n))return void(t=$o(e,n))}var a=dl(e,A);s.push(a)}),{angle:t,stops:s,type:1}},"-moz-linear-gradient":pl,"-ms-linear-gradient":pl,"-o-linear-gradient":pl,"-webkit-linear-gradient":pl,"radial-gradient":function(e,A){var t=0,s=3,r=[],n=[];return Lo(A).forEach(function(A,a){var i=!0;if(0===a){var o=!1;i=A.reduce(function(e,A){if(o)if(So(A))switch(A.value){case"center":return n.push(Ko),e;case"top":case"left":return n.push(Do),e;case"right":case"bottom":return n.push(Ro),e}else(Mo(A)||Oo(A))&&n.push(A);else if(So(A))switch(A.value){case Bl:return t=0,!1;case yl:return t=1,!1;case"at":return o=!0,!1;case xl:return s=0,!1;case vl:case fl:return s=1,!1;case jl:case wl:return s=2,!1;case bl:return s=3,!1}else if(Oo(A)||Mo(A))return Array.isArray(s)||(s=[]),s.push(A),!1;return e},i)}if(i){var l=dl(e,A);r.push(l)}}),{size:s,shape:t,stops:r,position:n,type:2}},"-moz-radial-gradient":Cl,"-ms-radial-gradient":Cl,"-o-radial-gradient":Cl,"-webkit-radial-gradient":Cl,"-webkit-gradient":function(e,A){var t=Yo(180),s=[],r=1;return Lo(A).forEach(function(A,t){var n=A[0];if(0===t){if(So(n)&&"linear"===n.value)return void(r=1);if(So(n)&&"radial"===n.value)return void(r=2)}if(18===n.type)if("from"===n.name){var a=Xo(e,n.values[0]);s.push({stop:Do,color:a})}else if("to"===n.name){a=Xo(e,n.values[0]);s.push({stop:Ro,color:a})}else if("color-stop"===n.name){var i=n.values.filter(_o);if(2===i.length){a=Xo(e,i[1]);var o=i[0];Fo(o)&&s.push({stop:{type:16,number:100*o.number,flags:o.flags},color:a})}}}),1===r?{angle:(t+Yo(180))%Yo(360),stops:s,type:r}:{size:3,shape:0,stops:s,position:[],type:r}}},kl={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,A){if(0===A.length)return[];var t=A[0];return 20===t.type&&"none"===t.value?[]:A.filter(function(e){return _o(e)&&function(e){return!(20===e.type&&"none"===e.value||18===e.type&&!Ul[e.name])}(e)}).map(function(A){return Nl(e,A)})}},Fl={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,A){return A.map(function(e){if(So(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Sl={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,A){return Lo(A).map(function(e){return e.filter(Mo)}).map(Po)}},El={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,A){return Lo(A).map(function(e){return e.filter(So).map(function(e){return e.value}).join(" ")}).map(Il)}},Il=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Ql||(Ql={}));var Hl,_l={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,A){return Lo(A).map(function(e){return e.filter(Ll)})}},Ll=function(e){return So(e)||Mo(e)},Tl=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Ol=Tl("top"),Ml=Tl("right"),Pl=Tl("bottom"),Dl=Tl("left"),Kl=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,A){return Po(A.filter(Mo))}}},Rl=Kl("top-left"),Vl=Kl("top-right"),Gl=Kl("bottom-right"),Wl=Kl("bottom-left"),zl=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,A){switch(A){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},$l=zl("top"),Jl=zl("right"),ql=zl("bottom"),Yl=zl("left"),Xl=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return ko(A)?A.number:0}}},Zl=Xl("top"),ec=Xl("right"),Ac=Xl("bottom"),tc=Xl("left"),sc={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},rc={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,A){return"rtl"===A?1:0}},nc={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,A){return A.filter(So).reduce(function(e,A){return e|ac(A.value)},0)}},ac=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ic={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,A){switch(A){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},oc={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,A){return 20===A.type&&"normal"===A.value?0:17===A.type||15===A.type?A.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(Hl||(Hl={}));var lc,cc={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,A){return"strict"===A?Hl.STRICT:Hl.NORMAL}},dc={name:"line-height",initialValue:"normal",prefix:!1,type:4},uc=function(e,A){return So(e)&&"normal"===e.value?1.2*A:17===e.type?A*e.number:Mo(e)?Go(e,A):A},hc={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,A){return 20===A.type&&"none"===A.value?null:Nl(e,A)}},mc={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,A){return"inside"===A?0:1}},gc={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,A){switch(A){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},pc=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},xc=pc("top"),fc=pc("right"),wc=pc("bottom"),bc=pc("left"),Bc={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,A){return A.filter(So).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},yc={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,A){return"break-word"===A?"break-word":"normal"}},vc=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},jc=vc("top"),Cc=vc("right"),Nc=vc("bottom"),Qc=vc("left"),Uc={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,A){switch(A){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},kc={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,A){switch(A){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Fc={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,A){return 1===A.length&&Io(A[0],"none")?[]:Lo(A).map(function(A){for(var t={color:ol.TRANSPARENT,offsetX:Do,offsetY:Do,blur:Do},s=0,r=0;r<A.length;r++){var n=A[r];Oo(n)?(0===s?t.offsetX=n:1===s?t.offsetY=n:t.blur=n,s++):t.color=Xo(e,n)}return t})}},Sc={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,A){switch(A){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Ec={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,A){if(20===A.type&&"none"===A.value)return null;if(18===A.type){var t=Ic[A.name];if(void 0===t)throw new Error('Attempting to parse an unsupported transform function "'+A.name+'"');return t(A.values)}return null}},Ic={matrix:function(e){var A=e.filter(function(e){return 17===e.type}).map(function(e){return e.number});return 6===A.length?A:null},matrix3d:function(e){var A=e.filter(function(e){return 17===e.type}).map(function(e){return e.number}),t=A[0],s=A[1];A[2],A[3];var r=A[4],n=A[5];A[6],A[7],A[8],A[9],A[10],A[11];var a=A[12],i=A[13];return A[14],A[15],16===A.length?[t,s,r,n,a,i]:null}},Hc={type:16,number:50,flags:4},_c=[Hc,Hc],Lc={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,A){var t=A.filter(Mo);return 2!==t.length?_c:[t[0],t[1]]}},Tc={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,A){switch(A){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(lc||(lc={}));for(var Oc={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,A){switch(A){case"break-all":return lc.BREAK_ALL;case"keep-all":return lc.KEEP_ALL;default:return lc.NORMAL}}},Mc={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,A){if(20===A.type)return{auto:!0,order:0};if(Fo(A))return{auto:!1,order:A.number};throw new Error("Invalid z-index number parsed")}},Pc=function(e,A){if(15===A.type)switch(A.unit.toLowerCase()){case"s":return 1e3*A.number;case"ms":return A.number}throw new Error("Unsupported time type")},Dc={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,A){return Fo(A)?A.number:1}},Kc={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Rc={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,A){return A.filter(So).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},Vc={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,A){var t=[],s=[];return A.forEach(function(e){switch(e.type){case 20:case 0:t.push(e.value);break;case 17:t.push(e.number.toString());break;case 4:s.push(t.join(" ")),t.length=0}}),t.length&&s.push(t.join(" ")),s.map(function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"})}},Gc={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Wc={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,A){return Fo(A)?A.number:So(A)&&"bold"===A.value?700:400}},zc={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,A){return A.filter(So).map(function(e){return e.value})}},$c={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,A){switch(A){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Jc=function(e,A){return 0!==(e&A)},qc={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,A){if(0===A.length)return[];var t=A[0];return 20===t.type&&"none"===t.value?[]:A}},Yc={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,A){if(0===A.length)return null;var t=A[0];if(20===t.type&&"none"===t.value)return null;for(var s=[],r=A.filter(Ho),n=0;n<r.length;n++){var a=r[n],i=r[n+1];if(20===a.type){var o=i&&Fo(i)?i.number:1;s.push({counter:a.value,increment:o})}}return s}},Xc={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,A){if(0===A.length)return[];for(var t=[],s=A.filter(Ho),r=0;r<s.length;r++){var n=s[r],a=s[r+1];if(So(n)&&"none"!==n.value){var i=a&&Fo(a)?a.number:0;t.push({counter:n.value,reset:i})}}return t}},Zc={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,A){return A.filter(ko).map(function(A){return Pc(e,A)})}},ed={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,A){if(0===A.length)return null;var t=A[0];if(20===t.type&&"none"===t.value)return null;var s=[],r=A.filter(Eo);if(r.length%2!=0)return null;for(var n=0;n<r.length;n+=2){var a=r[n].value,i=r[n+1].value;s.push({open:a,close:i})}return s}},Ad=function(e,A,t){if(!e)return"";var s=e[Math.min(A,e.length-1)];return s?t?s.open:s.close:""},td={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,A){return 1===A.length&&Io(A[0],"none")?[]:Lo(A).map(function(A){for(var t={color:255,offsetX:Do,offsetY:Do,blur:Do,spread:Do,inset:!1},s=0,r=0;r<A.length;r++){var n=A[r];Io(n,"inset")?t.inset=!0:Oo(n)?(0===s?t.offsetX=n:1===s?t.offsetY=n:2===s?t.blur=n:t.spread=n,s++):t.color=Xo(e,n)}return t})}},sd={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,A){var t=[];return A.filter(So).forEach(function(e){switch(e.value){case"stroke":t.push(1);break;case"fill":t.push(0);break;case"markers":t.push(2)}}),[0,1,2].forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t}},rd={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},nd={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return ko(A)?A.number:0}},ad=function(){function e(e,A){var t,s;this.animationDuration=ld(e,Zc,A.animationDuration),this.backgroundClip=ld(e,ll,A.backgroundClip),this.backgroundColor=ld(e,cl,A.backgroundColor),this.backgroundImage=ld(e,kl,A.backgroundImage),this.backgroundOrigin=ld(e,Fl,A.backgroundOrigin),this.backgroundPosition=ld(e,Sl,A.backgroundPosition),this.backgroundRepeat=ld(e,El,A.backgroundRepeat),this.backgroundSize=ld(e,_l,A.backgroundSize),this.borderTopColor=ld(e,Ol,A.borderTopColor),this.borderRightColor=ld(e,Ml,A.borderRightColor),this.borderBottomColor=ld(e,Pl,A.borderBottomColor),this.borderLeftColor=ld(e,Dl,A.borderLeftColor),this.borderTopLeftRadius=ld(e,Rl,A.borderTopLeftRadius),this.borderTopRightRadius=ld(e,Vl,A.borderTopRightRadius),this.borderBottomRightRadius=ld(e,Gl,A.borderBottomRightRadius),this.borderBottomLeftRadius=ld(e,Wl,A.borderBottomLeftRadius),this.borderTopStyle=ld(e,$l,A.borderTopStyle),this.borderRightStyle=ld(e,Jl,A.borderRightStyle),this.borderBottomStyle=ld(e,ql,A.borderBottomStyle),this.borderLeftStyle=ld(e,Yl,A.borderLeftStyle),this.borderTopWidth=ld(e,Zl,A.borderTopWidth),this.borderRightWidth=ld(e,ec,A.borderRightWidth),this.borderBottomWidth=ld(e,Ac,A.borderBottomWidth),this.borderLeftWidth=ld(e,tc,A.borderLeftWidth),this.boxShadow=ld(e,td,A.boxShadow),this.color=ld(e,sc,A.color),this.direction=ld(e,rc,A.direction),this.display=ld(e,nc,A.display),this.float=ld(e,ic,A.cssFloat),this.fontFamily=ld(e,Vc,A.fontFamily),this.fontSize=ld(e,Gc,A.fontSize),this.fontStyle=ld(e,$c,A.fontStyle),this.fontVariant=ld(e,zc,A.fontVariant),this.fontWeight=ld(e,Wc,A.fontWeight),this.letterSpacing=ld(e,oc,A.letterSpacing),this.lineBreak=ld(e,cc,A.lineBreak),this.lineHeight=ld(e,dc,A.lineHeight),this.listStyleImage=ld(e,hc,A.listStyleImage),this.listStylePosition=ld(e,mc,A.listStylePosition),this.listStyleType=ld(e,gc,A.listStyleType),this.marginTop=ld(e,xc,A.marginTop),this.marginRight=ld(e,fc,A.marginRight),this.marginBottom=ld(e,wc,A.marginBottom),this.marginLeft=ld(e,bc,A.marginLeft),this.opacity=ld(e,Dc,A.opacity);var r=ld(e,Bc,A.overflow);this.overflowX=r[0],this.overflowY=r[r.length>1?1:0],this.overflowWrap=ld(e,yc,A.overflowWrap),this.paddingTop=ld(e,jc,A.paddingTop),this.paddingRight=ld(e,Cc,A.paddingRight),this.paddingBottom=ld(e,Nc,A.paddingBottom),this.paddingLeft=ld(e,Qc,A.paddingLeft),this.paintOrder=ld(e,sd,A.paintOrder),this.position=ld(e,kc,A.position),this.textAlign=ld(e,Uc,A.textAlign),this.textDecorationColor=ld(e,Kc,null!==(t=A.textDecorationColor)&&void 0!==t?t:A.color),this.textDecorationLine=ld(e,Rc,null!==(s=A.textDecorationLine)&&void 0!==s?s:A.textDecoration),this.textShadow=ld(e,Fc,A.textShadow),this.textTransform=ld(e,Sc,A.textTransform),this.transform=ld(e,Ec,A.transform),this.transformOrigin=ld(e,Lc,A.transformOrigin),this.visibility=ld(e,Tc,A.visibility),this.webkitTextStrokeColor=ld(e,rd,A.webkitTextStrokeColor),this.webkitTextStrokeWidth=ld(e,nd,A.webkitTextStrokeWidth),this.wordBreak=ld(e,Oc,A.wordBreak),this.zIndex=ld(e,Mc,A.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return Zo(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return Jc(this.display,4)||Jc(this.display,33554432)||Jc(this.display,268435456)||Jc(this.display,536870912)||Jc(this.display,67108864)||Jc(this.display,134217728)},e}(),id=function(e,A){this.content=ld(e,qc,A.content),this.quotes=ld(e,ed,A.quotes)},od=function(e,A){this.counterIncrement=ld(e,Yc,A.counterIncrement),this.counterReset=ld(e,Xc,A.counterReset)},ld=function(e,A,t){var s=new Qo,r=null!=t?t.toString():A.initialValue;s.write(r);var n=new Uo(s.read());switch(A.type){case 2:var a=n.parseComponentValue();return A.parse(e,So(a)?a.value:A.initialValue);case 0:return A.parse(e,n.parseComponentValue());case 1:return A.parse(e,n.parseComponentValues());case 4:return n.parseComponentValue();case 3:switch(A.format){case"angle":return $o(e,n.parseComponentValue());case"color":return Xo(e,n.parseComponentValue());case"image":return Nl(e,n.parseComponentValue());case"length":var i=n.parseComponentValue();return Oo(i)?i:Do;case"length-percentage":var o=n.parseComponentValue();return Mo(o)?o:Do;case"time":return Pc(e,n.parseComponentValue())}}},cd=function(e,A){var t=function(e){switch(e.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(e);return 1===t||A===t},dd=function(e,A){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,cd(A,3),this.styles=new ad(e,window.getComputedStyle(A,null)),gu(A)&&(this.styles.animationDuration.some(function(e){return e>0})&&(A.style.animationDuration="0s"),null!==this.styles.transform&&(A.style.transform="none")),this.bounds=Wa(this.context,A),cd(A,4)&&(this.flags|=16)},ud="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hd="undefined"==typeof Uint8Array?[]:new Uint8Array(256),md=0;md<64;md++)hd[ud.charCodeAt(md)]=md;for(var gd=function(e,A,t){return e.slice?e.slice(A,t):new Uint16Array(Array.prototype.slice.call(e,A,t))},pd=function(){function e(e,A,t,s,r,n){this.initialValue=e,this.errorValue=A,this.highStart=t,this.highValueIndex=s,this.index=r,this.data=n}return e.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=((A=this.index[e>>5])<<2)+(31&e),this.data[A];if(e<=65535)return A=((A=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[A];if(e<this.highStart)return A=2080+(e>>11),A=this.index[A],A+=e>>5&63,A=((A=this.index[A])<<2)+(31&e),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),xd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fd="undefined"==typeof Uint8Array?[]:new Uint8Array(256),wd=0;wd<64;wd++)fd[xd.charCodeAt(wd)]=wd;var bd,Bd=8,yd=9,vd=11,jd=12,Cd=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var t=e.length;if(!t)return"";for(var s=[],r=-1,n="";++r<t;){var a=e[r];a<=65535?s.push(a):(a-=65536,s.push(55296+(a>>10),a%1024+56320)),(r+1===t||s.length>16384)&&(n+=String.fromCharCode.apply(String,s),s.length=0)}return n},Nd=function(e){var A,t,s,r=function(e){var A,t,s,r,n,a=.75*e.length,i=e.length,o=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),c=Array.isArray(l)?l:new Uint8Array(l);for(A=0;A<i;A+=4)t=hd[e.charCodeAt(A)],s=hd[e.charCodeAt(A+1)],r=hd[e.charCodeAt(A+2)],n=hd[e.charCodeAt(A+3)],c[o++]=t<<2|s>>4,c[o++]=(15&s)<<4|r>>2,c[o++]=(3&r)<<6|63&n;return l}(e),n=Array.isArray(r)?function(e){for(var A=e.length,t=[],s=0;s<A;s+=4)t.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return t}(r):new Uint32Array(r),a=Array.isArray(r)?function(e){for(var A=e.length,t=[],s=0;s<A;s+=2)t.push(e[s+1]<<8|e[s]);return t}(r):new Uint16Array(r),i=gd(a,12,n[4]/2),o=2===n[5]?gd(a,(24+n[4])/2):(A=n,t=Math.ceil((24+n[4])/4),A.slice?A.slice(t,s):new Uint32Array(Array.prototype.slice.call(A,t,s)));return new pd(n[0],n[1],n[2],n[3],i,o)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Qd="Ã—",Ud=function(e){return Nd.get(e)},kd=function(e,A,t){var s=t-2,r=A[s],n=A[t-1],a=A[t];if(2===n&&3===a)return Qd;if(2===n||3===n||4===n)return"Ã·";if(2===a||3===a||4===a)return"Ã·";if(n===Bd&&-1!==[Bd,yd,vd,jd].indexOf(a))return Qd;if(!(n!==vd&&n!==yd||a!==yd&&10!==a))return Qd;if((n===jd||10===n)&&10===a)return Qd;if(13===a||5===a)return Qd;if(7===a)return Qd;if(1===n)return Qd;if(13===n&&14===a){for(;5===r;)r=A[--s];if(14===r)return Qd}if(15===n&&15===a){for(var i=0;15===r;)i++,r=A[--s];if(i%2==0)return Qd}return"Ã·"},Fd=function(e){var A=function(e){for(var A=[],t=0,s=e.length;t<s;){var r=e.charCodeAt(t++);if(r>=55296&&r<=56319&&t<s){var n=e.charCodeAt(t++);56320==(64512&n)?A.push(((1023&r)<<10)+(1023&n)+65536):(A.push(r),t--)}else A.push(r)}return A}(e),t=A.length,s=0,r=0,n=A.map(Ud);return{next:function(){if(s>=t)return{done:!0,value:null};for(var e=Qd;s<t&&(e=kd(0,n,++s))===Qd;);if(e!==Qd||s===t){var a=Cd.apply(null,A.slice(r,s));return r=s,{value:a,done:!1}}return{done:!0,value:null}}}},Sd=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},Ed=function(e,A,t,s,r){var n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),i=document.createElementNS(n,"foreignObject");return a.setAttributeNS(null,"width",e.toString()),a.setAttributeNS(null,"height",A.toString()),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),i.setAttributeNS(null,"x",t.toString()),i.setAttributeNS(null,"y",s.toString()),i.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(i),i.appendChild(r),a},Id=function(e){return new Promise(function(A,t){var s=new Image;s.onload=function(){return A(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},Hd={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var A=e.createRange();if(A.getBoundingClientRect){var t=e.createElement("boundtest");t.style.height="123px",t.style.display="block",e.body.appendChild(t),A.selectNode(t);var s=A.getBoundingClientRect(),r=Math.round(s.height);if(e.body.removeChild(t),123===r)return!0}}return!1}(document);return Object.defineProperty(Hd,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Hd.SUPPORT_RANGE_BOUNDS&&function(e){var A=e.createElement("boundtest");A.style.width="50px",A.style.display="block",A.style.fontSize="12px",A.style.letterSpacing="0px",A.style.wordSpacing="0px",e.body.appendChild(A);var t=e.createRange();A.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var s=A.firstChild,r=za(s.data).map(function(e){return $a(e)}),n=0,a={},i=r.every(function(e,A){t.setStart(s,n),t.setEnd(s,n+e.length);var r=t.getBoundingClientRect();n+=e.length;var i=r.x>a.x||r.y>a.y;return a=r,0===A||i});return e.body.removeChild(A),i}(document);return Object.defineProperty(Hd,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var A=new Image,t=e.createElement("canvas"),s=t.getContext("2d");if(!s)return!1;A.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(A,0,0),t.toDataURL()}catch(r){return!1}return!0}(document);return Object.defineProperty(Hd,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var A=e.createElement("canvas"),t=100;A.width=t,A.height=t;var s=A.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,t,t);var r=new Image,n=A.toDataURL();r.src=n;var a=Ed(t,t,0,0,r);return s.fillStyle="red",s.fillRect(0,0,t,t),Id(a).then(function(A){s.drawImage(A,0,0);var r=s.getImageData(0,0,t,t).data;s.fillStyle="red",s.fillRect(0,0,t,t);var a=e.createElement("div");return a.style.backgroundImage="url("+n+")",a.style.height=t+"px",Sd(r)?Id(Ed(t,t,0,0,a)):Promise.reject(!1)}).then(function(e){return s.drawImage(e,0,0),Sd(s.getImageData(0,0,t,t).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(Hd,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(Hd,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Hd,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Hd,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Hd,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},_d=function(e,A){this.text=e,this.bounds=A},Ld=function(e,A){var t=A.ownerDocument;if(t){var s=t.createElement("html2canvaswrapper");s.appendChild(A.cloneNode(!0));var r=A.parentNode;if(r){r.replaceChild(s,A);var n=Wa(e,s);return s.firstChild&&r.replaceChild(s.firstChild,s),n}}return Ga.EMPTY},Td=function(e,A,t){var s=e.ownerDocument;if(!s)throw new Error("Node has no owner document");var r=s.createRange();return r.setStart(e,A),r.setEnd(e,A+t),r},Od=function(e){if(Hd.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(A.segment(e)).map(function(e){return e.segment})}return function(e){for(var A,t=Fd(e),s=[];!(A=t.next()).done;)A.value&&s.push(A.value.slice());return s}(e)},Md=function(e,A){return 0!==A.letterSpacing?Od(e):function(e,A){if(Hd.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(e)).map(function(e){return e.segment})}return Dd(e,A)}(e,A)},Pd=[32,160,4961,65792,65793,4153,4241],Dd=function(e,A){for(var t,s=function(e,A){var t=za(e),s=Vi(t,A),r=s[0],n=s[1],a=s[2],i=t.length,o=0,l=0;return{next:function(){if(l>=i)return{done:!0,value:null};for(var e=Si;l<i&&(e=Ri(t,n,r,++l,a))===Si;);if(e!==Si||l===i){var A=new Gi(t,e,o,l);return o=l,{value:A,done:!1}}return{done:!0,value:null}}}}(e,{lineBreak:A.lineBreak,wordBreak:"break-word"===A.overflowWrap?"break-word":A.wordBreak}),r=[],n=function(){if(t.value){var e=t.value.slice(),A=za(e),s="";A.forEach(function(e){-1===Pd.indexOf(e)?s+=$a(e):(s.length&&r.push(s),r.push($a(e)),s="")}),s.length&&r.push(s)}};!(t=s.next()).done;)n();return r},Kd=function(e,A,t){this.text=Rd(A.data,t.textTransform),this.textBounds=function(e,A,t,s){var r=Md(A,t),n=[],a=0;return r.forEach(function(A){if(t.textDecorationLine.length||A.trim().length>0)if(Hd.SUPPORT_RANGE_BOUNDS){var r=Td(s,a,A.length).getClientRects();if(r.length>1){var i=Od(A),o=0;i.forEach(function(A){n.push(new _d(A,Ga.fromDOMRectList(e,Td(s,o+a,A.length).getClientRects()))),o+=A.length})}else n.push(new _d(A,Ga.fromDOMRectList(e,r)))}else{var l=s.splitText(A.length);n.push(new _d(A,Ld(e,s))),s=l}else Hd.SUPPORT_RANGE_BOUNDS||(s=s.splitText(A.length));a+=A.length}),n}(e,this.text,t,A)},Rd=function(e,A){switch(A){case 1:return e.toLowerCase();case 3:return e.replace(Vd,Gd);case 2:return e.toUpperCase();default:return e}},Vd=/(^|\s|:|-|\(|\))([a-z])/g,Gd=function(e,A,t){return e.length>0?A+t.toUpperCase():e},Wd=function(e){function A(A,t){var s=e.call(this,A,t)||this;return s.src=t.currentSrc||t.src,s.intrinsicWidth=t.naturalWidth,s.intrinsicHeight=t.naturalHeight,s.context.cache.addImage(s.src),s}return Pa(A,e),A}(dd),zd=function(e){function A(A,t){var s=e.call(this,A,t)||this;return s.canvas=t,s.intrinsicWidth=t.width,s.intrinsicHeight=t.height,s}return Pa(A,e),A}(dd),$d=function(e){function A(A,t){var s=e.call(this,A,t)||this,r=new XMLSerializer,n=Wa(A,t);return t.setAttribute("width",n.width+"px"),t.setAttribute("height",n.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(t)),s.intrinsicWidth=t.width.baseVal.value,s.intrinsicHeight=t.height.baseVal.value,s.context.cache.addImage(s.svg),s}return Pa(A,e),A}(dd),Jd=function(e){function A(A,t){var s=e.call(this,A,t)||this;return s.value=t.value,s}return Pa(A,e),A}(dd),qd=function(e){function A(A,t){var s=e.call(this,A,t)||this;return s.start=t.start,s.reversed="boolean"==typeof t.reversed&&!0===t.reversed,s}return Pa(A,e),A}(dd),Yd=[{type:15,flags:0,unit:"px",number:3}],Xd=[{type:16,flags:0,number:50}],Zd="checkbox",eu="radio",Au="password",tu=707406591,su=function(e){function A(A,t){var s,r,n,a=e.call(this,A,t)||this;switch(a.type=t.type.toLowerCase(),a.checked=t.checked,a.value=0===(r=(s=t).type===Au?new Array(s.value.length+1).join("â€¢"):s.value).length?s.placeholder||"":r,a.type!==Zd&&a.type!==eu||(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=(n=a.bounds).width>n.height?new Ga(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new Ga(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n),a.type){case Zd:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Yd;break;case eu:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Xd}return a}return Pa(A,e),A}(dd),ru=function(e){function A(A,t){var s=e.call(this,A,t)||this,r=t.options[t.selectedIndex||0];return s.value=r&&r.text||"",s}return Pa(A,e),A}(dd),nu=function(e){function A(A,t){var s=e.call(this,A,t)||this;return s.value=t.value,s}return Pa(A,e),A}(dd),au=function(e){function A(A,t){var s=e.call(this,A,t)||this;s.src=t.src,s.width=parseInt(t.width,10)||0,s.height=parseInt(t.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(t.contentWindow&&t.contentWindow.document&&t.contentWindow.document.documentElement){s.tree=cu(A,t.contentWindow.document.documentElement);var r=t.contentWindow.document.documentElement?il(A,getComputedStyle(t.contentWindow.document.documentElement).backgroundColor):ol.TRANSPARENT,n=t.contentWindow.document.body?il(A,getComputedStyle(t.contentWindow.document.body).backgroundColor):ol.TRANSPARENT;s.backgroundColor=Zo(r)?Zo(n)?s.styles.backgroundColor:n:r}}catch(a){}return s}return Pa(A,e),A}(dd),iu=["OL","UL","MENU"],ou=function(e,A,t,s){for(var r=A.firstChild,n=void 0;r;r=n)if(n=r.nextSibling,hu(r)&&r.data.trim().length>0)t.textNodes.push(new Kd(e,r,t.styles));else if(mu(r))if(ku(r)&&r.assignedNodes)r.assignedNodes().forEach(function(A){return ou(e,A,t,s)});else{var a=lu(e,r);a.styles.isVisible()&&(du(r,a,s)?a.flags|=4:uu(a.styles)&&(a.flags|=2),-1!==iu.indexOf(r.tagName)&&(a.flags|=8),t.elements.push(a),r.slot,r.shadowRoot?ou(e,r.shadowRoot,a,s):Qu(r)||bu(r)||Uu(r)||ou(e,r,a,s))}},lu=function(e,A){return ju(A)?new Wd(e,A):yu(A)?new zd(e,A):bu(A)?new $d(e,A):xu(A)?new Jd(e,A):fu(A)?new qd(e,A):wu(A)?new su(e,A):Uu(A)?new ru(e,A):Qu(A)?new nu(e,A):Cu(A)?new au(e,A):new dd(e,A)},cu=function(e,A){var t=lu(e,A);return t.flags|=4,ou(e,A,t,t),t},du=function(e,A,t){return A.styles.isPositionedWithZIndex()||A.styles.opacity<1||A.styles.isTransformed()||Bu(e)&&t.styles.isTransparent()},uu=function(e){return e.isPositioned()||e.isFloating()},hu=function(e){return e.nodeType===Node.TEXT_NODE},mu=function(e){return e.nodeType===Node.ELEMENT_NODE},gu=function(e){return mu(e)&&void 0!==e.style&&!pu(e)},pu=function(e){return"object"==typeof e.className},xu=function(e){return"LI"===e.tagName},fu=function(e){return"OL"===e.tagName},wu=function(e){return"INPUT"===e.tagName},bu=function(e){return"svg"===e.tagName},Bu=function(e){return"BODY"===e.tagName},yu=function(e){return"CANVAS"===e.tagName},vu=function(e){return"VIDEO"===e.tagName},ju=function(e){return"IMG"===e.tagName},Cu=function(e){return"IFRAME"===e.tagName},Nu=function(e){return"STYLE"===e.tagName},Qu=function(e){return"TEXTAREA"===e.tagName},Uu=function(e){return"SELECT"===e.tagName},ku=function(e){return"SLOT"===e.tagName},Fu=function(e){return e.tagName.indexOf("-")>0},Su=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var A=this.counters[e];return A&&A.length?A[A.length-1]:1},e.prototype.getCounterValues=function(e){var A=this.counters[e];return A||[]},e.prototype.pop=function(e){var A=this;e.forEach(function(e){return A.counters[e].pop()})},e.prototype.parse=function(e){var A=this,t=e.counterIncrement,s=e.counterReset,r=!0;null!==t&&t.forEach(function(e){var t=A.counters[e.counter];t&&0!==e.increment&&(r=!1,t.length||t.push(1),t[Math.max(0,t.length-1)]+=e.increment)});var n=[];return r&&s.forEach(function(e){var t=A.counters[e.counter];n.push(e.counter),t||(t=A.counters[e.counter]=[]),t.push(e.reset)}),n},e}(),Eu={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Iu={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Õ”","Õ“","Õ’","Õ‘","Õ","Õ","ÕŽ","Õ","ÕŒ","Õ‹","ÕŠ","Õ‰","Õˆ","Õ‡","Õ†","Õ…","Õ„","Õƒ","Õ‚","Õ","Õ€","Ô¿","Ô¾","Ô½","Ô¼","Ô»","Ôº","Ô¹","Ô¸","Ô·","Ô¶","Ôµ","Ô´","Ô³","Ô²","Ô±"]},Hu={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["×™×³","×˜×³","×—×³","×–×³","×•×³","×”×³","×“×³","×’×³","×‘×³","××³","×ª","×©","×¨","×§","×¦","×¤","×¢","×¡","× ","×ž","×œ","×›","×™×˜","×™×—","×™×–","×˜×–","×˜×•","×™","×˜","×—","×–","×•","×”","×“","×’","×‘","×"]},_u={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["áƒµ","áƒ°","áƒ¯","áƒ´","áƒ®","áƒ­","áƒ¬","áƒ«","áƒª","áƒ©","áƒ¨","áƒ§","áƒ¦","áƒ¥","áƒ¤","áƒ³","áƒ¢","áƒ¡","áƒ ","áƒŸ","áƒž","áƒ","áƒ²","áƒœ","áƒ›","áƒš","áƒ™","áƒ˜","áƒ—","áƒ±","áƒ–","áƒ•","áƒ”","áƒ“","áƒ’","áƒ‘","áƒ"]},Lu=function(e,A,t,s,r,n){return e<A||e>t?Gu(e,r,n.length>0):s.integers.reduce(function(A,t,r){for(;e>=t;)e-=t,A+=s.values[r];return A},"")+n},Tu=function(e,A,t,s){var r="";do{t||e--,r=s(e)+r,e/=A}while(e*A>=A);return r},Ou=function(e,A,t,s,r){var n=t-A+1;return(e<0?"-":"")+(Tu(Math.abs(e),n,s,function(e){return $a(Math.floor(e%n)+A)})+r)},Mu=function(e,A,t){void 0===t&&(t=". ");var s=A.length;return Tu(Math.abs(e),s,!1,function(e){return A[Math.floor(e%s)]})+t},Pu=function(e,A,t,s,r,n){if(e<-9999||e>9999)return Gu(e,4,r.length>0);var a=Math.abs(e),i=r;if(0===a)return A[0]+i;for(var o=0;a>0&&o<=4;o++){var l=a%10;0===l&&Jc(n,1)&&""!==i?i=A[l]+i:l>1||1===l&&0===o||1===l&&1===o&&Jc(n,2)||1===l&&1===o&&Jc(n,4)&&e>100||1===l&&o>1&&Jc(n,8)?i=A[l]+(o>0?t[o-1]:"")+i:1===l&&o>0&&(i=t[o-1]+i),a=Math.floor(a/10)}return(e<0?s:"")+i},Du="åç™¾åƒè¬",Ku="æ‹¾ä½°ä»Ÿè¬",Ru="ãƒžã‚¤ãƒŠã‚¹",Vu="ë§ˆì´ë„ˆìŠ¤",Gu=function(e,A,t){var s=t?". ":"",r=t?"ã€":"",n=t?", ":"",a=t?" ":"";switch(A){case 0:return"â€¢"+a;case 1:return"â—¦"+a;case 2:return"â—¾"+a;case 5:var i=Ou(e,48,57,!0,s);return i.length<4?"0"+i:i;case 4:return Mu(e,"ã€‡ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹",r);case 6:return Lu(e,1,3999,Eu,3,s).toLowerCase();case 7:return Lu(e,1,3999,Eu,3,s);case 8:return Ou(e,945,969,!1,s);case 9:return Ou(e,97,122,!1,s);case 10:return Ou(e,65,90,!1,s);case 11:return Ou(e,1632,1641,!0,s);case 12:case 49:return Lu(e,1,9999,Iu,3,s);case 35:return Lu(e,1,9999,Iu,3,s).toLowerCase();case 13:return Ou(e,2534,2543,!0,s);case 14:case 30:return Ou(e,6112,6121,!0,s);case 15:return Mu(e,"å­ä¸‘å¯…å¯è¾°å·³åˆæœªç”³é…‰æˆŒäº¥",r);case 16:return Mu(e,"ç”²ä¹™ä¸™ä¸æˆŠå·±åºšè¾›å£¬ç™¸",r);case 17:case 48:return Pu(e,"é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹",Du,"è² ",r,14);case 47:return Pu(e,"é›¶å£¹è²³åƒè‚†ä¼é™¸æŸ’æŒçŽ–",Ku,"è² ",r,15);case 42:return Pu(e,"é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹",Du,"è´Ÿ",r,14);case 41:return Pu(e,"é›¶å£¹è´°åè‚†ä¼é™†æŸ’æŒçŽ–",Ku,"è´Ÿ",r,15);case 26:return Pu(e,"ã€‡ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹","åç™¾åƒä¸‡",Ru,r,0);case 25:return Pu(e,"é›¶å£±å¼å‚å››ä¼å…­ä¸ƒå…«ä¹","æ‹¾ç™¾åƒä¸‡",Ru,r,7);case 31:return Pu(e,"ì˜ì¼ì´ì‚¼ì‚¬ì˜¤ìœ¡ì¹ íŒ”êµ¬","ì‹­ë°±ì²œë§Œ",Vu,n,7);case 33:return Pu(e,"é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹","åç™¾åƒè¬",Vu,n,0);case 32:return Pu(e,"é›¶å£¹è²³åƒå››äº”å…­ä¸ƒå…«ä¹","æ‹¾ç™¾åƒ",Vu,n,7);case 18:return Ou(e,2406,2415,!0,s);case 20:return Lu(e,1,19999,_u,3,s);case 21:return Ou(e,2790,2799,!0,s);case 22:return Ou(e,2662,2671,!0,s);case 22:return Lu(e,1,10999,Hu,3,s);case 23:return Mu(e,"ã‚ã„ã†ãˆãŠã‹ããã‘ã“ã•ã—ã™ã›ããŸã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»ã¾ã¿ã‚€ã‚ã‚‚ã‚„ã‚†ã‚ˆã‚‰ã‚Šã‚‹ã‚Œã‚ã‚ã‚ã‚‘ã‚’ã‚“");case 24:return Mu(e,"ã„ã‚ã¯ã«ã»ã¸ã¨ã¡ã‚Šã¬ã‚‹ã‚’ã‚ã‹ã‚ˆãŸã‚Œãã¤ã­ãªã‚‰ã‚€ã†ã‚ã®ãŠãã‚„ã¾ã‘ãµã“ãˆã¦ã‚ã•ãã‚†ã‚ã¿ã—ã‚‘ã²ã‚‚ã›ã™");case 27:return Ou(e,3302,3311,!0,s);case 28:return Mu(e,"ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒŽãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒžãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ°ãƒ±ãƒ²ãƒ³",r);case 29:return Mu(e,"ã‚¤ãƒ­ãƒãƒ‹ãƒ›ãƒ˜ãƒˆãƒãƒªãƒŒãƒ«ãƒ²ãƒ¯ã‚«ãƒ¨ã‚¿ãƒ¬ã‚½ãƒ„ãƒãƒŠãƒ©ãƒ ã‚¦ãƒ°ãƒŽã‚ªã‚¯ãƒ¤ãƒžã‚±ãƒ•ã‚³ã‚¨ãƒ†ã‚¢ã‚µã‚­ãƒ¦ãƒ¡ãƒŸã‚·ãƒ±ãƒ’ãƒ¢ã‚»ã‚¹",r);case 34:return Ou(e,3792,3801,!0,s);case 37:return Ou(e,6160,6169,!0,s);case 38:return Ou(e,4160,4169,!0,s);case 39:return Ou(e,2918,2927,!0,s);case 40:return Ou(e,1776,1785,!0,s);case 43:return Ou(e,3046,3055,!0,s);case 44:return Ou(e,3174,3183,!0,s);case 45:return Ou(e,3664,3673,!0,s);case 46:return Ou(e,3872,3881,!0,s);default:return Ou(e,48,57,!0,s)}},Wu="data-html2canvas-ignore",zu=function(){function e(e,A,t){if(this.context=e,this.options=t,this.scrolledElements=[],this.referenceElement=A,this.counters=new Su,this.quoteDepth=0,!A.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(A.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,A){var t=this,s=Ju(e,A);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var r=e.defaultView.pageXOffset,n=e.defaultView.pageYOffset,a=s.contentWindow,i=a.document,o=Xu(s).then(function(){return Ka(t,0,void 0,function(){var e,t;return Ra(this,function(r){switch(r.label){case 0:return this.scrolledElements.forEach(sh),a&&(a.scrollTo(A.left,A.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===A.top&&a.scrollX===A.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-A.left,a.scrollY-A.top,0,0))),e=this.options.onclone,void 0===(t=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:i.fonts&&i.fonts.ready?[4,i.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Yu(i)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then(function(){return e(i,t)}).then(function(){return s})]:[2,s]}})})});return i.open(),i.write(Ah(document.doctype)+"<html></html>"),th(this.referenceElement.ownerDocument,r,n),i.replaceChild(i.adoptNode(this.documentElement),i.documentElement),i.close(),o},e.prototype.createElementClone=function(e){if(cd(e,2),yu(e))return this.createCanvasClone(e);if(vu(e))return this.createVideoClone(e);if(Nu(e))return this.createStyleClone(e);var A=e.cloneNode(!1);return ju(A)&&(ju(e)&&e.currentSrc&&e.currentSrc!==e.src&&(A.src=e.currentSrc,A.srcset=""),"lazy"===A.loading&&(A.loading="eager")),Fu(A)?this.createCustomElementClone(A):A},e.prototype.createCustomElementClone=function(e){var A=document.createElement("html2canvascustomelement");return eh(e.style,A),A},e.prototype.createStyleClone=function(e){try{var A=e.sheet;if(A&&A.cssRules){var t=[].slice.call(A.cssRules,0).reduce(function(e,A){return A&&"string"==typeof A.cssText?e+A.cssText:e},""),s=e.cloneNode(!1);return s.textContent=t,s}}catch(r){if(this.context.logger.error("Unable to access cssRules property",r),"SecurityError"!==r.name)throw r}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var A;if(this.options.inlineImages&&e.ownerDocument){var t=e.ownerDocument.createElement("img");try{return t.src=e.toDataURL(),t}catch(o){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var r=e.getContext("2d"),n=s.getContext("2d");if(n)if(!this.options.allowTaint&&r)n.putImageData(r.getImageData(0,0,e.width,e.height),0,0);else{var a=null!==(A=e.getContext("webgl2"))&&void 0!==A?A:e.getContext("webgl");if(a){var i=a.getContextAttributes();!1===(null==i?void 0:i.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}n.drawImage(e,0,0)}return s}catch(o){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},e.prototype.createVideoClone=function(e){var A=e.ownerDocument.createElement("canvas");A.width=e.offsetWidth,A.height=e.offsetHeight;var t=A.getContext("2d");try{return t&&(t.drawImage(e,0,0,A.width,A.height),this.options.allowTaint||t.getImageData(0,0,A.width,A.height)),A}catch(r){this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},e.prototype.appendChildNode=function(e,A,t){mu(A)&&("SCRIPT"===A.tagName||A.hasAttribute(Wu)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(A))||this.options.copyStyles&&mu(A)&&Nu(A)||e.appendChild(this.cloneNode(A,t))},e.prototype.cloneChildNodes=function(e,A,t){for(var s=this,r=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;r;r=r.nextSibling)if(mu(r)&&ku(r)&&"function"==typeof r.assignedNodes){var n=r.assignedNodes();n.length&&n.forEach(function(e){return s.appendChildNode(A,e,t)})}else this.appendChildNode(A,r,t)},e.prototype.cloneNode=function(e,A){if(hu(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var t=e.ownerDocument.defaultView;if(t&&mu(e)&&(gu(e)||pu(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var r=t.getComputedStyle(e),n=t.getComputedStyle(e,":before"),a=t.getComputedStyle(e,":after");this.referenceElement===e&&gu(s)&&(this.clonedReferenceElement=s),Bu(s)&&ih(s);var i=this.counters.parse(new od(this.context,r)),o=this.resolvePseudoContent(e,s,n,bd.BEFORE);Fu(e)&&(A=!0),vu(e)||this.cloneChildNodes(e,s,A),o&&s.insertBefore(o,s.firstChild);var l=this.resolvePseudoContent(e,s,a,bd.AFTER);return l&&s.appendChild(l),this.counters.pop(i),(r&&(this.options.copyStyles||pu(e))&&!Cu(e)||A)&&eh(r,s),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Qu(e)||Uu(e))&&(Qu(s)||Uu(s))&&(s.value=e.value),s}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,A,t,s){var r=this;if(t){var n=t.content,a=A.ownerDocument;if(a&&n&&"none"!==n&&"-moz-alt-content"!==n&&"none"!==t.display){this.counters.parse(new od(this.context,t));var i=new id(this.context,t),o=a.createElement("html2canvaspseudoelement");eh(t,o),i.content.forEach(function(A){if(0===A.type)o.appendChild(a.createTextNode(A.value));else if(22===A.type){var t=a.createElement("img");t.src=A.value,t.style.opacity="1",o.appendChild(t)}else if(18===A.type){if("attr"===A.name){var s=A.values.filter(So);s.length&&o.appendChild(a.createTextNode(e.getAttribute(s[0].value)||""))}else if("counter"===A.name){var n=A.values.filter(_o),l=n[0],c=n[1];if(l&&So(l)){var d=r.counters.getCounterValue(l.value),u=c&&So(c)?gc.parse(r.context,c.value):3;o.appendChild(a.createTextNode(Gu(d,u,!1)))}}else if("counters"===A.name){var h=A.values.filter(_o),m=(l=h[0],h[1]);c=h[2];if(l&&So(l)){var g=r.counters.getCounterValues(l.value),p=c&&So(c)?gc.parse(r.context,c.value):3,x=m&&0===m.type?m.value:"",f=g.map(function(e){return Gu(e,p,!1)}).join(x);o.appendChild(a.createTextNode(f))}}}else if(20===A.type)switch(A.value){case"open-quote":o.appendChild(a.createTextNode(Ad(i.quotes,r.quoteDepth++,!0)));break;case"close-quote":o.appendChild(a.createTextNode(Ad(i.quotes,--r.quoteDepth,!1)));break;default:o.appendChild(a.createTextNode(A.value))}}),o.className=rh+" "+nh;var l=s===bd.BEFORE?" "+rh:" "+nh;return pu(A)?A.className.baseValue+=l:A.className+=l,o}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(bd||(bd={}));var $u,Ju=function(e,A){var t=e.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=A.width.toString(),t.height=A.height.toString(),t.scrolling="no",t.setAttribute(Wu,"true"),e.body.appendChild(t),t},qu=function(e){return new Promise(function(A){e.complete?A():e.src?(e.onload=A,e.onerror=A):A()})},Yu=function(e){return Promise.all([].slice.call(e.images,0).map(qu))},Xu=function(e){return new Promise(function(A,t){var s=e.contentWindow;if(!s)return t("No window assigned for iframe");var r=s.document;s.onload=e.onload=function(){s.onload=e.onload=null;var t=setInterval(function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(t),A(e))},50)}})},Zu=["all","d","content"],eh=function(e,A){for(var t=e.length-1;t>=0;t--){var s=e.item(t);-1===Zu.indexOf(s)&&A.style.setProperty(s,e.getPropertyValue(s))}return A},Ah=function(e){var A="";return e&&(A+="<!DOCTYPE ",e.name&&(A+=e.name),e.internalSubset&&(A+=e.internalSubset),e.publicId&&(A+='"'+e.publicId+'"'),e.systemId&&(A+='"'+e.systemId+'"'),A+=">"),A},th=function(e,A,t){e&&e.defaultView&&(A!==e.defaultView.pageXOffset||t!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(A,t)},sh=function(e){var A=e[0],t=e[1],s=e[2];A.scrollLeft=t,A.scrollTop=s},rh="___html2canvas___pseudoelement_before",nh="___html2canvas___pseudoelement_after",ah='{\n    content: "" !important;\n    display: none !important;\n}',ih=function(e){oh(e,"."+rh+":before"+ah+"\n         ."+nh+":after"+ah)},oh=function(e,A){var t=e.ownerDocument;if(t){var s=t.createElement("style");s.textContent=A,e.appendChild(s)}},lh=function(){function e(){}return e.getOrigin=function(A){var t=e._link;return t?(t.href=A,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},e.isSameOrigin=function(A){return e.getOrigin(A)===e._origin},e.setContext=function(A){e._link=A.document.createElement("a"),e._origin=e.getOrigin(A.location.href)},e._origin="about:blank",e}(),ch=function(){function e(e,A){this.context=e,this._options=A,this._cache={}}return e.prototype.addImage=function(e){var A=Promise.resolve();return this.has(e)?A:xh(e)||mh(e)?((this._cache[e]=this.loadImage(e)).catch(function(){}),A):A},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return Ka(this,0,void 0,function(){var A,t,s,r,n=this;return Ra(this,function(a){switch(a.label){case 0:return A=lh.isSameOrigin(e),t=!gh(e)&&!0===this._options.useCORS&&Hd.SUPPORT_CORS_IMAGES&&!A,s=!gh(e)&&!A&&!xh(e)&&"string"==typeof this._options.proxy&&Hd.SUPPORT_CORS_XHR&&!t,A||!1!==this._options.allowTaint||gh(e)||xh(e)||s||t?(r=e,s?[4,this.proxy(r)]:[3,2]):[2];case 1:r=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,A){var s=new Image;s.onload=function(){return e(s)},s.onerror=A,(ph(r)||t)&&(s.crossOrigin="anonymous"),s.src=r,!0===s.complete&&setTimeout(function(){return e(s)},500),n._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+n._options.imageTimeout+"ms) loading image")},n._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var A=this,t=this._options.proxy;if(!t)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(r,n){var a=Hd.SUPPORT_RESPONSE_TYPE?"blob":"text",i=new XMLHttpRequest;i.onload=function(){if(200===i.status)if("text"===a)r(i.response);else{var e=new FileReader;e.addEventListener("load",function(){return r(e.result)},!1),e.addEventListener("error",function(e){return n(e)},!1),e.readAsDataURL(i.response)}else n("Failed to proxy resource "+s+" with status code "+i.status)},i.onerror=n;var o=t.indexOf("?")>-1?"&":"?";if(i.open("GET",""+t+o+"url="+encodeURIComponent(e)+"&responseType="+a),"text"!==a&&i instanceof XMLHttpRequest&&(i.responseType=a),A._options.imageTimeout){var l=A._options.imageTimeout;i.timeout=l,i.ontimeout=function(){return n("Timed out ("+l+"ms) proxying "+s)}}i.send()})},e}(),dh=/^data:image\/svg\+xml/i,uh=/^data:image\/.*;base64,/i,hh=/^data:image\/.*/i,mh=function(e){return Hd.SUPPORT_SVG_DRAWING||!fh(e)},gh=function(e){return hh.test(e)},ph=function(e){return uh.test(e)},xh=function(e){return"blob"===e.substr(0,4)},fh=function(e){return"svg"===e.substr(-3).toLowerCase()||dh.test(e)},wh=function(){function e(e,A){this.type=0,this.x=e,this.y=A}return e.prototype.add=function(A,t){return new e(this.x+A,this.y+t)},e}(),bh=function(e,A,t){return new wh(e.x+(A.x-e.x)*t,e.y+(A.y-e.y)*t)},Bh=function(){function e(e,A,t,s){this.type=1,this.start=e,this.startControl=A,this.endControl=t,this.end=s}return e.prototype.subdivide=function(A,t){var s=bh(this.start,this.startControl,A),r=bh(this.startControl,this.endControl,A),n=bh(this.endControl,this.end,A),a=bh(s,r,A),i=bh(r,n,A),o=bh(a,i,A);return t?new e(this.start,s,a,o):new e(o,i,n,this.end)},e.prototype.add=function(A,t){return new e(this.start.add(A,t),this.startControl.add(A,t),this.endControl.add(A,t),this.end.add(A,t))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),yh=function(e){return 1===e.type},vh=function(e){var A=e.styles,t=e.bounds,s=Vo(A.borderTopLeftRadius,t.width,t.height),r=s[0],n=s[1],a=Vo(A.borderTopRightRadius,t.width,t.height),i=a[0],o=a[1],l=Vo(A.borderBottomRightRadius,t.width,t.height),c=l[0],d=l[1],u=Vo(A.borderBottomLeftRadius,t.width,t.height),h=u[0],m=u[1],g=[];g.push((r+i)/t.width),g.push((h+c)/t.width),g.push((n+m)/t.height),g.push((o+d)/t.height);var p=Math.max.apply(Math,g);p>1&&(r/=p,n/=p,i/=p,o/=p,c/=p,d/=p,h/=p,m/=p);var x=t.width-i,f=t.height-d,w=t.width-c,b=t.height-m,B=A.borderTopWidth,y=A.borderRightWidth,v=A.borderBottomWidth,j=A.borderLeftWidth,C=Go(A.paddingTop,e.bounds.width),N=Go(A.paddingRight,e.bounds.width),Q=Go(A.paddingBottom,e.bounds.width),U=Go(A.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=r>0||n>0?jh(t.left+j/3,t.top+B/3,r-j/3,n-B/3,$u.TOP_LEFT):new wh(t.left+j/3,t.top+B/3),this.topRightBorderDoubleOuterBox=r>0||n>0?jh(t.left+x,t.top+B/3,i-y/3,o-B/3,$u.TOP_RIGHT):new wh(t.left+t.width-y/3,t.top+B/3),this.bottomRightBorderDoubleOuterBox=c>0||d>0?jh(t.left+w,t.top+f,c-y/3,d-v/3,$u.BOTTOM_RIGHT):new wh(t.left+t.width-y/3,t.top+t.height-v/3),this.bottomLeftBorderDoubleOuterBox=h>0||m>0?jh(t.left+j/3,t.top+b,h-j/3,m-v/3,$u.BOTTOM_LEFT):new wh(t.left+j/3,t.top+t.height-v/3),this.topLeftBorderDoubleInnerBox=r>0||n>0?jh(t.left+2*j/3,t.top+2*B/3,r-2*j/3,n-2*B/3,$u.TOP_LEFT):new wh(t.left+2*j/3,t.top+2*B/3),this.topRightBorderDoubleInnerBox=r>0||n>0?jh(t.left+x,t.top+2*B/3,i-2*y/3,o-2*B/3,$u.TOP_RIGHT):new wh(t.left+t.width-2*y/3,t.top+2*B/3),this.bottomRightBorderDoubleInnerBox=c>0||d>0?jh(t.left+w,t.top+f,c-2*y/3,d-2*v/3,$u.BOTTOM_RIGHT):new wh(t.left+t.width-2*y/3,t.top+t.height-2*v/3),this.bottomLeftBorderDoubleInnerBox=h>0||m>0?jh(t.left+2*j/3,t.top+b,h-2*j/3,m-2*v/3,$u.BOTTOM_LEFT):new wh(t.left+2*j/3,t.top+t.height-2*v/3),this.topLeftBorderStroke=r>0||n>0?jh(t.left+j/2,t.top+B/2,r-j/2,n-B/2,$u.TOP_LEFT):new wh(t.left+j/2,t.top+B/2),this.topRightBorderStroke=r>0||n>0?jh(t.left+x,t.top+B/2,i-y/2,o-B/2,$u.TOP_RIGHT):new wh(t.left+t.width-y/2,t.top+B/2),this.bottomRightBorderStroke=c>0||d>0?jh(t.left+w,t.top+f,c-y/2,d-v/2,$u.BOTTOM_RIGHT):new wh(t.left+t.width-y/2,t.top+t.height-v/2),this.bottomLeftBorderStroke=h>0||m>0?jh(t.left+j/2,t.top+b,h-j/2,m-v/2,$u.BOTTOM_LEFT):new wh(t.left+j/2,t.top+t.height-v/2),this.topLeftBorderBox=r>0||n>0?jh(t.left,t.top,r,n,$u.TOP_LEFT):new wh(t.left,t.top),this.topRightBorderBox=i>0||o>0?jh(t.left+x,t.top,i,o,$u.TOP_RIGHT):new wh(t.left+t.width,t.top),this.bottomRightBorderBox=c>0||d>0?jh(t.left+w,t.top+f,c,d,$u.BOTTOM_RIGHT):new wh(t.left+t.width,t.top+t.height),this.bottomLeftBorderBox=h>0||m>0?jh(t.left,t.top+b,h,m,$u.BOTTOM_LEFT):new wh(t.left,t.top+t.height),this.topLeftPaddingBox=r>0||n>0?jh(t.left+j,t.top+B,Math.max(0,r-j),Math.max(0,n-B),$u.TOP_LEFT):new wh(t.left+j,t.top+B),this.topRightPaddingBox=i>0||o>0?jh(t.left+Math.min(x,t.width-y),t.top+B,x>t.width+y?0:Math.max(0,i-y),Math.max(0,o-B),$u.TOP_RIGHT):new wh(t.left+t.width-y,t.top+B),this.bottomRightPaddingBox=c>0||d>0?jh(t.left+Math.min(w,t.width-j),t.top+Math.min(f,t.height-v),Math.max(0,c-y),Math.max(0,d-v),$u.BOTTOM_RIGHT):new wh(t.left+t.width-y,t.top+t.height-v),this.bottomLeftPaddingBox=h>0||m>0?jh(t.left+j,t.top+Math.min(b,t.height-v),Math.max(0,h-j),Math.max(0,m-v),$u.BOTTOM_LEFT):new wh(t.left+j,t.top+t.height-v),this.topLeftContentBox=r>0||n>0?jh(t.left+j+U,t.top+B+C,Math.max(0,r-(j+U)),Math.max(0,n-(B+C)),$u.TOP_LEFT):new wh(t.left+j+U,t.top+B+C),this.topRightContentBox=i>0||o>0?jh(t.left+Math.min(x,t.width+j+U),t.top+B+C,x>t.width+j+U?0:i-j+U,o-(B+C),$u.TOP_RIGHT):new wh(t.left+t.width-(y+N),t.top+B+C),this.bottomRightContentBox=c>0||d>0?jh(t.left+Math.min(w,t.width-(j+U)),t.top+Math.min(f,t.height+B+C),Math.max(0,c-(y+N)),d-(v+Q),$u.BOTTOM_RIGHT):new wh(t.left+t.width-(y+N),t.top+t.height-(v+Q)),this.bottomLeftContentBox=h>0||m>0?jh(t.left+j+U,t.top+b,Math.max(0,h-(j+U)),m-(v+Q),$u.BOTTOM_LEFT):new wh(t.left+j+U,t.top+t.height-(v+Q))};!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}($u||($u={}));var jh=function(e,A,t,s,r){var n=(Math.sqrt(2)-1)/3*4,a=t*n,i=s*n,o=e+t,l=A+s;switch(r){case $u.TOP_LEFT:return new Bh(new wh(e,l),new wh(e,l-i),new wh(o-a,A),new wh(o,A));case $u.TOP_RIGHT:return new Bh(new wh(e,A),new wh(e+a,A),new wh(o,l-i),new wh(o,l));case $u.BOTTOM_RIGHT:return new Bh(new wh(o,A),new wh(o,A+i),new wh(e+a,l),new wh(e,l));case $u.BOTTOM_LEFT:default:return new Bh(new wh(o,l),new wh(o-a,l),new wh(e,A+i),new wh(e,A))}},Ch=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Nh=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Qh=function(e,A,t){this.offsetX=e,this.offsetY=A,this.matrix=t,this.type=0,this.target=6},Uh=function(e,A){this.path=e,this.target=A,this.type=1},kh=function(e){this.opacity=e,this.type=2,this.target=6},Fh=function(e){return 1===e.type},Sh=function(e,A){return e.length===A.length&&e.some(function(e,t){return e===A[t]})},Eh=function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},Ih=function(){function e(e,A){if(this.container=e,this.parent=A,this.effects=[],this.curves=new vh(this.container),this.container.styles.opacity<1&&this.effects.push(new kh(this.container.styles.opacity)),null!==this.container.styles.transform){var t=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform;this.effects.push(new Qh(t,s,r))}if(0!==this.container.styles.overflowX){var n=Ch(this.curves),a=Nh(this.curves);Sh(n,a)?this.effects.push(new Uh(n,6)):(this.effects.push(new Uh(n,2)),this.effects.push(new Uh(a,4)))}}return e.prototype.getEffects=function(e){for(var A=-1===[2,3].indexOf(this.container.styles.position),t=this.parent,s=this.effects.slice(0);t;){var r=t.effects.filter(function(e){return!Fh(e)});if(A||0!==t.container.styles.position||!t.parent){if(s.unshift.apply(s,r),A=-1===[2,3].indexOf(t.container.styles.position),0!==t.container.styles.overflowX){var n=Ch(t.curves),a=Nh(t.curves);Sh(n,a)||s.unshift(new Uh(a,6))}}else s.unshift.apply(s,r);t=t.parent}return s.filter(function(A){return Jc(A.target,e)})},e}(),Hh=function(e,A,t,s){e.container.elements.forEach(function(r){var n=Jc(r.flags,4),a=Jc(r.flags,2),i=new Ih(r,e);Jc(r.styles.display,2048)&&s.push(i);var o=Jc(r.flags,8)?[]:s;if(n||a){var l=n||r.styles.isPositioned()?t:A,c=new Eh(i);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var d=r.styles.zIndex.order;if(d<0){var u=0;l.negativeZIndex.some(function(e,A){return d>e.element.container.styles.zIndex.order?(u=A,!1):u>0}),l.negativeZIndex.splice(u,0,c)}else if(d>0){var h=0;l.positiveZIndex.some(function(e,A){return d>=e.element.container.styles.zIndex.order?(h=A+1,!1):h>0}),l.positiveZIndex.splice(h,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else r.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);Hh(i,c,n?c:t,o)}else r.styles.isInlineLevel()?A.inlineLevel.push(i):A.nonInlineLevel.push(i),Hh(i,A,t,o);Jc(r.flags,8)&&_h(r,o)})},_h=function(e,A){for(var t=e instanceof qd?e.start:1,s=e instanceof qd&&e.reversed,r=0;r<A.length;r++){var n=A[r];n.container instanceof Jd&&"number"==typeof n.container.value&&0!==n.container.value&&(t=n.container.value),n.listValue=Gu(t,n.container.styles.listStyleType,!0),t+=s?-1:1}},Lh=function(e,A){switch(A){case 0:return Oh(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Oh(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Oh(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Oh(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Th=function(e,A){var t=[];return yh(e)?t.push(e.subdivide(.5,!1)):t.push(e),yh(A)?t.push(A.subdivide(.5,!0)):t.push(A),t},Oh=function(e,A,t,s){var r=[];return yh(e)?r.push(e.subdivide(.5,!1)):r.push(e),yh(t)?r.push(t.subdivide(.5,!0)):r.push(t),yh(s)?r.push(s.subdivide(.5,!0).reverse()):r.push(s),yh(A)?r.push(A.subdivide(.5,!1).reverse()):r.push(A),r},Mh=function(e){var A=e.bounds,t=e.styles;return A.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Ph=function(e){var A=e.styles,t=e.bounds,s=Go(A.paddingLeft,t.width),r=Go(A.paddingRight,t.width),n=Go(A.paddingTop,t.width),a=Go(A.paddingBottom,t.width);return t.add(s+A.borderLeftWidth,n+A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth+s+r),-(A.borderTopWidth+A.borderBottomWidth+n+a))},Dh=function(e,A,t){var s=function(e,A){return 0===e?A.bounds:2===e?Ph(A):Mh(A)}(Gh(e.styles.backgroundOrigin,A),e),r=function(e,A){return 0===e?A.bounds:2===e?Ph(A):Mh(A)}(Gh(e.styles.backgroundClip,A),e),n=Vh(Gh(e.styles.backgroundSize,A),t,s),a=n[0],i=n[1],o=Vo(Gh(e.styles.backgroundPosition,A),s.width-a,s.height-i);return[Wh(Gh(e.styles.backgroundRepeat,A),o,n,s,r),Math.round(s.left+o[0]),Math.round(s.top+o[1]),a,i]},Kh=function(e){return So(e)&&e.value===Ql.AUTO},Rh=function(e){return"number"==typeof e},Vh=function(e,A,t){var s=A[0],r=A[1],n=A[2],a=e[0],i=e[1];if(!a)return[0,0];if(Mo(a)&&i&&Mo(i))return[Go(a,t.width),Go(i,t.height)];var o=Rh(n);if(So(a)&&(a.value===Ql.CONTAIN||a.value===Ql.COVER))return Rh(n)?t.width/t.height<n!=(a.value===Ql.COVER)?[t.width,t.width/n]:[t.height*n,t.height]:[t.width,t.height];var l=Rh(s),c=Rh(r),d=l||c;if(Kh(a)&&(!i||Kh(i)))return l&&c?[s,r]:o||d?d&&o?[l?s:r*n,c?r:s/n]:[l?s:t.width,c?r:t.height]:[t.width,t.height];if(o){var u=0,h=0;return Mo(a)?u=Go(a,t.width):Mo(i)&&(h=Go(i,t.height)),Kh(a)?u=h*n:i&&!Kh(i)||(h=u/n),[u,h]}var m=null,g=null;if(Mo(a)?m=Go(a,t.width):i&&Mo(i)&&(g=Go(i,t.height)),null===m||i&&!Kh(i)||(g=l&&c?m/s*r:t.height),null!==g&&Kh(a)&&(m=l&&c?g/r*s:t.width),null!==m&&null!==g)return[m,g];throw new Error("Unable to calculate background-size for element")},Gh=function(e,A){var t=e[A];return void 0===t?e[0]:t},Wh=function(e,A,t,s,r){var n=A[0],a=A[1],i=t[0],o=t[1];switch(e){case 2:return[new wh(Math.round(s.left),Math.round(s.top+a)),new wh(Math.round(s.left+s.width),Math.round(s.top+a)),new wh(Math.round(s.left+s.width),Math.round(o+s.top+a)),new wh(Math.round(s.left),Math.round(o+s.top+a))];case 3:return[new wh(Math.round(s.left+n),Math.round(s.top)),new wh(Math.round(s.left+n+i),Math.round(s.top)),new wh(Math.round(s.left+n+i),Math.round(s.height+s.top)),new wh(Math.round(s.left+n),Math.round(s.height+s.top))];case 1:return[new wh(Math.round(s.left+n),Math.round(s.top+a)),new wh(Math.round(s.left+n+i),Math.round(s.top+a)),new wh(Math.round(s.left+n+i),Math.round(s.top+a+o)),new wh(Math.round(s.left+n),Math.round(s.top+a+o))];default:return[new wh(Math.round(r.left),Math.round(r.top)),new wh(Math.round(r.left+r.width),Math.round(r.top)),new wh(Math.round(r.left+r.width),Math.round(r.height+r.top)),new wh(Math.round(r.left),Math.round(r.height+r.top))]}},zh="Hidden Text",$h=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,A){var t=this._document.createElement("div"),s=this._document.createElement("img"),r=this._document.createElement("span"),n=this._document.body;t.style.visibility="hidden",t.style.fontFamily=e,t.style.fontSize=A,t.style.margin="0",t.style.padding="0",t.style.whiteSpace="nowrap",n.appendChild(t),s.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",r.style.fontFamily=e,r.style.fontSize=A,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(zh)),t.appendChild(r),t.appendChild(s);var a=s.offsetTop-r.offsetTop+2;t.removeChild(r),t.appendChild(this._document.createTextNode(zh)),t.style.lineHeight="normal",s.style.verticalAlign="super";var i=s.offsetTop-t.offsetTop+2;return n.removeChild(t),{baseline:a,middle:i}},e.prototype.getMetrics=function(e,A){var t=e+" "+A;return void 0===this._data[t]&&(this._data[t]=this.parseMetrics(e,A)),this._data[t]},e}(),Jh=function(e,A){this.context=e,this.options=A},qh=function(e){function A(A,t){var s=e.call(this,A,t)||this;return s._activeEffects=[],s.canvas=t.canvas?t.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),t.canvas||(s.canvas.width=Math.floor(t.width*t.scale),s.canvas.height=Math.floor(t.height*t.scale),s.canvas.style.width=t.width+"px",s.canvas.style.height=t.height+"px"),s.fontMetrics=new $h(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-t.x,-t.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+t.width+"x"+t.height+") with scale "+t.scale),s}return Pa(A,e),A.prototype.applyEffects=function(e){for(var A=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return A.applyEffect(e)})},A.prototype.applyEffect=function(e){this.ctx.save(),function(e){return 2===e.type}(e)&&(this.ctx.globalAlpha=e.opacity),function(e){return 0===e.type}(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Fh(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},A.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},A.prototype.renderStack=function(e){return Ka(this,0,void 0,function(){return Ra(this,function(A){switch(A.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},A.prototype.renderNode=function(e){return Ka(this,0,void 0,function(){return Ra(this,function(A){switch(A.label){case 0:return Jc(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return A.sent(),[4,this.renderNodeContent(e)];case 2:A.sent(),A.label=3;case 3:return[2]}})})},A.prototype.renderTextWithLetterSpacing=function(e,A,t){var s=this;0===A?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+t):Od(e.text).reduce(function(A,r){return s.ctx.fillText(r,A,e.bounds.top+t),A+s.ctx.measureText(r).width},e.bounds.left)},A.prototype.createFontStyle=function(e){var A=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),t=Am(e.fontFamily).join(", "),s=ko(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,A,e.fontWeight,s,t].join(" "),t,s]},A.prototype.renderTextNode=function(e,A){return Ka(this,0,void 0,function(){var t,s,r,n,a,i,o,l,c=this;return Ra(this,function(d){return t=this.createFontStyle(A),s=t[0],r=t[1],n=t[2],this.ctx.font=s,this.ctx.direction=1===A.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(r,n),i=a.baseline,o=a.middle,l=A.paintOrder,e.textBounds.forEach(function(e){l.forEach(function(t){switch(t){case 0:c.ctx.fillStyle=el(A.color),c.renderTextWithLetterSpacing(e,A.letterSpacing,i);var s=A.textShadow;s.length&&e.text.trim().length&&(s.slice(0).reverse().forEach(function(t){c.ctx.shadowColor=el(t.color),c.ctx.shadowOffsetX=t.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=t.offsetY.number*c.options.scale,c.ctx.shadowBlur=t.blur.number,c.renderTextWithLetterSpacing(e,A.letterSpacing,i)}),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),A.textDecorationLine.length&&(c.ctx.fillStyle=el(A.textDecorationColor||A.color),A.textDecorationLine.forEach(function(A){switch(A){case 1:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+i),e.bounds.width,1);break;case 2:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:c.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+o),e.bounds.width,1)}}));break;case 1:A.webkitTextStrokeWidth&&e.text.trim().length&&(c.ctx.strokeStyle=el(A.webkitTextStrokeColor),c.ctx.lineWidth=A.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+i)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter"}})}),[2]})})},A.prototype.renderReplacedElement=function(e,A,t){if(t&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var s=Ph(e),r=Nh(A);this.path(r),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(t,0,0,e.intrinsicWidth,e.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},A.prototype.renderNodeContent=function(e){return Ka(this,0,void 0,function(){var t,s,r,n,a,i,o,l,c,d,u,h,m,g,p,x,f,w;return Ra(this,function(b){switch(b.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,s=e.curves,r=t.styles,n=0,a=t.textNodes,b.label=1;case 1:return n<a.length?(i=a[n],[4,this.renderTextNode(i,r)]):[3,4];case 2:b.sent(),b.label=3;case 3:return n++,[3,1];case 4:if(!(t instanceof Wd))return[3,8];b.label=5;case 5:return b.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return p=b.sent(),this.renderReplacedElement(t,s,p),[3,8];case 7:return b.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof zd&&this.renderReplacedElement(t,s,t.canvas),!(t instanceof $d))return[3,12];b.label=9;case 9:return b.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return p=b.sent(),this.renderReplacedElement(t,s,p),[3,12];case 11:return b.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof au&&t.tree?[4,new A(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:o=b.sent(),t.width&&t.height&&this.ctx.drawImage(o,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),b.label=14;case 14:if(t instanceof su&&(l=Math.min(t.bounds.width,t.bounds.height),t.type===Zd?t.checked&&(this.ctx.save(),this.path([new wh(t.bounds.left+.39363*l,t.bounds.top+.79*l),new wh(t.bounds.left+.16*l,t.bounds.top+.5549*l),new wh(t.bounds.left+.27347*l,t.bounds.top+.44071*l),new wh(t.bounds.left+.39694*l,t.bounds.top+.5649*l),new wh(t.bounds.left+.72983*l,t.bounds.top+.23*l),new wh(t.bounds.left+.84*l,t.bounds.top+.34085*l),new wh(t.bounds.left+.39363*l,t.bounds.top+.79*l)]),this.ctx.fillStyle=el(tu),this.ctx.fill(),this.ctx.restore()):t.type===eu&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+l/2,t.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=el(tu),this.ctx.fill(),this.ctx.restore())),Yh(t)&&t.value.length){switch(c=this.createFontStyle(r),f=c[0],d=c[1],u=this.fontMetrics.getMetrics(f,d).baseline,this.ctx.font=f,this.ctx.fillStyle=el(r.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Zh(t.styles.textAlign),w=Ph(t),h=0,t.styles.textAlign){case 1:h+=w.width/2;break;case 2:h+=w.width}m=w.add(h,0,0,-w.height/2+1),this.ctx.save(),this.path([new wh(w.left,w.top),new wh(w.left+w.width,w.top),new wh(w.left+w.width,w.top+w.height),new wh(w.left,w.top+w.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new _d(t.value,m),r.letterSpacing,u),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Jc(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(g=t.styles.listStyleImage).type)return[3,18];p=void 0,x=g.url,b.label=15;case 15:return b.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return p=b.sent(),this.ctx.drawImage(p,t.bounds.left-(p.width+10),t.bounds.top),[3,18];case 17:return b.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(f=this.createFontStyle(r)[0],this.ctx.font=f,this.ctx.fillStyle=el(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",w=new Ga(t.bounds.left,t.bounds.top+Go(t.styles.paddingTop,t.bounds.width),t.bounds.width,uc(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new _d(e.listValue,w),r.letterSpacing,uc(r.lineHeight,r.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),b.label=20;case 20:return[2]}})})},A.prototype.renderStackContent=function(e){return Ka(this,0,void 0,function(){var A,t,s,r,n,a,i,o,l,c,d,u,h,m,g;return Ra(this,function(p){switch(p.label){case 0:return Jc(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:p.sent(),A=0,t=e.negativeZIndex,p.label=2;case 2:return A<t.length?(g=t[A],[4,this.renderStack(g)]):[3,5];case 3:p.sent(),p.label=4;case 4:return A++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:p.sent(),s=0,r=e.nonInlineLevel,p.label=7;case 7:return s<r.length?(g=r[s],[4,this.renderNode(g)]):[3,10];case 8:p.sent(),p.label=9;case 9:return s++,[3,7];case 10:n=0,a=e.nonPositionedFloats,p.label=11;case 11:return n<a.length?(g=a[n],[4,this.renderStack(g)]):[3,14];case 12:p.sent(),p.label=13;case 13:return n++,[3,11];case 14:i=0,o=e.nonPositionedInlineLevel,p.label=15;case 15:return i<o.length?(g=o[i],[4,this.renderStack(g)]):[3,18];case 16:p.sent(),p.label=17;case 17:return i++,[3,15];case 18:l=0,c=e.inlineLevel,p.label=19;case 19:return l<c.length?(g=c[l],[4,this.renderNode(g)]):[3,22];case 20:p.sent(),p.label=21;case 21:return l++,[3,19];case 22:d=0,u=e.zeroOrAutoZIndexOrTransformedOrOpacity,p.label=23;case 23:return d<u.length?(g=u[d],[4,this.renderStack(g)]):[3,26];case 24:p.sent(),p.label=25;case 25:return d++,[3,23];case 26:h=0,m=e.positiveZIndex,p.label=27;case 27:return h<m.length?(g=m[h],[4,this.renderStack(g)]):[3,30];case 28:p.sent(),p.label=29;case 29:return h++,[3,27];case 30:return[2]}})})},A.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},A.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},A.prototype.formatPath=function(e){var A=this;e.forEach(function(e,t){var s=yh(e)?e.start:e;0===t?A.ctx.moveTo(s.x,s.y):A.ctx.lineTo(s.x,s.y),yh(e)&&A.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},A.prototype.renderRepeat=function(e,A,t,s){this.path(e),this.ctx.fillStyle=A,this.ctx.translate(t,s),this.ctx.fill(),this.ctx.translate(-t,-s)},A.prototype.resizeImage=function(e,A,t){var s;if(e.width===A&&e.height===t)return e;var r=(null!==(s=this.canvas.ownerDocument)&&void 0!==s?s:document).createElement("canvas");return r.width=Math.max(1,A),r.height=Math.max(1,t),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,A,t),r},A.prototype.renderBackgroundImage=function(e){return Ka(this,0,void 0,function(){var A,t,s,r,n,a;return Ra(this,function(i){switch(i.label){case 0:A=e.styles.backgroundImage.length-1,t=function(t){var r,n,a,i,o,l,c,d,u,h,m,g,p,x,f,w,b,B,y,v,j,C,N,Q,U,k,F,S,E,I,H;return Ra(this,function(_){switch(_.label){case 0:if(0!==t.type)return[3,5];r=void 0,n=t.url,_.label=1;case 1:return _.trys.push([1,3,,4]),[4,s.context.cache.match(n)];case 2:return r=_.sent(),[3,4];case 3:return _.sent(),s.context.logger.error("Error loading background-image "+n),[3,4];case 4:return r&&(a=Dh(e,A,[r.width,r.height,r.width/r.height]),w=a[0],C=a[1],N=a[2],y=a[3],v=a[4],x=s.ctx.createPattern(s.resizeImage(r,y,v),"repeat"),s.renderRepeat(w,x,C,N)),[3,6];case 5:1===t.type?(i=Dh(e,A,[null,null,null]),w=i[0],C=i[1],N=i[2],y=i[3],v=i[4],o=hl(t.angle,y,v),l=o[0],c=o[1],d=o[2],u=o[3],h=o[4],(m=document.createElement("canvas")).width=y,m.height=v,g=m.getContext("2d"),p=g.createLinearGradient(c,u,d,h),ul(t.stops,l).forEach(function(e){return p.addColorStop(e.stop,el(e.color))}),g.fillStyle=p,g.fillRect(0,0,y,v),y>0&&v>0&&(x=s.ctx.createPattern(m,"repeat"),s.renderRepeat(w,x,C,N))):function(e){return 2===e.type}(t)&&(f=Dh(e,A,[null,null,null]),w=f[0],b=f[1],B=f[2],y=f[3],v=f[4],j=0===t.position.length?[Ko]:t.position,C=Go(j[0],y),N=Go(j[j.length-1],v),Q=function(e,A,t,s,r){var n=0,a=0;switch(e.size){case 0:0===e.shape?n=a=Math.min(Math.abs(A),Math.abs(A-s),Math.abs(t),Math.abs(t-r)):1===e.shape&&(n=Math.min(Math.abs(A),Math.abs(A-s)),a=Math.min(Math.abs(t),Math.abs(t-r)));break;case 2:if(0===e.shape)n=a=Math.min(ml(A,t),ml(A,t-r),ml(A-s,t),ml(A-s,t-r));else if(1===e.shape){var i=Math.min(Math.abs(t),Math.abs(t-r))/Math.min(Math.abs(A),Math.abs(A-s)),o=gl(s,r,A,t,!0),l=o[0],c=o[1];a=i*(n=ml(l-A,(c-t)/i))}break;case 1:0===e.shape?n=a=Math.max(Math.abs(A),Math.abs(A-s),Math.abs(t),Math.abs(t-r)):1===e.shape&&(n=Math.max(Math.abs(A),Math.abs(A-s)),a=Math.max(Math.abs(t),Math.abs(t-r)));break;case 3:if(0===e.shape)n=a=Math.max(ml(A,t),ml(A,t-r),ml(A-s,t),ml(A-s,t-r));else if(1===e.shape){i=Math.max(Math.abs(t),Math.abs(t-r))/Math.max(Math.abs(A),Math.abs(A-s));var d=gl(s,r,A,t,!1);l=d[0],c=d[1],a=i*(n=ml(l-A,(c-t)/i))}}return Array.isArray(e.size)&&(n=Go(e.size[0],s),a=2===e.size.length?Go(e.size[1],r):n),[n,a]}(t,C,N,y,v),U=Q[0],k=Q[1],U>0&&k>0&&(F=s.ctx.createRadialGradient(b+C,B+N,0,b+C,B+N,U),ul(t.stops,2*U).forEach(function(e){return F.addColorStop(e.stop,el(e.color))}),s.path(w),s.ctx.fillStyle=F,U!==k?(S=e.bounds.left+.5*e.bounds.width,E=e.bounds.top+.5*e.bounds.height,H=1/(I=k/U),s.ctx.save(),s.ctx.translate(S,E),s.ctx.transform(1,0,0,I,0,0),s.ctx.translate(-S,-E),s.ctx.fillRect(b,H*(B-E)+E,y,v*H),s.ctx.restore()):s.ctx.fill())),_.label=6;case 6:return A--,[2]}})},s=this,r=0,n=e.styles.backgroundImage.slice(0).reverse(),i.label=1;case 1:return r<n.length?(a=n[r],[5,t(a)]):[3,4];case 2:i.sent(),i.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},A.prototype.renderSolidBorder=function(e,A,t){return Ka(this,0,void 0,function(){return Ra(this,function(s){return this.path(Lh(t,A)),this.ctx.fillStyle=el(e),this.ctx.fill(),[2]})})},A.prototype.renderDoubleBorder=function(e,A,t,s){return Ka(this,0,void 0,function(){var r,n;return Ra(this,function(a){switch(a.label){case 0:return A<3?[4,this.renderSolidBorder(e,t,s)]:[3,2];case 1:return a.sent(),[2];case 2:return r=function(e,A){switch(A){case 0:return Oh(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Oh(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Oh(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Oh(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}}(s,t),this.path(r),this.ctx.fillStyle=el(e),this.ctx.fill(),n=function(e,A){switch(A){case 0:return Oh(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Oh(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Oh(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Oh(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}}(s,t),this.path(n),this.ctx.fill(),[2]}})})},A.prototype.renderNodeBackgroundAndBorders=function(e){return Ka(this,0,void 0,function(){var A,t,s,r,n,a,i,o,l=this;return Ra(this,function(c){switch(c.label){case 0:return this.applyEffects(e.getEffects(2)),A=e.container.styles,t=!Zo(A.backgroundColor)||A.backgroundImage.length,s=[{style:A.borderTopStyle,color:A.borderTopColor,width:A.borderTopWidth},{style:A.borderRightStyle,color:A.borderRightColor,width:A.borderRightWidth},{style:A.borderBottomStyle,color:A.borderBottomColor,width:A.borderBottomWidth},{style:A.borderLeftStyle,color:A.borderLeftColor,width:A.borderLeftWidth}],r=Xh(Gh(A.backgroundClip,0),e.curves),t||A.boxShadow.length?(this.ctx.save(),this.path(r),this.ctx.clip(),Zo(A.backgroundColor)||(this.ctx.fillStyle=el(A.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:c.sent(),this.ctx.restore(),A.boxShadow.slice(0).reverse().forEach(function(A){l.ctx.save();var t,s,r,n,a,i=Ch(e.curves),o=A.inset?0:1e4,c=(t=i,s=-o+(A.inset?1:-1)*A.spread.number,r=(A.inset?1:-1)*A.spread.number,n=A.spread.number*(A.inset?-2:2),a=A.spread.number*(A.inset?-2:2),t.map(function(e,A){switch(A){case 0:return e.add(s,r);case 1:return e.add(s+n,r);case 2:return e.add(s+n,r+a);case 3:return e.add(s,r+a)}return e}));A.inset?(l.path(i),l.ctx.clip(),l.mask(c)):(l.mask(i),l.ctx.clip(),l.path(c)),l.ctx.shadowOffsetX=A.offsetX.number+o,l.ctx.shadowOffsetY=A.offsetY.number,l.ctx.shadowColor=el(A.color),l.ctx.shadowBlur=A.blur.number,l.ctx.fillStyle=A.inset?el(A.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()}),c.label=2;case 2:n=0,a=0,i=s,c.label=3;case 3:return a<i.length?0!==(o=i[a]).style&&!Zo(o.color)&&o.width>0?2!==o.style?[3,5]:[4,this.renderDashedDottedBorder(o.color,o.width,n,e.curves,2)]:[3,11]:[3,13];case 4:return c.sent(),[3,11];case 5:return 3!==o.style?[3,7]:[4,this.renderDashedDottedBorder(o.color,o.width,n,e.curves,3)];case 6:return c.sent(),[3,11];case 7:return 4!==o.style?[3,9]:[4,this.renderDoubleBorder(o.color,o.width,n,e.curves)];case 8:return c.sent(),[3,11];case 9:return[4,this.renderSolidBorder(o.color,n,e.curves)];case 10:c.sent(),c.label=11;case 11:n++,c.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},A.prototype.renderDashedDottedBorder=function(e,A,t,s,r){return Ka(this,0,void 0,function(){var n,a,i,o,l,c,d,u,h,m,g,p,x,f,w,b;return Ra(this,function(B){return this.ctx.save(),n=function(e,A){switch(A){case 0:return Th(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Th(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Th(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return Th(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}}(s,t),a=Lh(s,t),2===r&&(this.path(a),this.ctx.clip()),yh(a[0])?(i=a[0].start.x,o=a[0].start.y):(i=a[0].x,o=a[0].y),yh(a[1])?(l=a[1].end.x,c=a[1].end.y):(l=a[1].x,c=a[1].y),d=0===t||2===t?Math.abs(i-l):Math.abs(o-c),this.ctx.beginPath(),3===r?this.formatPath(n):this.formatPath(a.slice(0,2)),u=A<3?3*A:2*A,h=A<3?2*A:A,3===r&&(u=A,h=A),m=!0,d<=2*u?m=!1:d<=2*u+h?(u*=g=d/(2*u+h),h*=g):(p=Math.floor((d+h)/(u+h)),x=(d-p*u)/(p-1),h=(f=(d-(p+1)*u)/p)<=0||Math.abs(h-x)<Math.abs(h-f)?x:f),m&&(3===r?this.ctx.setLineDash([0,u+h]):this.ctx.setLineDash([u,h])),3===r?(this.ctx.lineCap="round",this.ctx.lineWidth=A):this.ctx.lineWidth=2*A+1.1,this.ctx.strokeStyle=el(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===r&&(yh(a[0])&&(w=a[3],b=a[0],this.ctx.beginPath(),this.formatPath([new wh(w.end.x,w.end.y),new wh(b.start.x,b.start.y)]),this.ctx.stroke()),yh(a[1])&&(w=a[1],b=a[2],this.ctx.beginPath(),this.formatPath([new wh(w.end.x,w.end.y),new wh(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},A.prototype.render=function(e){return Ka(this,0,void 0,function(){var A;return Ra(this,function(t){switch(t.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=el(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=new Ih(e,null),r=new Eh(s),Hh(s,r,r,n=[]),_h(s.container,n),A=r,[4,this.renderStack(A)];case 1:return t.sent(),this.applyEffects([]),[2,this.canvas]}var s,r,n})})},A}(Jh),Yh=function(e){return e instanceof nu||(e instanceof ru||e instanceof su&&e.type!==eu&&e.type!==Zd)},Xh=function(e,A){switch(e){case 0:return Ch(A);case 2:return function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]}(A);default:return Nh(A)}},Zh=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},em=["-apple-system","system-ui"],Am=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return-1===em.indexOf(e)}):e},tm=function(e){function A(A,t){var s=e.call(this,A,t)||this;return s.canvas=t.canvas?t.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=t,s.canvas.width=Math.floor(t.width*t.scale),s.canvas.height=Math.floor(t.height*t.scale),s.canvas.style.width=t.width+"px",s.canvas.style.height=t.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-t.x,-t.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale),s}return Pa(A,e),A.prototype.render=function(e){return Ka(this,0,void 0,function(){var A,t;return Ra(this,function(s){switch(s.label){case 0:return A=Ed(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,sm(A)];case 1:return t=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=el(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(t,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},A}(Jh),sm=function(e){return new Promise(function(A,t){var s=new Image;s.onload=function(){A(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},rm=function(){function e(e){var A=e.id,t=e.enabled;this.id=A,this.enabled=t,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,Va([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,Va([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,Va([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,Va([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),nm=function(){function e(A,t){var s;this.windowBounds=t,this.instanceName="#"+e.instanceCount++,this.logger=new rm({id:this.instanceName,enabled:A.logging}),this.cache=null!==(s=A.cache)&&void 0!==s?s:new ch(this,A)}return e.instanceCount=1,e}();"undefined"!=typeof window&&lh.setContext(window);var am=function(e,A){return Ka(void 0,0,void 0,function(){var t,s,r,n,a,i,o,l,c,d,u,h,m,g,p,x,f,w,b,B,y,v,j,C,N,Q,U,k,F,S,E,I,H,_,L,T,O,M;return Ra(this,function(P){switch(P.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(t=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(s=t.defaultView))throw new Error("Document is not attached to a Window");return r={allowTaint:null!==(v=A.allowTaint)&&void 0!==v&&v,imageTimeout:null!==(j=A.imageTimeout)&&void 0!==j?j:15e3,proxy:A.proxy,useCORS:null!==(C=A.useCORS)&&void 0!==C&&C},n=Da({logging:null===(N=A.logging)||void 0===N||N,cache:A.cache},r),a={windowWidth:null!==(Q=A.windowWidth)&&void 0!==Q?Q:s.innerWidth,windowHeight:null!==(U=A.windowHeight)&&void 0!==U?U:s.innerHeight,scrollX:null!==(k=A.scrollX)&&void 0!==k?k:s.pageXOffset,scrollY:null!==(F=A.scrollY)&&void 0!==F?F:s.pageYOffset},i=new Ga(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),o=new nm(n,i),l=null!==(S=A.foreignObjectRendering)&&void 0!==S&&S,c={allowTaint:null!==(E=A.allowTaint)&&void 0!==E&&E,onclone:A.onclone,ignoreElements:A.ignoreElements,inlineImages:l,copyStyles:l},o.logger.debug("Starting document clone with size "+i.width+"x"+i.height+" scrolled to "+-i.left+","+-i.top),d=new zu(o,e,c),(u=d.clonedReferenceElement)?[4,d.toIFrame(t,i)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=P.sent(),m=Bu(u)||"HTML"===u.tagName?function(e){var A=e.body,t=e.documentElement;if(!A||!t)throw new Error("Unable to get document size");var s=Math.max(Math.max(A.scrollWidth,t.scrollWidth),Math.max(A.offsetWidth,t.offsetWidth),Math.max(A.clientWidth,t.clientWidth)),r=Math.max(Math.max(A.scrollHeight,t.scrollHeight),Math.max(A.offsetHeight,t.offsetHeight),Math.max(A.clientHeight,t.clientHeight));return new Ga(0,0,s,r)}(u.ownerDocument):Wa(o,u),g=m.width,p=m.height,x=m.left,f=m.top,w=im(o,u,A.backgroundColor),b={canvas:A.canvas,backgroundColor:w,scale:null!==(H=null!==(I=A.scale)&&void 0!==I?I:s.devicePixelRatio)&&void 0!==H?H:1,x:(null!==(_=A.x)&&void 0!==_?_:0)+x,y:(null!==(L=A.y)&&void 0!==L?L:0)+f,width:null!==(T=A.width)&&void 0!==T?T:Math.ceil(g),height:null!==(O=A.height)&&void 0!==O?O:Math.ceil(p)},l?(o.logger.debug("Document cloned, using foreign object rendering"),[4,new tm(o,b).render(u)]):[3,3];case 2:return B=P.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+x+","+f+" with size "+g+"x"+p+" using computed rendering"),o.logger.debug("Starting DOM parsing"),y=cu(o,u),w===y.styles.backgroundColor&&(y.styles.backgroundColor=ol.TRANSPARENT),o.logger.debug("Starting renderer for element at "+b.x+","+b.y+" with size "+b.width+"x"+b.height),[4,new qh(o,b).render(y)];case 4:B=P.sent(),P.label=5;case 5:return(null===(M=A.removeContainer)||void 0===M||M)&&(zu.destroy(h)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,B]}})})},im=function(e,A,t){var s=A.ownerDocument,r=s.documentElement?il(e,getComputedStyle(s.documentElement).backgroundColor):ol.TRANSPARENT,n=s.body?il(e,getComputedStyle(s.body).backgroundColor):ol.TRANSPARENT,a="string"==typeof t?il(e,t):null===t?ol.TRANSPARENT:4294967295;return A===s.documentElement?Zo(r)?Zo(n)?a:n:r:a};const om=({label:A,value:t,isBold:s})=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("div",{className:"text-gray-600",children:A}),e.jsx("div",{className:"text-gray-800 "+(s?"font-bold":""),children:t})]});function lm(){const A=d(),t=h.useRef(null),s=new URLSearchParams(window.location.search),r=s.get("tn"),n="customer"===s.get("from"),a=localStorage.getItem("business_id"),i=JSON.parse(sessionStorage.getItem("user")||"{}"),[o,l]=h.useState(null),[c,u]=h.useState(!0),[m,g]=h.useState(null);h.useEffect(()=>{if(r){(async()=>{try{u(!0);const e=n?`/sales/public/details/${encodeURIComponent(r)}`:`/sales/details/${encodeURIComponent(r)}`,A=await R(e);l(A),g(null)}catch(e){g(e.message),console.error(e)}finally{u(!1)}})()}else g("Transaction number not found."),u(!1)},[r,n]);const p=h.useMemo(()=>o?JSON.stringify({t:"receipt",tn:r,tid:null,total:o.total,b:a?Number(a):null,items:o.items.map(e=>({name:e.name,quantity:e.quantity,price:e.price,subtotal:e.subtotal})),summary:{subtotal:o.subtotal,discount:o.discountTotal,grandTotal:o.total}}):"",[r,o,a]),x=h.useMemo(()=>{if(!p)return"";return`https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=${encodeURIComponent(p)}&qzone=2&format=png&_=${Date.now()}`},[p]);return e.jsxs(z,{variant:"gradientBlue",pattern:"dots",overlay:!0,floatingElements:!0,children:[e.jsx("div",{className:"jsx-710738670 min-h-screen printable-area",children:e.jsxs("div",{className:"jsx-710738670 px-4 pt-6 max-w-md mx-auto grid gap-4",children:[e.jsxs(Ke,{className:"p-6 no-print",children:[e.jsx("div",{className:"jsx-710738670 text-2xl font-bold text-blue-900",children:"E-Receipt"}),e.jsx("div",{className:"jsx-710738670 text-blue-700 mt-1",children:"Thank you for your purchase."})]}),c&&e.jsx(Y,{}),m&&e.jsx(Ke,{className:"p-6 text-red-500",children:m}),o&&e.jsxs(Ke,{ref:t,className:"p-3 space-y-3 font-mono bg-white max-w-[57mm] mx-auto",children:[e.jsxs("div",{className:"jsx-710738670 text-center border-b pb-4",children:[e.jsx("h2",{className:"jsx-710738670 text-sm font-bold",children:o.business.name}),e.jsx("p",{className:"jsx-710738670 text-sm",children:o.business.address}),e.jsx("p",{className:"jsx-710738670 text-sm",children:o.business.contact}),o.business.tin&&e.jsxs("p",{className:"jsx-710738670 text-sm",children:["TIN: ",o.business.tin]})]}),e.jsxs("div",{className:"jsx-710738670 space-y-2 border-b pb-4",children:[e.jsx(om,{label:"Receipt No:",value:o.transactionNumber}),e.jsx(om,{label:"Date:",value:new Date(o.date).toLocaleDateString()}),e.jsx(om,{label:"Time:",value:new Date(o.date).toLocaleTimeString()}),e.jsx(om,{label:"Cashier:",value:o.cashierName||"N/A"}),e.jsx(om,{label:"Payment Method:",value:o.payment.method})]}),e.jsxs("div",{className:"jsx-710738670",children:[e.jsxs("div",{className:"jsx-710738670 flex justify-between font-bold text-sm",children:[e.jsx("span",{className:"jsx-710738670",children:"Item"}),e.jsx("span",{className:"jsx-710738670",children:"Total"})]}),e.jsx("div",{className:"jsx-710738670 border-b border-dashed my-2"}),e.jsx("div",{className:"jsx-710738670 space-y-2",children:o.items.map((A,t)=>e.jsxs("div",{className:"jsx-710738670 text-sm",children:[e.jsx("div",{className:"jsx-710738670",children:A.name}),e.jsxs("div",{className:"jsx-710738670 flex justify-between",children:[e.jsxs("span",{className:"jsx-710738670 pl-4",children:[A.quantity," x â‚±",A.price]}),e.jsxs("span",{className:"jsx-710738670",children:["â‚±",A.subtotal]})]})]},t))})]}),e.jsxs("div",{className:"jsx-710738670 space-y-2 border-t pt-4",children:[e.jsx(om,{label:`Subtotal (${o.totalQuantity} items)`,value:`â‚±${o.subtotal.toFixed(2)}`}),o.discountTotal>0&&e.jsx(om,{label:"Discount",value:`-â‚±${o.discountTotal.toFixed(2)}`}),e.jsx(om,{label:"Grand Total",value:`â‚±${o.total.toFixed(2)}`,isBold:!0})]}),o.payment.amountTendered&&e.jsxs("div",{className:"jsx-710738670 space-y-2 border-t pt-4",children:[e.jsx(om,{label:"Amount Tendered",value:`â‚±${Number(o.payment.amountTendered).toFixed(2)}`}),e.jsx(om,{label:"Change",value:`â‚±${Number(o.payment.change).toFixed(2)}`})]}),e.jsxs("div",{className:"jsx-710738670 pt-2 flex flex-col items-center",children:[e.jsx("img",{src:x,alt:"Receipt QR",className:"jsx-710738670 w-[120px] h-[120px] border rounded bg-white"}),e.jsx("div",{className:"jsx-710738670 text-blue-700 text-xs mt-2 text-center",children:"QR contains a summary of this transaction."})]}),e.jsxs("div",{className:"jsx-710738670 text-center text-xs pt-4 border-t",children:[e.jsx("p",{className:"jsx-710738670",children:"Thank you for shopping!"}),e.jsx("p",{className:"jsx-710738670 font-bold",children:"This is not an official receipt."})]})]}),e.jsx("div",{className:"jsx-710738670 pt-2 pb-6 grid grid-cols-2 gap-4 no-print",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:async()=>{var e,A;if(t.current)try{const s=await(e=t.current,A={useCORS:!0,scale:2,allowTaint:!0,backgroundColor:"#ffffff"},void 0===A&&(A={}),am(e,A)),n=document.createElement("a");n.download=`eKahera-Receipt-${r||"receipt"}.png`,n.href=s.toDataURL("image/png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(s){console.error("Error downloading receipt:",s),alert("Failed to download receipt. Please try again.")}else alert("Receipt content not available for download.")},className:"jsx-710738670 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-710738670 w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4",className:"jsx-710738670"})}),"Download"]}),e.jsxs("button",{onClick:()=>A("/customer-enter"),className:"jsx-710738670 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-710738670 w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4",className:"jsx-710738670"})}),"Proceed"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{window.print()},className:"jsx-710738670 w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-710738670 w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z",className:"jsx-710738670"})}),"Print"]}),e.jsxs("button",{onClick:()=>{i&&"cashier"===i.role?A("/cashier-pos"):(!i||"admin"!==i.role&&i.role,A("/pos"))},className:"jsx-710738670 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-710738670 w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4",className:"jsx-710738670"})}),"Proceed"]})]})})]})}),e.jsx(Oa,{id:"710738670",children:["@page{size:57mm auto;margin:0;padding:0;}","@media print{.no-print{display:none !important;}.printable-area{padding:0;margin:0;}body{margin:0;padding:0;-webkit-print-color-adjust:exact;print-color-adjust:exact;width:57mm !important;}*{max-width:57mm !important;}}"]})]})}const cm=()=>{const[A,t]=h.useState([]),[s,r]=h.useState(!0),[n,a]=h.useState(""),[i,o]=h.useState(null);h.useEffect(()=>{l()},[]);const l=async()=>{try{r(!0),a("");const e=sessionStorage.getItem("auth_token"),A=JSON.parse(sessionStorage.getItem("user")||"{}"),s=A.businessId||A.business_id;if(!e)throw new Error("No authentication token found");if(!s)throw new Error("Business ID not found");const n=await R(`/documents/business/${s}`,{headers:V(e)});t(Array.isArray(n.documents)?n.documents:[])}catch(e){console.error("Failed to fetch documents:",e),a(e.message||"Failed to load documents. Please check your connection and try again.")}finally{r(!1)}},c=e=>{switch(e){case"approved":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-yellow-600 bg-yellow-100"}},d=e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsx("button",{onClick:l,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Refresh Documents"})});return s?e.jsx(Ue,{title:"DOCUMENTS",subtitle:"View and manage your business documents",sidebar:e.jsx(fA,{}),className:"bg-gray-50",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Y,{})})}):e.jsx(Ue,{title:"DOCUMENTS",subtitle:"View and manage your business documents",sidebar:e.jsx(fA,{}),headerActions:d,className:"bg-gray-50",children:e.jsxs("div",{className:"p-6 space-y-6",children:[n&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-red-800 text-sm",children:n})]})}),!s&&!n&&0===A.length&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Documents Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't uploaded any business documents yet."}),e.jsx("button",{onClick:l,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Refresh"})]}),A.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(A=>{return e.jsx(Ke,{className:"bg-white shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:A.document_type}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:A.document_name})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(A.verification_status)}`,children:A.verification_status})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Uploaded:"}),e.jsx("div",{className:"text-gray-900",children:(t=A.uploaded_at,t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A")})]}),A.verification_notes&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Notes:"}),e.jsx("div",{className:"text-gray-900 mt-1",children:A.verification_notes})]})]}),e.jsx(q,{onClick:()=>(async(e,A)=>{o(e);try{const t=sessionStorage.getItem("auth_token"),s=await R(`/documents/download/${e}`,{headers:V(t)},!0),r=await s.blob(),n=window.URL.createObjectURL(r),a=document.createElement("a");a.style.display="none",a.href=n,a.download=A,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(n)}catch(t){console.error("Error downloading document:",t),alert("Error downloading document")}finally{o(null)}})(A.document_id,A.document_name),disabled:i===A.document_id,className:"w-full",size:"sm",children:i===A.document_id?"Downloading...":"Download"})]})},A.document_id);var t})})]})})},dm=()=>{const[A,t]=h.useState([]),[s,r]=h.useState(!0),[n,a]=h.useState(""),[i,o]=h.useState({}),[l,c]=h.useState({}),u=d();h.useEffect(()=>{m()},[]);const m=async()=>{try{r(!0);const e=sessionStorage.getItem("auth_token"),A=JSON.parse(sessionStorage.getItem("user")||"{}"),s=A.businessId||A.business_id;if(!e)throw new Error("No authentication token found");const n=await R(`/documents/business/${s}`,{headers:V(e)}),a=Array.isArray(n.documents)?n.documents.filter(e=>"rejected"===e.verification_status):[];t(a)}catch(e){console.error("Failed to fetch documents:",e),a("Failed to load documents. Please try again later.")}finally{r(!1)}},g=e=>{switch(e){case"approved":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-yellow-600 bg-yellow-100"}};return s?e.jsx(Ue,{title:"RESUBMIT DOCUMENTS",subtitle:"Resubmit your rejected documents",sidebar:e.jsx(fA,{}),children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Y,{})})}):e.jsx(Ue,{title:"RESUBMIT DOCUMENTS",subtitle:"Resubmit your rejected documents",sidebar:e.jsx(fA,{}),children:e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[n&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-800",children:n})}),0===A.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents require resubmission"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"All your documents are up to date."}),e.jsx(q,{onClick:()=>u("/documents"),children:"View All Documents"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h2a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-blue-700",children:"Please upload new versions of your rejected documents. Make sure all documents are clear and up to date."})})]})}),A.map(A=>e.jsxs("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:A.document_type}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:A.document_name})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${g(A.verification_status)}`,children:A.verification_status})]})}),e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[A.verification_notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Rejection Reason:"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:A.verification_notes})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload new version"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"file",onChange:e=>{return t=A.document_id,s=e.target.files[0],void c(e=>({...e,[t]:s}));var t,s},className:"block w-full text-sm text-gray-500\r\n                          file:mr-4 file:py-2 file:px-4\r\n                          file:rounded-md file:border-0\r\n                          file:text-sm file:font-semibold\r\n                          file:bg-blue-50 file:text-blue-700\r\n                          hover:file:bg-blue-100",accept:".pdf,.jpg,.jpeg,.png"}),e.jsx(q,{onClick:()=>(async e=>{if(!l[e])return void a("Please select a file to upload");const A=new FormData;A.append("document",l[e]),A.append("document_id",e);try{o(A=>({...A,[e]:!0}));const t=sessionStorage.getItem("auth_token");await R("/documents/resubmit",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:A}),await m(),c(A=>{const t={...A};return delete t[e],t})}catch(t){console.error("Failed to resubmit document:",t),a(t.message||"Failed to resubmit document. Please try again.")}finally{o(A=>({...A,[e]:!1}))}})(A.document_id),disabled:!l[A.document_id]||i[A.document_id],className:"ml-4 whitespace-nowrap",loading:i[A.document_id],children:i[A.document_id]?"Uploading...":"Resubmit"})]}),l[A.document_id]&&e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Selected: ",l[A.document_id].name]})]})]})]},A.document_id))]})]})})};var um={};const hm=()=>{const{documentId:A}=b(),[t]=y(),s=d(),[r,n]=h.useState(null),[a,i]=h.useState(!0),[o,l]=h.useState(""),[c,u]=h.useState(""),[m,g]=h.useState(null),[p,x]=h.useState(!1),[f,w]=h.useState(""),[B,v]=h.useState(!1);h.useEffect(()=>{const e=sessionStorage.getItem("auth_token"),r=sessionStorage.getItem("user");if(e&&r){v(!0);const e=JSON.parse(r);w(e.email||"")}else{const e=t.get("email");if(!e)return void s("/login",{state:{from:window.location.pathname}});w(e)}A?(async()=>{try{i(!0);const e=await R(`/documents/${A}/info`);"rejected"!==e.verification_status?l("This document is not marked as rejected and cannot be resubmitted."):n(e)}catch(e){console.error("Failed to fetch document:",e),l("Failed to load document. Please check the link and try again.")}finally{i(!1)}})():(l("No document ID provided"),i(!1))},[A,t]);return a?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{size:"lg"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading document information..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Document Resubmission"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r?`Please upload a new version of your ${r.document_type}`:"Document Resubmission"})]}),o&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border-l-4 border-red-500 text-red-700",children:e.jsx("p",{children:o})}),c?e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border-l-4 border-green-500 text-green-700",children:[e.jsx("p",{children:c}),e.jsx("p",{className:"mt-2",children:"You will be redirected to the login page shortly..."})]}):e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!m)return void l("Please select a file to upload");const t=new FormData;t.append("document",m),t.append("document_id",A),!B&&f&&t.append("user_email",f);try{x(!0),l("");const e=sessionStorage.getItem("auth_token"),A={Accept:"application/json"};e&&(A.Authorization=`Bearer ${e}`);const n=await fetch(`${um.REACT_APP_API_URL||""}/api/documents/resubmit`,{method:"POST",body:t,headers:A}),a=await n.json();if(!n.ok)throw new Error(a.error||"Failed to resubmit document");toast.success("Document resubmitted successfully!"),u("Document resubmitted successfully!"),g(null),r.verification_status="pending",r.verification_notes=null,setTimeout(()=>{s("/login")},2e3)}catch(n){console.error("Resubmission error:",n),l(n.message||"Failed to resubmit document. Please try again.")}finally{x(!1)}},className:"space-y-6",children:[!f&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Email Address"}),e.jsx("input",{type:"email",id:"email",value:f,onChange:e=>w(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"your.email@example.com"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Document: ",r?.document_type]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Status: ",e.jsx("span",{className:"font-medium text-red-600",children:"Rejected"}),r?.verification_notes&&e.jsxs("span",{className:"block mt-1 text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," ",r.verification_notes]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload New Version"}),e.jsx("div",{className:"mt-1 flex items-center",children:e.jsx("input",{type:"file",onChange:e=>{const A=e.target.files[0];A&&(g(A),l(""))},accept:".pdf,.jpg,.jpeg,.png",className:"block w-full text-sm text-gray-500\r\n                    file:mr-4 file:py-2 file:px-4\r\n                    file:rounded-md file:border-0\r\n                    file:text-sm file:font-semibold\r\n                    file:bg-blue-50 file:text-blue-700\r\n                    hover:file:bg-blue-100",required:!0})}),m&&e.jsxs("p",{className:"mt-2 text-sm text-green-600",children:["Selected: ",m.name," (",(m.size/1024).toFixed(2)," KB)"]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Accepted formats: .pdf, .jpg, .jpeg, .png (Max: 5MB)"})]}),e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsx(q,{type:"submit",disabled:!m||p||!f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Uploading...":"Resubmit Document"}),e.jsx(q,{type:"button",onClick:()=>s("/login"),variant:"outline",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back to Login"})]})]})]})})},mm=()=>{const[A]=y();d();const[t,s]=h.useState(""),[r,n]=h.useState([]),[a,i]=h.useState(!0),[o,l]=h.useState(!1),[c,u]=h.useState(""),[m,g]=h.useState({}),[p,x]=h.useState({}),[f,w]=h.useState(!1),[b,B]=h.useState(!0);h.useEffect(()=>{const e=A.get("email");e&&(s(e),v({preventDefault:()=>{}},e))},[A]);const v=async(e,A=null)=>{e?.preventDefault();const s=A||t;if(s)try{l(!0),u("");const e=await R(`/documents/rejected?email=${encodeURIComponent(s)}`);if(!e.documents||0===e.documents.length)return void u("No rejected documents found for this email address.");n(e.documents),w(!0),B(!1);const A=new URL(window.location);A.searchParams.set("email",s),window.history.pushState({},"",A)}catch(r){console.error("Verification error:",r),u(r.response?.data?.error||"Failed to verify email. Please try again.")}finally{l(!1)}else u("Please enter your email address")},j=e=>{switch(e){case"approved":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-yellow-600 bg-yellow-100"}};return a?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{size:"lg"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading document information..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Document Resubmission"}),e.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"Please verify your email to view and resubmit rejected documents"})]}),c&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700",children:e.jsx("p",{children:c})}),b&&e.jsxs("div",{className:"bg-white shadow overflow-hidden rounded-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-4",children:"Verify Your Email"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please enter the email address associated with your rejected documents."}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",value:t,onChange:e=>s(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"your.email@example.com",disabled:o})]}),e.jsx("div",{className:"pt-2",children:e.jsx(q,{type:"submit",disabled:o||!t,className:"w-full justify-center",children:o?"Verifying...":"Continue"})})]})]}),f&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h2a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-blue-700",children:"Please upload new versions of your rejected documents. Make sure all documents are clear and up to date."})})]})}),r.map(A=>e.jsxs("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:A.document_type}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:A.document_name})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${j(A.verification_status)}`,children:A.verification_status})]})}),e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[A.verification_notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Rejection Reason:"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:A.verification_notes})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload New Version"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"file",id:`file-${A.document_id}`,onChange:e=>{return t=A.document_id,s=e.target.files[0],void g(e=>({...e,[t]:s}));var t,s},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:".pdf,.jpg,.jpeg,.png"}),e.jsx(q,{type:"button",onClick:()=>(async e=>{if(!m[e])return void u("Please select a file to upload");const A=new FormData;A.append("document",m[e]),A.append("document_id",e),A.append("user_email",t);try{x(A=>({...A,[e]:!0})),await R("/documents/resubmit",{method:"POST",body:A}),n(A=>A.map(A=>A.document_id===e?{...A,verification_status:"pending",verification_notes:""}:A)),g(A=>{const t={...A};return delete t[e],t}),toast.success("Document resubmitted successfully!")}catch(s){console.error("Failed to resubmit document:",s),u(s.response?.data?.error||"Failed to resubmit document. Please try again.")}finally{x(A=>({...A,[e]:!1}))}})(A.document_id),disabled:!m[A.document_id]||p[A.document_id],className:"ml-2 whitespace-nowrap",children:p[A.document_id]?"Uploading...":"Upload"})]}),m[A.document_id]&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",m[A.document_id].name]})]})]})]},A.document_id))]})]})})};function gm(){const A=d();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsx("div",{className:"mb-8",children:e.jsx("img",{src:$,alt:"eKahera Logo",className:"mx-auto w-24 h-24"})}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-9xl font-bold text-blue-200 select-none",children:"404"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("svg",{className:"w-24 h-24 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-.978-5.708-2.709M12 2l3 3-3 3-3-3 3-3z"})})})]})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-lg text-gray-600 mb-8 leading-relaxed",children:"Oops! The page you're looking for doesn't exist. It might have been moved, deleted, or you entered the wrong URL."}),e.jsx(q,{onClick:()=>{A("/")},variant:"primary",size:"lg",className:"shadow-lg hover:shadow-xl",children:"Go Back Home"}),e.jsx("div",{className:"mt-8 text-sm text-gray-500",children:e.jsx("p",{children:"If you believe this is an error, please contact eKahera support."})})]})})}const pm=()=>{const A=d(),t=u(),{transactionId:s,tn:r}=t.state||{},[n,a]=h.useState("pending"),[i,o]=h.useState("");return h.useEffect(()=>{if(!s)return void o("No transaction ID found. Please try checking out again.");const e=setInterval(async()=>{try{const t=await R(`/sales/public/transaction/${s}`),r=t.data||t;"completed"===r.status?(a("completed"),clearInterval(e),A(`/receipt?tn=${r.tn||""}&from=customer`)):r.status&&a(r.status)}catch(t){console.error("Error fetching transaction status:",t);const e=t.response?.data?.error||"Could not fetch transaction status. Please check your connection.";o(e)}},3e3);return()=>clearInterval(e)},[s,A,r]),e.jsx(z,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs(Ke,{className:"p-8 max-w-md mx-auto text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-blue-900 mb-4",children:"Waiting for Cashier"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please present your QR code to the cashier to complete your payment. This page will automatically update once your transaction is complete."}),e.jsx(Y,{}),e.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Status: ",e.jsx("span",{className:"font-semibold",children:n})]}),i&&e.jsx("p",{className:"text-red-500 mt-4",children:i})]})})})},xm=v([{path:"/",element:e.jsx(te,{}),children:[{index:!0,element:e.jsx(Me,{})},{path:"services",element:e.jsx(Pe,{})},{path:"get-started",element:e.jsx(Ze,{})},{path:"contact",element:e.jsx(eA,{})},{path:"login",element:e.jsx(AA,{})},{path:"dashboard",element:e.jsx(HA,{})},{path:"dashboard/store-qr",element:e.jsx(Ea,{})},{path:"pos",element:e.jsx(zA,{})},{path:"cashier-pos",element:e.jsx($A,{})},{path:"inventory",element:e.jsx(qn,{})},{path:"mobile-scanner",element:e.jsx(sa,{})},{path:"select-role",element:e.jsx(ra,{})},{path:"customer",element:e.jsx(na,{})},{path:"customer-enter",element:e.jsx(aa,{})},{path:"receipt",element:e.jsx(lm,{})},{path:"customer-waiting",element:e.jsx(pm,{})},{path:"enter-store",element:e.jsx(ia,{})},{path:"cashiers",element:e.jsx(ca,{})},{path:"logs",element:e.jsx(da,{})},{path:"profile",element:e.jsx(va,{})},{path:"documents",element:e.jsx(cm,{})},{path:"superadmin",element:e.jsx(ka,{})},{path:"superadmin/stores/:id",element:e.jsx(Fa,{})},{path:"setup",element:e.jsx(Sa,{})},{path:"resubmit-application",element:e.jsx(dm,{})},{path:"resubmit-documents",element:e.jsx(mm,{})},{path:"resubmit-document/:documentId",element:e.jsx(hm,{})},{path:"*",element:e.jsx(gm,{})}]}],{basename:"/"});K.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(j,{router:xm})}));
//# sourceMappingURL=index-BZA5N9xq.js.map
