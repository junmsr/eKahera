import{j as e}from"./utils-L0j39QIW.js";import{a as s,u as t,d as r}from"./vendor-DPJ7iNYg.js";import{b as a,a as n,L as i,B as o}from"./index-C5L4VqbE.js";import{C as l}from"./Card-DXlcOk_J.js";import{B as d}from"./BaseModal-Cy73DE2S.js";import{M as c}from"./Modal-OoT2AoR7.js";import"./FormField-NRg-OFLz.js";import"./Input-DoNyYXSI.js";import"./ScannerCard-CvOsMZzr.js";import"./qr-52H9kDsU.js";function m({isOpen:s,onClose:t,documentUrl:r,documentName:a}){if(!r)return null;const n=r.toLowerCase().includes(".pdf"),i=/\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(r);return e.jsx(d,{isOpen:s,onClose:t,title:"View Document",subtitle:a,size:"full",icon:e.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),children:e.jsx("div",{className:"w-full h-full min-h-[70vh]",children:n?e.jsx("iframe",{src:r,className:"w-full h-full border-0 rounded-lg",title:`View ${a}`,allowFullScreen:!0}):i?e.jsxs("div",{className:"flex items-center justify-center h-full",children:[e.jsx("img",{src:r,alt:a,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),e.jsxs("div",{className:"hidden text-center text-gray-500",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Unable to load document"}),e.jsx("p",{className:"text-sm",children:"The document may not be available or supported"})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Document Preview Not Available"}),e.jsx("p",{className:"text-sm",children:"This document type cannot be previewed inline"}),e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open in New Tab"]})]})})})})}const x=({isOpen:s,onClose:t,title:r,message:n,type:i="info"})=>{if(!s)return null;const o={success:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),error:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),warning:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M12 3a9 9 0 110 18 9 9 0 010-18z"})}),info:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:`${{success:"text-green-600",error:"text-red-600",warning:"text-yellow-600",info:"text-blue-600"}[i]} rounded-full p-2`,children:o[i]||o.info})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:r}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:n}),e.jsx("div",{className:"flex justify-center",children:e.jsx(a,{onClick:t,className:("success"===i?"bg-green-600 hover:bg-green-700":"error"===i?"bg-red-600 hover:bg-red-700":"warning"===i?"bg-yellow-600 hover:bg-yellow-700":"bg-blue-600 hover:bg-blue-700")+" text-white",children:"OK"})})]})})})};function h({isRefreshing:t}){const[r,a]=s.useState([]),[o,d]=s.useState(null),[c,h]=s.useState(null),[p,g]=s.useState(!0),[j,b]=s.useState(!1),[f,v]=s.useState(!1),[y,N]=s.useState({url:"",name:"",isOpen:!1}),[w,k]=s.useState({total:0,pending:0,approved:0,rejected:0}),[L,C]=s.useState({isOpen:!1,title:"",message:"",type:"info"});s.useEffect(()=>{S(),_()},[]),s.useEffect(()=>{t&&(S(),_())},[t]);const S=async()=>{v(!0);try{const e=sessionStorage.getItem("auth_token"),s=await n("/documents/pending",{headers:{Authorization:`Bearer ${e}`}});a(s)}catch(e){}finally{g(!1),v(!1)}},_=async()=>{v(!0);try{const e=sessionStorage.getItem("auth_token"),s=await n("/documents/stats",{headers:{Authorization:`Bearer ${e}`}}),t={total:s.total||0,pending:s.pending||0,approved:s.approved||0,rejected:s.rejected||0,repass:s.repass||0};k(t)}catch(e){}finally{v(!1)}},B=async e=>{try{const s=sessionStorage.getItem("auth_token"),t=await n(`/documents/business/${e}/verification`,{headers:{Authorization:`Bearer ${s}`}});h(t)}catch(s){}};return p?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(i,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-10 flex items-center justify-center z-50",children:e.jsx(i,{size:"lg"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w.total||(w.pending||0)+(w.approved||0)+(w.rejected||0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Businesses"})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:w.pending||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w.approved||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:w.rejected||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Rejected"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(l,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"All Businesses with Documents"}),0===r.length?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No businesses with documents"}):e.jsx("div",{className:"space-y-3",children:r.map(s=>e.jsxs("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors "+(o?.business_id===s.business_id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>(e=>{d(e),B(e.business_id)})(s),children:[e.jsx("div",{className:"font-medium",children:s.business_name}),e.jsx("div",{className:"text-sm text-gray-600",children:s.business_type}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.total_documents," documents â€¢ Status:"," ",s.verification_status]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Submitted"," ",s.verification_submitted_at?new Date(s.verification_submitted_at).toLocaleDateString():"N/A"]})]},s.business_id))})]})}),e.jsx("div",{className:"lg:col-span-2",children:o?e.jsx(u,{business:c,onDocumentAction:async(e,s,t="")=>{b(!0);try{const r=sessionStorage.getItem("auth_token");await n(`/documents/document/${e}/verify`,{method:"PUT",headers:{Authorization:`Bearer ${r}`},body:JSON.stringify({status:s,notes:t})}),B(o.business_id),C({isOpen:!0,title:"Success",message:`Document ${s} successfully`,type:"success"})}catch(r){console.error("Error updating document:",r),C({isOpen:!0,title:"Error",message:"Error updating document status",type:"error"})}finally{b(!1)}},onCompleteVerification:async(e,s="")=>{b(!0);try{const t=sessionStorage.getItem("auth_token");await n(`/documents/business/${o.business_id}/complete`,{method:"PUT",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify({status:e,rejection_reason:s})}),C({isOpen:!0,title:"Success",message:`Business verification ${e} successfully`,type:"success",onClose:()=>{d(null),h(null),S(),_()}})}catch(t){console.error("Error completing verification:",t),C({isOpen:!0,title:"Error",message:"Error completing verification",type:"error"})}finally{b(!1)}},onDownloadDocument:async(e,s)=>{try{const t=sessionStorage.getItem("auth_token"),r=await n(`/documents/download/${e}`,{headers:{Authorization:`Bearer ${t}`}},!0),a=await r.blob(),i=window.URL.createObjectURL(a),o=document.createElement("a");o.style.display="none",o.href=i,o.download=s,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(i),document.body.removeChild(o)}catch(t){console.error("Error downloading document:",t),C({isOpen:!0,title:"Error",message:t.message||"Error downloading document",type:"error"})}},onViewDocument:async(e,s)=>{try{const t=sessionStorage.getItem("auth_token"),r=await n(`/documents/download/${e}`,{headers:{Authorization:`Bearer ${t}`}},!0),a=await r.blob(),i=window.URL.createObjectURL(a);N({url:i,name:s,isOpen:!0})}catch(t){console.error("Error viewing document:",t),C({isOpen:!0,title:"Error",message:"Error viewing document",type:"error"})}},actionLoading:j}):e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Business to Review"}),e.jsx("p",{className:"text-gray-500",children:"Choose a business from the list to review their documents."})]})})})]}),e.jsx(m,{isOpen:y.isOpen,onClose:()=>N(e=>({...e,isOpen:!1})),documentUrl:y.url,documentName:y.name}),e.jsx(x,{isOpen:L.isOpen,onClose:()=>{C(e=>({...e,isOpen:!1})),L.onClose&&L.onClose()},title:L.title,message:L.message,type:L.type})]})}function u({business:t,onDocumentAction:r,onCompleteVerification:n,onDownloadDocument:o,onViewDocument:d,actionLoading:c}){const[m,x]=s.useState(""),[h,u]=s.useState(""),[p,g]=s.useState(!1),[j,b]=s.useState(!1),[f,v]=s.useState(!1),[y,N]=s.useState({isOpen:!1,title:"",message:"",type:"info"});if(!t)return e.jsx(l,{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx(i,{})})});const w=e=>{switch(e){case"approved":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-yellow-600 bg-yellow-100"}},k=t.documents?.every(e=>"approved"===e.verification_status||"rejected"===e.verification_status);return t.documents?.every(e=>"approved"===e.verification_status),t.documents?.some(e=>"rejected"===e.verification_status),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Name"}),e.jsx("p",{className:"text-gray-900",children:t.business_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Type"}),e.jsx("p",{className:"text-gray-900",children:t.business_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:t.business_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile"}),e.jsx("p",{className:"text-gray-900",children:t.mobile})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsxs("p",{className:"text-gray-900",children:[t.business_address,t.region&&`, ${t.region}`]})]})]})]}),e.jsxs(l,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Submitted Documents"}),0===t.documents?.length?e.jsx("p",{className:"text-gray-500",children:"No documents uploaded"}):e.jsx("div",{className:"space-y-4",children:t.documents?.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.document_type}),e.jsx("p",{className:"text-sm text-gray-600",children:s.document_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded"," ",new Date(s.uploaded_at).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(s.verification_status)}`,children:s.verification_status})]}),s.verification_notes&&e.jsxs("div",{className:"mb-3 p-2 bg-gray-50 rounded text-sm",children:[e.jsx("strong",{children:"Notes:"})," ",s.verification_notes]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>d(s.document_id,s.document_name||s.document_type),children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>o(s.document_id,s.document_name),children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download"]}),"pending"===s.verification_status&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{size:"sm",onClick:()=>r(s.document_id,"approved"),disabled:c,children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]}),e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>r(s.document_id,"rejected"),disabled:c,children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Reject"]})]})]})]},s.document_id))})]}),"pending"===t.verification_status&&e.jsxs(l,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Complete Verification"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(a,{onClick:()=>n("approved"),disabled:!k||c,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",title:k?"":"Please review all documents first",children:"Approve Business"}),e.jsx(a,{variant:"outline",onClick:()=>g(!0),disabled:!k||c,className:"disabled:opacity-50 disabled:cursor-not-allowed",title:k?"":"Please review all documents first",children:"Reject Application"})]}),!k&&e.jsx("p",{className:"text-sm text-yellow-600 mt-2",children:"All documents must be reviewed (approved or rejected) before completing verification."})]}),p&&e.jsx("div",{className:"fixed inset-0 backdrop-blur-md flex items-center justify-center z-50 transition-opacity duration-300",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 relative transform transition-all duration-300 ease-in-out scale-100",children:[e.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors duration-200",onClick:()=>{g(!1),x("")},"aria-label":"Close modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("h3",{className:"text-xl font-semibold mb-6 flex items-center text-gray-900",id:"reject-modal-title",children:[e.jsx("svg",{className:"w-6 h-6 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Reject Application"]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"Please provide a detailed reason for rejecting this application. This will help the business understand what needs to be improved."}),e.jsx("textarea",{value:m,onChange:e=>x(e.target.value),placeholder:"Enter reason for rejection...",className:"w-full p-4 border border-gray-300 rounded-lg resize-none h-32 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 text-gray-900 placeholder-gray-500","aria-describedby":"reject-reason-help"}),e.jsx("p",{id:"reject-reason-help",className:"text-xs text-gray-500 mt-1",children:"Minimum 10 characters required"}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(a,{variant:"outline",onClick:()=>{g(!1),x("")},className:"px-6 py-2 border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),e.jsx(a,{onClick:()=>{n("rejected",m),g(!1),x("")},disabled:!m.trim()||m.trim().length<10,className:"px-6 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-all duration-200",children:"Reject Application"})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Request Resubmission"}),e.jsx("textarea",{value:h,onChange:e=>u(e.target.value),placeholder:"Enter notes about document quality issues...",className:"w-full p-3 border rounded-lg resize-none h-32"}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsx(a,{variant:"outline",onClick:()=>{b(!1),u("")},children:"Cancel"}),e.jsx(a,{onClick:()=>{n("repass","",h),b(!1),u("")},disabled:!h.trim(),className:"bg-orange-600 hover:bg-orange-700",children:"Request Resubmission"})]})]})})]})}const p=()=>e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})});function g(){const[a,i]=s.useState("stores"),[l,d]=s.useState([{id:"sample-1",name:"ABC Store",email:"abc@store.com",status:"approved"}]),[m,x]=s.useState(!1),[u,g]=s.useState(""),[j,b]=s.useState({isOpen:!1,store:null}),[f,v]=s.useState(""),[y,N]=s.useState(!1),[w,k]=s.useState(""),[L,C]=s.useState(!1),S=t(),_=r(),B=sessionStorage.getItem("auth_token")||localStorage.getItem("token"),[M,z]=s.useState({isOpen:!1}),O=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString()}catch{return e}},A=()=>{z({isOpen:!1})};(()=>{try{const e=sessionStorage.getItem("user");if(e)return JSON.parse(e);const s=localStorage.getItem("user");return s?JSON.parse(s):{}}catch{return{}}})(),s.useEffect(()=>{"storeManagement"===_.state?.from&&i("stores"),D()},[_.state]);const D=async()=>{x(!0),g("");try{const e=await n("/api/superadmin/stores",{headers:{Authorization:`Bearer ${B}`}});Array.isArray(e)&&e.length>0&&d(e)}catch(e){g("Using sample data")}finally{x(!1)}},W=()=>{b({isOpen:!1,store:null}),v(""),k("")};return e.jsxs(o,{variant:"gradientBlue",pattern:"dots",floatingElements:!0,overlay:!0,children:[e.jsx("div",{className:"flex h-screen overflow-hidden",children:e.jsxs("div",{className:"flex-1 flex flex-col h-screen",children:[e.jsxs("header",{className:"sticky top-0 z-50 flex items-center justify-between px-3 sm:px-4 md:px-6 py-3 sm:py-4 bg-white/95 backdrop-blur-md border-b border-gray-200/50 shadow-sm gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 min-w-0 flex-1",children:e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold bg-gradient-to-r from-gray-900 via-gray-800 to-gray-700 bg-clip-text text-transparent tracking-tight truncate",children:"Super Admin Dashboard"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:"Manage stores and verifications"})]})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[e.jsx("button",{onClick:()=>{C(!0),D(),setTimeout(()=>{C(!1)},500)},disabled:L,className:"p-2.5 rounded-lg bg-white border border-gray-200 shadow-sm hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 group disabled:opacity-50",title:"Refresh Data",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 "+(L?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("button",{onClick:()=>{z({isOpen:!0})},className:"p-2.5 rounded-lg bg-white border border-red-200 shadow-sm hover:bg-red-50 hover:border-red-300 transition-all duration-200 group",title:"Logout",children:e.jsx(p,{})})]})]}),e.jsxs("main",{className:"flex-1 p-3 sm:p-4 md:p-6 lg:p-8 overflow-auto bg-gradient-to-br from-gray-50 via-blue-50/30 to-green-50/20",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-xl mb-4 sm:mb-5 md:mb-6 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"flex overflow-x-auto",children:[e.jsxs("button",{onClick:()=>i("stores"),className:"relative px-4 sm:px-5 md:px-6 py-3 sm:py-3.5 md:py-4 font-semibold text-xs sm:text-sm transition-all duration-300 whitespace-nowrap flex-shrink-0 "+("stores"===a?"text-blue-700 bg-blue-50/50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50/50"),children:[e.jsxs("span",{className:"relative z-10 flex items-center gap-1.5 sm:gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Store Management"}),e.jsx("span",{className:"sm:hidden",children:"Stores"})]}),"stores"===a&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-600 to-blue-700"})]}),e.jsxs("button",{onClick:()=>i("verification"),className:"relative px-4 sm:px-5 md:px-6 py-3 sm:py-3.5 md:py-4 font-semibold text-xs sm:text-sm transition-all duration-300 whitespace-nowrap flex-shrink-0 "+("verification"===a?"text-blue-700 bg-blue-50/50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50/50"),children:[e.jsxs("span",{className:"relative z-10 flex items-center gap-1.5 sm:gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Document Verification"}),e.jsx("span",{className:"sm:hidden",children:"Verification"})]}),"verification"===a&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-green-600 to-blue-600"})]})]})}),"verification"===a?e.jsx(h,{isRefreshing:L},a):e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50/50 via-blue-50/30 to-green-50/20 border-b border-gray-200/50 px-4 sm:px-5 md:px-6 py-4 sm:py-4.5 md:py-5",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent truncate",children:"Store Management"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 truncate",children:"Manage and monitor all registered stores"})]})})}),e.jsxs("div",{className:"p-4 sm:p-5 md:p-6",children:[u&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-700 text-sm font-medium",children:(()=>{try{const e=JSON.parse(u);return e.error||e.message||u}catch{return u}})()})]}),m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Loading stores..."})]})}):0===l.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No stores found"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get started by approving new store registrations."})]}):e.jsx("div",{className:"overflow-x-auto -mx-4 sm:-mx-5 md:-mx-6 px-4 sm:px-5 md:px-6",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 sm:py-4 px-2 sm:px-3 md:px-4 text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[150px]",children:"Store Name"}),e.jsx("th",{className:"text-left py-3 sm:py-4 px-2 sm:px-3 md:px-4 text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[180px]",children:"Email"}),e.jsx("th",{className:"text-left py-3 sm:py-4 px-2 sm:px-3 md:px-4 text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[150px]",children:"Business Type"}),e.jsx("th",{className:"text-left py-3 sm:py-4 px-2 sm:px-3 md:px-4 text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[100px]",children:"Status"}),e.jsx("th",{className:"text-right py-3 sm:py-4 px-2 sm:px-3 md:px-4 text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[200px]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.map(s=>e.jsxs("tr",{className:"hover:bg-blue-50/30 transition-colors duration-150 group",children:[e.jsx("td",{className:"py-3 sm:py-4 px-2 sm:px-3 md:px-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold text-xs sm:text-sm shadow-sm flex-shrink-0",children:s.name?.charAt(0)?.toUpperCase()||"S"}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 group-hover:text-blue-700 transition-colors truncate",children:s.name})})]})}),e.jsx("td",{className:"py-3 sm:py-4 px-2 sm:px-3 md:px-4",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate max-w-[200px] sm:max-w-none",children:s.email})}),e.jsx("td",{className:"py-3 sm:py-4 px-2 sm:px-3 md:px-4",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate max-w-[150px] sm:max-w-none",children:s.business_type||"N/A"})}),e.jsx("td",{className:"py-3 sm:py-4 px-2 sm:px-3 md:px-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:["approved"===s.status?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold bg-green-100 text-green-700 border border-green-200",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-600"}),"Active"]}):"suspended"===s.status?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-700 border border-yellow-200",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-yellow-600"}),"Suspended"]}):"rejected"===s.status?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold bg-red-100 text-red-700 border border-red-200",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-600"}),"Rejected"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-700 border border-blue-200",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-600 animate-pulse"}),"Pending"]}),"pending"===s.deletion_status&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[11px] font-semibold bg-orange-100 text-orange-700 border border-orange-200",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-orange-500"}),"Deletion scheduled ",O(s.deletion_scheduled_for)]})]})}),e.jsx("td",{className:"py-3 sm:py-4 px-2 sm:px-3 md:px-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 sm:gap-1.5 md:gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>{S(`/superadmin/stores/${s.id}`)},className:"px-3 py-1.5 text-xs font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",title:"View Details",children:"View"}),e.jsx("button",{onClick:()=>(b({isOpen:!0,store:s}),v(""),void k("")),className:"p-1.5 sm:p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200 border border-transparent hover:border-red-200 flex-shrink-0",title:"Delete Store",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},s.id))})]})})]})]})]})]})}),e.jsx(c,{isOpen:j.isOpen,onClose:W,title:"",size:"md",children:e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-50 via-red-50/80 to-orange-50/50 border-b border-red-100 px-6 py-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Confirm Store Deletion"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-red-50/50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-1",children:["You are about to delete:"," ",e.jsx("span",{className:"text-red-700 font-bold",children:j.store?.name})]}),e.jsx("p",{className:"text-sm text-red-700",children:"All associated data including users, products, inventory, and sales records will be permanently deleted."})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"deletePassword",className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("div",{className:"w-5 h-5 bg-white border-2 border-blue-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),"Enter your password to confirm"]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"password",id:"deletePassword",value:f,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 bg-gray-50 focus:bg-white",placeholder:"Enter your password",disabled:y})}),w&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:w})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:W,disabled:y,className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(j.store&&f){N(!0),k("");try{await n(`/api/superadmin/stores/${j.store.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${B}`},body:JSON.stringify({password:f})}),d(e=>e.filter(e=>e.id!==j.store.id)),b({isOpen:!1,store:null}),g("")}catch(e){k("Failed to delete store. Please check your password and try again.")}finally{N(!1)}}},disabled:!f||y,className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Store"]})})]})]})]})}),e.jsx(c,{isOpen:M.isOpen,onClose:A,title:"",size:"sm",children:e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-50 via-red-50/80 to-orange-50/50 border-b border-red-100 px-6 py-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Confirm Logout"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure you want to log out?"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-6",children:"You will be redirected to the login page and your session will end."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:A,className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:"Cancel"}),e.jsxs("button",{onClick:()=>{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),S("/")},className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})]})})]})}export{g as default};
//# sourceMappingURL=SuperAdmin-CDOfZmSi.js.map
