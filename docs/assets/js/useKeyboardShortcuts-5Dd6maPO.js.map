{"version":3,"file":"useKeyboardShortcuts-5Dd6maPO.js","sources":["../../../frontend/src/hooks/useKeyboardShortcuts.js"],"sourcesContent":["import { useEffect, useMemo } from \"react\";\r\n\r\nconst isTextInput = (target) => {\r\n  if (!target) return false;\r\n  const tag = target.tagName?.toLowerCase();\r\n  const editable =\r\n    target.isContentEditable ||\r\n    [\"input\", \"textarea\", \"select\"].includes(tag) ||\r\n    target.getAttribute?.(\"role\") === \"textbox\";\r\n  return editable;\r\n};\r\n\r\nconst normalizeKeyString = (key = \"\") =>\r\n  key\r\n    .toLowerCase()\r\n    .trim()\r\n    .replace(/\\s+/g, \"\")\r\n    .replace(\"arrow\", \"\");\r\n\r\nconst buildKey = (event) => {\r\n  const parts = [];\r\n  if (event.ctrlKey) parts.push(\"ctrl\");\r\n  if (event.altKey) parts.push(\"alt\");\r\n  if (event.shiftKey) parts.push(\"shift\");\r\n  const key = event.key?.toLowerCase();\r\n  if (key) parts.push(key);\r\n  return parts.join(\"+\");\r\n};\r\n\r\n/**\r\n * useKeyboardShortcuts\r\n * Centralized keyboard shortcut handler with cleanup and enable/disable support.\r\n *\r\n * @param {Array} shortcuts [{ key: 'f1', action: fn, enabled: true, preventDefault: true, allowWhileTyping: false }]\r\n * @param {Array} deps extra dependencies to re-register listener\r\n */\r\n/**\r\n * useKeyboardShortcuts - A hook to handle keyboard shortcuts with proper event handling\r\n * @param {Array} shortcuts - Array of shortcut configurations\r\n * @param {string} shortcuts[].key - The key or key combination (e.g., 'esc', 'ctrl+s')\r\n * @param {Function} shortcuts[].action - The function to execute when the shortcut is triggered\r\n * @param {boolean} [shortcuts[].enabled=true] - Whether the shortcut is enabled\r\n * @param {boolean} [shortcuts[].preventDefault=true] - Whether to prevent default browser behavior\r\n * @param {boolean} [shortcuts[].stopPropagation=true] - Whether to stop event propagation\r\n * @param {boolean} [shortcuts[].allowWhileTyping=false] - Whether to allow the shortcut while typing in an input field\r\n * @param {Array} deps - Dependencies to re-register the shortcuts\r\n */\r\nexport function useKeyboardShortcuts(shortcuts = [], deps = []) {\r\n  const prepared = useMemo(\r\n    () =>\r\n      shortcuts\r\n        .filter(Boolean)\r\n        .map((s) => ({\r\n          ...s,\r\n          key: normalizeKeyString(s.key),\r\n        })),\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [JSON.stringify(shortcuts)]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handler = (event) => {\r\n      const currentKey = normalizeKeyString(buildKey(event));\r\n      const match = prepared.find(\r\n        (s) =>\r\n          s.enabled !== false &&\r\n          (currentKey === s.key || event.key?.toLowerCase() === s.key)\r\n      );\r\n      if (!match) return;\r\n\r\n      // Skip if typing in an input field and not explicitly allowed\r\n      if (isTextInput(event.target) && match.allowWhileTyping !== true) {\r\n        return;\r\n      }\r\n\r\n      // Prevent default behavior if not explicitly disabled\r\n      if (match.preventDefault !== false) {\r\n        event.preventDefault();\r\n      }\r\n\r\n      // Only stop propagation if explicitly requested\r\n      // This allows other handlers in the modal to still work\r\n      if (match.stopPropagation === true) {\r\n        event.stopPropagation();\r\n        event.stopImmediatePropagation();\r\n      }\r\n\r\n      // Execute the action if provided\r\n      match.action?.(event);\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handler);\r\n    return () => window.removeEventListener(\"keydown\", handler);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [prepared, ...deps]);\r\n}\r\n\r\nexport default useKeyboardShortcuts;\r\n\r\n"],"names":["normalizeKeyString","key","toLowerCase","trim","replace","useKeyboardShortcuts","shortcuts","deps","prepared","useMemo","filter","Boolean","map","s","JSON","stringify","useEffect","handler","event","currentKey","parts","ctrlKey","push","altKey","shiftKey","join","buildKey","match","find","enabled","target","tag","tagName","isContentEditable","includes","getAttribute","isTextInput","allowWhileTyping","preventDefault","stopPropagation","stopImmediatePropagation","action","window","addEventListener","removeEventListener"],"mappings":"yCAEA,MAUMA,EAAqBA,CAACC,EAAM,KAChCA,EACGC,cACAC,OACAC,QAAQ,OAAQ,IAChBA,QAAQ,QAAS,IA8Bf,SAASC,EAAqBC,EAAY,GAAIC,EAAO,IAC1D,MAAMC,EAAWC,EAAOA,QACtB,IACEH,EACGI,OAAOC,SACPC,IAAKC,IAAO,IACRA,EACHZ,IAAKD,EAAmBa,EAAEZ,QAGhC,CAACa,KAAKC,UAAUT,KAGlBU,EAAAA,UAAU,KACR,MAAMC,EAAWC,IACf,MAAMC,EAAanB,EA3CPkB,KAChB,MAAME,EAAQ,GACVF,EAAMG,SAASD,EAAME,KAAK,QAC1BJ,EAAMK,QAAQH,EAAME,KAAK,OACzBJ,EAAMM,UAAUJ,EAAME,KAAK,SAC/B,MAAMrB,EAAMiB,EAAMjB,KAAKC,cAEvB,OADID,GAAKmB,EAAME,KAAKrB,GACbmB,EAAMK,KAAK,MAoCwBC,CAASR,IACzCS,EAAQnB,EAASoB,KACpBf,IACe,IAAdA,EAAEgB,UACDV,IAAeN,EAAEZ,KAAOiB,EAAMjB,KAAKC,gBAAkBW,EAAEZ,MAEvD0B,IAlEUG,KACnB,IAAKA,EAAQ,OAAO,EACpB,MAAMC,EAAMD,EAAOE,SAAS9B,cAK5B,OAHE4B,EAAOG,mBACP,CAAC,QAAS,WAAY,UAAUC,SAASH,IACP,YAAlCD,EAAOK,eAAe,SA+DhBC,CAAYlB,EAAMY,UAAsC,IAA3BH,EAAMU,oBAKV,IAAzBV,EAAMW,gBACRpB,EAAMoB,kBAKsB,IAA1BX,EAAMY,kBACRrB,EAAMqB,kBACNrB,EAAMsB,4BAIRb,EAAMc,SAASvB,MAIjB,OADAwB,OAAOC,iBAAiB,UAAW1B,GAC5B,IAAMyB,OAAOE,oBAAoB,UAAW3B,IAElD,CAACT,KAAaD,GACnB"}