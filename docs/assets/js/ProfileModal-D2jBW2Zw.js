import{j as s}from"./utils-L0j39QIW.js";import{a as e}from"./vendor-DPJ7iNYg.js";import{b as r,a}from"./index-DDmWiPZn.js";import{B as o}from"./BaseModal-BJkFAYW_.js";const d=({isOpen:d,onClose:t,userData:l})=>{const[n,i]=e.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[c,u]=e.useState(!1),[w,m]=e.useState(""),[b,p]=e.useState("");if(e.useEffect(()=>{d&&(i({currentPassword:"",newPassword:"",confirmPassword:""}),m(""),p(""))},[d]),!d)return null;return s.jsxs(o,{isOpen:d,onClose:t,title:"Update Password",subtitle:"Cashiers can only change their password here",footer:s.jsxs("div",{className:"w-full flex gap-2 justify-end",children:[s.jsx(r,{label:"Cancel",variant:"secondary",onClick:t,disabled:c}),s.jsx(r,{label:c?"Saving...":"Save Password",variant:"primary",onClick:async()=>{if(p(""),m(""),n.currentPassword&&n.newPassword&&n.confirmPassword)if(n.newPassword===n.confirmPassword){u(!0);try{const s=sessionStorage.getItem("auth_token");await a("/api/auth/password",{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({currentPassword:n.currentPassword,newPassword:n.newPassword})}),m("Password updated successfully."),i({currentPassword:"",newPassword:"",confirmPassword:""})}catch(s){p(s?.error||s?.message||"Failed to update password. Please check your current password.")}finally{u(!1)}}else p("New password and confirmation do not match.");else p("Please fill in all password fields.")},disabled:c})]}),children:[w&&s.jsx("div",{className:"text-sm text-emerald-700 bg-emerald-50 border border-emerald-200 rounded-lg px-3 py-2 mb-3",children:w}),b&&s.jsx("div",{className:"text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg px-3 py-2 mb-3",children:b}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-1",children:"Current Password"}),s.jsx("input",{type:"password",className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n.currentPassword,onChange:s=>i(e=>({...e,currentPassword:s.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-1",children:"New Password"}),s.jsx("input",{type:"password",className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n.newPassword,onChange:s=>i(e=>({...e,newPassword:s.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-1",children:"Confirm New Password"}),s.jsx("input",{type:"password",className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n.confirmPassword,onChange:s=>i(e=>({...e,confirmPassword:s.target.value}))})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 text-xs text-blue-800",children:"Password must be at least 12 characters and include upper, lower, number, and special characters."})]})]})};export{d as P};
//# sourceMappingURL=ProfileModal-D2jBW2Zw.js.map
