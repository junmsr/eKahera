import{j as e}from"./utils-CzS7jPpm.js";import{a as t,R as s}from"./vendor-DpjJfaBO.js";import{a,u as r,b as l,c as o}from"./index-DXkpZ5oM.js";import{P as n}from"./PageLayout-v7sywRHs.js";import{N as d}from"./Nav-Admin-CMMmdbJb.js";import{C as i}from"./Card-BlR7hDww.js";import{S as c}from"./SectionHeader-Ma_y7mUs.js";import{R as m,B as x,C as h,X as g,Y as u,T as b,a as f,L as p,b as j,c as y,P as N,d as w,e as v}from"./charts-BEcyzEp-.js";import{B as S}from"./index-NdfkD3QT.js";import{P as k}from"./ProfileModal-BkU54iA9.js";import{N as T}from"./NotificationDropdown-D0-np68N.js";import"./Navbar-NowDHxqz.js";import"./Logo-CG6DFU3b.js";/* empty css              */import"./PrivacyPolicyModal-BwsiKBNR.js";import"./BaseModal-BODUq_pt.js";import"./Modal-B68Uj7nQ.js";import"./FormField-B3zxLfAq.js";import"./Input-D0wlSige.js";import"./ScannerCard-BF2D7Jq6.js";import"./qr-CcdB0EcG.js";function D({title:t,children:s,className:a="",...r}){return e.jsxs(i,{className:`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl group ${a}`,...r,children:[t&&e.jsx(c,{size:"md",align:"left",className:"text-gray-900 mb-6 font-bold group-hover:text-blue-600 transition-colors duration-300",children:t}),e.jsxs("div",{className:"relative",children:[s,e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-blue-50/20 rounded-lg pointer-events-none"})]})]})}function _({stats:t,className:s="",...a}){return e.jsx(i,{className:`bg-white backdrop-blur-sm border border-gray-100 shadow-sm rounded-2xl ${s}`,...a,children:e.jsxs("div",{className:"grid grid-cols-1 divide-y divide-gray-200/60 p-6 md:p-8 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"₱"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Today's Sales"}),e.jsxs("span",{className:"text-2xl md:text-xl font-bold text-gray-900 mt-0.5",children:["₱",Number(t.sales||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"↻"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Transactions"}),e.jsx("span",{className:"text-2xl md:text-xl font-bold text-gray-900 mt-0.5",children:Number(t.transactions||0).toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"★"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Top Product"}),e.jsx("span",{className:"text-xl md:text-lg font-bold text-gray-900 mt-0.5 leading-tight line-clamp-2",children:t.topProduct||"-"})]})]}),e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"#"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Total Items Sold"}),e.jsx("span",{className:"text-2xl md:text-xl font-bold text-gray-900 mt-0.5",children:Number(t.totalItemsSold||0).toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"~"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Avg TX Value"}),e.jsxs("span",{className:"text-2xl md:text-xl font-bold text-gray-900 mt-0.5",children:["₱",Number(t.averageTransactionValue||0).toLocaleString()]})]})]})]})})}const P=({trend:t})=>"up"===t?e.jsx("span",{className:"text-blue-600 font-semibold text-xl",children:"↗"}):"down"===t?e.jsx("span",{className:"text-blue-400 font-semibold text-xl",children:"↘"}):e.jsx("span",{className:"text-gray-400 font-semibold text-xl",children:"→"});function M(){const[s,r]=t.useState([]),[l,o]=t.useState([]),[n,d]=t.useState([]),[i,c]=t.useState([]),[S,k]=t.useState([]),[T,D]=t.useState({}),[_,M]=t.useState({cashFlow:0,operatingCosts:0,profitGrowth:0}),I=["#3b82f6","#1d4ed8","#1e40af","#2563eb","#60a5fa","#93c5fd","#bfdbfe"];return t.useEffect(()=>{(async()=>{try{const[e,t,s,l,n,i,m]=await Promise.all([a("/api/stats/key-metrics"),a("/api/stats/sales-by-location"),a("/api/stats/revenue-vs-expenses"),a("/api/stats/profit-trend"),a("/api/stats/payment-methods"),a("/api/stats/product-performance"),a("/api/stats/business-stats")]);D(e||{}),r(t||[]),o(s||[]),d(l||[]),c(n||[]),k(i||[]),M(m||{})}catch(e){console.error("Error fetching business report data:",e)}})()},[]),e.jsxs("section",{className:"w-full px-5 md:px-8 py-6 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8 w-full min-h-[350px]",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Sales by Location"}),e.jsx(m,{width:"100%",height:280,children:e.jsxs(x,{data:s,margin:{top:10,right:10,left:0,bottom:10},children:[e.jsx(h,{strokeDasharray:"3 3",stroke:"#cbd5e1"}),e.jsx(g,{dataKey:"location",tick:{fontSize:13,fill:"#1e40af"},padding:{left:10,right:10}}),e.jsx(u,{tick:{fontSize:13,fill:"#1e40af"}}),e.jsx(b,{contentStyle:{background:"#f0f9ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e3a8a"}}),e.jsx(f,{dataKey:"sales",fill:"#3b82f6",radius:[10,10,0,0],barSize:40,background:{fill:"#c7d2fe"}})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Revenue vs Expenses"}),e.jsx(m,{width:"100%",height:280,children:e.jsxs(x,{data:l,margin:{top:10,right:10,left:0,bottom:10},children:[e.jsx(h,{strokeDasharray:"3 3",stroke:"#cbd5e1"}),e.jsx(g,{dataKey:"month",tick:{fontSize:13,fill:"#1e40af"},padding:{left:10,right:10}}),e.jsx(u,{tick:{fontSize:13,fill:"#1e40af"}}),e.jsx(b,{contentStyle:{background:"#f0f9ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e3a8a"}}),e.jsx(p,{verticalAlign:"top",wrapperStyle:{paddingBottom:10}}),e.jsx(f,{dataKey:"revenue",fill:"#2563eb",radius:[10,10,0,0],barSize:32,background:{fill:"#bfdbfe"}}),e.jsx(f,{dataKey:"expenses",fill:"#93c5fd",radius:[10,10,0,0],barSize:32,background:{fill:"#dbeafe"}})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8 w-full min-h-[350px]",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Profit Trends"}),e.jsx(m,{width:"100%",height:280,children:e.jsxs(j,{data:n,margin:{top:10,right:10,left:0,bottom:10},children:[e.jsx(h,{strokeDasharray:"3 3",stroke:"#cbd5e1"}),e.jsx(g,{dataKey:"month",tick:{fontSize:13,fill:"#1e40af"},padding:{left:10,right:10}}),e.jsx(u,{tick:{fontSize:13,fill:"#1e40af"}}),e.jsx(b,{contentStyle:{background:"#f0f9ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e3a8a"}}),e.jsx(y,{type:"monotone",dataKey:"profit",stroke:"#2563eb",strokeWidth:3,dot:{fill:"#2563eb",r:6}})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Payment Methods"}),e.jsx(m,{width:"100%",height:280,children:e.jsxs(N,{margin:{top:20,right:20,left:20,bottom:20},children:[e.jsx(w,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,value:t})=>`${e} ${t}%`,outerRadius:90,dataKey:"value",children:i.map((t,s)=>e.jsx(v,{fill:I[s%I.length]},`cell-${s}`))}),e.jsx(b,{formatter:(e,t,s)=>[`${Number(e).toFixed(0)}%`,s?.payload?.name],contentStyle:{background:"#eff6ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e40af"}}),e.jsx(p,{verticalAlign:"bottom",height:36})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-md mb-8 w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6 select-none",children:"Product Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{const t=Math.max(...S.map(e=>e.sales||0));return S.map(s=>{const a=t?Math.round(s.sales/t*100):0;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-150",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-semibold text-gray-800 text-sm",children:s.name}),e.jsx(P,{trend:s.trend})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Sales progress for ${s.name}`,style:{width:`${a}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 font-semibold",children:["₱",s.sales.toLocaleString()]})]},s.name)})})()})]})]})}const I="#93c5fd",R="#3e209bff";function L({data:t,className:s="",range:a="month"}){return e.jsx(D,{title:e.jsxs("span",{className:"text-blue-700",children:["Visitors for the ",{week:"this week",month:"this month",year:"this year"}[a]||"last 6 months"]}),className:`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl ${s}`,children:e.jsx("div",{className:"h-72",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(j,{data:t,margin:{top:20,right:20,left:0,bottom:5},children:[e.jsx(h,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(g,{dataKey:"name",tick:{fill:"#374151",fontSize:14}}),e.jsx(u,{tick:{fill:"#374151",fontSize:14}}),e.jsx(b,{contentStyle:{background:"#fff",borderColor:"#e5e7eb",borderRadius:8}}),e.jsx(y,{type:"monotone",dataKey:"value",stroke:I,strokeWidth:3,dot:{r:5,fill:I}})]})})})})}function $({data:t,className:s=""}){return e.jsx(D,{title:e.jsx("span",{className:"text-blue-700",children:"Sales by Product Category"}),className:`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl ${s}`,children:e.jsx("div",{className:"h-72",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(N,{children:[e.jsx(w,{data:t,dataKey:"percent",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:e=>`${e.name} (${Number(e.percent||0).toFixed(1)}%)`,fill:R,children:t.map((t,s)=>{const a=[I,"#1e2cecff",R];return e.jsx(v,{fill:a[s%a.length]},`cell-${s}`)})}),e.jsx(p,{}),e.jsx(b,{formatter:(e,t,s)=>[`${Number(e).toFixed(1)}%`,s?.payload?.name],contentStyle:{background:"#fafafa",borderColor:R,borderRadius:8}})]})})})})}function C(){const[i,c]=t.useState({revenue:0,expenses:0,netProfit:0,grossMargin:0,totalTransactions:0,totalItemsSold:0,averageTransactionValue:0}),[m,x]=t.useState([]),[h,g]=t.useState("month"),[u,b]=t.useState(!1),[f,p]=t.useState([]),[j,y]=t.useState([]),[N,w]=t.useState([]),[v,D]=t.useState(!1),[P,I]=t.useState([]),[R,C]=t.useState(0),[O,E]=t.useState(!1),W=s.useRef(null);r();const[z,V]=t.useState(!1),[A,K]=t.useState({sales:0,transactions:0,topProduct:"-",totalItemsSold:0,averageTransactionValue:0});t.useEffect(()=>{(async()=>{try{const e=sessionStorage.getItem("auth_token"),t=new Date,s=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,r=await a("/api/dashboard/overview",{headers:o(e),params:{startDate:s,endDate:s}});r&&K({sales:r.totalSales,transactions:r.totalTransactions,totalItemsSold:r.totalItemsSold,averageTransactionValue:r.averageTransactionValue,topProduct:r.topProducts?.[0]?.product_name||"-"})}catch(e){console.error("Failed to fetch today's data",e)}})()},[]);const Y=t.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem("user")||"{}")}catch(e){return{}}},[]);t.useEffect(()=>{const e=e=>{W.current&&!W.current.contains(e.target)&&E(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const J=async()=>{try{b(!0);const e=sessionStorage.getItem("auth_token"),t=new Date;let s,r;switch(h){case"week":s=new Date(t),s.setDate(t.getDate()-t.getDay()),s.setHours(0,0,0,0);break;case"month":default:s=new Date(t.getFullYear(),t.getMonth(),1);break;case"year":s=new Date(t.getFullYear(),0,1)}r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59);const l=e=>{const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},n=l(s),d=l(r);console.log("Fetching data for date range:",{range:h,startDate:s.toISOString(),endDate:r.toISOString(),formattedStart:n,formattedEnd:d});const[i,m,g,u,f]=await Promise.all([a("/api/dashboard/overview",{headers:o(e),params:{startDate:n,endDate:d}}),a("/api/stats/customers-timeseries",{headers:o(e),params:{startDate:n,endDate:d}}),a("/api/stats/sales-by-category",{headers:o(e),params:{startDate:n,endDate:d}}),a("/api/dashboard/inventory-movement",{headers:o(e)}),a("/api/products/low-stock",{headers:o(e)})]),j=(m||[]).map(e=>({...e,value:Number(e.customers||e.total||e.value||0)})),N=(g||[]).reduce((e,t)=>e+Number(t.value||0),0)||1,v=(g||[]).map(e=>({...e,percent:Number(e.value||0)/N*100}));if(i){console.log("Overview data received:",i);const e=Number(i.totalSales||0),t=Number(i.totalExpenses||0),s=e-t,a=e>0?(e-t)/e*100:0,r=Number(i.totalTransactions||0),l=Number(i.totalItemsSold||0),o=Number(i.averageTransactionValue||e/(r||1));console.log("Processed metrics:",{revenue:e,expenses:t,netProfit:s,grossMargin:a,totalTransactions:r,totalItemsSold:l,avgTxValue:o}),c({revenue:e,expenses:t,netProfit:s,grossMargin:a,totalTransactions:r,totalItemsSold:l,averageTransactionValue:o}),x([{label:"Total Revenue",value:e},{label:"Total Transactions",value:r},{label:"Total Items Sold",value:l},{label:"Avg TX Value",value:o}])}p(j),y(v);const S=(u||[]).filter(e=>Number(e.quantity_in_stock||0)<=10);w(S.length?S:f||[])}catch(e){console.error("Failed to fetch dashboard data",e)}finally{b(!1)}};t.useEffect(()=>{J(),(async()=>{try{const e=sessionStorage.getItem("auth_token"),t=await a("/api/logs",{headers:o(e)}),s=new Set(JSON.parse(sessionStorage.getItem("read_notif_ids")||"[]")),r=new Set(JSON.parse(sessionStorage.getItem("deleted_notif_ids")||"[]")),l=(t||[]).filter(e=>!r.has(e.log_id)).map(e=>({id:e.log_id,title:e.action,message:`${e.username} (${e.role}) did an action: ${e.action}`,time:new Date(e.date_time).toLocaleString(),isRead:s.has(e.log_id)}));I(l),C(l.filter(e=>!e.isRead).length)}catch(e){console.error("Failed to fetch notifications",e)}})()},[h]);const B=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),H=e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:J,disabled:u,title:"Refresh Data",className:"bg-white/80 backdrop-blur-sm hover:bg-white text-gray-700 p-1.5 sm:p-2 rounded-lg border border-gray-200/80 text-sm font-medium transition-all duration-200 hover:shadow-md hover:scale-[1.02]",children:e.jsx(S,{className:"w-4 h-4 sm:w-5 sm:h-5 "+(u?"animate-spin":"")})}),e.jsxs("select",{className:"bg-white/80 backdrop-blur-sm hover:bg-white text-gray-700 px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-lg border border-gray-200/80 text-xs sm:text-sm font-medium transition-all duration-200 outline-none cursor-pointer hover:shadow-md",value:h,onChange:e=>g(e.target.value),disabled:u,children:[e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"month",children:"Month"}),e.jsx("option",{value:"year",children:"Year"})]}),e.jsx("div",{className:"-mt-2 -mb-3 py-8 px-8 pr-12 flex justify-end",children:e.jsxs(l,{onClick:()=>{const e=m.map(e=>[e.label,e.value,e.change]);N.length>0&&(e.push(["","",""]),e.push(["Low Stock Products","",""]),e.push(["Product Name","Quantity Left",""]),N.forEach(t=>e.push([t.product_name,t.quantity_in_stock,""])));const t=[["Label","Value","Change"],...e].map(e=>e.join(",")).join("\n"),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="dashboard-data.csv",a.click()},size:"sm",variant:"secondary",className:"flex items-center gap-2 w-full sm:w-auto shrink-0",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]})}),e.jsx("div",{className:"relative",ref:W,children:e.jsx(T,{notifications:P,unreadCount:R,onMarkAsRead:e=>{const t=JSON.parse(sessionStorage.getItem("read_notif_ids")||"[]");t.includes(e)||sessionStorage.setItem("read_notif_ids",JSON.stringify([...t,e])),I(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t)),C(e=>Math.max(0,e-1))},onMarkAsUnread:e=>{const t=JSON.parse(sessionStorage.getItem("read_notif_ids")||"[]").filter(t=>t!==e);sessionStorage.setItem("read_notif_ids",JSON.stringify(t)),I(t=>t.map(t=>t.id===e?{...t,isRead:!1}:t)),C(e=>e+1)},onDelete:e=>{const t=JSON.parse(sessionStorage.getItem("deleted_notif_ids")||"[]");sessionStorage.setItem("deleted_notif_ids",JSON.stringify([...t,e])),I(t=>t.filter(t=>t.id!==e));const s=P.find(t=>t.id===e);s&&!s.isRead&&C(e=>Math.max(0,e-1))},isOpen:O,onToggle:()=>E(!O),containerRef:W})}),e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-1 sm:gap-2 bg-white/80 backdrop-blur-sm p-1 sm:p-1.5 sm:px-2 sm:py-2 rounded-lg border border-gray-200/80 hover:bg-white transition-all duration-200 hover:shadow-md hover:scale-[1.02] shrink-0",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full flex items-center justify-center text-sm font-medium shadow-lg",children:Y.username?.[0]?.toUpperCase()||"A"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:inline",children:Y.username||"Admin"})]})]});return e.jsxs(n,{title:"DASHBOARD",subtitle:"",sidebar:e.jsx(d,{}),headerActions:H,isSidebarOpen:z,setSidebarOpen:V,className:"bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"p-4 lg:hidden",children:u?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/5"})]}):e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Low Stock Products"})}),e.jsx(F,{lowStockProducts:N})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 w-full p-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-5 border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B(i.revenue)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"week"===h?"This Week":"month"===h?"This Month":"This Year"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-5 border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Operating Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B(i.expenses)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"week"===h?"This Week":"month"===h?"This Month":"This Year"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-5 border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Net Profit"}),e.jsxs("p",{className:"text-2xl font-bold "+(i.netProfit>=0?"text-green-600":"text-red-600"),children:[B(Math.abs(i.netProfit)),i.netProfit<0&&e.jsx("span",{className:"text-sm text-red-500 ml-1",children:"(Loss)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"week"===h?"This Week":"month"===h?"This Month":"This Year"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-5 border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Gross Margin"}),e.jsxs("p",{className:"text-2xl font-bold "+(i.grossMargin>=0?"text-green-600":"text-red-600"),children:[i.grossMargin.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"week"===h?"This Week":"month"===h?"This Month":"This Year"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 p-6 pb-10 lg:pb-6 pt-0",children:[e.jsx("div",{className:"lg:col-span-8 flex flex-col gap-6",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 h-[336px] animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-full h-64 bg-gray-200 rounded-lg"})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 h-[336px] animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-64 h-64 bg-gray-200 rounded-full"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{data:f,range:h}),e.jsx($,{data:j})]})}),e.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-6",children:[u?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2"})]}):e.jsx("div",{className:"hidden lg:block",children:e.jsx(_,{stats:A})}),u?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 animate-pulse hidden lg:block",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/5"})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md hidden lg:block",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Low Stock Products"})}),N.length>0?e.jsx("ul",{className:"divide-y divide-gray-200",children:N.map(t=>e.jsxs("li",{className:"py-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.product_name}),e.jsxs("span",{className:"text-sm font-bold text-red-600",children:[t.quantity_in_stock," left"]})]},t.product_id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No products with low stock."})]})]})]}),e.jsx("div",{className:"max-w-10lx mx-auto w-full",children:e.jsx(M,{})}),e.jsx(k,{isOpen:v,onClose:()=>D(!1),userData:Y})]})}function F({lowStockProducts:t}){return 0===t.length?e.jsx("p",{className:"text-sm text-gray-500",children:"No products with low stock."}):e.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(t=>e.jsxs("li",{className:"py-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.product_name}),e.jsxs("span",{className:"text-sm font-bold text-red-600",children:[t.quantity_in_stock," left"]})]},t.product_id))})}export{C as default};
//# sourceMappingURL=Dashboard-CAH_OWAS.js.map
