{"version":3,"file":"Receipt-B_xx-y8x.js","sources":["../../../frontend/node_modules/styled-jsx/dist/index/index.js","../../../frontend/node_modules/styled-jsx/style.js","../../../frontend/src/pages/Receipt.jsx"],"sourcesContent":["require('client-only');\nvar React = require('react');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n/*\nBased on Glamor's sheet\nhttps://github.com/threepointone/glamor/blob/667b480d31b3721a905021b26e1290ce92ca2879/src/sheet.js\n*/ function _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nvar isProd = typeof process !== \"undefined\" && process.env && process.env.NODE_ENV === \"production\";\nvar isString = function(o) {\n    return Object.prototype.toString.call(o) === \"[object String]\";\n};\nvar StyleSheet = /*#__PURE__*/ function() {\n    function StyleSheet(param) {\n        var ref = param === void 0 ? {} : param, _name = ref.name, name = _name === void 0 ? \"stylesheet\" : _name, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? isProd : _optimizeForSpeed;\n        invariant$1(isString(name), \"`name` must be a string\");\n        this._name = name;\n        this._deletedRulePlaceholder = \"#\" + name + \"-deleted-rule____{}\";\n        invariant$1(typeof optimizeForSpeed === \"boolean\", \"`optimizeForSpeed` must be a boolean\");\n        this._optimizeForSpeed = optimizeForSpeed;\n        this._serverSheet = undefined;\n        this._tags = [];\n        this._injected = false;\n        this._rulesCount = 0;\n        var node = typeof window !== \"undefined\" && document.querySelector('meta[property=\"csp-nonce\"]');\n        this._nonce = node ? node.getAttribute(\"content\") : null;\n    }\n    var _proto = StyleSheet.prototype;\n    _proto.setOptimizeForSpeed = function setOptimizeForSpeed(bool) {\n        invariant$1(typeof bool === \"boolean\", \"`setOptimizeForSpeed` accepts a boolean\");\n        invariant$1(this._rulesCount === 0, \"optimizeForSpeed cannot be when rules have already been inserted\");\n        this.flush();\n        this._optimizeForSpeed = bool;\n        this.inject();\n    };\n    _proto.isOptimizeForSpeed = function isOptimizeForSpeed() {\n        return this._optimizeForSpeed;\n    };\n    _proto.inject = function inject() {\n        var _this = this;\n        invariant$1(!this._injected, \"sheet already injected\");\n        this._injected = true;\n        if (typeof window !== \"undefined\" && this._optimizeForSpeed) {\n            this._tags[0] = this.makeStyleTag(this._name);\n            this._optimizeForSpeed = \"insertRule\" in this.getSheet();\n            if (!this._optimizeForSpeed) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: optimizeForSpeed mode not supported falling back to standard mode.\");\n                }\n                this.flush();\n                this._injected = true;\n            }\n            return;\n        }\n        this._serverSheet = {\n            cssRules: [],\n            insertRule: function(rule, index) {\n                if (typeof index === \"number\") {\n                    _this._serverSheet.cssRules[index] = {\n                        cssText: rule\n                    };\n                } else {\n                    _this._serverSheet.cssRules.push({\n                        cssText: rule\n                    });\n                }\n                return index;\n            },\n            deleteRule: function(index) {\n                _this._serverSheet.cssRules[index] = null;\n            }\n        };\n    };\n    _proto.getSheetForTag = function getSheetForTag(tag) {\n        if (tag.sheet) {\n            return tag.sheet;\n        }\n        // this weirdness brought to you by firefox\n        for(var i = 0; i < document.styleSheets.length; i++){\n            if (document.styleSheets[i].ownerNode === tag) {\n                return document.styleSheets[i];\n            }\n        }\n    };\n    _proto.getSheet = function getSheet() {\n        return this.getSheetForTag(this._tags[this._tags.length - 1]);\n    };\n    _proto.insertRule = function insertRule(rule, index) {\n        invariant$1(isString(rule), \"`insertRule` accepts only strings\");\n        if (typeof window === \"undefined\") {\n            if (typeof index !== \"number\") {\n                index = this._serverSheet.cssRules.length;\n            }\n            this._serverSheet.insertRule(rule, index);\n            return this._rulesCount++;\n        }\n        if (this._optimizeForSpeed) {\n            var sheet = this.getSheet();\n            if (typeof index !== \"number\") {\n                index = sheet.cssRules.length;\n            }\n            // this weirdness for perf, and chrome's weird bug\n            // https://stackoverflow.com/questions/20007992/chrome-suddenly-stopped-accepting-insertrule\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                return -1;\n            }\n        } else {\n            var insertionPoint = this._tags[index];\n            this._tags.push(this.makeStyleTag(this._name, rule, insertionPoint));\n        }\n        return this._rulesCount++;\n    };\n    _proto.replaceRule = function replaceRule(index, rule) {\n        if (this._optimizeForSpeed || typeof window === \"undefined\") {\n            var sheet = typeof window !== \"undefined\" ? this.getSheet() : this._serverSheet;\n            if (!rule.trim()) {\n                rule = this._deletedRulePlaceholder;\n            }\n            if (!sheet.cssRules[index]) {\n                // @TBD Should we throw an error?\n                return index;\n            }\n            sheet.deleteRule(index);\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                // In order to preserve the indices we insert a deleteRulePlaceholder\n                sheet.insertRule(this._deletedRulePlaceholder, index);\n            }\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"old rule at index `\" + index + \"` not found\");\n            tag.textContent = rule;\n        }\n        return index;\n    };\n    _proto.deleteRule = function deleteRule(index) {\n        if (typeof window === \"undefined\") {\n            this._serverSheet.deleteRule(index);\n            return;\n        }\n        if (this._optimizeForSpeed) {\n            this.replaceRule(index, \"\");\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"rule at index `\" + index + \"` not found\");\n            tag.parentNode.removeChild(tag);\n            this._tags[index] = null;\n        }\n    };\n    _proto.flush = function flush() {\n        this._injected = false;\n        this._rulesCount = 0;\n        if (typeof window !== \"undefined\") {\n            this._tags.forEach(function(tag) {\n                return tag && tag.parentNode.removeChild(tag);\n            });\n            this._tags = [];\n        } else {\n            // simpler on server\n            this._serverSheet.cssRules = [];\n        }\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        if (typeof window === \"undefined\") {\n            return this._serverSheet.cssRules;\n        }\n        return this._tags.reduce(function(rules, tag) {\n            if (tag) {\n                rules = rules.concat(Array.prototype.map.call(_this.getSheetForTag(tag).cssRules, function(rule) {\n                    return rule.cssText === _this._deletedRulePlaceholder ? null : rule;\n                }));\n            } else {\n                rules.push(null);\n            }\n            return rules;\n        }, []);\n    };\n    _proto.makeStyleTag = function makeStyleTag(name, cssString, relativeToTag) {\n        if (cssString) {\n            invariant$1(isString(cssString), \"makeStyleTag accepts only strings as second parameter\");\n        }\n        var tag = document.createElement(\"style\");\n        if (this._nonce) tag.setAttribute(\"nonce\", this._nonce);\n        tag.type = \"text/css\";\n        tag.setAttribute(\"data-\" + name, \"\");\n        if (cssString) {\n            tag.appendChild(document.createTextNode(cssString));\n        }\n        var head = document.head || document.getElementsByTagName(\"head\")[0];\n        if (relativeToTag) {\n            head.insertBefore(tag, relativeToTag);\n        } else {\n            head.appendChild(tag);\n        }\n        return tag;\n    };\n    _createClass(StyleSheet, [\n        {\n            key: \"length\",\n            get: function get() {\n                return this._rulesCount;\n            }\n        }\n    ]);\n    return StyleSheet;\n}();\nfunction invariant$1(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheet: \" + message + \".\");\n    }\n}\n\nfunction hash(str) {\n    var _$hash = 5381, i = str.length;\n    while(i){\n        _$hash = _$hash * 33 ^ str.charCodeAt(--i);\n    }\n    /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */ return _$hash >>> 0;\n}\nvar stringHash = hash;\n\nvar sanitize = function(rule) {\n    return rule.replace(/\\/style/gi, \"\\\\/style\");\n};\nvar cache = {};\n/**\n * computeId\n *\n * Compute and memoize a jsx id from a basedId and optionally props.\n */ function computeId(baseId, props) {\n    if (!props) {\n        return \"jsx-\" + baseId;\n    }\n    var propsToString = String(props);\n    var key = baseId + propsToString;\n    if (!cache[key]) {\n        cache[key] = \"jsx-\" + stringHash(baseId + \"-\" + propsToString);\n    }\n    return cache[key];\n}\n/**\n * computeSelector\n *\n * Compute and memoize dynamic selectors.\n */ function computeSelector(id, css) {\n    var selectoPlaceholderRegexp = /__jsx-style-dynamic-selector/g;\n    // Sanitize SSR-ed CSS.\n    // Client side code doesn't need to be sanitized since we use\n    // document.createTextNode (dev) and the CSSOM api sheet.insertRule (prod).\n    if (typeof window === \"undefined\") {\n        css = sanitize(css);\n    }\n    var idcss = id + css;\n    if (!cache[idcss]) {\n        cache[idcss] = css.replace(selectoPlaceholderRegexp, id);\n    }\n    return cache[idcss];\n}\n\nfunction mapRulesToStyle(cssRules, options) {\n    if (options === void 0) options = {};\n    return cssRules.map(function(args) {\n        var id = args[0];\n        var css = args[1];\n        return /*#__PURE__*/ React__default[\"default\"].createElement(\"style\", {\n            id: \"__\" + id,\n            // Avoid warnings upon render with a key\n            key: \"__\" + id,\n            nonce: options.nonce ? options.nonce : undefined,\n            dangerouslySetInnerHTML: {\n                __html: css\n            }\n        });\n    });\n}\nvar StyleSheetRegistry = /*#__PURE__*/ function() {\n    function StyleSheetRegistry(param) {\n        var ref = param === void 0 ? {} : param, _styleSheet = ref.styleSheet, styleSheet = _styleSheet === void 0 ? null : _styleSheet, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? false : _optimizeForSpeed;\n        this._sheet = styleSheet || new StyleSheet({\n            name: \"styled-jsx\",\n            optimizeForSpeed: optimizeForSpeed\n        });\n        this._sheet.inject();\n        if (styleSheet && typeof optimizeForSpeed === \"boolean\") {\n            this._sheet.setOptimizeForSpeed(optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    }\n    var _proto = StyleSheetRegistry.prototype;\n    _proto.add = function add(props) {\n        var _this = this;\n        if (undefined === this._optimizeForSpeed) {\n            this._optimizeForSpeed = Array.isArray(props.children);\n            this._sheet.setOptimizeForSpeed(this._optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        if (typeof window !== \"undefined\" && !this._fromServer) {\n            this._fromServer = this.selectFromServer();\n            this._instancesCounts = Object.keys(this._fromServer).reduce(function(acc, tagName) {\n                acc[tagName] = 0;\n                return acc;\n            }, {});\n        }\n        var ref = this.getIdAndRules(props), styleId = ref.styleId, rules = ref.rules;\n        // Deduping: just increase the instances count.\n        if (styleId in this._instancesCounts) {\n            this._instancesCounts[styleId] += 1;\n            return;\n        }\n        var indices = rules.map(function(rule) {\n            return _this._sheet.insertRule(rule);\n        })// Filter out invalid rules\n        .filter(function(index) {\n            return index !== -1;\n        });\n        this._indices[styleId] = indices;\n        this._instancesCounts[styleId] = 1;\n    };\n    _proto.remove = function remove(props) {\n        var _this = this;\n        var styleId = this.getIdAndRules(props).styleId;\n        invariant(styleId in this._instancesCounts, \"styleId: `\" + styleId + \"` not found\");\n        this._instancesCounts[styleId] -= 1;\n        if (this._instancesCounts[styleId] < 1) {\n            var tagFromServer = this._fromServer && this._fromServer[styleId];\n            if (tagFromServer) {\n                tagFromServer.parentNode.removeChild(tagFromServer);\n                delete this._fromServer[styleId];\n            } else {\n                this._indices[styleId].forEach(function(index) {\n                    return _this._sheet.deleteRule(index);\n                });\n                delete this._indices[styleId];\n            }\n            delete this._instancesCounts[styleId];\n        }\n    };\n    _proto.update = function update(props, nextProps) {\n        this.add(nextProps);\n        this.remove(props);\n    };\n    _proto.flush = function flush() {\n        this._sheet.flush();\n        this._sheet.inject();\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        var fromServer = this._fromServer ? Object.keys(this._fromServer).map(function(styleId) {\n            return [\n                styleId,\n                _this._fromServer[styleId]\n            ];\n        }) : [];\n        var cssRules = this._sheet.cssRules();\n        return fromServer.concat(Object.keys(this._indices).map(function(styleId) {\n            return [\n                styleId,\n                _this._indices[styleId].map(function(index) {\n                    return cssRules[index].cssText;\n                }).join(_this._optimizeForSpeed ? \"\" : \"\\n\")\n            ];\n        })// filter out empty rules\n        .filter(function(rule) {\n            return Boolean(rule[1]);\n        }));\n    };\n    _proto.styles = function styles(options) {\n        return mapRulesToStyle(this.cssRules(), options);\n    };\n    _proto.getIdAndRules = function getIdAndRules(props) {\n        var css = props.children, dynamic = props.dynamic, id = props.id;\n        if (dynamic) {\n            var styleId = computeId(id, dynamic);\n            return {\n                styleId: styleId,\n                rules: Array.isArray(css) ? css.map(function(rule) {\n                    return computeSelector(styleId, rule);\n                }) : [\n                    computeSelector(styleId, css)\n                ]\n            };\n        }\n        return {\n            styleId: computeId(id),\n            rules: Array.isArray(css) ? css : [\n                css\n            ]\n        };\n    };\n    /**\n   * selectFromServer\n   *\n   * Collects style tags from the document with id __jsx-XXX\n   */ _proto.selectFromServer = function selectFromServer() {\n        var elements = Array.prototype.slice.call(document.querySelectorAll('[id^=\"__jsx-\"]'));\n        return elements.reduce(function(acc, element) {\n            var id = element.id.slice(2);\n            acc[id] = element;\n            return acc;\n        }, {});\n    };\n    return StyleSheetRegistry;\n}();\nfunction invariant(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheetRegistry: \" + message + \".\");\n    }\n}\nvar StyleSheetContext = /*#__PURE__*/ React.createContext(null);\nStyleSheetContext.displayName = \"StyleSheetContext\";\nfunction createStyleRegistry() {\n    return new StyleSheetRegistry();\n}\nfunction StyleRegistry(param) {\n    var configuredRegistry = param.registry, children = param.children;\n    var rootRegistry = React.useContext(StyleSheetContext);\n    var ref = React.useState(function() {\n        return rootRegistry || configuredRegistry || createStyleRegistry();\n    }), registry = ref[0];\n    return /*#__PURE__*/ React__default[\"default\"].createElement(StyleSheetContext.Provider, {\n        value: registry\n    }, children);\n}\nfunction useStyleRegistry() {\n    return React.useContext(StyleSheetContext);\n}\n\n// Opt-into the new `useInsertionEffect` API in React 18, fallback to `useLayoutEffect`.\n// https://github.com/reactwg/react-18/discussions/110\nvar useInsertionEffect = React__default[\"default\"].useInsertionEffect || React.useLayoutEffect;\nvar defaultRegistry = typeof window !== \"undefined\" ? createStyleRegistry() : undefined;\nfunction JSXStyle(props) {\n    var registry = defaultRegistry ? defaultRegistry : useStyleRegistry();\n    var insertionEffectCalled = React.useRef(false);\n    // `registry` might not exist while server-side rendering\n    if (!registry) {\n        return null;\n    }\n    if (typeof window === \"undefined\") {\n        registry.add(props);\n        return null;\n    }\n    useInsertionEffect(function() {\n        // ReactDOM removes all DOM during hydration in certain cases\n        if (!document.head) {\n            return;\n        }\n        registry.add(props);\n        insertionEffectCalled.current = true;\n        return function() {\n            insertionEffectCalled.current = false;\n            registry.remove(props);\n        };\n    }, [\n        props.id,\n        String(props.dynamic)\n    ]);\n    React.useLayoutEffect(function() {\n        if (!document.head || insertionEffectCalled.current) {\n            return;\n        }\n        registry.add(props);\n        return function() {\n            registry.remove(props);\n        };\n    // props.children can be string[], will be striped since id is identical\n    }, [\n        props.id,\n        String(props.dynamic)\n    ]);\n    return null;\n}\nJSXStyle.dynamic = function(info) {\n    return info.map(function(tagInfo) {\n        var baseId = tagInfo[0];\n        var props = tagInfo[1];\n        return computeId(baseId, props);\n    }).join(\" \");\n};\n\nexports.StyleRegistry = StyleRegistry;\nexports.createStyleRegistry = createStyleRegistry;\nexports.style = JSXStyle;\nexports.useStyleRegistry = useStyleRegistry;\n","module.exports = require('./dist/index').style\n","import React, { useMemo, useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport html2canvas from 'html2canvas';\r\nimport Background from '../components/layout/Background';\r\nimport Card from '../components/common/Card';\r\nimport { api } from '../lib/api';\r\nimport Loader from '../components/common/Loader';\r\nimport { useKeyboardShortcuts } from '../hooks/useKeyboardShortcuts';\r\n\r\nconst ReceiptRow = ({ label, value, isBold }) => (\r\n\t<div className=\"flex justify-between items-center text-sm\">\r\n\t\t<div className=\"text-gray-600\">{label}</div>\r\n\t\t<div className={`text-gray-800 ${isBold ? 'font-bold' : ''}`}>{value}</div>\r\n\t</div>\r\n);\r\n\r\nexport default function Receipt() {\r\n\tconst navigate = useNavigate();\r\n\tconst receiptRef = useRef(null);\r\n\tconst params = new URLSearchParams(window.location.search);\r\n\tconst tn = params.get('tn');\r\n\tconst fromCustomer = params.get('from') === 'customer';\r\n\tconst businessId = localStorage.getItem('business_id');\r\n\tconst user = JSON.parse(sessionStorage.getItem('user') || '{}');\r\n\r\n\tconst [details, setDetails] = useState(null);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [error, setError] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (tn) {\r\n\t\t\tconst fetchDetails = async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tsetLoading(true);\r\n\t\t\t\t\tconst path = fromCustomer\r\n\t\t\t\t\t\t? `/sales/public/details/${encodeURIComponent(tn)}`\r\n\t\t\t\t\t\t: `/sales/details/${encodeURIComponent(tn)}`;\r\n\t\t\t\t\tconst data = await api(path);\r\n\t\t\t\t\tsetDetails(data);\r\n\t\t\t\t\tsetError(null);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tsetError(err.message);\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tfetchDetails();\r\n\t\t} else {\r\n\t\t\tsetError('Transaction number not found.');\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t}, [tn, fromCustomer]);\r\n\r\n\r\n\tconst handlePrint = () => {\r\n\t\tif (!details) return;\r\n\t\tprintThermal(details).catch(err => {\r\n\t\t\tconsole.error(err);\r\n\t\t\talert('Printer not connected');\r\n\t\t});\r\n\t};\r\n\r\n\r\n\tconst handleDownload = async () => {\r\n\t\tif (!details || !receiptRef.current) {\r\n\t\t\talert('Receipt content not available for download. Please wait for the receipt to load.');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\ttry {\r\n\t\t\tconst canvas = await html2canvas(receiptRef.current, {\r\n\t\t\t\tuseCORS: true,\r\n\t\t\t\tscale: 2, // Higher scale for better quality\r\n\t\t\t\tallowTaint: true,\r\n\t\t\t\tbackgroundColor: '#ffffff',\r\n\t\t\t\tlogging: false, // Disable logging for better performance\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// Convert canvas to blob for better mobile support\r\n\t\t\tcanvas.toBlob((blob) => {\r\n\t\t\t\tif (!blob) {\r\n\t\t\t\t\talert('Failed to generate receipt image. Please try again.');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst fileName = `eKahera-Receipt-${tn || 'receipt'}.png`;\r\n\t\t\t\tconst url = window.URL.createObjectURL(blob);\r\n\r\n\t\t\t\t// Check if Web Share API is available and supports files (mobile devices)\r\n\t\t\t\tconst isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n\t\t\t\tconst hasShareAPI = navigator.share && typeof navigator.share === 'function';\r\n\t\t\t\tconst hasCanShare = navigator.canShare && typeof navigator.canShare === 'function';\r\n\r\n\t\t\t\tif (isMobile && hasShareAPI) {\r\n\t\t\t\t\t// Use Web Share API for mobile devices\r\n\t\t\t\t\tconst file = new File([blob], fileName, { type: 'image/png' });\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Check if file sharing is supported\r\n\t\t\t\t\tlet canShareFile = false;\r\n\t\t\t\t\tif (hasCanShare) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tcanShareFile = navigator.canShare({ files: [file] });\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t// canShare might throw, so we'll try sharing anyway\r\n\t\t\t\t\t\t\tcanShareFile = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// If canShare doesn't exist, try sharing anyway (some browsers support it without canShare)\r\n\t\t\t\t\t\tcanShareFile = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (canShareFile) {\r\n\t\t\t\t\t\tnavigator.share({\r\n\t\t\t\t\t\t\ttitle: 'Receipt',\r\n\t\t\t\t\t\t\ttext: `Receipt for transaction ${tn || 'receipt'}`,\r\n\t\t\t\t\t\t\tfiles: [file]\r\n\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\twindow.URL.revokeObjectURL(url);\r\n\t\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\t\t// Share failed (user cancelled or not supported), fallback to download\r\n\t\t\t\t\t\t\tconsole.log('Share failed, falling back to download:', err);\r\n\t\t\t\t\t\t\tdownloadFile(url, fileName, isMobile);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Fallback to download for desktop or mobile without file share support\r\n\t\t\t\tdownloadFile(url, fileName, isMobile);\r\n\t\t\t}, 'image/png');\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error downloading receipt:', error);\r\n\t\t\talert('Failed to download receipt. Please try again.');\r\n\t\t}\r\n\t};\r\n\r\n\tconst downloadFile = (url, fileName, isMobile) => {\r\n\t\tconst link = document.createElement('a');\r\n\t\tlink.download = fileName;\r\n\t\tlink.href = url;\r\n\t\tlink.style.display = 'none';\r\n\t\t\r\n\t\tif (isMobile) {\r\n\t\t\t// On mobile, append link and trigger click\r\n\t\t\tdocument.body.appendChild(link);\r\n\t\t\t\r\n\t\t\t// Use requestAnimationFrame for better mobile compatibility\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// Try to trigger download\r\n\t\t\t\t\tlink.click();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Clean up after a delay\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tif (document.body.contains(link)) {\r\n\t\t\t\t\t\t\tdocument.body.removeChild(link);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twindow.URL.revokeObjectURL(url);\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error('Download click failed:', e);\r\n\t\t\t\t\t// If click fails, open in new tab as last resort\r\n\t\t\t\t\twindow.open(url, '_blank');\r\n\t\t\t\t\tif (document.body.contains(link)) {\r\n\t\t\t\t\t\tdocument.body.removeChild(link);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Don't revoke URL immediately if opened in new tab\r\n\t\t\t\t\tsetTimeout(() => window.URL.revokeObjectURL(url), 1000);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// Desktop: standard download\r\n\t\t\tdocument.body.appendChild(link);\r\n\t\t\tlink.click();\r\n\t\t\tdocument.body.removeChild(link);\r\n\t\t\t// Clean up after a short delay\r\n\t\t\tsetTimeout(() => window.URL.revokeObjectURL(url), 100);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleProceed = () => {\r\n\t\t// Navigate back to POS - cashier goes to cashier-pos, admin/business_owner goes to pos\r\n\t\tif (fromCustomer) {\r\n\t\t\tnavigate('/customer-enter');\r\n\t\t} else if (user && user.role === 'cashier') {\r\n\t\t\tnavigate('/cashier-pos');\r\n\t\t} else if (user && (user.role === 'admin' || user.role === 'business_owner')) {\r\n\t\t\tnavigate('/pos');\r\n\t\t} else {\r\n\t\t\t// Default fallback\r\n\t\t\tnavigate('/pos');\r\n\t\t}\r\n\t};\r\n\r\n\t// Set up keyboard shortcuts\r\n\tuseKeyboardShortcuts(\r\n\t\t[\r\n\t\t\t{\r\n\t\t\t\tkey: 'p',\r\n\t\t\t\taction: (e) => {\r\n\t\t\t\t\tif (!fromCustomer && !loading && details) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\thandlePrint();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tenabled: !fromCustomer && !loading && details,\r\n\t\t\t\tallowWhileTyping: true, // Allow print shortcut even when typing\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: 'enter',\r\n\t\t\t\taction: (e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\thandleProceed();\r\n\t\t\t\t},\r\n\t\t\t\tenabled: !loading && details,\r\n\t\t\t\tallowWhileTyping: false,\r\n\t\t\t},\r\n\t\t],\r\n\t\t[fromCustomer, loading, details, user]\r\n\t);\r\n\r\n\tfunction buildEscPosReceipt(details) {\r\n\t\tconst ESC = '\\x1B';\r\n\t\tconst GS = '\\x1D';\r\n\r\n\t\tlet r = '';\r\n\r\n\t\tr += ESC + '@';                 // init\r\n\t\tr += ESC + 'a' + '\\x01';        // center\r\n\t\tr += details.business.name + '\\n';\r\n\t\tr += details.business.address + '\\n';\r\n\t\tr += details.business.contact + '\\n';\r\n\t\tif (details.business.tin) {\r\n\t\t\tr += 'TIN: ' + details.business.tin + '\\n';\r\n\t\t}\r\n\r\n\t\tr += '_______________________________\\n';\r\n\r\n\t\tr += '\\n';\r\n\t\tr += ESC + 'a' + '\\x00';        // left\r\n\t\tr += 'Receipt #: ' + details.transactionNumber + '\\n';\r\n\t\tr += 'Date: ' + new Date(details.date).toLocaleString() + '\\n';\r\n\t\tr += 'Cashier: ' + (details.cashierName || 'N/A') + '\\n';\r\n\t\tr += 'Payment: ' + details.payment.method + '\\n';\r\n\r\n\t\tr += 'Item                      Total\\n';\r\n\r\n\t\tr += '--------------------------------\\n';\r\n\r\n\t\tdetails.items.forEach(item => {\r\n\t\t\tr += item.name + '\\n';\r\n\t\t\tconst unit = item.unit || 'pc';\r\n\t\t\tr += `  ${item.quantity} ${unit} \\t  P${item.subtotal}\\n`;\r\n\t\t});\r\n\r\n\t\tr += '--------------------------------\\n';\r\n\r\n\t\tr += `Subtotal: P${details.subtotal.toFixed(2)}\\n`;\r\n\r\n\t\tif (details.discountTotal > 0) {\r\n\t\t\tr += `Discount: -P${details.discountTotal.toFixed(2)}\\n`;\r\n\t\t}\r\n\r\n\t\tr += ESC + 'E' + '\\x01';        // bold ON\r\n\t\tr += `TOTAL: P${details.total.toFixed(2)}\\n`;\r\n\t\tr += ESC + 'E' + '\\x00';        // bold OFF\r\n\r\n\t\tif (details.payment.amountTendered) {\r\n\t\t\tr += `Cash: P${details.payment.amountTendered}\\n`;\r\n\t\t\tr += `Change: P${details.payment.change}\\n`;\r\n\t\t}\r\n\r\n\t\tr += '\\n';\r\n\t\tr += ESC + 'a' + '\\x01';\r\n\t\tr += 'THANK YOU\\n';\r\n\t\tr += 'This is not an official receipt\\n';\r\n\r\n\t\tr+= 'eKahera';\r\n\r\n\t\tr += '\\n\\n\\n';\r\n\t\tr += GS + 'V' + 'A';            // cut\r\n\t\tconsole.log(r);\r\n\t\treturn r;\r\n\t\t}\r\n\r\n\tasync function printThermal(details) {\r\n\t\ttry {\r\n\t\t\tif (!qz.websocket.isActive()) {\r\n\t\t\t\tawait qz.websocket.connect();\r\n\t\t\t}\r\n\r\n\t\t\tconst printer = await qz.printers.getDefault();\r\n\t\t\tconsole.log(printer); // printer name logger\r\n\r\n\t\t\tconst config = qz.configs.create(printer, {\r\n\t\t\t\tencoding: 'UTF-8',\r\n\t\t\t\trasterize: false,\r\n\t\t\t\tscaleContent: false\r\n\t\t\t});\r\n\r\n\t\t\tconst data = [\r\n\t\t\t\t{\t\r\n\t\t\t\t\ttype: 'raw',\r\n\t\t\t\t\tformat: 'command',\r\n\t\t\t\t\tdata: buildEscPosReceipt(details)\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t\tawait qz.print(config, data);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('QZ ERROR:', err);\r\n\t\t\talert(err.message || 'Printer not connected');\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<Background variant=\"gradientBlue\" pattern=\"dots\" overlay floatingElements>\r\n\t\t\t<div className=\"min-h-screen printable-area\">\r\n\t\t\t\t<div className=\"px-4 pt-6 max-w-md mx-auto grid gap-4\">\r\n\t\t\t\t\t<Card className=\"p-6 no-print\">\r\n\t\t\t\t\t\t<div className=\"text-2xl font-bold text-blue-900\">E-Receipt</div>\r\n\t\t\t\t\t\t<div className=\"text-blue-700 mt-1\">Thank you for your purchase.</div>\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t{loading && <Loader />}\r\n\t\t\t\t\t{error && <Card className=\"p-6 text-red-500\">{error}</Card>}\r\n\r\n\t\t\t\t\t{details && (\r\n\t\t\t\t\t\t<Card ref={receiptRef} className=\"p-3 space-y-3 font-mono bg-white max-w-[57mm] mx-auto\">\r\n\t\t\t\t\t\t\t{/* Store Info */}\r\n\t\t\t\t\t\t\t<div className=\"text-center border-b pb-4\">\r\n\t\t\t\t\t\t\t\t<h2 className=\"text-sm font-bold\">{details.business.name}</h2>\r\n\t\t\t\t\t\t\t\t<p className=\"text-sm\">{details.business.address}</p>\r\n\t\t\t\t\t\t\t\t<p className=\"text-sm\">{details.business.contact}</p>\r\n\t\t\t\t\t\t\t\t{details.business.tin && <p className=\"text-sm\">TIN: {details.business.tin}</p>}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Transaction Details */}\r\n\t\t\t\t\t\t\t<div className=\"space-y-2 border-b pb-4\">\r\n\t\t\t\t\t\t\t\t<ReceiptRow label=\"Receipt No:\" value={details.transactionNumber} />\r\n\t\t\t\t\t\t\t\t<ReceiptRow label=\"Date:\" value={new Date(details.date).toLocaleDateString()} />\r\n\t\t\t\t\t\t\t\t<ReceiptRow label=\"Time:\" value={new Date(details.date).toLocaleTimeString()} />\r\n\t\t\t\t\t\t\t\t<ReceiptRow label=\"Cashier:\" value={details.cashierName || 'N/A'} />\r\n\t\t\t\t\t\t\t\t<ReceiptRow label=\"Payment Method:\" value={details.payment.method} />\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Itemized List */}\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between font-bold text-sm\">\r\n\t\t\t\t\t\t\t\t\t<span>Item</span>\r\n\t\t\t\t\t\t\t\t\t<span>Total</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"border-b border-dashed my-2\"></div>\r\n\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\r\n\t\t\t\t\t\t\t\t\t{details.items.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\tconst unit = item.unit || 'pc';\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<div key={index} className=\"text-sm\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{item.name}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"pl-4\">{item.quantity} {unit}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>₱{item.subtotal}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Totals */}\r\n\t\t\t\t\t\t\t<div className=\"space-y-2 border-t pt-4\">\r\n\t\t\t\t\t\t\t\t<ReceiptRow \r\n\t\t\t\t\t\t\t\tlabel={`Subtotal (${details.totalQuantity} ${details.totalQuantity === 1 ? 'item' : 'items'})`} \r\n\t\t\t\t\t\t\t\tvalue={`₱${details.subtotal.toFixed(2)}`} \r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{(details.discountTotal > 0 || details.discount) && (\r\n\t\t\t\t\t\t\t\t\t<ReceiptRow \r\n\t\t\t\t\t\t\t\t\t\tlabel={details.discount?.name ? `Discount (${details.discount.name})` : \"Discount\"} \r\n\t\t\t\t\t\t\t\t\t\tvalue={`-₱${(details.discountTotal || (details.subtotal - details.total)).toFixed(2)}`} \r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<ReceiptRow label=\"Grand Total\" value={`₱${details.total.toFixed(2)}`} isBold />\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Payment Summary */}\r\n\t\t\t\t\t\t\t{details.payment.amountTendered && (\r\n\t\t\t\t\t\t\t\t<div className=\"space-y-2 border-t pt-4\">\r\n\t\t\t\t\t\t\t\t\t<ReceiptRow label=\"Amount Tendered\" value={`₱${Number(details.payment.amountTendered).toFixed(2)}`} />\r\n\t\t\t\t\t\t\t\t\t<ReceiptRow label=\"Change\" value={`₱${Number(details.payment.change).toFixed(2)}`} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{/* Footer Message */}\r\n\t\t\t\t\t\t\t<div className=\"text-center text-xs pt-4 border-t\">\r\n\t\t\t\t\t\t\t\t<p>Thank you for shopping!</p>\r\n\t\t\t\t\t\t\t\t<p className=\"font-bold\">This is not an official receipt.</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<div className=\"pt-2 pb-6 grid grid-cols-2 gap-4 no-print\">\r\n\t\t\t\t\t\t{fromCustomer ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={handleDownload}\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n\t\t\t\t\t\t\t\t\t\t<path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\tDownload\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={handleProceed}\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n\t\t\t\t\t\t\t\t\t\t<path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-2\">\r\n\t\t\t\t\t\t\t\t\t\tProceed\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs font-mono bg-white/20 px-2 py-0.5 rounded\">Enter</span>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={handlePrint}\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n\t\t\t\t\t\t\t\t\t\t<path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\" />\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-2\">\r\n\t\t\t\t\t\t\t\t\t\tPrint\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs font-mono bg-white/20 px-2 py-0.5 rounded\">P</span>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={handleProceed}\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n\t\t\t\t\t\t\t\t\t\t<path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-2\">\r\n\t\t\t\t\t\t\t\t\t\tProceed\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs font-mono bg-white/20 px-2 py-0.5 rounded\">Enter</span>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<style jsx global>{`\r\n        @media print {\r\n          .no-print {\r\n            display: none !important;\r\n          }\r\n          .printable-area {\r\n            padding: 0;\r\n            margin: 0;\r\n          }\r\n          body {\r\n            margin: 0;\r\n            padding: 0;\r\n            -webkit-print-color-adjust: exact;\r\n            print-color-adjust: exact;\r\n            width: 57mm !important;\r\n          }\r\n          @page {\r\n            size: 57mm auto;\r\n            margin: 0;\r\n            padding: 0;\r\n          }\r\n          * {\r\n            max-width: 57mm !important;\r\n          }\r\n        }\r\n      `}</style>\r\n\t\t</Background>\r\n\t);\r\n}\r\n"],"names":["React","require$$1","_interopDefaultLegacy","e","default","React__default","_createClass","Constructor","protoProps","staticProps","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_defineProperties","prototype","isProd","process","isString","o","toString","call","StyleSheet","param","ref","_name","name","_optimizeForSpeed","optimizeForSpeed","invariant$1","this","_deletedRulePlaceholder","_serverSheet","_tags","_injected","_rulesCount","node","window","document","querySelector","_nonce","getAttribute","_proto","setOptimizeForSpeed","bool","flush","inject","isOptimizeForSpeed","_this","makeStyleTag","getSheet","console","warn","cssRules","insertRule","rule","index","cssText","push","deleteRule","getSheetForTag","tag","sheet","styleSheets","ownerNode","error","insertionPoint","replaceRule","trim","textContent","parentNode","removeChild","forEach","reduce","rules","concat","Array","map","cssString","relativeToTag","createElement","setAttribute","type","appendChild","createTextNode","head","getElementsByTagName","insertBefore","get","condition","message","Error","stringHash","str","_$hash","charCodeAt","cache","computeId","baseId","propsToString","String","computeSelector","id","css","replace","idcss","StyleSheetRegistry","_styleSheet","styleSheet","_sheet","_fromServer","_indices","_instancesCounts","add","isArray","children","selectFromServer","keys","acc","tagName","getIdAndRules","styleId","indices","filter","remove","invariant","tagFromServer","update","nextProps","fromServer","join","Boolean","styles","options","args","nonce","dangerouslySetInnerHTML","__html","mapRulesToStyle","dynamic","slice","querySelectorAll","element","StyleSheetContext","createContext","createStyleRegistry","useStyleRegistry","useContext","displayName","useInsertionEffect","useLayoutEffect","defaultRegistry","JSXStyle","registry","insertionEffectCalled","useRef","current","info","tagInfo","StyleRegistry","configuredRegistry","rootRegistry","useState","Provider","value","style","require$$0","ReceiptRow","label","isBold","jsxs","className","jsx","Receipt","navigate","useNavigate","receiptRef","params","URLSearchParams","location","search","tn","fromCustomer","localStorage","getItem","user","JSON","parse","sessionStorage","details","setDetails","loading","setLoading","setError","useEffect","async","path","encodeURIComponent","data","api","err","fetchDetails","handlePrint","qz","websocket","isActive","connect","printer","printers","getDefault","log","config","configs","create","encoding","rasterize","scaleContent","format","buildEscPosReceipt","print","catch","alert","downloadFile","url","fileName","isMobile","link","download","href","display","body","requestAnimationFrame","click","setTimeout","contains","URL","revokeObjectURL","open","handleProceed","role","r","ESC","business","address","contact","tin","transactionNumber","Date","date","toLocaleString","cashierName","payment","method","items","item","unit","quantity","subtotal","toFixed","discountTotal","total","amountTendered","change","GS","useKeyboardShortcuts","action","preventDefault","stopPropagation","enabled","allowWhileTyping","Background","variant","pattern","overlay","floatingElements","Card","Loader","toLocaleDateString","toLocaleTimeString","totalQuantity","discount","Number","Fragment","onClick","html2canvas","useCORS","scale","allowTaint","backgroundColor","logging","toBlob","blob","createObjectURL","test","navigator","userAgent","hasShareAPI","share","hasCanShare","canShare","file","File","canShareFile","files","title","text","then","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","_JSXStyle"],"mappings":"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","x_google_ignoreList":[0,1]}