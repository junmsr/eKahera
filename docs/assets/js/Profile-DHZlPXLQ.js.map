{"version":3,"file":"Profile-DHZlPXLQ.js","sources":["../../../frontend/src/pages/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport PageLayout from \"../components/layout/PageLayout\";\r\nimport NavAdmin from \"../components/layout/Nav-Admin\";\r\nimport Card from \"../components/common/Card\";\r\nimport Loader from \"../components/common/Loader\";\r\nimport { api } from \"../lib/api\";\r\nimport Button from \"../components/common/Button\";\r\nimport ProfileModal from \"../components/modals/ProfileModal\";\r\nimport BaseModal from \"../components/modals/BaseModal\";\r\n\r\n// Icon Components\r\nconst UserIcon = (props) => (\r\n  <svg\r\n    className={`w-5 h-5 ${props.className || \"\"}`}\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst EmailIcon = (props) => (\r\n  <svg\r\n    className={`w-5 h-5 ${props.className || \"\"}`}\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst PhoneIcon = (props) => (\r\n  <svg\r\n    className={`w-5 h-5 ${props.className || \"\"}`}\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst CalendarIcon = (props) => (\r\n  <svg\r\n    className={`w-5 h-5 ${props.className || \"\"}`}\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst StoreIcon = (props) => (\r\n  <svg\r\n    className={`w-5 h-5 ${props.className || \"\"}`}\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst LocationIcon = (props) => (\r\n  <svg\r\n    className={`w-5 h-5 ${props.className || \"\"}`}\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"\r\n    />\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst RefreshIcon = () => (\r\n  <svg\r\n    className=\"w-4 h-4\"\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst EditIcon = () => (\r\n  <svg\r\n    className=\"w-4 h-4\"\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst LockIcon = () => (\r\n  <svg\r\n    className=\"w-4 h-4\"\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst DownloadIcon = () => (\r\n  <svg\r\n    className=\"w-4 h-4\"\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n// New QR Icon from the 'new-nigga-dave' branch\r\nconst QRIcon = () => (\r\n  <svg\r\n    className=\"w-5 h-5\"\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth={2}\r\n      d=\"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h4a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n// ---\r\n\r\n// QR Code Logic Utility (Consolidated)\r\nconst getQrCodeData = (profileData) => {\r\n  // 1. Get businessId, prioritizing profileData, then sessionStorage, then localStorage\r\n  const businessId =\r\n    profileData?.business?.business_id ||\r\n    profileData?.user?.businessId ||\r\n    JSON.parse(sessionStorage.getItem(\"user\") || \"{}\")?.businessId ||\r\n    JSON.parse(localStorage.getItem(\"user\") || \"{}\")?.businessId;\r\n\r\n  if (!businessId) return { url: \"N/A\", qrSrc: null, businessId: null };\r\n\r\n  const url = new URL(window.location.origin + \"/enter-store\");\r\n  url.searchParams.set(\"business_id\", String(businessId));\r\n  const urlString = url.toString();\r\n  const data = encodeURIComponent(urlString);\r\n\r\n  // Use a slightly larger size for better download quality, but display size remains 260x260\r\n  const qrSrc = `https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=${data}&qzone=2&format=png&_=${Date.now()}`;\r\n  const downloadSrc = `https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${data}&qzone=2&format=png&_=${Date.now()}`;\r\n\r\n  return { url: urlString, qrSrc, downloadSrc, businessId };\r\n};\r\n\r\n// ---\r\n\r\n/**\r\n * Profile Page Component\r\n * Displays store and admin credentials information\r\n */\r\nconst Profile = () => {\r\n  const [profileData, setProfileData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [isSidebarOpen, setSidebarOpen] = useState(false);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [deleteState, setDeleteState] = useState({ status: \"none\" });\r\n  const [deleteMessage, setDeleteMessage] = useState(\"\");\r\n  const [deleteError, setDeleteError] = useState(\"\");\r\n  const [deleteLoading, setDeleteLoading] = useState(false);\r\n  const [downloadLoading, setDownloadLoading] = useState(false);\r\n  const [confirmText, setConfirmText] = useState(\"\");\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n\r\n  const normalizeDeletion = (del) => {\r\n    if (!del) return { status: \"none\" };\r\n    if (del.status === \"cancelled\") return { status: \"none\" };\r\n    return del;\r\n  };\r\n\r\n  const fetchDeletionStatus = async () => {\r\n    try {\r\n      setDeleteLoading(true);\r\n      const res = await api(\"/api/business/delete-request\");\r\n      const normalized = normalizeDeletion(res?.deletion);\r\n      setDeleteState(normalized);\r\n      setDeleteMessage(\r\n        normalized.status === \"pending\" ? res?.message || \"\" : \"\"\r\n      );\r\n    } catch (e) {\r\n      setDeleteError(\r\n        e?.message || \"Could not load deletion status. Please try again.\"\r\n      );\r\n    } finally {\r\n      setDeleteLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProfileData();\r\n    fetchDeletionStatus();\r\n  }, []);\r\n\r\n  const fetchProfileData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(\"\");\r\n\r\n      const token = sessionStorage.getItem(\"auth_token\");\r\n      console.log(\"Auth token:\", token ? \"Present\" : \"Missing\");\r\n\r\n      if (!token) {\r\n        // Fallback to localStorage if sessionStorage is empty, but warn\r\n        const fallbackToken = localStorage.getItem(\"auth_token\");\r\n        if (!fallbackToken) {\r\n          throw new Error(\"No authentication token found\");\r\n        }\r\n      }\r\n\r\n      console.log(\"Fetching profile data from /api/auth/profile\");\r\n\r\n      // Fetch user profile data\r\n      const response = await api(\"/api/auth/profile\", {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      console.log(\"Profile data received:\", response);\r\n      setProfileData(response);\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch profile data:\", err);\r\n      setError(\r\n        \"Failed to load profile information. Please check your connection and try again.\"\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"N/A\";\r\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n  };\r\n\r\n  const handleDownloadExport = async () => {\r\n    setDeleteError(\"\");\r\n    setDownloadLoading(true);\r\n    try {\r\n      const res = await api(\r\n        \"/api/business/delete-request/export\",\r\n        { method: \"GET\" },\r\n        true\r\n      );\r\n      const blob = await res.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const link = document.createElement(\"a\");\r\n      link.href = url;\r\n      link.download = `transactions-export.${blob.type.includes(\"gzip\") ? \"gz\" : \"json\"}`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n      window.URL.revokeObjectURL(url);\r\n    } catch (e) {\r\n      setDeleteError(\r\n        e?.message || \"Failed to download export. Please try again.\"\r\n      );\r\n    } finally {\r\n      setDownloadLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRequestDeletion = async () => {\r\n    setDeleteError(\"\");\r\n    setDeleteMessage(\"\");\r\n    if (confirmText.trim().toLowerCase() !== \"delete\") {\r\n      setDeleteError('Type \"DELETE\" to confirm.');\r\n      return;\r\n    }\r\n    setDeleteLoading(true);\r\n    try {\r\n      const res = await api(\"/api/business/delete-request\", { method: \"POST\" });\r\n      setDeleteState(res?.deletion || { status: \"pending\" });\r\n      setDeleteMessage(\r\n        res?.message || \"Deletion request recorded with a 30-day grace period.\"\r\n      );\r\n      setShowDeleteConfirm(false);\r\n    } catch (e) {\r\n      setDeleteError(\r\n        e?.message || \"Could not request deletion. Please try again.\"\r\n      );\r\n    } finally {\r\n      setDeleteLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCancelDeletion = async () => {\r\n    setDeleteError(\"\");\r\n    setDeleteMessage(\"\");\r\n    setDeleteLoading(true);\r\n    try {\r\n      const res = await api(\"/api/business/delete-request/cancel\", {\r\n        method: \"POST\",\r\n      });\r\n      const normalized = normalizeDeletion(res?.deletion);\r\n      setDeleteState(normalized);\r\n      setDeleteMessage(\"\");\r\n      setConfirmText(\"\");\r\n    } catch (e) {\r\n      setDeleteError(\r\n        e?.message || \"Could not cancel deletion. Please try again.\"\r\n      );\r\n    } finally {\r\n      setDeleteLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDownloadQr = async () => {\r\n    const { downloadSrc, businessId } = getQrCodeData(profileData);\r\n    if (!downloadSrc) {\r\n      alert(\"Business ID not found to generate QR code.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Fetch the image as a blob to handle CORS\r\n      const response = await fetch(downloadSrc);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch QR code image');\r\n      }\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      \r\n      const a = document.createElement(\"a\");\r\n      a.href = url;\r\n      a.download = `store-${businessId || \"qr\"}.png`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      \r\n      // Clean up the object URL\r\n      window.URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n      console.error('Error downloading QR code:', error);\r\n      alert('Failed to download QR code. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Header actions with modern styling\r\n  const headerActions = (\r\n    <div className=\"flex items-center justify-end gap-2 sm:gap-3\">\r\n      <Button\r\n        onClick={fetchProfileData}\r\n        variant=\"secondary\"\r\n        size=\"sm\"\r\n        icon={<RefreshIcon />}\r\n        iconPosition=\"left\"\r\n        className=\"whitespace-nowrap [&>span]:hidden sm:[&>span]:inline\"\r\n      >\r\n        <span>Refresh</span>\r\n      </Button>\r\n      <Button\r\n        variant=\"primary\"\r\n        size=\"sm\"\r\n        icon={<EditIcon />}\r\n        iconPosition=\"left\"\r\n        onClick={() => setIsEditModalOpen(true)}\r\n        className=\"whitespace-nowrap [&>span]:hidden sm:[&>span]:inline\"\r\n      >\r\n        <span>Edit Profile</span>\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <PageLayout\r\n        title=\"PROFILE\"\r\n        subtitle=\"Store and admin credentials\"\r\n        sidebar={<NavAdmin />}\r\n        isSidebarOpen={isSidebarOpen}\r\n        setSidebarOpen={setSidebarOpen}\r\n        className=\"bg-gray-50\"\r\n      >\r\n        <div className=\"flex justify-center items-center h-64\">\r\n          <Loader />\r\n        </div>\r\n      </PageLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <PageLayout\r\n      title=\"PROFILE\"\r\n      subtitle=\"\"\r\n      sidebar={<NavAdmin />}\r\n      headerActions={headerActions}\r\n      isSidebarOpen={isSidebarOpen}\r\n      setSidebarOpen={setSidebarOpen}\r\n      className=\"bg-gray-50\"\r\n    >\r\n      <ProfileModal\r\n        isOpen={isEditModalOpen}\r\n        onClose={() => setIsEditModalOpen(false)}\r\n        userData={profileData?.user}\r\n      />\r\n      <div className=\"p-4 sm:p-6 space-y-4 sm:space-y-6\">\r\n        {error && (\r\n          <Card className=\"bg-gradient-to-br from-red-50 to-orange-50 border-red-200/50\">\r\n            <div className=\"flex items-start gap-4 p-4\">\r\n              <div className=\"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n                <svg\r\n                  className=\"w-5 h-5 text-red-600\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"text-sm font-semibold text-red-900 mb-1\">\r\n                  Error Loading Profile\r\n                </h3>\r\n                <p className=\"text-sm text-red-700\">{error}</p>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {!loading && !error && !profileData && (\r\n          <Card className=\"bg-gradient-to-br from-gray-50 to-blue-50/30 border-gray-200/50\">\r\n            <div className=\"p-8 md:p-12 text-center\">\r\n              <div className=\"w-20 h-20 bg-gradient-to-br from-gray-200 to-gray-300 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg\">\r\n                <svg\r\n                  className=\"w-10 h-10 text-gray-500\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">\r\n                No Profile Data Available\r\n              </h3>\r\n              <p className=\"text-gray-600 mb-6 max-w-md mx-auto\">\r\n                Unable to load your profile information. Please try refreshing\r\n                or check your connection.\r\n              </p>\r\n              <Button\r\n                onClick={fetchProfileData}\r\n                variant=\"primary\"\r\n                size=\"md\"\r\n                icon={<RefreshIcon />}\r\n                iconPosition=\"left\"\r\n              >\r\n                Try Again\r\n              </Button>\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Profile Content - Only show when data is available */}\r\n        {profileData && (\r\n          <React.Fragment>\r\n            {/* Modern Profile Header */}\r\n            <Card className=\"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 border-blue-200/50 overflow-hidden\">\r\n              <div className=\"p-6 md:p-8\">\r\n                <div className=\"flex flex-col md:flex-row items-start md:items-center gap-6\">\r\n                  <div className=\"relative\">\r\n                    <div className=\"w-24 h-24 md:w-32 md:h-32 bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-2xl flex items-center justify-center text-3xl md:text-4xl font-bold shadow-lg ring-4 ring-white/50\">\r\n                      {profileData?.user?.first_name\r\n                        ?.charAt(0)\r\n                        ?.toUpperCase() || \"A\"}\r\n                    </div>\r\n                    <div className=\"absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 rounded-full border-4 border-white flex items-center justify-center\">\r\n                      <div className=\"w-3 h-3 bg-white rounded-full\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <h1 className=\"text-2xl md:text-3xl font-bold text-gray-900 mb-2\">\r\n                      {profileData?.business?.business_name || \"Admin User\"}\r\n                    </h1>\r\n                    <p className=\"text-gray-600 mb-4 flex items-center gap-2\">\r\n                      <EmailIcon />\r\n                      <span className=\"truncate\">\r\n                        {profileData?.user?.email || \"N/A\"}\r\n                      </span>\r\n                    </p>\r\n                    <div className=\"flex flex-wrap gap-3\">\r\n                      <span className=\"inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-semibold bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-800 border border-blue-200\">\r\n                        <div className=\"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                          <StoreIcon className=\"w-3 h-3 text-blue-600\" />\r\n                        </div>\r\n                        <span>\r\n                          {profileData?.user?.role?.replace(\"_\", \" \").toUpperCase() || \"ADMIN\"}\r\n                          {profileData?.business?.business_type && ` â€¢ ${profileData.business.business_type}`}\r\n                        </span>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n\r\n            {/* Admin Information */}\r\n            <Card className=\"bg-white shadow-sm\">\r\n              <div className=\"p-6 md:p-8\">\r\n                <div className=\"flex items-center mb-6 pb-4 border-b border-gray-200\">\r\n                  <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl flex items-center justify-center mr-3\">\r\n                    <UserIcon />\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"text-xl font-bold text-gray-900\">\r\n                      Account Information\r\n                    </h2>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      Personal details and credentials\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  <div className=\"space-y-5\">\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        First Name\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <UserIcon className=\"text-blue-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {profileData?.user?.first_name || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Last Name\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <UserIcon className=\"text-blue-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {profileData?.user?.last_name || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Email Address\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <EmailIcon className=\"text-blue-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1 truncate\">\r\n                          {profileData?.user?.email || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Role\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50\">\r\n                        <div className=\"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <svg\r\n                            className=\"w-5 h-5 text-indigo-600\"\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            viewBox=\"0 0 24 24\"\r\n                          >\r\n                            <path\r\n                              strokeLinecap=\"round\"\r\n                              strokeLinejoin=\"round\"\r\n                              strokeWidth={2}\r\n                              d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"\r\n                            />\r\n                          </svg>\r\n                        </div>\r\n                        <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-blue-100 text-blue-800 border border-blue-200 capitalize\">\r\n                          {profileData?.user?.role?.replace(\"_\", \" \") || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-5\">\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Contact Number\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <PhoneIcon className=\"text-green-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {profileData?.user?.contact_number || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Account Created\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <CalendarIcon className=\"text-purple-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {formatDate(profileData?.user?.created_at)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Last Updated\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-blue-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <CalendarIcon className=\"text-orange-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {formatDate(profileData?.user?.updated_at)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Store Entry QR for Customers (Adopted styling from new-nigga-dave) */}\r\n                <div className=\"mt-8 pt-8 border-t border-gray-200\">\r\n                  <div className=\"flex items-center gap-3 mb-4\">\r\n                    <div className=\"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-xl flex items-center justify-center\">\r\n                      <QRIcon />\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"text-lg font-bold text-gray-900\">\r\n                        Store Entry QR Code\r\n                      </h3>\r\n                      <p className=\"text-sm text-gray-500\">\r\n                        Share this QR code for customer self-checkout\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"bg-gradient-to-br from-gray-50 to-blue-50/30 rounded-2xl p-6 border border-gray-200/50\">\r\n                    <div className=\"flex flex-col md:flex-row items-start md:items-center gap-6\">\r\n                      <div className=\"relative\">\r\n                        <div className=\"absolute inset-0 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl blur-xl opacity-20\"></div>\r\n                        <img\r\n                          src={getQrCodeData(profileData).qrSrc}\r\n                          alt=\"Store Entry QR\"\r\n                          className=\"relative w-[260px] h-[260px] border-4 border-white rounded-2xl bg-white shadow-xl\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex-1 space-y-4 min-w-0\">\r\n                        <div>\r\n                          <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                            QR Code URL\r\n                          </label>\r\n                          <div className=\"bg-white px-4 py-3 rounded-xl border border-gray-200 break-all text-sm text-gray-700 font-mono\">\r\n                            {getQrCodeData(profileData).url}\r\n                          </div>\r\n                        </div>\r\n                        <Button\r\n                          variant=\"primary\"\r\n                          size=\"md\"\r\n                          icon={<DownloadIcon />}\r\n                          iconPosition=\"left\"\r\n                          onClick={handleDownloadQr}\r\n                          className=\"w-full md:w-auto\"\r\n                        >\r\n                          Download QR Code\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n\r\n            {/* Store Information */}\r\n            <Card className=\"bg-white shadow-sm\">\r\n              <div className=\"p-6 md:p-8\">\r\n                <div className=\"flex items-center mb-6 pb-4 border-b border-gray-200\">\r\n                  <div className=\"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 text-white rounded-xl flex items-center justify-center mr-3\">\r\n                    <StoreIcon />\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"text-xl font-bold text-gray-900\">\r\n                      Store Information\r\n                    </h2>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      Business details and credentials\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  <div className=\"space-y-5\">\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Business Name\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <StoreIcon className=\"text-green-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {profileData?.business?.business_name || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Business Type\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <svg\r\n                            className=\"w-5 h-5 text-emerald-600\"\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            viewBox=\"0 0 24 24\"\r\n                          >\r\n                            <path\r\n                              strokeLinecap=\"round\"\r\n                              strokeLinejoin=\"round\"\r\n                              strokeWidth={2}\r\n                              d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"\r\n                            />\r\n                          </svg>\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {profileData?.business?.business_type || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Country\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-teal-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <LocationIcon className=\"text-teal-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {profileData?.business?.country || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Business Email\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <EmailIcon className=\"text-blue-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1 truncate\">\r\n                          {profileData?.business?.email || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-5\">\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Business Address\r\n                      </label>\r\n                      <div className=\"flex items-start gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                          <LocationIcon className=\"text-indigo-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {profileData?.business?.business_address || \"N/A\"}\r\n                          {profileData?.business?.house_number &&\r\n                            `, ${profileData.business.house_number}`}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Mobile Number\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <PhoneIcon className=\"text-green-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {profileData?.business?.mobile || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Business Established\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <CalendarIcon className=\"text-purple-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {formatDate(profileData?.business?.created_at)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"group\">\r\n                      <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\r\n                        Last Updated\r\n                      </label>\r\n                      <div className=\"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-gray-100/50 px-4 py-3 rounded-xl border border-gray-200/50 group-hover:border-green-300 transition-colors\">\r\n                        <div className=\"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                          <CalendarIcon className=\"text-orange-600\" />\r\n                        </div>\r\n                        <span className=\"text-gray-900 font-medium flex-1\">\r\n                          {formatDate(profileData?.business?.updated_at)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n\r\n            {/* Business Users */}\r\n            {profileData?.business?.users &&\r\n              profileData.business.users.length > 0 && (\r\n                <>\r\n                  {(() => {\r\n                    const filteredBusinessUsers =\r\n                      profileData.business.users.filter(\r\n                        (user) =>\r\n                          user.user_type_name === \"admin\" ||\r\n                          user.user_type_name === \"cashier\" ||\r\n                          user.role === \"admin\" ||\r\n                          user.role === \"cashier\" ||\r\n                          user.role === \"business_owner\"\r\n                      );\r\n                    return (\r\n                      <Card className=\"bg-white shadow-sm\">\r\n                        <div className=\"p-6 md:p-8\">\r\n                          <div className=\"flex items-center mb-6 pb-4 border-b border-gray-200\">\r\n                            <div className=\"w-10 h-10 bg-gradient-to-br bg-blue-500 text-white rounded-xl flex items-center justify-center mr-3\">\r\n                              <svg\r\n                                className=\"w-5 h-5\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                viewBox=\"0 0 24 24\"\r\n                              >\r\n                                <path\r\n                                  strokeLinecap=\"round\"\r\n                                  strokeLinejoin=\"round\"\r\n                                  strokeWidth={2}\r\n                                  d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"\r\n                                />\r\n                              </svg>\r\n                            </div>\r\n                            <div>\r\n                              <h2 className=\"text-xl font-bold text-gray-900\">\r\n                                Business Team\r\n                              </h2>\r\n                              <p className=\"text-sm text-gray-500\">\r\n                                All users associated with this business (\r\n                                {filteredBusinessUsers.length} total)\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6\">\r\n                            {filteredBusinessUsers.map((user, index) => (\r\n                              <div\r\n                                key={user.user_id}\r\n                                className=\"group bg-gradient-to-br from-white to-gray-50/50 rounded-2xl p-5 border border-gray-200/50 hover:border-purple-300 hover:shadow-lg transition-all duration-300\"\r\n                              >\r\n                                <div className=\"flex items-center mb-4\">\r\n                                  <div className=\"relative\">\r\n                                    <div className=\"w-12 h-12 bg-gradient-to-br bg-blue-500 text-white rounded-xl flex items-center justify-center text-lg font-bold shadow-md ring-2 ring-white\">\r\n                                      {user.username\r\n                                        ?.charAt(0)\r\n                                        ?.toUpperCase() || \"U\"}\r\n                                    </div>\r\n                                    <div className=\"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white\"></div>\r\n                                  </div>\r\n                                  <div className=\"ml-3 flex-1 min-w-0\">\r\n                                    <h4 className=\"font-bold text-gray-900 truncate\">\r\n                                      {user.username}\r\n                                    </h4>\r\n                                    <span\r\n                                      className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold mt-1 ${\r\n                                        user.user_type_name === \"admin\" ||\r\n                                        user.role === \"business_owner\"\r\n                                          ? \"bg-red-100 text-red-800 border border-red-200\"\r\n                                          : user.user_type_name === \"cashier\" ||\r\n                                            user.role === \"cashier\"\r\n                                          ? \"bg-green-100 text-green-800 border border-green-200\"\r\n                                          : \"bg-gray-100 text-gray-800 border border-gray-200\"\r\n                                      }`}\r\n                                    >\r\n                                      {user.user_type_name || user.role}\r\n                                    </span>\r\n                                  </div>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-3 text-sm\">\r\n                                  <div className=\"flex items-start gap-2\">\r\n                                    <EmailIcon className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\r\n                                    <div className=\"min-w-0 flex-1\">\r\n                                      <div className=\"text-xs text-gray-500 mb-0.5\">\r\n                                        Email\r\n                                      </div>\r\n                                      <div className=\"font-medium text-gray-900 truncate\">\r\n                                        {user.email}\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                  {user.contact_number && (\r\n                                    <div className=\"flex items-start gap-2\">\r\n                                      <PhoneIcon className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\r\n                                      <div className=\"min-w-0 flex-1\">\r\n                                        <div className=\"text-xs text-gray-500 mb-0.5\">\r\n                                          Contact\r\n                                        </div>\r\n                                        <div className=\"font-medium text-gray-900\">\r\n                                          {user.contact_number}\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  )}\r\n                                  <div className=\"flex items-start gap-2\">\r\n                                    <CalendarIcon className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\r\n                                    <div className=\"min-w-0 flex-1\">\r\n                                      <div className=\"text-xs text-gray-500 mb-0.5\">\r\n                                        Joined\r\n                                      </div>\r\n                                      <div className=\"font-medium text-gray-900\">\r\n                                        {formatDate(user.created_at)}\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      </Card>\r\n                    );\r\n                  })()}\r\n                </>\r\n              )}\r\n\r\n              {/* Store Deletion Section */}\r\n              <Card className=\"border-red-100 border-2 mt-6\">\r\n                <div className=\"p-6\">\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <div className=\"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3\">\r\n                      <svg className=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"text-lg font-bold text-red-900\">Delete Your Store</h3>\r\n                      <p className=\"text-sm text-red-600\">This action cannot be undone after 30 days</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-4\">\r\n                    <p className=\"text-gray-700\">\r\n                      Download all transactions then schedule deletion with a 30-day recovery window.\r\n                    </p>\r\n\r\n                    {deleteMessage && (\r\n                      <div className=\"text-sm text-emerald-700 bg-emerald-50 border border-emerald-200 rounded-lg px-3 py-2\">\r\n                        {deleteMessage}\r\n                      </div>\r\n                    )}\r\n                    {deleteError && (\r\n                      <div className=\"text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg px-3 py-2\">\r\n                        {deleteError}\r\n                      </div>\r\n                    )}\r\n\r\n                    {deleteState.status === \"pending\" && (\r\n                      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs text-gray-700 p-4 bg-gray-50 rounded-lg\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"font-semibold text-gray-800\">Status:</span>\r\n                          <span className=\"px-2 py-1 rounded-full border text-xs\">\r\n                            {deleteState.status || \"none\"}\r\n                          </span>\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"font-semibold text-gray-800\">Scheduled:</span>{\" \"}\r\n                          {formatDate(deleteState.scheduledFor)}\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"font-semibold text-gray-800\">Requested:</span>{\" \"}\r\n                          {formatDate(deleteState.requestedAt)}\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"font-semibold text-gray-800\">Export ready:</span>{\" \"}\r\n                          {formatDate(deleteState.exportReadyAt) || \"N/A\"}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"space-y-4\">\r\n                      {!showDeleteConfirm ? (\r\n                        <div className=\"flex flex-wrap gap-3\">\r\n                          <Button\r\n                            label={\r\n                              downloadLoading ? \"Preparing...\" : \"Download transactions\"\r\n                            }\r\n                            variant=\"secondary\"\r\n                            onClick={handleDownloadExport}\r\n                            disabled={downloadLoading}\r\n                            icon={<DownloadIcon />}\r\n                          />\r\n                          <Button\r\n                            label=\"Delete store\"\r\n                            variant=\"danger\"\r\n                            onClick={() => setShowDeleteConfirm(true)}\r\n                            disabled={deleteLoading || deleteState.status === \"pending\"}\r\n                          />\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"space-y-4\">\r\n                          <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                              Type \"DELETE\" to confirm\r\n                            </label>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-red-500 focus:border-red-500\"\r\n                              placeholder=\"DELETE\"\r\n                              value={confirmText}\r\n                              onChange={(e) => setConfirmText(e.target.value)}\r\n                            />\r\n                          </div>\r\n                          <div className=\"flex flex-wrap gap-3\">\r\n                            <Button\r\n                              label=\"Cancel\"\r\n                              variant=\"secondary\"\r\n                              onClick={() => {\r\n                                setShowDeleteConfirm(false);\r\n                                setConfirmText(\"\");\r\n                                setDeleteError(\"\");\r\n                              }}\r\n                              disabled={deleteLoading}\r\n                            />\r\n                            <Button\r\n                              label={\r\n                                deleteLoading ? \"Processing...\" : \"Confirm Deletion\"\r\n                              }\r\n                              variant=\"danger\"\r\n                              onClick={handleRequestDeletion}\r\n                              disabled={deleteLoading || confirmText.trim().toLowerCase() !== \"delete\"}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {deleteState.status === \"pending\" && (\r\n                        <Button\r\n                          label=\"Cancel Deletion\"\r\n                          variant=\"secondary\"\r\n                          onClick={handleCancelDeletion}\r\n                          disabled={deleteLoading}\r\n                          className=\"mt-2\"\r\n                        />\r\n                      )}\r\n\r\n                      <p className=\"text-sm text-gray-500 mt-2\">\r\n                        You can recover the account within 30 days. After that, the store is permanently removed.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </React.Fragment>\r\n          )}\r\n        </div>\r\n    </PageLayout>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"names":["UserIcon","props","jsx","className","fill","stroke","viewBox","children","strokeLinecap","strokeLinejoin","strokeWidth","d","EmailIcon","PhoneIcon","CalendarIcon","StoreIcon","LocationIcon","jsxs","RefreshIcon","EditIcon","DownloadIcon","QRIcon","getQrCodeData","profileData","businessId","business","business_id","user","JSON","parse","sessionStorage","getItem","localStorage","url","qrSrc","URL","window","location","origin","searchParams","set","String","urlString","toString","data","encodeURIComponent","Date","now","downloadSrc","Profile","setProfileData","useState","loading","setLoading","error","setError","isSidebarOpen","setSidebarOpen","isEditModalOpen","setIsEditModalOpen","deleteState","setDeleteState","status","deleteMessage","setDeleteMessage","deleteError","setDeleteError","deleteLoading","setDeleteLoading","downloadLoading","setDownloadLoading","confirmText","setConfirmText","showDeleteConfirm","setShowDeleteConfirm","normalizeDeletion","del","useEffect","fetchProfileData","async","res","api","normalized","deletion","message","e","fetchDeletionStatus","token","console","log","Error","response","headers","Authorization","err","formatDate","dateString","toLocaleDateString","year","month","day","hour","minute","headerActions","Button","onClick","variant","size","icon","iconPosition","PageLayout","title","subtitle","sidebar","NavAdmin","Loader","ProfileModal","isOpen","onClose","userData","Card","React","Fragment","first_name","charAt","toUpperCase","business_name","email","role","replace","business_type","last_name","contact_number","created_at","updated_at","src","alt","fetch","ok","blob","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","alert","country","business_address","house_number","mobile","users","length","filteredBusinessUsers","filter","user_type_name","map","index","username","user_id","scheduledFor","requestedAt","exportReadyAt","type","placeholder","value","onChange","target","label","disabled","trim","toLowerCase","method","link","includes","remove"],"mappings":"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"}