import{j as s}from"./utils-CzS7jPpm.js";import{u as e,a as r}from"./vendor-DpjJfaBO.js";import{B as a,b as t}from"./index-DXkpZ5oM.js";import{N as o}from"./Navbar-NowDHxqz.js";import{C as n}from"./Card-BlR7hDww.js";import{S as i}from"./ScannerCard-BF2D7Jq6.js";import"./Logo-CG6DFU3b.js";/* empty css              */import"./qr-CcdB0EcG.js";function l(){const l=e(),[c,m]=r.useState(!1),[d,u]=r.useState("");return s.jsx(a,{variant:"gradientBlue",pattern:"dots",overlay:!0,floatingElements:!0,children:s.jsxs("div",{className:"min-h-screen",children:[s.jsx("div",{className:"pt-20 px-4",children:s.jsx(o,{})}),s.jsxs("div",{className:"px-4 mt-6 grid gap-4",children:[s.jsxs(n,{className:"p-6",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:"Scan Store QR"}),s.jsx("div",{className:"text-blue-700 mt-1",children:"Point your camera at the store QR to start self-checkout."})]}),d?s.jsxs(n,{className:"p-4 border-red-200",children:[s.jsx("div",{className:"text-red-700",children:d}),s.jsx("div",{className:"mt-2",children:s.jsx(t,{label:"Try again",variant:"secondary",onClick:()=>{u(""),m(!1)}})})]}):null,s.jsx("div",{className:"h-[60vh]",children:s.jsx(i,{onScan:s=>{const e=s?.[0]?.rawValue;if(!e)return;m(!0),u("");const r=function(s){try{const e=new URL(s),r=e.searchParams.get("business_id")||e.searchParams.get("b")||e.searchParams.get("store");if(r)return r}catch(e){}try{const e=JSON.parse(s);if(e&&(e.business_id||e.businessId||e.storeId))return e.business_id||e.businessId||e.storeId}catch(e){}return s}(e);if(!r)return u("Invalid store QR"),void m(!1);localStorage.setItem("business_id",String(r)),localStorage.removeItem("provisionalTransactionNumber"),localStorage.removeItem("customerCart");const a=(new Date).toISOString().replace(/[-:T.Z]/g,"").slice(0,14),t=Math.floor(1e3+9e3*Math.random()),o=`T-${String(r).padStart(2,"0")}-${a}-${t}`;localStorage.setItem("provisionalTransactionNumber",o),l("/customer")},paused:c,onResume:()=>m(!1),className:"w-full h-full"})})]})]})})}export{l as default};
//# sourceMappingURL=EnterStore-BndrHJXm.js.map
