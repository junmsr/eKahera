{"version":3,"file":"DemoDashboard-Ma-QSiaO.js","sources":["../../../frontend/src/pages/DemoDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport dayjs from \"dayjs\";\r\nimport minMax from \"dayjs/plugin/minMax\";\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  BarChart,\r\n  Bar,\r\n  ResponsiveContainer,\r\n  Legend,\r\n} from \"recharts\";\r\n\r\n// Components\r\nimport PageLayout from \"../components/layout/PageLayout\";\r\nimport DemoNav from \"../components/layout/DemoNav\";\r\nimport ChartCard from \"../components/ui/Dashboard/ChartCard\";\r\nimport DashboardStatsCard from \"../components/ui/Dashboard/DashboardStatsCard\";\r\nimport Button from \"../components/common/Button\";\r\nimport { BiRefresh, BiCalendarAlt, BiBell } from \"react-icons/bi\";\r\nimport html2canvas from \"html2canvas\";\r\nimport jsPDF from \"jspdf\";\r\nimport { useAuth } from \"../hooks/useAuth\";\r\nimport DashboardBusinessReport from \"../components/ui/Dashboard/DashboardBusinessReport\";\r\nimport NotificationDropdown from \"../components/common/NotificationDropdown\";\r\nimport DateRangeFilterModal from \"../components/modals/DateRangeFilterModal\";\r\n\r\ndayjs.extend(minMax);\r\n\r\nconst SOFT_BLUE = \"#3b82f6\";\r\nconst SOFT_PURPLE = \"#8b5cf6\";\r\n\r\n// Mock Data\r\nconst MOCK_OVERVIEW = {\r\n  totalSales: 25430.5,\r\n  totalExpenses: 8500.0,\r\n  totalTransactions: 142,\r\n  totalItemsSold: 356,\r\n  averageTransactionValue: 179.08,\r\n  topProducts: [{ product_name: \"Premium Coffee Bean\", total_sold: 45 }],\r\n};\r\n\r\nconst MOCK_TIMESERIES = [\r\n  { name: \"2023-10-01\", value: 12 },\r\n  { name: \"2023-10-02\", value: 19 },\r\n  { name: \"2023-10-03\", value: 15 },\r\n  { name: \"2023-10-04\", value: 25 },\r\n  { name: \"2023-10-05\", value: 32 },\r\n  { name: \"2023-10-06\", value: 28 },\r\n  { name: \"2023-10-07\", value: 40 },\r\n];\r\n\r\nconst MOCK_PIE = [\r\n  { name: \"Beverages\", value: 4500 },\r\n  { name: \"Snacks\", value: 3200 },\r\n  { name: \"Meals\", value: 8900 },\r\n  { name: \"Desserts\", value: 2100 },\r\n];\r\n\r\nconst MOCK_LOW_STOCK = [\r\n  { product_id: 1, product_name: \"Vanilla Syrup\", quantity_in_stock: 3 },\r\n  { product_id: 2, product_name: \"Paper Cups (L)\", quantity_in_stock: 15 },\r\n];\r\n\r\nconst MOCK_TOP_PRODUCTS = [\r\n  { product_name: \"Premium Coffee Bean\", total_sold: 45 },\r\n  { product_name: \"Iced Latte\", total_sold: 38 },\r\n  { product_name: \"Cappuccino\", total_sold: 32 },\r\n  { product_name: \"Espresso\", total_sold: 28 },\r\n  { product_name: \"Mocha\", total_sold: 25 },\r\n];\r\n\r\nconst MOCK_PAYMENT_METHODS = [\r\n  { name: \"Cash\", value: 50, fill: \"#3b82f6\" },\r\n  { name: \"Gcash\", value: 30, fill: \"#1d4ed8\" },\r\n  { name: \"Maya\", value: 20, fill: \"#1e40af\" },\r\n];\r\n\r\nfunction VisitorsChart({ data, className = \"\" }) {\r\n  return (\r\n    <ChartCard\r\n      title={\r\n        <span className=\"text-blue-700\">Customer Transactions (Demo)</span>\r\n      }\r\n      className={`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl ${className}`}\r\n    >\r\n      <div className=\"h-72 w-full\">\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          <LineChart\r\n            data={data}\r\n            margin={{ top: 20, right: 20, left: 0, bottom: 5 }}\r\n          >\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n            <XAxis dataKey=\"name\" tick={{ fill: \"#374151\", fontSize: 10 }} />\r\n            <YAxis tick={{ fill: \"#374151\", fontSize: 10 }} />\r\n            <Tooltip\r\n              contentStyle={{\r\n                background: \"#fff\",\r\n                borderColor: \"#e5e7eb\",\r\n                borderRadius: 8,\r\n              }}\r\n            />\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"value\"\r\n              stroke={SOFT_BLUE}\r\n              strokeWidth={3}\r\n              dot={{ r: 5, fill: SOFT_BLUE }}\r\n            />\r\n          </LineChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </ChartCard>\r\n  );\r\n}\r\n\r\nfunction SalesPieChart({ data, className = \"\" }) {\r\n  return (\r\n    <ChartCard\r\n      title={<span className=\"text-blue-700\">Sales by Category (Demo)</span>}\r\n      className={`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl ${className}`}\r\n    >\r\n      <div className=\"h-72 w-full\">\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          <BarChart\r\n            data={data}\r\n            margin={{ top: 20, right: 20, left: 0, bottom: 5 }}\r\n          >\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n            <XAxis dataKey=\"name\" tick={{ fill: \"#374151\", fontSize: 12 }} />\r\n            <YAxis tick={{ fill: \"#374151\", fontSize: 12 }} />\r\n            <Tooltip\r\n              contentStyle={{\r\n                background: \"#fafafa\",\r\n                borderColor: SOFT_PURPLE,\r\n                borderRadius: 8,\r\n              }}\r\n            />\r\n            <Legend />\r\n            <Bar dataKey=\"value\" fill={SOFT_BLUE} radius={[8, 8, 0, 0]} />\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </ChartCard>\r\n  );\r\n}\r\n\r\nexport default function DemoDashboard() {\r\n  const [keyMetrics, setKeyMetrics] = useState({\r\n    revenue: 0,\r\n    expenses: 0,\r\n    netProfit: 0,\r\n    grossMargin: 0,\r\n    totalTransactions: 0,\r\n    totalItemsSold: 0,\r\n    averageTransactionValue: 0,\r\n  });\r\n\r\n  // State\r\n  const [stats, setStats] = useState([]);\r\n  const [dateRange, setDateRange] = useState({\r\n    startDate: dayjs().startOf(\"month\"),\r\n    endDate: dayjs().endOf(\"day\"),\r\n    rangeType: \"Month\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [chartData, setChartData] = useState([]);\r\n  const [pieData, setPieData] = useState([]);\r\n  const [lowStockProducts, setLowStockProducts] = useState([]);\r\n  const [showFilterModal, setShowFilterModal] = useState(false);\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [showNotifications, setShowNotifications] = useState(false);\r\n  const notificationRef = React.useRef(null);\r\n  const { logout } = useAuth();\r\n  const [isSidebarOpen, setSidebarOpen] = useState(false);\r\n  const [todayHighlight, setTodayHighlight] = useState({\r\n    sales: 0,\r\n    transactions: 0,\r\n    topProduct: \"-\",\r\n    totalItemsSold: 0,\r\n    averageTransactionValue: 0,\r\n  });\r\n  const [exportingPDF, setExportingPDF] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(dayjs());\r\n\r\n  // Refs for PDF export\r\n  const dashboardRef = useRef(null);\r\n  const visitorsChartRef = useRef(null);\r\n  const pieChartRef = useRef(null);\r\n  const keyMetricsRef = useRef(null);\r\n  const businessReportRef = useRef(null);\r\n\r\n  // Optimized timer: only update when page is visible and reduce frequency to every 10 seconds\r\n  useEffect(() => {\r\n    let timer;\r\n    const updateTime = () => {\r\n      if (document.visibilityState === \"visible\") {\r\n        setCurrentTime(dayjs());\r\n      }\r\n    };\r\n\r\n    // Update immediately\r\n    updateTime();\r\n\r\n    // Update every 10 seconds (instead of every second) and only when visible\r\n    timer = setInterval(updateTime, 10000);\r\n\r\n    // Also update when page becomes visible\r\n    const handleVisibilityChange = () => {\r\n      if (document.visibilityState === \"visible\") {\r\n        updateTime();\r\n      }\r\n    };\r\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\r\n\r\n    return () => {\r\n      clearInterval(timer);\r\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\r\n    };\r\n  }, []);\r\n\r\n  // Close notification dropdown on outside click\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (\r\n        notificationRef.current &&\r\n        !notificationRef.current.contains(event.target)\r\n      ) {\r\n        setShowNotifications(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    // Simulate API delay\r\n    await new Promise((resolve) => setTimeout(resolve, 800));\r\n\r\n    // Set Mock Data\r\n    const overview = MOCK_OVERVIEW;\r\n    const revenue = overview.totalSales;\r\n    const expenses = overview.totalExpenses;\r\n    const netProfit = revenue - expenses;\r\n    const grossMargin =\r\n      revenue > 0 ? ((revenue - expenses) / revenue) * 100 : 0;\r\n\r\n    setKeyMetrics({\r\n      revenue,\r\n      expenses,\r\n      netProfit,\r\n      grossMargin,\r\n      totalTransactions: overview.totalTransactions,\r\n      totalItemsSold: overview.totalItemsSold,\r\n      averageTransactionValue: overview.averageTransactionValue,\r\n    });\r\n\r\n    setTodayHighlight({\r\n      sales: 1250.0,\r\n      transactions: 15,\r\n      totalItemsSold: 42,\r\n      averageTransactionValue: 83.33,\r\n      topProduct: \"Iced Latte\",\r\n    });\r\n\r\n    setChartData(MOCK_TIMESERIES);\r\n    setPieData(MOCK_PIE);\r\n    setLowStockProducts(MOCK_LOW_STOCK);\r\n    setLoading(false);\r\n  };\r\n\r\n  const fetchNotifications = async () => {\r\n    try {\r\n      // Mock notifications for demo\r\n      const mockNotifications = [\r\n        {\r\n          id: 1,\r\n          title: \"Demo Notification\",\r\n          message: \"Demo User did an action: Sample Action\",\r\n          time: dayjs().format(\"MMM D, h:mm A\"),\r\n          isRead: false,\r\n        },\r\n      ];\r\n      setNotifications(mockNotifications);\r\n      setUnreadCount(mockNotifications.filter((n) => !n.isRead).length);\r\n    } catch (e) {\r\n      console.error(\"Failed to fetch notifications\", e);\r\n    }\r\n  };\r\n\r\n  const handleMarkAsRead = (id) => {\r\n    setNotifications((notifs) =>\r\n      notifs.map((n) => (n.id === id ? { ...n, isRead: true } : n))\r\n    );\r\n    setUnreadCount((c) => Math.max(0, c - 1));\r\n  };\r\n\r\n  const handleDeleteNotification = (id) => {\r\n    setNotifications((notifs) => notifs.filter((n) => n.id !== id));\r\n    const notif = notifications.find((n) => n.id === id);\r\n    if (notif && !notif.isRead) {\r\n      setUnreadCount((c) => Math.max(0, c - 1));\r\n    }\r\n  };\r\n\r\n  const handleMarkAsUnread = (id) => {\r\n    setNotifications((notifs) =>\r\n      notifs.map((n) => (n.id === id ? { ...n, isRead: false } : n))\r\n    );\r\n    setUnreadCount((c) => c + 1);\r\n  };\r\n\r\n  // Fetch filtered data when dateRange changes\r\n  useEffect(() => {\r\n    fetchData();\r\n    fetchNotifications();\r\n  }, [dateRange]);\r\n\r\n  // Helper function to format currency values\r\n  const formatCurrency = (value) => {\r\n    return new Intl.NumberFormat(\"en-PH\", {\r\n      style: \"currency\",\r\n      currency: \"PHP\",\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(value);\r\n  };\r\n\r\n  // New handler to receive selected dates from modal\r\n  const handleDateRangeApply = (newRange) => {\r\n    setDateRange(newRange);\r\n  };\r\n\r\n  const headerDateDisplay = useMemo(() => {\r\n    if (!dateRange.startDate || !dateRange.endDate) return \"Select Range\";\r\n\r\n    const finalStart = dayjs.min(dateRange.startDate, dateRange.endDate);\r\n    const finalEnd = dayjs.max(dateRange.startDate, dateRange.endDate);\r\n\r\n    return `${finalStart.format(\"MMM D\")} - ${finalEnd.format(\"MMM D, YYYY\")}`;\r\n  }, [dateRange]);\r\n\r\n  // Header actions - REMOVED SELECT DROPDOWN\r\n  const headerActions = (\r\n    <div className=\"flex items-center gap-2\">\r\n      <button\r\n        onClick={fetchData}\r\n        disabled={loading}\r\n        title=\"Refresh Data\"\r\n        className=\"bg-white/80 backdrop-blur-sm hover:bg-white text-gray-700 p-1.5 sm:p-2 rounded-lg border border-gray-200/80 text-sm font-medium transition-all duration-200 hover:shadow-md hover:scale-[1.02] shrink-0\"\r\n      >\r\n        <BiRefresh\r\n          className={`w-4 h-4 sm:w-5 sm:h-5 ${loading ? \"animate-spin\" : \"\"}`}\r\n        />\r\n      </button>\r\n\r\n      {/* NEW CALENDAR BUTTON */}\r\n      <button\r\n        onClick={() => setShowFilterModal(true)}\r\n        disabled={loading}\r\n        title=\"Select Date Range\"\r\n        className=\"flex items-center gap-1 sm:gap-2 bg-white/80 backdrop-blur-sm hover:bg-white text-gray-700 px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-lg border border-gray-200/80 text-xs sm:text-sm font-medium transition-all duration-200 outline-none cursor-pointer hover:shadow-md hover:scale-[1.02] shrink-0\"\r\n      >\r\n        <BiCalendarAlt className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n        <span className=\"hidden sm:inline\">{headerDateDisplay}</span>\r\n      </button>\r\n\r\n      <div className=\"py-2 flex justify-end gap-2\">\r\n        <Button\r\n          onClick={() => {}}\r\n          disabled={exportingPDF || loading}\r\n          size=\"sm\"\r\n          variant=\"primary\"\r\n          className=\"flex items-center gap-2 w-full sm:w-auto shrink-0\"\r\n        >\r\n          {exportingPDF ? (\r\n            <>\r\n              <BiRefresh className=\"w-5 h-5 animate-spin\" />\r\n              <span className=\"hidden sm:inline\">Exporting...</span>\r\n              <span className=\"sm:hidden\">...</span>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <svg\r\n                className=\"w-5 h-5\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\r\n                />\r\n              </svg>\r\n              <span className=\"hidden sm:inline\">Export PDF</span>\r\n              <span className=\"sm:hidden\">PDF</span>\r\n            </>\r\n          )}\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"relative\" ref={notificationRef}>\r\n        <NotificationDropdown\r\n          notifications={notifications}\r\n          unreadCount={unreadCount}\r\n          onMarkAsRead={handleMarkAsRead}\r\n          onMarkAsUnread={handleMarkAsUnread}\r\n          onDelete={handleDeleteNotification}\r\n          isOpen={showNotifications}\r\n          onToggle={() => setShowNotifications(!showNotifications)}\r\n          containerRef={notificationRef}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <PageLayout\r\n      title=\"DASHBOARD (DEMO)\"\r\n      subtitle=\"\"\r\n      sidebar={<DemoNav />}\r\n      headerActions={headerActions}\r\n      isSidebarOpen={isSidebarOpen}\r\n      setSidebarOpen={setSidebarOpen}\r\n      className=\"bg-gray-50 min-h-screen\"\r\n    >\r\n      <div className=\"p-4 sm:p-6 md:p-8\">\r\n        {/* Key Metrics Cards */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 w-full mb-6\">\r\n          <div className=\"bg-white rounded-lg p-5 border border-gray-200 shadow-sm\">\r\n            <p className=\"text-xs font-medium text-gray-500 uppercase mb-1\">\r\n              Total Revenue\r\n            </p>\r\n            <p className=\"text-2xl font-bold text-gray-900\">\r\n              {formatCurrency(keyMetrics.revenue)}\r\n            </p>\r\n          </div>\r\n          <div className=\"bg-white rounded-lg p-5 border border-gray-200 shadow-sm\">\r\n            <p className=\"text-xs font-medium text-gray-500 uppercase mb-1\">\r\n              Operating Expenses\r\n            </p>\r\n            <p className=\"text-2xl font-bold text-gray-900\">\r\n              {formatCurrency(keyMetrics.expenses)}\r\n            </p>\r\n          </div>\r\n          <div className=\"bg-white rounded-lg p-5 border border-gray-200 shadow-sm\">\r\n            <p className=\"text-xs font-medium text-gray-500 uppercase mb-1\">\r\n              Net Profit\r\n            </p>\r\n            <p\r\n              className={`text-2xl font-bold ${\r\n                keyMetrics.netProfit >= 0 ? \"text-green-600\" : \"text-red-600\"\r\n              }`}\r\n            >\r\n              {formatCurrency(Math.abs(keyMetrics.netProfit))}\r\n            </p>\r\n          </div>\r\n          <div className=\"bg-white rounded-lg p-5 border border-gray-200 shadow-sm\">\r\n            <p className=\"text-xs font-medium text-gray-500 uppercase mb-1\">\r\n              Gross Margin\r\n            </p>\r\n            <p\r\n              className={`text-2xl font-bold ${\r\n                keyMetrics.grossMargin >= 0 ? \"text-green-600\" : \"text-red-600\"\r\n              }`}\r\n            >\r\n              {keyMetrics.grossMargin.toFixed(1)}%\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\r\n          {/* Main Chart Area */}\r\n          <div className=\"lg:col-span-8 flex flex-col gap-6\">\r\n            {loading ? (\r\n              <div className=\"bg-white p-6 rounded-xl shadow-md border border-gray-200 h-64 animate-pulse\"></div>\r\n            ) : (\r\n              <>\r\n                <VisitorsChart data={chartData} />\r\n                <SalesPieChart data={pieData} />\r\n                <DashboardBusinessReport\r\n                  keyMetrics={keyMetrics}\r\n                  formatCurrency={formatCurrency}\r\n                  dateRange={dateRange}\r\n                  currentTime={currentTime}\r\n                  topProducts={MOCK_TOP_PRODUCTS}\r\n                  paymentMethods={MOCK_PAYMENT_METHODS}\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Sidebar Stats */}\r\n          <div className=\"lg:col-span-4 flex flex-col gap-6\">\r\n            <DashboardStatsCard\r\n              stats={todayHighlight}\r\n              formatCurrency={formatCurrency}\r\n              rangeType=\"Today\"\r\n              currentTime={currentTime}\r\n            />\r\n\r\n            <div className=\"bg-white p-6 rounded-lg shadow-md\">\r\n              <h3 className=\"text-lg font-bold text-gray-800 mb-4\">\r\n                Low Stock Products\r\n              </h3>\r\n              <ul className=\"divide-y divide-gray-200\">\r\n                <li className=\"py-2 text-sm font-semibold text-gray-600 flex justify-between\">\r\n                  <span>Product</span>\r\n                  <span>Quantity</span>\r\n                </li>\r\n                {lowStockProducts.map((product) => (\r\n                  <li\r\n                    key={product.product_id}\r\n                    className=\"py-3 flex justify-between items-center\"\r\n                  >\r\n                    <span className=\"text-sm font-medium text-gray-800\">\r\n                      {product.product_name}\r\n                    </span>\r\n                    <span className=\"text-sm font-bold text-red-600\">\r\n                      {product.quantity_in_stock} left\r\n                    </span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Date Range Filter Modal */}\r\n      {showFilterModal && (\r\n        <DateRangeFilterModal\r\n          isOpen={showFilterModal}\r\n          onClose={() => setShowFilterModal(false)}\r\n          onApply={handleDateRangeApply}\r\n          initialRange={dateRange}\r\n        />\r\n      )}\r\n    </PageLayout>\r\n  );\r\n}\r\n"],"names":["dayjs","extend","minMax","SOFT_BLUE","MOCK_OVERVIEW","totalSales","totalExpenses","totalTransactions","totalItemsSold","averageTransactionValue","MOCK_TIMESERIES","name","value","MOCK_PIE","MOCK_LOW_STOCK","product_id","product_name","quantity_in_stock","MOCK_TOP_PRODUCTS","total_sold","MOCK_PAYMENT_METHODS","fill","VisitorsChart","data","className","jsx","ChartCard","title","children","ResponsiveContainer","width","height","jsxs","LineChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","stroke","XAxis","dataKey","tick","fontSize","YAxis","Tooltip","contentStyle","background","borderColor","borderRadius","Line","type","strokeWidth","dot","r","SalesPieChart","BarChart","Legend","Bar","radius","DemoDashboard","keyMetrics","setKeyMetrics","useState","revenue","expenses","netProfit","grossMargin","stats","setStats","dateRange","setDateRange","startDate","startOf","endDate","endOf","rangeType","loading","setLoading","chartData","setChartData","pieData","setPieData","lowStockProducts","setLowStockProducts","showFilterModal","setShowFilterModal","notifications","setNotifications","unreadCount","setUnreadCount","showNotifications","setShowNotifications","notificationRef","React","useRef","useAuth","isSidebarOpen","setSidebarOpen","todayHighlight","setTodayHighlight","sales","transactions","topProduct","exportingPDF","setExportingPDF","currentTime","setCurrentTime","useEffect","timer","updateTime","document","visibilityState","setInterval","handleVisibilityChange","addEventListener","clearInterval","removeEventListener","handleClickOutside","event","current","contains","target","fetchData","async","Promise","resolve","setTimeout","mockNotifications","id","message","time","format","isRead","filter","n","length","e","error","fetchNotifications","formatCurrency","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","headerDateDisplay","useMemo","finalStart","min","finalEnd","max","headerActions","onClick","disabled","BiRefresh","BiCalendarAlt","Button","size","variant","Fragment","viewBox","strokeLinecap","strokeLinejoin","d","ref","NotificationDropdown","onMarkAsRead","notifs","map","Math","c","onMarkAsUnread","onDelete","notif","find","isOpen","onToggle","containerRef","PageLayout","subtitle","sidebar","DemoNav","abs","toFixed","DashboardBusinessReport","topProducts","paymentMethods","DashboardStatsCard","product","DateRangeFilterModal","onClose","onApply","newRange","initialRange"],"mappings":"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"}