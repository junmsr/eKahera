import{j as e}from"./utils-L0j39QIW.js";import{a as s}from"./vendor-DPJ7iNYg.js";import{P as t}from"./PageLayout-BpDeJzKS.js";import{N as a}from"./Nav-Admin-Bgjo2dUp.js";import{C as r}from"./Card-DXlcOk_J.js";import{a as n,c as o,L as i,b as d}from"./index-W28bfVNj.js";import"./Navbar-BkkcP_6i.js";import"./Logo-t3FZ3HwH.js";import"./PrivacyPolicyModal-BdUgmRJt.js";import"./BaseModal-Cy73DE2S.js";const l=()=>{const[l,c]=s.useState([]),[m,u]=s.useState(!0),[x,h]=s.useState(""),[g,j]=s.useState(null);s.useEffect(()=>{b()},[]);const b=async()=>{try{u(!0),h("");const e=sessionStorage.getItem("auth_token"),s=JSON.parse(sessionStorage.getItem("user")||"{}"),t=s.businessId||s.business_id;if(!e)throw new Error("No authentication token found");if(!t)throw new Error("Business ID not found");const a=await n(`/documents/business/${t}`,{headers:o(e)});c(Array.isArray(a.documents)?a.documents:[])}catch(e){console.error("Failed to fetch documents:",e),h(e.message||"Failed to load documents. Please check your connection and try again.")}finally{u(!1)}},f=e=>{switch(e){case"approved":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-yellow-600 bg-yellow-100"}},p=e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsx("button",{onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Refresh Documents"})});return m?e.jsx(t,{title:"DOCUMENTS",subtitle:"View and manage your business documents",sidebar:e.jsx(a,{}),className:"bg-gray-50",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(i,{})})}):e.jsx(t,{title:"DOCUMENTS",subtitle:"View and manage your business documents",sidebar:e.jsx(a,{}),headerActions:p,className:"bg-gray-50",children:e.jsxs("div",{className:"p-6 space-y-6",children:[x&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-red-800 text-sm",children:x})]})}),!m&&!x&&0===l.length&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Documents Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't uploaded any business documents yet."}),e.jsx("button",{onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Refresh"})]}),l.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(s=>{return e.jsx(r,{className:"bg-white shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:s.document_type}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.document_name})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f(s.verification_status)}`,children:s.verification_status})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Uploaded:"}),e.jsx("div",{className:"text-gray-900",children:(t=s.uploaded_at,t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A")})]}),s.verification_notes&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Notes:"}),e.jsx("div",{className:"text-gray-900 mt-1",children:s.verification_notes})]})]}),e.jsx(d,{onClick:()=>(async(e,s)=>{j(e);try{const t=sessionStorage.getItem("auth_token"),a=await n(`/documents/download/${e}`,{headers:o(t)},!0),r=await a.blob(),i=window.URL.createObjectURL(r),d=document.createElement("a");d.style.display="none",d.href=i,d.download=s,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(i)}catch(t){console.error("Error downloading document:",t),alert("Error downloading document")}finally{j(null)}})(s.document_id,s.document_name),disabled:g===s.document_id,className:"w-full",size:"sm",children:g===s.document_id?"Downloading...":"Download"})]})},s.document_id);var t})})]})})};export{l as default};
//# sourceMappingURL=Documents-qi8RF5oP.js.map
