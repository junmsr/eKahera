{"version":3,"file":"ScanCustomerCartModal-DETaSfGI.js","sources":["../../../frontend/src/components/ui/POS/SkuFormCard.jsx","../../../frontend/src/components/ui/POS/CartTableCard.jsx","../../../frontend/src/components/modals/PriceCheckModal.jsx","../../../frontend/src/components/modals/DiscountModal.jsx","../../../frontend/src/components/modals/CashLedgerModal.jsx","../../../frontend/src/components/modals/CheckoutModal.jsx","../../../frontend/src/components/modals/CashPaymentCompleteModal.jsx","../../../frontend/src/components/modals/CashPaymentModal.jsx","../../../frontend/src/components/modals/ScanCustomerCartModal.jsx"],"sourcesContent":["import React from \"react\";\r\nimport Card from \"../../common/Card\";\r\nimport FormField from \"../../common/FormField\";\r\nimport Input from \"../../common/Input\";\r\nimport Button from \"../../common/Button\";\r\n\r\n/**\r\n * SKU Form Card Component\r\n * Form for entering SKU codes and quantities\r\n */\r\nexport default React.forwardRef(\r\n  (\r\n    {\r\n      sku,\r\n      setSku,\r\n      quantity,\r\n      setQuantity,\r\n      handleAddToCart,\r\n      className = \"\",\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    return (\r\n      <Card\r\n        className={`flex-shrink-0 bg-white/80 backdrop-blur-md border border-white/60 shadow-xl hover:shadow-2xl transition-all duration-300 ${className}`}\r\n        variant=\"glass\"\r\n        microinteraction\r\n        {...props}\r\n      >\r\n        <div className=\"flex flex-col gap-1 p-1 sm:p-2\">\r\n          <div className=\"flex items-center gap-2 mb-0.5\">\r\n            <div className=\"w-6 h-6 bg-blue-100 rounded-xl flex items-center justify-center\">\r\n              <svg\r\n                className=\"w-3 h-3 text-blue-600\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\r\n                />\r\n              </svg>\r\n            </div>\r\n            <span className=\"font-bold text-sm text-gray-900\">\r\n              Enter SKU Code\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                SKU Code\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  ref={ref}\r\n                  type=\"text\"\r\n                  name=\"sku\"\r\n                  value={sku}\r\n                  onChange={(e) => setSku(e.target.value)}\r\n                  onKeyPress={(e) => {\r\n                    if (e.key === \"Enter\" && sku.trim()) {\r\n                      handleAddToCart();\r\n                    }\r\n                  }}\r\n                  placeholder=\"Scan or enter SKU code\"\r\n                  className=\"w-full pl-3 pr-3 py-2 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-gray-400 font-medium\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <label className=\"text-sm font-semibold text-gray-700 whitespace-nowrap\">\r\n                Quantity:\r\n              </label>\r\n              <div className=\"flex items-center gap-1 flex-1\">\r\n                <button\r\n                  onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n                  className=\"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold transition-colors duration-200 flex items-center justify-center\"\r\n                >\r\n                  −\r\n                </button>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"quantity\"\r\n                  value={quantity}\r\n                  min={1}\r\n                  onChange={(e) =>\r\n                    setQuantity(Math.max(1, Number(e.target.value) || 1))\r\n                  }\r\n                  className=\"w-16 px-2 py-1 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl text-center text-sm font-semibold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200\"\r\n                />\r\n                <button\r\n                  onClick={() => setQuantity(quantity + 1)}\r\n                  className=\"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold transition-colors duration-200 flex items-center justify-center\"\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n              <Button\r\n                label=\"Add to Cart\"\r\n                onClick={handleAddToCart}\r\n                variant=\"primary\"\r\n                size=\"sm\"\r\n                microinteraction\r\n                icon={\r\n                  <svg\r\n                    className=\"w-3 h-3\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M12 4v16m8-8H4\"\r\n                    />\r\n                  </svg>\r\n                }\r\n                iconPosition=\"left\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Card from \"../../common/Card\";\r\nimport Button from \"../../common/Button\";\r\n\r\n/**\r\n * Cart Table Card Component\r\n * Displays cart items in a table format with totals\r\n */\r\nfunction CartTableCard({\r\n  cart,\r\n  handleRemove,\r\n  handleEditQuantity,\r\n  total,\r\n  className = \"\",\r\n  ...props\r\n}) {\r\n  const [editingIdx, setEditingIdx] = useState(null);\r\n  const [editQty, setEditQty] = useState(1);\r\n\r\n  // Keyboard shortcuts: F1 for edit, F2 for remove\r\n  useEffect(() => {\r\n    const handleKeyDown = (event) => {\r\n      if (event.key === \"F1\" && cart.length > 0) {\r\n        event.preventDefault();\r\n        const firstItemIdx = 0;\r\n        setEditingIdx(firstItemIdx);\r\n        setEditQty(cart[firstItemIdx].quantity);\r\n      } else if (event.key === \"F2\" && cart.length > 0) {\r\n        event.preventDefault();\r\n        const firstItemIdx = 0;\r\n        handleRemove(firstItemIdx);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleKeyDown);\r\n    };\r\n  }, [cart, handleRemove]);\r\n\r\n  const EditIcon = () => (\r\n    <svg\r\n      width=\"16\"\r\n      height=\"16\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth=\"2\"\r\n      viewBox=\"0 0 24 24\"\r\n    >\r\n      <path d=\"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 1 1 2.828 2.828L11.828 15.828a4 4 0 0 1-1.414.828l-4.243 1.414 1.414-4.243a4 4 0 0 1 .828-1.414z\" />\r\n    </svg>\r\n  );\r\n\r\n  const DeleteIcon = () => (\r\n    <svg\r\n      width=\"16\"\r\n      height=\"16\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth=\"2\"\r\n      viewBox=\"0 0 24 24\"\r\n    >\r\n      <path d=\"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\" />\r\n    </svg>\r\n  );\r\n\r\n  return (\r\n    <Card\r\n      className={`flex-1 flex flex-col bg-white/80 backdrop-blur-md border border-white/60 shadow-xl transition-all duration-300 h-full min-h-0 overflow-hidden ${className}`}\r\n      variant=\"glass\"\r\n      {...props}\r\n    >\r\n      <div className=\"flex-1 min-h-0 flex flex-col p-2 sm:p-3\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-gray-200\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-7 h-7 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n              <svg\r\n                className=\"w-4 h-4 text-blue-600\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\"\r\n                />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-sm sm:text-base font-bold text-gray-900\">\r\n              Shopping Cart\r\n            </h3>\r\n          </div>\r\n          <span className=\"text-xs font-semibold text-gray-600 bg-gray-100 px-2 py-0.5 rounded-full\">\r\n            {cart.length} {cart.length === 1 ? \"item\" : \"items\"}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Table Container */}\r\n        <div className=\"flex-1 overflow-auto min-h-0 rounded-lg\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"sticky top-0 z-10 bg-gradient-to-r from-blue-50/90 to-indigo-50/90 backdrop-blur-sm border-b border-blue-100\">\r\n              <tr>\r\n                <th className=\"py-1.5 px-2 text-left text-[10px] sm:text-xs font-bold text-gray-700 uppercase tracking-wider\">\r\n                  Product\r\n                </th>\r\n                <th className=\"py-1.5 px-2 text-center text-[10px] sm:text-xs font-bold text-gray-700 uppercase tracking-wider\">\r\n                  Qty\r\n                </th>\r\n                <th className=\"py-1.5 px-2 text-right text-[10px] sm:text-xs font-bold text-gray-700 uppercase tracking-wider\">\r\n                  Price\r\n                </th>\r\n                <th className=\"py-1.5 px-2 text-right text-[10px] sm:text-xs font-bold text-gray-700 uppercase tracking-wider\">\r\n                  Total\r\n                </th>\r\n                <th className=\"py-1.5 px-2 text-center text-[10px] sm:text-xs font-bold text-gray-700 uppercase tracking-wider\">\r\n                  Actions\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-100\">\r\n              {cart.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={5} className=\"text-center py-8\">\r\n                    <div className=\"flex flex-col items-center justify-center\">\r\n                      <div className=\"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2\">\r\n                        <svg\r\n                          className=\"w-6 h-6 text-gray-400\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          viewBox=\"0 0 24 24\"\r\n                        >\r\n                          <path\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            strokeWidth={2}\r\n                            d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\"\r\n                          />\r\n                        </svg>\r\n                      </div>\r\n                      <p className=\"text-gray-500 text-sm font-semibold\">\r\n                        Cart is empty\r\n                      </p>\r\n                      <p className=\"text-gray-400 text-xs mt-1\">\r\n                        Scan or enter products\r\n                      </p>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                cart.map((item, idx) => (\r\n                  <tr\r\n                    key={idx}\r\n                    className=\"hover:bg-blue-50/50 transition-colors duration-200 group\"\r\n                  >\r\n                    <td className=\"py-1.5 px-2\">\r\n                      <div className=\"flex flex-col\">\r\n                        <span className=\"text-xs sm:text-sm font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate\">\r\n                          {item.name}\r\n                        </span>\r\n                        <span className=\"text-[10px] text-gray-500 truncate\">\r\n                          SKU: {item.sku || \"N/A\"}\r\n                        </span>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"py-1.5 px-2 text-center\">\r\n                      {editingIdx === idx ? (\r\n                        <input\r\n                          type=\"number\"\r\n                          min=\"1\"\r\n                          value={editQty}\r\n                          onChange={(e) =>\r\n                            setEditQty(\r\n                              Math.max(1, parseInt(e.target.value) || 1)\r\n                            )\r\n                          }\r\n                          onKeyDown={(e) => {\r\n                            if (e.key === \"Enter\") {\r\n                              handleEditQuantity(idx, editQty);\r\n                              setEditingIdx(null);\r\n                            } else if (e.key === \"Escape\") {\r\n                              setEditingIdx(null);\r\n                            }\r\n                          }}\r\n                          onBlur={() => {\r\n                            handleEditQuantity(idx, editQty);\r\n                            setEditingIdx(null);\r\n                          }}\r\n                          className=\"w-12 h-7 text-center text-xs font-bold border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                          autoFocus\r\n                        />\r\n                      ) : (\r\n                        <span className=\"inline-flex items-center justify-center w-7 h-7 rounded-md bg-blue-100 text-blue-700 font-bold text-xs\">\r\n                          {item.quantity}\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"py-1.5 px-2 text-right\">\r\n                      <span className=\"text-xs sm:text-sm font-medium text-gray-700\">\r\n                        ₱{item.price.toFixed(2)}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"py-1.5 px-2 text-right\">\r\n                      <span className=\"text-xs sm:text-sm font-bold text-blue-600\">\r\n                        ₱\r\n                        {(\r\n                          item.price *\r\n                          (editingIdx === idx ? editQty : item.quantity)\r\n                        ).toFixed(2)}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"py-1.5 px-2\">\r\n                      <div className=\"flex items-center justify-center gap-1\">\r\n                        <button\r\n                          onClick={() => {\r\n                            setEditingIdx(idx);\r\n                            setEditQty(item.quantity);\r\n                          }}\r\n                          className=\"p-1.5 rounded-md bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200 transition-all duration-200\"\r\n                          title=\"Edit (F1)\"\r\n                        >\r\n                          <EditIcon />\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleRemove(idx)}\r\n                          className=\"p-1.5 rounded-md bg-red-50 text-red-600 hover:bg-red-100 border border-red-200 transition-all duration-200\"\r\n                          title=\"Remove (F2)\"\r\n                        >\r\n                          <DeleteIcon />\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Total Footer */}\r\n        <div className=\"mt-2 pt-2 border-t border-gray-200\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <span className=\"text-sm sm:text-base font-semibold text-gray-700\">\r\n              Total:\r\n            </span>\r\n            <span className=\"text-lg sm:text-xl font-extrabold text-blue-600\">\r\n              ₱\r\n              {cart\r\n                .reduce(\r\n                  (sum, item, idx) =>\r\n                    sum +\r\n                    item.price * (editingIdx === idx ? editQty : item.quantity),\r\n                  0\r\n                )\r\n                .toFixed(2)}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default CartTableCard;\r\n","import React, { useState } from \"react\";\r\nimport BaseModal from \"./BaseModal\";\r\nimport Button from \"../common/Button\";\r\nimport { api } from \"../../lib/api\";\r\nimport ScannerCard from \"../ui/POS/ScannerCard\";\r\n\r\nfunction PriceCheckModal({ isOpen, onClose, sku, setSku }) {\r\n  const [product, setProduct] = useState(null);\r\n\r\n  const handleCheck = async () => {\r\n    if (!sku) return;\r\n    try {\r\n      const businessId = localStorage.getItem(\"business_id\");\r\n      const query = businessId\r\n        ? `?business_id=${encodeURIComponent(businessId)}`\r\n        : \"\";\r\n      const res = await api(\r\n        `/api/products/public/sku/${encodeURIComponent(sku)}${query}`\r\n      );\r\n      if (res) {\r\n        setProduct({\r\n          name: res.product_name,\r\n          price: Number(res.selling_price || 0),\r\n          sku: res.sku,\r\n        });\r\n      } else {\r\n        setProduct(null);\r\n      }\r\n    } catch (_) {\r\n      setProduct(null);\r\n    }\r\n  };\r\n\r\n  // Auto-fetch on SKU change\r\n  React.useEffect(() => {\r\n    if (!sku) {\r\n      setProduct(null);\r\n      return;\r\n    }\r\n    const t = setTimeout(() => {\r\n      handleCheck();\r\n    }, 200);\r\n    return () => clearTimeout(t);\r\n  }, [sku]);\r\n\r\n  const footerContent = (\r\n    <Button\r\n      label=\"Close\"\r\n      variant=\"secondary\"\r\n      onClick={onClose}\r\n      className=\"w-full\"\r\n    />\r\n  );\r\n\r\n  return (\r\n    <BaseModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Price Check\"\r\n      subtitle=\"Scan or enter SKU/barcode\"\r\n      icon={\r\n        <svg\r\n          className=\"w-5 h-5 text-white\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n          />\r\n        </svg>\r\n      }\r\n      footer={footerContent}\r\n      size=\"md\"\r\n      contentClassName=\"space-y-4\"\r\n    >\r\n      {/* Scanner */}\r\n      <div className=\"w-full\">\r\n        <ScannerCard\r\n          onScan={(result) => {\r\n            const code = result?.[0]?.rawValue;\r\n            if (code) {\r\n              setSku(code);\r\n            }\r\n          }}\r\n          paused={false}\r\n          onResume={() => {}}\r\n          className=\"w-full\"\r\n          textMain=\"text-blue-700\"\r\n        />\r\n      </div>\r\n\r\n      {/* Manual Input */}\r\n      <div className=\"w-full\">\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n          Enter SKU or Barcode\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          value={sku}\r\n          onChange={(e) => setSku(e.target.value)}\r\n          className=\"w-full border border-gray-300 rounded-lg px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          placeholder=\"Enter SKU or scan barcode\"\r\n        />\r\n      </div>\r\n\r\n      {/* Results */}\r\n      {product ? (\r\n        <div className=\"w-full bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200/50\">\r\n          <div className=\"text-lg font-semibold text-blue-900 mb-1\">\r\n            {product.name}\r\n          </div>\r\n          <div className=\"text-3xl font-bold text-blue-600 mb-2\">\r\n            ₱{product.price.toFixed(2)}\r\n          </div>\r\n          <div className=\"text-xs text-gray-500\">SKU: {product.sku}</div>\r\n        </div>\r\n      ) : sku ? (\r\n        <div className=\"text-red-500 text-sm text-center py-4\">\r\n          No product found.\r\n        </div>\r\n      ) : null}\r\n    </BaseModal>\r\n  );\r\n}\r\n\r\nexport default PriceCheckModal;\r\n","import React, { useState } from \"react\";\r\nimport BaseModal from \"./BaseModal\";\r\nimport Button from \"../common/Button\";\r\n\r\nfunction DiscountModal({ isOpen, onClose, onApplyDiscount }) {\r\n  // Main modal tab (FIX or PERCENTAGE)\r\n  const [tab, setTab] = useState(\"FIX\");\r\n  // Settings modal state\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [settingsTab, setSettingsTab] = useState(\"PERCENTAGE\");\r\n\r\n  // Discounts state\r\n  const [percentageDiscounts, setPercentageDiscounts] = useState([\r\n    { label: \"PWD/Senior Citizen\", value: \"5%\" },\r\n  ]);\r\n  const [fixedDiscounts, setFixedDiscounts] = useState([]);\r\n\r\n  // Temp input states for adding new discounts\r\n  const [newDesc, setNewDesc] = useState(\"\");\r\n  const [newValue, setNewValue] = useState(\"\");\r\n\r\n  // Selected discount index\r\n  const [selectedIdx, setSelectedIdx] = useState(null);\r\n\r\n  // Add discount handler\r\n  const handleAddDiscount = () => {\r\n    if (!newDesc || !newValue) return;\r\n    if (settingsTab === \"PERCENTAGE\") {\r\n      setPercentageDiscounts([\r\n        ...percentageDiscounts,\r\n        { label: newDesc, value: newValue + \"%\" },\r\n      ]);\r\n    } else {\r\n      setFixedDiscounts([\r\n        ...fixedDiscounts,\r\n        { label: newDesc, value: parseFloat(newValue).toFixed(2) },\r\n      ]);\r\n    }\r\n    setNewDesc(\"\");\r\n    setNewValue(\"\");\r\n  };\r\n\r\n  // Remove discount handler\r\n  const handleRemove = (idx) => {\r\n    if (settingsTab === \"PERCENTAGE\") {\r\n      setPercentageDiscounts(percentageDiscounts.filter((_, i) => i !== idx));\r\n    } else {\r\n      setFixedDiscounts(fixedDiscounts.filter((_, i) => i !== idx));\r\n    }\r\n  };\r\n\r\n  // Save settings and return to main modal\r\n  const handleSaveSettings = () => {\r\n    setShowSettings(false);\r\n  };\r\n\r\n  // Confirm handler\r\n  const handleConfirm = () => {\r\n    const discounts =\r\n      tab === \"PERCENTAGE\" ? percentageDiscounts : fixedDiscounts;\r\n    if (selectedIdx !== null && discounts[selectedIdx]) {\r\n      onApplyDiscount(discounts[selectedIdx]);\r\n      setSelectedIdx(null);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  // Settings Footer\r\n  const settingsFooterContent = (\r\n    <Button\r\n      label=\"Save Settings\"\r\n      variant=\"primary\"\r\n      onClick={handleSaveSettings}\r\n      className=\"w-full\"\r\n    />\r\n  );\r\n\r\n  // Main Footer\r\n  const mainFooterContent = (\r\n    <div className=\"w-full space-y-2\">\r\n      <Button\r\n        label=\"Confirm Selection\"\r\n        variant=\"primary\"\r\n        onClick={handleConfirm}\r\n        disabled={selectedIdx === null}\r\n        className=\"w-full\"\r\n      />\r\n      <Button\r\n        label=\"Manage Discounts\"\r\n        variant=\"secondary\"\r\n        onClick={() => setShowSettings(true)}\r\n        className=\"w-full\"\r\n      />\r\n    </div>\r\n  );\r\n\r\n  // Main Discount Modal\r\n  const renderMain = () => {\r\n    const discounts =\r\n      tab === \"PERCENTAGE\" ? percentageDiscounts : fixedDiscounts;\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {/* Tabs */}\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            className={`flex-1 px-4 py-2 rounded-lg font-semibold text-sm transition-all ${\r\n              tab === \"FIX\"\r\n                ? \"bg-blue-600 text-white\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n            }`}\r\n            onClick={() => {\r\n              setTab(\"FIX\");\r\n              setSelectedIdx(null);\r\n            }}\r\n          >\r\n            Fixed Amount\r\n          </button>\r\n          <button\r\n            className={`flex-1 px-4 py-2 rounded-lg font-semibold text-sm transition-all ${\r\n              tab === \"PERCENTAGE\"\r\n                ? \"bg-blue-600 text-white\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n            }`}\r\n            onClick={() => {\r\n              setTab(\"PERCENTAGE\");\r\n              setSelectedIdx(null);\r\n            }}\r\n          >\r\n            Percentage\r\n          </button>\r\n        </div>\r\n\r\n        {/* Discount List */}\r\n        <div className=\"space-y-2\">\r\n          {discounts.length === 0 ? (\r\n            <div className=\"text-center py-8 text-gray-500\">\r\n              <p>No discounts available yet.</p>\r\n              <p className=\"text-xs mt-1\">Set up discounts in settings.</p>\r\n            </div>\r\n          ) : (\r\n            discounts.map((d, idx) => (\r\n              <button\r\n                key={idx}\r\n                type=\"button\"\r\n                className={`w-full border-2 rounded-lg px-4 py-3 text-sm transition-all flex items-center justify-between ${\r\n                  selectedIdx === idx\r\n                    ? \"border-blue-600 bg-blue-50 ring-2 ring-blue-300\"\r\n                    : \"border-gray-200 bg-white hover:border-gray-300\"\r\n                }`}\r\n                onClick={() => setSelectedIdx(idx)}\r\n              >\r\n                <span className=\"font-medium\">{d.label}</span>\r\n                <span\r\n                  className={`font-bold ${\r\n                    selectedIdx === idx ? \"text-blue-600\" : \"text-gray-700\"\r\n                  }`}\r\n                >\r\n                  {d.value}\r\n                </span>\r\n              </button>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Settings Modal Content\r\n  const renderSettings = () => (\r\n    <div className=\"space-y-4\">\r\n      {/* Settings Tabs */}\r\n      <div className=\"flex gap-2\">\r\n        <button\r\n          className={`flex-1 px-4 py-2 rounded-lg font-semibold text-sm transition-all ${\r\n            settingsTab === \"PERCENTAGE\"\r\n              ? \"bg-blue-600 text-white\"\r\n              : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n          }`}\r\n          onClick={() => setSettingsTab(\"PERCENTAGE\")}\r\n        >\r\n          Percentage\r\n        </button>\r\n        <button\r\n          className={`flex-1 px-4 py-2 rounded-lg font-semibold text-sm transition-all ${\r\n            settingsTab === \"FIXED\"\r\n              ? \"bg-blue-600 text-white\"\r\n              : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n          }`}\r\n          onClick={() => setSettingsTab(\"FIXED\")}\r\n        >\r\n          Fixed Amount\r\n        </button>\r\n      </div>\r\n\r\n      {/* Discount List */}\r\n      <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n        {(settingsTab === \"PERCENTAGE\"\r\n          ? percentageDiscounts\r\n          : fixedDiscounts\r\n        ).map((d, idx) => (\r\n          <div\r\n            key={idx}\r\n            className=\"flex gap-2 items-center bg-gray-50 p-3 rounded-lg\"\r\n          >\r\n            <input\r\n              className=\"flex-1 bg-transparent outline-none text-sm font-medium\"\r\n              value={d.label}\r\n              readOnly\r\n            />\r\n            <input\r\n              className=\"w-20 bg-transparent text-center outline-none text-sm font-medium\"\r\n              value={d.value}\r\n              readOnly\r\n            />\r\n            <button\r\n              className=\"text-red-500 hover:text-red-700 transition-colors p-1\"\r\n              onClick={() => handleRemove(idx)}\r\n              title=\"Remove\"\r\n              type=\"button\"\r\n            >\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                className=\"w-5 h-5\"\r\n                fill=\"none\"\r\n                viewBox=\"0 0 24 24\"\r\n                stroke=\"currentColor\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M6 18L18 6M6 6l12 12\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Add new discount */}\r\n      <div className=\"space-y-2 p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n        <div className=\"text-sm font-semibold text-blue-900 mb-2\">\r\n          Add New Discount\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            className=\"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            placeholder=\"Description\"\r\n            value={newDesc}\r\n            onChange={(e) => setNewDesc(e.target.value)}\r\n          />\r\n          <input\r\n            className=\"w-24 border border-gray-300 rounded-lg px-3 py-2 text-sm text-center focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            placeholder={settingsTab === \"PERCENTAGE\" ? \"0%\" : \"0.00\"}\r\n            value={newValue}\r\n            onChange={(e) => setNewValue(e.target.value)}\r\n            type=\"number\"\r\n            min=\"0\"\r\n          />\r\n          <button\r\n            className=\"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-bold\"\r\n            onClick={handleAddDiscount}\r\n            title=\"Add\"\r\n            type=\"button\"\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <BaseModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title={showSettings ? \"Manage Discounts\" : \"Select Discount\"}\r\n      subtitle={\r\n        showSettings\r\n          ? \"Add or remove discount options\"\r\n          : \"Choose a discount to apply\"\r\n      }\r\n      icon={\r\n        <svg\r\n          className=\"w-5 h-5 text-white\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z\"\r\n          />\r\n        </svg>\r\n      }\r\n      footer={showSettings ? settingsFooterContent : mainFooterContent}\r\n      size=\"md\"\r\n      contentClassName=\"space-y-4\"\r\n    >\r\n      {showSettings ? renderSettings() : renderMain()}\r\n    </BaseModal>\r\n  );\r\n}\r\n\r\nexport default DiscountModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport BaseModal from \"./BaseModal\";\r\nimport Button from \"../common/Button\";\r\nimport { api } from \"../../lib/api\";\r\nimport {\r\n  MdAccountBalanceWallet,\r\n  MdSwapHoriz,\r\n  MdDescription,\r\n  MdChevronRight,\r\n} from \"react-icons/md\";\r\n\r\nfunction CashLedgerModal({ isOpen, onClose }) {\r\n  // Tab state: \"SUMMARY\" or \"TRANSACTIONS\"\r\n  const [tab, setTab] = useState(\"SUMMARY\");\r\n  // Track which payment type is selected for filtered transactions view\r\n  const [selectedPaymentType, setSelectedPaymentType] = useState(null);\r\n\r\n  // Live data from backend\r\n  const [ledger, setLedger] = useState([]); // [{ name, balance }]\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loadingSummary, setLoadingSummary] = useState(false);\r\n  const [loadingTx, setLoadingTx] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n\r\n  // Fetch summary balances\r\n  const fetchLedger = async () => {\r\n    setLoadingSummary(true);\r\n    try {\r\n      setError(\"\");\r\n      const data = await api('/stats/cash-ledger');\r\n      // Expecting [{ name, balance }]\r\n      setLedger(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to load cash ledger');\r\n    } finally {\r\n      setLoadingSummary(false);\r\n    }\r\n  };\r\n\r\n  // Fetch transactions (optionally filtered)\r\n  const fetchTransactions = async (paymentType = null) => {\r\n    setLoadingTx(true);\r\n    try {\r\n      setError(\"\");\r\n      const q = paymentType ? `/stats/cash-transactions?payment_type=${encodeURIComponent(paymentType)}&limit=100` : `/stats/cash-transactions?limit=100`;\r\n      const data = await api(q);\r\n      setTransactions(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to load transactions');\r\n    } finally {\r\n      setLoadingTx(false);\r\n    }\r\n  };\r\n\r\n  // Load when modal opens\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    fetchLedger();\r\n    fetchTransactions();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isOpen]);\r\n\r\n  // Summary Page Component\r\n  const renderSummary = () => {\r\n    const totalCash = ledger.reduce((sum, type) => sum + (Number(type.balance) || 0), 0);\r\n\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        {/* Total Cash Display */}\r\n        <div className=\"bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-700 text-white rounded-lg shadow-xl px-8 py-8 text-center\">\r\n          <p className=\"text-sm font-semibold text-blue-100 mb-2\">Total Cash on Hand</p>\r\n          <div className=\"text-5xl font-bold flex items-center justify-center gap-2\">\r\n            <span className=\"text-4xl\">₱</span>\r\n            {totalCash.toFixed(2)}\r\n          </div>\r\n          <p className=\"text-blue-100 text-sm mt-3\">\r\n            {new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Payment Types Section */}\r\n        <div>\r\n          <div className=\"flex items-center gap-2 mb-4\">\r\n            <div className=\"w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center\">\r\n              <MdAccountBalanceWallet className=\"w-5 h-5 text-white\" />\r\n            </div>\r\n            <h3 className=\"font-semibold text-gray-900\">Payment Methods</h3>\r\n          </div>\r\n          <div className=\"space-y-3\">\r\n            {loadingSummary ? (\r\n              <div className=\"text-sm text-gray-500\">Loading...</div>\r\n            ) : ledger.length === 0 ? (\r\n              <div className=\"text-sm text-gray-500\">No balances available</div>\r\n            ) : (\r\n              ledger.map((type) => (\r\n                <button\r\n                  key={type.name}\r\n                  onClick={async () => {\r\n                    setSelectedPaymentType(type.name);\r\n                    setTab('TRANSACTIONS');\r\n                    await fetchTransactions(type.name);\r\n                  }}\r\n                  className=\"w-full bg-gradient-to-r from-gray-50 to-gray-100/50 hover:from-blue-50 hover:to-indigo-50/50 rounded-2xl p-4 border border-gray-200/50 hover:border-blue-300 transition-all duration-200 group\"\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3 flex-1\">\r\n                      <div className=\"w-10 h-10 bg-white rounded-lg flex items-center justify-center border border-gray-200 group-hover:border-blue-300 group-hover:bg-blue-50 transition-all\">\r\n                        <svg className=\"w-5 h-5 text-gray-600 group-hover:text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                        </svg>\r\n                      </div>\r\n                      <div className=\"text-left\">\r\n                        <p className=\"font-semibold text-gray-900\">{type.name}</p>\r\n                        <p className=\"text-xs text-gray-500\">View transactions</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-lg font-bold text-blue-600\">₱{(Number(type.balance) || 0).toFixed(2)}</p>\r\n                      </div>\r\n                      <MdChevronRight className=\"w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors\" />\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n        {error && (\r\n          <div className=\"text-sm text-red-600\">\r\n            {error.includes('Server returned an HTML error page') || error.includes('Cannot GET')\r\n              ? 'Unable to reach backend API. Check backend server and proxy configuration.'\r\n              : error}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Transactions Page\r\n  const renderTransactions = () => {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {/* Back Button */}\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => {\r\n            setSelectedPaymentType(null);\r\n            setTab('SUMMARY');\r\n          }}\r\n          className=\"text-sm text-blue-600 hover:text-blue-800 font-semibold flex items-center gap-2 hover:gap-3 transition-all\"\r\n        >\r\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n          </svg>\r\n          Back to Summary\r\n        </button>\r\n\r\n        {/* Transactions Title */}\r\n        <div className=\"bg-gradient-to-r from-indigo-50 to-blue-50 rounded-2xl p-4 border border-indigo-100/50\">\r\n          <h3 className=\"font-bold text-lg text-gray-900\">{selectedPaymentType ? `${selectedPaymentType} Transactions` : 'All Transactions'}</h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">{loadingTx ? 'Loading...' : `${transactions.length} transaction${transactions.length !== 1 ? 's' : ''} found`}</p>\r\n        </div>\r\n\r\n        {/* Transactions Table */}\r\n        <div className=\"bg-white rounded-2xl border border-gray-200/50 overflow-hidden\">\r\n          {loadingTx ? (\r\n            <div className=\"text-center py-12 text-sm text-gray-500\">Loading transactions...</div>\r\n          ) : transactions.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <svg className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n              </svg>\r\n              <p className=\"text-gray-500 font-medium\">No transactions found</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200/50\">\r\n                    <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">Date & Time</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">Type</th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider\">Amount</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-100\">\r\n                  {transactions.map((tx) => (\r\n                    <tr key={String(tx.transaction_id)} className=\"hover:bg-blue-50/50 transition-colors duration-150\">\r\n                      <td className=\"px-6 py-4 text-sm text-gray-600 font-medium\">{new Date(tx.created_at).toLocaleString()}</td>\r\n                      <td className=\"px-6 py-4 text-sm\"><span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 border border-blue-200\">{tx.payment_type}</span></td>\r\n                      <td className=\"px-6 py-4 text-sm text-right font-bold text-green-600\">₱{(Number(tx.total) || 0).toFixed(2)}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Tab button content\r\n  const tabContent = (\r\n    <div className=\"flex gap-2 border-t border-gray-200/50 pt-4 mt-4\">\r\n      <button\r\n        onClick={() => {\r\n          setTab(\"SUMMARY\");\r\n          setSelectedPaymentType(null);\r\n        }}\r\n        className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-semibold transition-all ${\r\n          tab === \"SUMMARY\"\r\n            ? \"bg-blue-600 text-white shadow-md\"\r\n            : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n        }`}\r\n      >\r\n        <MdDescription className=\"w-5 h-5\" />\r\n        <span>Summary</span>\r\n      </button>\r\n      <button\r\n        onClick={() => {\r\n          setTab(\"TRANSACTIONS\");\r\n          setSelectedPaymentType(null);\r\n        }}\r\n        className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-semibold transition-all ${\r\n          tab === \"TRANSACTIONS\"\r\n            ? \"bg-blue-600 text-white shadow-md\"\r\n            : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n        }`}\r\n      >\r\n        <MdSwapHoriz className=\"w-5 h-5\" />\r\n        <span>Transactions</span>\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <BaseModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Cash Ledger\"\r\n      subtitle=\"View cash balance and payment methods\"\r\n      icon={<MdAccountBalanceWallet className=\"w-6 h-6 text-white\" />}\r\n      size=\"lg\"\r\n      contentClassName=\"space-y-4\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        {tab === \"SUMMARY\" ? renderSummary() : renderTransactions()}\r\n        {tabContent}\r\n      </div>\r\n    </BaseModal>\r\n  );\r\n}\r\n\r\nexport default CashLedgerModal;\r\n","import React from \"react\";\r\nimport Button from \"../common/Button\";\r\nimport BaseModal from \"./BaseModal\";\r\n\r\nfunction CheckoutModal({ isOpen, onClose, total, onSelectPayment }) {\r\n  const footerContent = (\r\n    <div className=\"w-full flex flex-col gap-3\">\r\n      <Button\r\n        label=\"CASH\"\r\n        className=\"w-full h-12 text-base font-bold\"\r\n        onClick={() => onSelectPayment(\"cash\")}\r\n      />\r\n      <Button\r\n        label=\"GCASH\"\r\n        className=\"w-full h-12 text-base font-bold\"\r\n        onClick={() => onSelectPayment(\"gcash\")}\r\n      />\r\n      <Button\r\n        label=\"MAYA\"\r\n        className=\"w-full h-12 text-base font-bold\"\r\n        onClick={() => onSelectPayment(\"maya\")}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <BaseModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Checkout\"\r\n      subtitle=\"Select payment method\"\r\n      icon={\r\n        <svg\r\n          className=\"w-5 h-5 text-white\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\"\r\n          />\r\n        </svg>\r\n      }\r\n      footer={footerContent}\r\n      size=\"sm\"\r\n      contentClassName=\"text-center\"\r\n    >\r\n      <div className=\"bg-blue-500 text-white rounded-2xl py-6 px-4 text-center mb-4\">\r\n        <div className=\"text-sm opacity-90 mb-2\">Total Amount</div>\r\n        <div className=\"text-4xl font-bold\">₱{total.toFixed(2)}</div>\r\n      </div>\r\n      <p className=\"text-gray-600 text-sm mb-4\">\r\n        Choose your preferred payment method\r\n      </p>\r\n    </BaseModal>\r\n  );\r\n}\r\n\r\nexport default CheckoutModal;\r\n","import React from \"react\";\r\nimport Button from \"../common/Button\";\r\nimport BaseModal from \"./BaseModal\";\r\n\r\nfunction CashPaymentCompleteModal({\r\n  isOpen,\r\n  onClose,\r\n  change = 0,\r\n  payable = 0,\r\n  onReceipt,\r\n  onNewEntry,\r\n}) {\r\n  const footerContent = (\r\n    <div className=\"w-full flex flex-col gap-3\">\r\n      <Button\r\n        label=\"RECEIPT\"\r\n        className=\"w-full h-11 text-sm font-semibold bg-blue-700 hover:bg-blue-800 text-white\"\r\n        onClick={() => {\r\n          if (onReceipt) onReceipt();\r\n          else alert(\"Receipt\");\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <BaseModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Payment Complete\"\r\n      icon={\r\n        <svg\r\n          className=\"w-5 h-5 text-white\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M5 13l4 4L19 7\"\r\n          />\r\n        </svg>\r\n      }\r\n      footer={footerContent}\r\n      size=\"sm\"\r\n      contentClassName=\"text-center space-y-4\"\r\n    >\r\n      {/* Success Check Icon */}\r\n      <div className=\"flex justify-center mb-2\">\r\n        <div className=\"w-14 h-14 rounded-full bg-green-100 flex items-center justify-center\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className=\"h-7 w-7 text-green-600\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M5 13l4 4L19 7\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Change Amount */}\r\n      <div className=\"bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl p-5 text-white\">\r\n        <div className=\"text-xs uppercase tracking-wide opacity-90 mb-2\">\r\n          Change\r\n        </div>\r\n\r\n        <div className=\"inline-flex items-baseline gap-2 bg-white text-blue-700 rounded-lg px-4 py-3 shadow-md\">\r\n          <span className=\"text-lg font-bold\">₱</span>\r\n          <span className=\"text-2xl font-bold\">\r\n            {Number(change).toFixed(2)}\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"mt-4 text-sm opacity-90\">Payable</div>\r\n        <div className=\"text-sm font-semibold\">\r\n          ₱{Number(payable).toFixed(2)}\r\n        </div>\r\n      </div>\r\n    </BaseModal>\r\n  );\r\n}\r\n\r\nexport default CashPaymentCompleteModal;\r\n","import React, { useState } from \"react\";\r\nimport Button from \"../common/Button\";\r\nimport BaseModal from \"./BaseModal\";\r\nimport CashPaymentCompleteModal from \"./CashPaymentCompleteModal\";\r\n\r\nfunction CashPaymentModal({ isOpen, onClose, total, onConfirm }) {\r\n  const [amountReceived, setAmountReceived] = useState(\"\");\r\n  const [showComplete, setShowComplete] = useState(false);\r\n  const [completeData, setCompleteData] = useState(null);\r\n\r\n  // Keep component mounted if completion modal should be shown even when parent closes isOpen\r\n  if (!isOpen && !showComplete) return null;\r\n\r\n  // When the payment is completed, replace this modal with the completion modal\r\n  if (showComplete) {\r\n    return (\r\n      <CashPaymentCompleteModal\r\n        isOpen={showComplete}\r\n        onClose={() => {\r\n          setShowComplete(false);\r\n          if (onClose) onClose();\r\n        }}\r\n        change={completeData?.change}\r\n        payable={completeData?.payable}\r\n        onNewEntry={() => {\r\n          setShowComplete(false);\r\n          if (onClose) onClose();\r\n        }}\r\n        onReceipt={() => {\r\n          // Call parent confirm (which performs checkout/navigation) when user\r\n          // explicitly requests the receipt. This prevents immediate navigation\r\n          // that would close the completion modal too soon.\r\n          if (onConfirm && completeData?.received != null) {\r\n            onConfirm(Number(completeData.received));\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  const handleQuickAmount = (val) => setAmountReceived(val.toString());\r\n\r\n  const handleExactAmount = () => setAmountReceived(total.toString());\r\n\r\n  const handleProceed = () => {\r\n    if (!amountReceived || Number(amountReceived) < total) {\r\n      alert(\"Amount received must be greater than or equal to total.\");\r\n      return;\r\n    }\r\n    const received = Number(amountReceived);\r\n    // compute change and show completion modal; delay calling parent onConfirm\r\n    // so cashier can view the completion screen before the app navigates\r\n    const change = received - total;\r\n    setCompleteData({ change, payable: total, received });\r\n    setShowComplete(true);\r\n  };\r\n\r\n  const footerContent = (\r\n    <>\r\n      <Button\r\n        label=\"Cancel\"\r\n        variant=\"secondary\"\r\n        onClick={onClose}\r\n        type=\"button\"\r\n        className=\"flex-1\"\r\n      />\r\n      <Button\r\n        label=\"Proceed\"\r\n        variant=\"primary\"\r\n        type=\"button\"\r\n        onClick={handleProceed}\r\n        className=\"flex-1\"\r\n      />\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <BaseModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Cash Payment\"\r\n      subtitle=\"Enter amount received\"\r\n      icon={\r\n        <svg\r\n          className=\"w-5 h-5 text-white\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n          />\r\n        </svg>\r\n      }\r\n      footer={footerContent}\r\n      size=\"md\"\r\n      contentClassName=\"space-y-4\"\r\n    >\r\n      {/* Total Amount */}\r\n      <div className=\"bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-2xl py-6 px-4 text-center\">\r\n        <div className=\"text-sm opacity-90 mb-2\">Total Amount</div>\r\n        <div className=\"text-4xl font-bold\">₱{total.toFixed(2)}</div>\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n          Amount Received\r\n        </label>\r\n        <input\r\n          type=\"number\"\r\n          className=\"w-full border border-gray-300 rounded-lg px-3 py-2 text-center text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          placeholder=\"₱0.00\"\r\n          value={amountReceived}\r\n          onChange={(e) => setAmountReceived(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      {/* Quick Select Buttons */}\r\n      <div>\r\n        <p className=\"text-xs text-gray-600 mb-2\">Quick amounts:</p>\r\n        <div className=\"grid grid-cols-3 gap-2\">\r\n          {[100, 200, 300, 400, 500, 600, 700, 800, 900].map((val) => (\r\n            <button\r\n              key={val}\r\n              className=\"bg-blue-100 hover:bg-blue-200 text-blue-700 font-bold py-2 rounded-lg transition-colors text-sm\"\r\n              onClick={() => handleQuickAmount(val)}\r\n            >\r\n              {val}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Exact Amount Button */}\r\n      <Button\r\n        label=\"Use Exact Amount\"\r\n        className=\"w-full h-10 text-sm font-bold bg-slate-600 hover:bg-slate-700 text-white\"\r\n        onClick={handleExactAmount}\r\n      />\r\n    </BaseModal>\r\n  );\r\n}\r\n\r\nexport default CashPaymentModal;\r\n","import React, { useState } from \"react\";\r\nimport BaseModal from \"./BaseModal\";\r\nimport ScannerCard from \"../ui/POS/ScannerCard\";\r\nimport Button from \"../common/Button\";\r\nimport { api } from \"../../lib/api\";\r\n\r\nexport default function ScanCustomerCartModal({ isOpen, onClose, onImport }) {\r\n  const [scannerPaused, setScannerPaused] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const token = sessionStorage.getItem(\"auth_token\");\r\n\r\n  const user = JSON.parse(sessionStorage.getItem(\"user\") || \"{}\");\r\n\r\n  const handleScan = async (result) => {\r\n    const code = result?.[0]?.rawValue;\r\n    if (!code) return;\r\n    setScannerPaused(true);\r\n    setError(\"\");\r\n    try {\r\n      let payload;\r\n      try {\r\n        payload = JSON.parse(code);\r\n      } catch (e) {\r\n        throw new Error(\"Invalid QR payload\");\r\n      }\r\n      if (!payload || payload.t !== \"cart\" || !Array.isArray(payload.items))\r\n        throw new Error(\"Unsupported QR\");\r\n\r\n      const { b: businessId, items: compactItems } = payload;\r\n      const cashierBusinessId = user?.businessId || user?.business_id;\r\n\r\n      if (\r\n        businessId &&\r\n        cashierBusinessId &&\r\n        Number(businessId) !== Number(cashierBusinessId)\r\n      ) {\r\n        throw new Error(\"This QR code is not valid for this store.\");\r\n      }\r\n\r\n      const fullItems = [];\r\n      for (const it of compactItems) {\r\n        if (!it?.p || !it?.q) continue;\r\n        const product = await api(`/api/products/${encodeURIComponent(it.p)}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        fullItems.push({\r\n          product_id: product.product_id,\r\n          sku: product.sku,\r\n          name: product.product_name,\r\n          quantity: Number(it.q),\r\n          price: Number(product.selling_price || 0),\r\n        });\r\n      }\r\n      if (fullItems.length === 0) throw new Error(\"No items to import\");\r\n      onImport(fullItems);\r\n      onClose();\r\n    } catch (e) {\r\n      setError(e.message || \"Failed to import\");\r\n    } finally {\r\n      setScannerPaused(false);\r\n    }\r\n  };\r\n\r\n  const footerContent = (\r\n    <Button\r\n      label=\"Close\"\r\n      variant=\"secondary\"\r\n      onClick={onClose}\r\n      className=\"w-full\"\r\n    />\r\n  );\r\n\r\n  return (\r\n    <BaseModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Scan Customer Cart\"\r\n      subtitle=\"Ask customer to show their QR\"\r\n      icon={\r\n        <svg\r\n          className=\"w-5 h-5 text-white\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M12 4v16m8-8H4\"\r\n          />\r\n        </svg>\r\n      }\r\n      footer={footerContent}\r\n      size=\"lg\"\r\n      contentClassName=\"space-y-3\"\r\n    >\r\n      <div className=\"text-blue-800 text-sm font-medium\">\r\n        Ask the customer to show their cart QR code\r\n      </div>\r\n      <div className=\"h-[50vh]\">\r\n        <ScannerCard\r\n          onScan={handleScan}\r\n          paused={scannerPaused}\r\n          onResume={() => setScannerPaused(false)}\r\n          className=\"w-full h-full\"\r\n        />\r\n      </div>\r\n      {error && (\r\n        <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\r\n          {error}\r\n        </div>\r\n      )}\r\n    </BaseModal>\r\n  );\r\n}\r\n"],"names":["SkuFormCard","React","forwardRef","sku","setSku","quantity","setQuantity","handleAddToCart","className","props","ref","jsx","Card","variant","microinteraction","children","jsxs","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","type","name","value","onChange","e","target","onKeyPress","key","trim","placeholder","onClick","Math","max","min","Number","Button","label","size","icon","iconPosition","CartTableCard","cart","handleRemove","handleEditQuantity","total","editingIdx","setEditingIdx","useState","editQty","setEditQty","useEffect","handleKeyDown","event","length","preventDefault","firstItemIdx","addEventListener","removeEventListener","EditIcon","width","height","DeleteIcon","colSpan","map","item","idx","parseInt","onKeyDown","onBlur","autoFocus","price","toFixed","title","reduce","sum","PriceCheckModal","isOpen","onClose","product","setProduct","t","setTimeout","async","businessId","localStorage","getItem","query","encodeURIComponent","res","api","product_name","selling_price","_","handleCheck","clearTimeout","footerContent","BaseModal","subtitle","footer","contentClassName","ScannerCard","onScan","result","code","rawValue","paused","onResume","textMain","DiscountModal","onApplyDiscount","tab","setTab","showSettings","setShowSettings","settingsTab","setSettingsTab","percentageDiscounts","setPercentageDiscounts","fixedDiscounts","setFixedDiscounts","newDesc","setNewDesc","newValue","setNewValue","selectedIdx","setSelectedIdx","handleAddDiscount","parseFloat","settingsFooterContent","handleSaveSettings","mainFooterContent","handleConfirm","discounts","disabled","renderSettings","readOnly","filter","i","xmlns","renderMain","CashLedgerModal","selectedPaymentType","setSelectedPaymentType","ledger","setLedger","transactions","setTransactions","loadingSummary","setLoadingSummary","loadingTx","setLoadingTx","error","setError","fetchTransactions","paymentType","q","data","Array","isArray","err","message","fetchLedger","tabContent","MdDescription","MdSwapHoriz","MdAccountBalanceWallet","renderSummary","totalCash","balance","Date","toLocaleDateString","weekday","year","month","day","MdChevronRight","includes","tx","created_at","toLocaleString","payment_type","String","transaction_id","CheckoutModal","onSelectPayment","CashPaymentCompleteModal","change","payable","onReceipt","onNewEntry","CashPaymentModal","onConfirm","amountReceived","setAmountReceived","showComplete","setShowComplete","completeData","setCompleteData","received","Fragment","handleProceed","alert","val","toString","handleQuickAmount","handleExactAmount","ScanCustomerCartModal","onImport","scannerPaused","setScannerPaused","token","sessionStorage","user","JSON","parse","payload","Error","items","b","compactItems","cashierBusinessId","business_id","fullItems","it","p","headers","Authorization","push","product_id"],"mappings":"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"}