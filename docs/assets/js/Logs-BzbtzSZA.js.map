{"version":3,"file":"Logs-BzbtzSZA.js","sources":["../../../frontend/src/pages/Logs.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState, useRef } from \"react\";\r\nimport NavAdmin from \"../components/layout/Nav-Admin\";\r\nimport { BiRefresh } from \"react-icons/bi\";\r\nimport PageLayout from \"../components/layout/PageLayout\";\r\nimport Button from \"../components/common/Button\";\r\nimport { api, authHeaders } from \"../lib/api\";\r\n\r\nconst LogsPage = () => {\r\n  const [logs, setLogs] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [clearing, setClearing] = useState(false);\r\n  const [roleFilter, setRoleFilter] = useState(\"all\");\r\n  const [sortOrder, setSortOrder] = useState(\"desc\");\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const [isSidebarOpen, setSidebarOpen] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n\r\n  const fetchLogs = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(\"\");\r\n      const token = sessionStorage.getItem(\"auth_token\");\r\n      const data = await api(\"/api/logs\", {\r\n        headers: authHeaders(token),\r\n      });\r\n      const normalized = (data || []).map((l) => ({\r\n        id: l.log_id,\r\n        userId: l.user_id,\r\n        username: l.username || \"\",\r\n        action: l.action || `Action by ${l.username || l.user_id}`,\r\n        time: l.date_time\r\n          ? new Date(l.date_time).toLocaleString()\r\n          : \"Invalid date\",\r\n        dateTime: l.date_time,\r\n        role: (l.role === \"business_owner\"\r\n          ? \"admin\"\r\n          : l.role || \"\"\r\n        ).toLowerCase(),\r\n      }));\r\n      setLogs(normalized);\r\n    } catch (err) {\r\n      setError(\"Failed to load logs\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchLogs();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsDropdownOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  const filteredLogs = useMemo(() => {\r\n    let filtered = logs;\r\n\r\n    if (roleFilter !== \"all\") {\r\n      filtered = filtered.filter((l) => l.role === roleFilter);\r\n    }\r\n\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase();\r\n      filtered = filtered.filter(\r\n        (l) =>\r\n          (l.action || \"\").toLowerCase().includes(query) ||\r\n          (l.username || \"\").toLowerCase().includes(query)\r\n      );\r\n    }\r\n\r\n    filtered.sort((a, b) => {\r\n      const dateA = new Date(a.dateTime);\r\n      const dateB = new Date(b.dateTime);\r\n      return sortOrder === \"asc\" ? dateA - dateB : dateB - dateA;\r\n    });\r\n\r\n    return filtered;\r\n  }, [logs, roleFilter, searchQuery, sortOrder]);\r\n\r\n  const exportToCSV = () => {\r\n    try {\r\n      const headers = [\"User ID\", \"Username\", \"Role\", \"Action\", \"Time\"];\r\n\r\n      const csvRows = [\r\n        headers.join(\",\"),\r\n        ...filteredLogs.map((log) => {\r\n          const row = [\r\n            log.userId || log.id || \"\",\r\n            `\"${(log.username || \"\").replace(/\"/g, '\"\"')}\"`,\r\n            log.role || \"\",\r\n            `\"${(log.action || \"\").replace(/\"/g, '\"\"')}\"`,\r\n            `\"${(log.time || \"\").replace(/\"/g, '\"\"')}\"`,\r\n          ];\r\n          return row.join(\",\");\r\n        }),\r\n      ];\r\n\r\n      const csvContent = csvRows.join(\"\\n\");\r\n\r\n      const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\r\n      const link = document.createElement(\"a\");\r\n      const url = URL.createObjectURL(blob);\r\n      link.setAttribute(\"href\", url);\r\n      link.setAttribute(\r\n        \"download\",\r\n        `logs_export_${new Date().toISOString().split(\"T\")[0]}.csv`\r\n      );\r\n      link.style.visibility = \"hidden\";\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    } catch (err) {\r\n      setError(\"Failed to export logs as CSV\");\r\n      console.error(\"CSV export error:\", err);\r\n    }\r\n  };\r\n\r\n  const clearLogs = async () => {\r\n    if (\r\n      !window.confirm(\r\n        \"Are you sure you want to clear all logs? This action cannot be undone.\"\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setClearing(true);\r\n      setError(\"\");\r\n      const token = sessionStorage.getItem(\"auth_token\");\r\n\r\n      try {\r\n        await api(\"/api/logs\", {\r\n          method: \"DELETE\",\r\n          headers: authHeaders(token),\r\n        });\r\n      } catch (deleteErr) {\r\n        if (\r\n          deleteErr.message.includes(\"404\") ||\r\n          deleteErr.message.includes(\"Not Found\")\r\n        ) {\r\n          setError(\r\n            \"Clear logs endpoint not available. Please contact administrator.\"\r\n          );\r\n          return;\r\n        }\r\n        throw deleteErr;\r\n      }\r\n\r\n      await fetchLogs();\r\n    } catch (err) {\r\n      setError(\"Failed to clear logs\");\r\n    } finally {\r\n      setClearing(false);\r\n    }\r\n  };\r\n\r\n  const roleOptions = [\r\n    { value: \"all\", label: \"All Roles\" },\r\n    { value: \"cashier\", label: \"Cashier\" },\r\n    { value: \"admin\", label: \"Admin\" },\r\n    { value: \"user\", label: \"User\" },\r\n  ];\r\n\r\n  const selectedRole = roleOptions.find(\r\n    (option) => option.value === roleFilter\r\n  );\r\n\r\n  const headerActions = (\r\n    <div className=\"flex items-center gap-3\">\r\n      <button\r\n        onClick={fetchLogs}\r\n        disabled={loading}\r\n        title=\"Refresh Logs\"\r\n        className=\"bg-white/80 backdrop-blur-sm hover:bg-white text-gray-700 p-2 rounded-lg border border-gray-200/80 text-sm font-medium transition-all duration-200 hover:shadow-md\"\r\n      >\r\n        <BiRefresh className={`w-5 h-5 ${loading ? \"animate-spin\" : \"\"}`} />\r\n      </button>\r\n\r\n      <Button\r\n        onClick={exportToCSV}\r\n        variant=\"secondary\"\r\n        size=\"md\"\r\n        className=\"flex items-center gap-2\"\r\n        disabled={filteredLogs.length === 0 || loading}\r\n      >\r\n        Export\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <PageLayout\r\n      title=\"LOGS\"\r\n      sidebar={<NavAdmin />}\r\n      isSidebarOpen={isSidebarOpen}\r\n      setSidebarOpen={setSidebarOpen}\r\n      className=\"h-screen overflow-hidden\"\r\n    >\r\n      <div className=\"flex-1 bg-transparent overflow-hidden p-4 flex flex-col\">\r\n        <div className=\"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between\">\r\n          <div className=\"relative flex-1 max-w-xl w-full\">\r\n            <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n              <svg\r\n                className=\"h-5 w-5 text-gray-400\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                />\r\n              </svg>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search logs...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"w-full pl-12 pr-4 py-3 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-gray-400\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex flex-wrap gap-3 w-full sm:w-auto\">\r\n            <div className=\"relative\" ref={dropdownRef}>\r\n              <button\r\n                onClick={() => setIsDropdownOpen(!isDropdownOpen)}\r\n                className=\"w-full sm:w-auto pl-4 pr-10 py-3 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 flex items-center justify-between\"\r\n              >\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span>{selectedRole.icon}</span>\r\n                  <span>{selectedRole.label}</span>\r\n                </div>\r\n                <svg\r\n                  className={`w-4 h-4 transition-transform duration-200 ${\r\n                    isDropdownOpen ? \"rotate-180\" : \"\"\r\n                  }`}\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M19 9l-7 7-7-7\"\r\n                  />\r\n                </svg>\r\n              </button>\r\n              {isDropdownOpen && (\r\n                <div className=\"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-xl shadow-lg max-h-60 overflow-auto\">\r\n                  {roleOptions.map((option) => (\r\n                    <button\r\n                      key={option.value}\r\n                      onClick={() => {\r\n                        setRoleFilter(option.value);\r\n                        setIsDropdownOpen(false);\r\n                      }}\r\n                      className={`w-full px-4 py-3 text-left text-sm hover:bg-gray-50 flex items-center gap-2 transition-colors duration-150 ${\r\n                        roleFilter === option.value\r\n                          ? \"bg-blue-50 text-blue-600\"\r\n                          : \"text-gray-700\"\r\n                      }`}\r\n                    >\r\n                      <span>{option.icon}</span>\r\n                      <span>{option.label}</span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <Button\r\n              onClick={() => setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\")}\r\n              variant=\"secondary\"\r\n              size=\"md\"\r\n              className=\"flex items-center gap-2\"\r\n            >\r\n              <svg\r\n                className=\"w-5 h-5\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12\"\r\n                />\r\n              </svg>\r\n              Sort ({sortOrder === \"asc\" ? \"Oldest\" : \"Newest\"})\r\n            </Button>\r\n            <Button\r\n              onClick={exportToCSV}\r\n              variant=\"secondary\"\r\n              size=\"md\"\r\n              className=\"flex items-center gap-2\"\r\n              disabled={filteredLogs.length === 0 || loading}\r\n            >\r\n              <svg\r\n                className=\"w-5 h-5\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\r\n                />\r\n              </svg>\r\n              Export as CSV\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex-1 overflow-y-auto\">\r\n          <table className=\"min-w-full bg-white/80 backdrop-blur-md rounded-xl overflow-hidden hidden sm:table\">\r\n            <thead className=\"bg-gray-100/50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  User\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Role\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Action\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Timestamp\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200/50\">\r\n              {loading ? (\r\n                <tr>\r\n                  <td colSpan=\"4\" className=\"text-center py-8 text-gray-500\">\r\n                    Loading logs...\r\n                  </td>\r\n                </tr>\r\n              ) : filteredLogs.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan=\"4\" className=\"text-center py-8 text-gray-500\">\r\n                    No logs found.\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                filteredLogs.map((log) => (\r\n                  <tr key={log.id}>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm font-medium text-gray-900\">\r\n                        {log.username}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        ID: {log.userId}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <span\r\n                        className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                          log.role === \"admin\" || log.role === \"business_owner\"\r\n                            ? \"bg-purple-100 text-purple-800\"\r\n                            : log.role === \"cashier\"\r\n                            ? \"bg-blue-100 text-blue-800\"\r\n                            : \"bg-green-100 text-green-800\"\r\n                        }`}\r\n                      >\r\n                        {log.role}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-800\">\r\n                      {log.action}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                      {log.time}\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {/* Mobile Card View */}\r\n        <div className=\"flex-1 overflow-y-auto sm:hidden space-y-3\">\r\n          {loading ? (\r\n            Array.from({ length: 5 }).map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"bg-white/80 backdrop-blur-md rounded-xl p-4 border border-gray-200/50 animate-pulse\"\r\n              >\r\n                <div className=\"flex justify-between items-center mb-2\">\r\n                  <div className=\"h-4 bg-gray-200 rounded w-1/3\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-1/4\"></div>\r\n                </div>\r\n                <div className=\"h-3 bg-gray-200 rounded w-full mb-3\"></div>\r\n                <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\r\n              </div>\r\n            ))\r\n          ) : filteredLogs.length === 0 ? (\r\n            <div className=\"text-center py-8 text-gray-500 bg-white/80 backdrop-blur-md rounded-xl\">\r\n              No logs found.\r\n            </div>\r\n          ) : (\r\n            filteredLogs.map((log) => (\r\n              <div\r\n                key={log.id}\r\n                className=\"bg-white/80 backdrop-blur-md rounded-xl p-4 border border-gray-200/50 shadow-sm\"\r\n              >\r\n                <div className=\"flex justify-between items-start mb-2\">\r\n                  <div>\r\n                    <div className=\"text-sm font-semibold text-gray-900\">\r\n                      {log.username}\r\n                    </div>\r\n                    <div className=\"text-xs text-gray-500\">\r\n                      ID: {log.userId}\r\n                    </div>\r\n                  </div>\r\n                  <span\r\n                    className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full capitalize ${\r\n                      log.role === \"admin\" || log.role === \"business_owner\"\r\n                        ? \"bg-purple-100 text-purple-800\"\r\n                        : log.role === \"cashier\"\r\n                        ? \"bg-blue-100 text-blue-800\"\r\n                        : \"bg-green-100 text-green-800\"\r\n                    }`}\r\n                  >\r\n                    {log.role}\r\n                  </span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-800 mb-2\">{log.action}</p>\r\n                <div className=\"text-xs text-gray-500 text-right border-t border-gray-200/50 pt-2 mt-2\">\r\n                  {log.time}\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"bg-red-50 border-l-4 border-red-500 rounded-lg p-3 flex items-start gap-2 mt-4\">\r\n            <svg\r\n              className=\"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\r\n              />\r\n            </svg>\r\n            <p className=\"text-sm font-medium text-red-700\">\r\n              {(() => {\r\n                try {\r\n                  const parsed = JSON.parse(error);\r\n                  return parsed.error || parsed.message || error;\r\n                } catch {\r\n                  return error;\r\n                }\r\n              })()}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </PageLayout>\r\n  );\r\n};\r\n\r\nexport default LogsPage;\r\n"],"names":["LogsPage","logs","setLogs","useState","error","setError","searchQuery","setSearchQuery","loading","setLoading","clearing","setClearing","roleFilter","setRoleFilter","sortOrder","setSortOrder","isDropdownOpen","setIsDropdownOpen","isSidebarOpen","setSidebarOpen","dropdownRef","useRef","fetchLogs","async","token","sessionStorage","getItem","normalized","api","headers","authHeaders","map","l","id","log_id","userId","user_id","username","action","time","date_time","Date","toLocaleString","dateTime","role","toLowerCase","err","useEffect","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","filteredLogs","useMemo","filtered","filter","query","includes","sort","a","b","dateA","dateB","exportToCSV","csvContent","join","log","replace","blob","Blob","type","link","document","createElement","url","URL","createObjectURL","setAttribute","toISOString","split","style","visibility","body","appendChild","click","removeChild","roleOptions","value","label","selectedRole","find","option","length","jsx","PageLayout","title","sidebar","NavAdmin","className","children","jsxs","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","placeholder","onChange","e","ref","onClick","icon","Button","variant","size","disabled","colSpan","Array","from","_","i","parsed","JSON","parse","message"],"mappings":"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"}