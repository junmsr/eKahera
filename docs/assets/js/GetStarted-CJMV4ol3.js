import{j as e}from"./utils-B2FtDWBX.js";import{a as s,L as t,R as a}from"./vendor-mHQTfcnf.js";import{a as r,B as n,b as i,L as l}from"./index-C9q1jg2T.js";import{C as o}from"./Card-BnHxHSFu.js";import{S as c}from"./SectionHeader-Chu9b-Wy.js";import{I as d}from"./Input-Cu9uKTuc.js";import{P as m}from"./PasswordInput-BaiCBpoB.js";import{T as u,P as x}from"./PrivacyPolicyModal-Nf9ZWTPr.js";import"./BaseModal-DLQpfPIu.js";function h(){const e=[{label:"Account Info",icon:"ðŸ‘¤"},{label:"OTP Verification",icon:"ðŸ”’"},{label:"Business Details",icon:"ðŸ¢"},{label:"Document Upload",icon:"ðŸ“„"}],[t,a]=s.useState(0),[n,i]=s.useState({email:"",firstName:"",fullName:"",businessName:"",businessEmail:"",useAdminEmail:!1,businessType:"",customBusinessType:"",region:"",province:"",city:"",barangay:"",regionName:"",provinceName:"",cityName:"",barangayName:"",houseNumber:"",mobile:"",password:"",confirmPassword:"",otp:"",documents:[],documentTypes:[],acceptTerms:!1,acceptPrivacy:!1}),[l,o]=s.useState({}),[c,d]=s.useState(!1),[m,u]=s.useState(!1),[x,h]=s.useState(!1),p=s.useRef(null);s.useEffect(()=>{p.current&&p.current.focus()},[t]),s.useEffect(()=>{1===t&&x&&b()},[t,x]),s.useEffect(()=>{1!==t||4!==n.otp.length||x||c||b()},[n.otp,t,x,c]);const g=()=>{const e={};if(0===t&&(n.email?/^\S+@\S+\.\S+$/.test(n.email)||(e.email="Invalid email address"):e.email="Required",n.firstName?/^[a-zA-Z\s]{1,50}$/.test(n.firstName)||(e.firstName="First name must be 1-50 characters and contain only letters"):e.firstName="Required",n.fullName?/^[a-zA-Z\s]{1,100}$/.test(n.fullName)||(e.fullName="Full name must be 1-100 characters and contain only letters"):e.fullName="Required",n.mobile?/^\d{10,15}$/.test(n.mobile)||(e.mobile="Invalid mobile number"):e.mobile="Required",n.password?n.password.length<12?e.password="Password must be at least 12 characters long":/[A-Z]/.test(n.password)?/[a-z]/.test(n.password)?/\d/.test(n.password)?/[!@#$%^&*(),.?":{}|<>]/.test(n.password)||(e.password="Password must contain at least one special character"):e.password="Password must contain at least one number":e.password="Password must contain at least one lowercase letter":e.password="Password must contain at least one uppercase letter":e.password="Required",n.password!==n.confirmPassword&&(e.confirmPassword="Passwords do not match")),1===t&&(n.otp?/^[A-Za-z0-9]{4}$/.test(n.otp)||(e.otp="Please enter a 4-character OTP"):e.otp="Required"),2===t&&(n.businessName||(e.businessName="Required"),n.useAdminEmail||n.businessEmail?n.useAdminEmail||!n.businessEmail||/^\S+@\S+\.\S+$/.test(n.businessEmail)||(e.businessEmail="Invalid email address"):e.businessEmail="Required",n.businessType||(e.businessType="Required"),"Others"!==n.businessType||n.customBusinessType||(e.customBusinessType="Please specify business type"),n.region||(e.region="Required"),n.province||(e.province="Required"),n.city||(e.city="Required"),n.barangay||(e.barangay="Required")),3===t){const s=["Business Registration Certificate (DTI/SEC/CDA)","Mayor's Permit / Business Permit","BIR Certificate of Registration (Form 2303)"];n.documents&&0!==n.documents.length||(e.documents="Please upload at least one business document"),n.documents.length!==n.documentTypes.length&&(e.documentTypes="Please specify document type for each uploaded file");const t=n.documentTypes.filter(e=>e),a=s.filter(e=>!t.includes(e));a.length>0&&(e.documents=`Missing required documents: ${a.join(", ")}`);const r={};n.documentTypes.forEach(e=>{e&&(r[e]=(r[e]||0)+1)});const i=Object.keys(r).filter(e=>r[e]>1);i.length>0&&(e.documentTypes=`Duplicate document types not allowed: ${i.join(", ")}`),n.acceptTerms?n.acceptPrivacy||(e.accept="You must acknowledge the Privacy Policy."):e.accept="You must accept the Terms and Conditions."}return o(e),0===Object.keys(e).length},b=async()=>{if(g())if(0===t){d(!0);try{const e=await(async(e,s)=>{try{return await r("/auth/check-existing",{method:"POST",body:JSON.stringify({email:e,username:s})})}catch(t){if(console.error("Error checking existing user:",t),t.data)throw t;throw new Error("Failed to check user availability. Please try again.")}})(n.email,n.username);if(e.exists){const s={};return"email"===e.field?s.email=e.message||"This email is already registered. Please use a different email or log in.":"username"===e.field?s.username=e.message||"This username is already taken. Please choose another one.":s.email=e.message||"This email or username is already registered.",void o(s)}await r("/otp/send",{method:"POST",body:JSON.stringify({email:n.email})}),a(e=>e+1)}catch(e){if(console.error("Error in handleNext:",e),409===e.status){const s=e.data||{},t={};"email"===s.field?t.email=s.message||"This email is already registered.":"username"===s.field?t.username=s.message||"This username is already taken.":t.email=s.message||"This email or username is already registered.",o(t)}else o({email:e.message||"Failed to verify account. Please try again."})}finally{d(!1)}}else if(1===t){if(x)return void a(e=>e+1);d(!0);try{await r("/otp/verify",{method:"POST",body:JSON.stringify({email:n.email,otp:n.otp})});h(!0),a(e=>e+1)}catch(e){console.error("OTP verification error:",e),o({otp:e.message||"Failed to verify OTP"}),i(e=>({...e,otp:""}))}finally{d(!1)}}else a(e=>e+1)};return{steps:e,step:t,setStep:a,form:n,setForm:i,errors:l,setErrors:o,loading:c,setLoading:d,success:m,isOtpVerified:x,setIsOtpVerified:h,inputRef:p,handleChange:e=>{const{name:s,value:t,type:a,checked:r}=e.target;i("useAdminEmail"===s?e=>({...e,[s]:r,businessEmail:r?e.email:""}):e=>({...e,[s]:"checkbox"===a?r:t}))},handleLocationChange:(e,s,t)=>{const a={};"region"===e?(a.province="",a.city="",a.barangay="",a.provinceName="",a.cityName="",a.barangayName=""):"province"===e?(a.city="",a.barangay="",a.cityName="",a.barangayName=""):"city"===e&&(a.barangay="",a.barangayName=""),i(r=>({...r,[e]:s,[`${e}Name`]:t,...a}))},validateStep:g,handleNext:b,handleBack:()=>a(e=>Math.max(0,e-1)),handleFinish:async()=>{if(g()){d(!0);try{const e=new FormData;e.append("email",n.email),e.append("firstName",n.firstName),e.append("fullName",n.fullName),e.append("businessName",n.businessName),e.append("businessType","Others"===n.businessType?n.customBusinessType:n.businessType),e.append("country","Philippines"),e.append("countryName","Philippines"),e.append("province",n.province),e.append("city",n.city),e.append("barangay",n.barangay),e.append("regionName",n.regionName),e.append("provinceName",n.provinceName),e.append("cityName",n.cityName),e.append("barangayName",n.barangayName),e.append("houseNumber",n.houseNumber),e.append("mobile",n.mobile),e.append("password",n.password),e.append("document_types",JSON.stringify(n.documentTypes)),n.documents.forEach(s=>{e.append("documents",s)});const s=await r("/business/register-with-documents",{method:"POST",body:e});localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(s.user)),u(!0)}catch(e){o({general:e.message||"An error occurred."})}finally{d(!1)}}},progress:(t+1)/e.length*100}}function p({percent:s}){return e.jsx("div",{className:"w-full h-2.5 bg-blue-100/70 rounded-full overflow-hidden shadow-inner","aria-label":"Progress bar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,role:"progressbar",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 via-blue-500 to-blue-400 transition-all duration-500 rounded-full shadow-md",style:{width:`${s}%`}})})}function g({steps:s,currentStep:t}){const a=s=>{switch(s){case 0:return e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]});case 1:return e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]});case 2:return e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"18"}),e.jsx("rect",{x:"14",y:"8",width:"7",height:"13"}),e.jsx("path",{d:"M7 6h2M7 10h2M7 14h2M18 11h2M18 15h2"})]});default:return e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("path",{d:"M14 2v6h6"}),e.jsx("path",{d:"M16 13H8M16 17H8M10 9H8"})]})}};return e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative flex items-center justify-between",children:[s.map((s,r)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full border-2 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white z-10\n                ${r<t?"border-green-600 text-green-600":r===t?"border-blue-600 text-blue-600 ring-2 ring-blue-200":"border-gray-300 text-gray-400"}\n              `,"aria-current":r===t?"step":void 0,tabIndex:0,title:s.label,children:a(r)}),e.jsx("span",{className:"mt-2 text-xs font-medium text-center max-w-[90px] "+(r<=t?"text-blue-700":"text-gray-500"),children:s.label})]},r)),e.jsx("div",{className:"absolute left-0 right-0 top-5 h-1 bg-gray-200 rounded","aria-hidden":!0}),e.jsx("div",{className:"absolute left-0 top-5 h-1 bg-gradient-to-r from-blue-600 to-blue-400 rounded transition-all duration-500",style:{width:t/(s.length-1)*100+"%"},"aria-hidden":!0})]})})}function b({step:s,steps:a,progress:r,loading:c,errors:d,onBack:m,onNext:u,onFinish:x,children:h}){const b=1===s,f=s<a.length-1&&!b;return a.length,e.jsx(n,{variant:"gradientBlue",pattern:"dots",overlay:!0,floatingElements:!0,children:e.jsx("div",{className:"flex justify-center px-4 py-10",children:e.jsx(o,{className:"w-full max-w-5xl overflow-hidden rounded-3xl p-0",children:e.jsxs("div",{className:"md:flex",children:[e.jsx("aside",{className:"hidden md:flex md:w-5/12 items-center justify-center bg-gradient-to-br from-blue-600 via-blue-400 to-blue-500 p-10 relative",children:e.jsxs("div",{className:"text-center max-w-sm",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/15 text-white text-xs font-semibold mb-5 border border-white/30",children:[e.jsx("span",{children:"Quick setup"}),e.jsx("span",{className:"opacity-80",children:"â€¢"}),e.jsx("span",{children:"Secure"})]}),e.jsx("h3",{className:"text-white text-2xl font-bold mb-3",children:"Welcome to your business journey"}),e.jsx("p",{className:"text-white/90 text-sm mb-6",children:"Create your account, verify your email, add business details and upload documents. You're minutes away from a modern POS."}),e.jsxs("ul",{className:"text-left text-white/95 text-sm space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-white"})," ","Guided, step-by-step flow"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-white"})," ","Save & resume automatically"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-white"})," ","Bankâ€‘grade security"]})]})]})}),e.jsxs("main",{className:"w-full md:w-7/12 p-6 md:p-10 flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(t,{to:"/",className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to home"]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(p,{percent:r})})}),e.jsx("div",{className:"mt-4",children:e.jsx(g,{steps:a,currentStep:s})})]}),e.jsxs("div",{className:"flex-1",children:[d?.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:d.general}),e.jsx("div",{className:"max-w-lg",children:h})]}),f&&e.jsx("div",{className:"mt-8 md:mt-6 flex items-center justify-center",children:e.jsx(i,{onClick:u,disabled:c,variant:"primary",className:"w-48",children:c?e.jsx(l,{size:"sm"}):"Continue"})}),e.jsx("div",{className:"mt-4 text-[11px] text-gray-500 text-center",children:"Your data is encrypted in transit and at rest."})]})]})})})})}const f="https://psgc.cloud/api";function y({form:t,errors:a,handleLocationChange:r}){const[n,i]=s.useState([]),[l,o]=s.useState([]),[c,d]=s.useState([]),[m,u]=s.useState([]),[x,h]=s.useState({regions:!1,provinces:!1,cities:!1,barangays:!1}),[p,g]=s.useState(null);s.useEffect(()=>{(async()=>{h(e=>({...e,regions:!0})),g(null);try{const e=await async function(){const e=await fetch(`${f}/regions`);if(!e.ok)throw new Error("Failed to fetch regions");return e.json()}();i(e)}catch(e){console.error(e),g("Failed to load regions. Please check your connection and try again.")}finally{h(e=>({...e,regions:!1}))}})()},[]),s.useEffect(()=>{if(t.region){(async()=>{h(e=>({...e,provinces:!0}));try{const e=await async function(e){const s=await fetch(`${f}/regions/${e}/provinces`);if(!s.ok)throw new Error("Failed to fetch provinces");return s.json()}(t.region);o(e)}catch(e){console.error(e)}finally{h(e=>({...e,provinces:!1}))}})()}},[t.region]),s.useEffect(()=>{if(t.province){(async()=>{h(e=>({...e,cities:!0}));try{const e=await async function(e){const s=await fetch(`${f}/provinces/${e}/cities-municipalities`);if(!s.ok)throw new Error("Failed to fetch cities");return s.json()}(t.province);d(e)}catch(e){console.error(e)}finally{h(e=>({...e,cities:!1}))}})()}},[t.province]),s.useEffect(()=>{if(t.city){(async()=>{h(e=>({...e,barangays:!0}));try{const e=await async function(e){const s=await fetch(`${f}/cities-municipalities/${e}/barangays`);if(!s.ok)throw new Error("Failed to fetch barangays");return s.json()}(t.city);u(e)}catch(e){console.error(e)}finally{h(e=>({...e,barangays:!1}))}})()}},[t.city]);const b=e=>{const{name:s,value:t}=e.target,a=e.target.options[e.target.selectedIndex],n=a?a.text:"";r(s,t,n)};return e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Region ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"region",value:t.region,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{borderColor:a.region?"#ef4444":""},disabled:x.regions,children:[e.jsx("option",{value:"",children:x.regions?"Loading...":"Select Region"}),n.map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))]}),a.region&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.region}),p&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Province ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"province",value:t.province,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{borderColor:a.province?"#ef4444":""},disabled:!t.region||x.provinces,children:[e.jsx("option",{value:"",children:x.provinces?"Loading...":"Select Province"}),l.map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))]}),a.province&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.province})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["City/Municipality ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"city",value:t.city,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{borderColor:a.city?"#ef4444":""},disabled:!t.province||x.cities,children:[e.jsx("option",{value:"",children:x.cities?"Loading...":"Select City/Municipality"}),c.map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))]}),a.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.city})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Barangay ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"barangay",value:t.barangay,onChange:b,className:"w-full px-3 py-2 border border--gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{borderColor:a.barangay?"#ef4444":""},disabled:!t.city||x.barangays,children:[e.jsx("option",{value:"",children:x.barangays?"Loading...":"Select Barangay"}),m.map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))]}),a.barangay&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.barangay})]})]})}function j({documents:t,documentTypes:a,onDocumentsChange:r,error:n}){const[i,l]=s.useState([]),o=["Business Registration Certificate (DTI/SEC/CDA)","Mayor's Permit / Business Permit","BIR Certificate of Registration (Form 2303)"],c=["Barangay Business Clearance","Fire Safety Inspection Certificate (if applicable)","Sanitary Permit (for food businesses)"],d=[...o,...c,"Other Business Document"],m=a.filter(e=>e),u=o.filter(e=>!m.includes(e));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm text-gray-700 font-medium",children:["Upload Business Documents ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Drag and drop files here, or click to browse"}),e.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Browse Files",e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.gif",onChange:e=>{const s=Array.from(e.target.files||[]);if(0===s.length)return;const n=["application/pdf","image/jpeg","image/jpg","image/png","image/gif"],i=e=>`${e.name}|${e.size}|${e.lastModified||""}`,o=new Set(t.map(i)),c=[],d=[];if(s.forEach(e=>{const s=i(e);if(o.has(s))return void d.push({file:e,reason:"Duplicate file"});if(!n.includes(e.type))return void d.push({file:e,reason:"Unsupported file type. Only PDF, JPG, PNG, GIF allowed."});if(e.size>10485760)return void d.push({file:e,reason:"File too large. Maximum 10MB per file."});const t=e.name.split(".").pop()?.toLowerCase();["pdf","jpg","jpeg","png","gif"].includes(t)?(c.push(e),o.add(s)):d.push({file:e,reason:"Invalid file extension."})}),c.length>0){const e=[...t,...c],s=[...a,...c.map(()=>"")];r(e,s),l([])}d.length>0&&l(d.map(({file:e,reason:s})=>`${e.name}: ${s}`)),e.target.value=""},className:"hidden"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Accepted formats: PDF, JPG, PNG, GIF. Maximum file size: 10MB per file. Secure uploads only."})]}),i.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Upload Errors:"}),e.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:i.map((s,t)=>e.jsxs("li",{children:["â€¢ ",s]},t))})]}),t.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Uploaded Documents:"}),t.map((s,n)=>{const i=o.includes(a[n]),l=c.includes(a[n]);return e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border "+(i?"bg-green-50 border-green-200":l?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"),children:[e.jsx("div",{className:"flex-shrink-0",children:"application/pdf"===s.type?e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.size/1024/1024).toFixed(2)," MB â€¢ ",s.type||"unknown"]}),i&&e.jsx("span",{className:"inline-block mt-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Required"}),l&&e.jsx("span",{className:"inline-block mt-1 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:"Optional"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("select",{value:a[n]||"",onChange:e=>((e,s)=>{const n=[...a];n[e]=s,r(t,n)})(n,e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select document type"}),d.map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("button",{type:"button",onClick:()=>(e=>{const s=t.filter((s,t)=>t!==e),n=a.filter((s,t)=>t!==e);r(s,n)})(n),className:"text-red-600 hover:text-red-800 text-sm p-1",title:"Remove document",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},n)})]}),u.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Missing Required Documents:"}),e.jsx("ul",{className:"text-sm text-yellow-700 space-y-1",children:u.map((s,t)=>e.jsxs("li",{children:["â€¢ ",s]},t))})]}),n&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n})]})}function v({hook:s,isOtpVerified:t,onOpenTerms:n,onOpenPrivacy:i}){const{step:o,form:u,errors:x,loading:h,inputRef:p,handleChange:g}=s;function b(){const[s,t]=a.useState([]),[n,i]=a.useState(null);return a.useEffect(()=>{const e=sessionStorage.getItem("auth_token");let s=null;try{const e=JSON.parse(sessionStorage.getItem("user")||"null");s=e?.businessId||e?.business_id||null}catch{}e&&s&&(async()=>{try{const a=await r(`/documents/business/${s}`,{headers:{Authorization:`Bearer ${e}`}});t(Array.isArray(a.documents)?a.documents:[]),i(a.verification||null)}catch{}})()},[]),s&&0!==s.length?e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Previously Uploaded"}),e.jsx("ul",{className:"space-y-2 text-sm",children:s.map(s=>e.jsxs("li",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-700",children:[s.document_type," â€” ",s.document_name]}),e.jsx("span",{className:"text-gray-500",children:(s.mime_type||"").split("/").pop()})]},s.document_id))}),n?.verification_status&&e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Verification status: ",n.verification_status]})]}):null}switch(o){case 0:return e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{className:"text-2xl md:text-3xl text-gray-900",children:"Account Info"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Email"}),e.jsx(d,{ref:p,name:"email",value:u.email,onChange:g,placeholder:"Enter your email address",type:"email",error:x.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"First Name"}),e.jsx(d,{name:"firstName",value:u.firstName,onChange:g,placeholder:"Enter your first name",type:"text",error:x.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Last Name"}),e.jsx(d,{name:"fullName",value:u.fullName,onChange:g,placeholder:"Enter your last name",type:"text",error:x.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Mobile Number"}),e.jsx(d,{name:"mobile",value:u.mobile,onChange:g,placeholder:"09xxxxxxxxx",type:"tel",maxLength:15,error:x.mobile})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Password"}),e.jsx(m,{name:"password",value:u.password,onChange:g,placeholder:"Enter password",error:x.password}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"Password must contain:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[e.jsxs("div",{className:"flex items-center "+(u.password.length>=12?"text-green-600":"text-gray-500"),children:[e.jsx("span",{className:"mr-2 "+(u.password.length>=12?"âœ“":"â—‹")}),"At least 12 characters"]}),e.jsxs("div",{className:"flex items-center "+(/[A-Z]/.test(u.password)?"text-green-600":"text-gray-500"),children:[e.jsx("span",{className:"mr-2 "+(/[A-Z]/.test(u.password)?"âœ“":"â—‹")}),"One uppercase letter (A-Z)"]}),e.jsxs("div",{className:"flex items-center "+(/[a-z]/.test(u.password)?"text-green-600":"text-gray-500"),children:[e.jsx("span",{className:"mr-2 "+(/[a-z]/.test(u.password)?"âœ“":"â—‹")}),"One lowercase letter (a-z)"]}),e.jsxs("div",{className:"flex items-center "+(/\d/.test(u.password)?"text-green-600":"text-gray-500"),children:[e.jsx("span",{className:"mr-2 "+(/\d/.test(u.password)?"âœ“":"â—‹")}),"One number (0-9)"]}),e.jsxs("div",{className:"flex items-center "+(/[!@#$%^&*(),.?":{}|<>]/.test(u.password)?"text-green-600":"text-gray-500"),children:[e.jsx("span",{className:"mr-2 "+(/[!@#$%^&*(),.?":{}|<>]/.test(u.password)?"âœ“":"â—‹")}),'One special character (!@#$%^&*(),.?":',"|","<",">",")"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Password Confirmation"}),e.jsx(m,{name:"confirmPassword",value:u.confirmPassword,onChange:g,placeholder:"Re-enter password",error:x.confirmPassword})]})]}),e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["By continuing, you agree to our"," ",e.jsx("button",{type:"button",onClick:n,className:"text-blue-700 underline hover:text-blue-800",children:"Terms & Conditions"})," ","and"," ",e.jsx("button",{type:"button",onClick:i,className:"text-blue-700 underline hover:text-blue-800",children:"Privacy Policy"}),"."]})]});case 1:return e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{className:"text-2xl md:text-3xl text-gray-900",children:"OTP Verification"}),e.jsxs("p",{className:"text-gray-700 mb-2 text-sm",children:["We've sent a 4-character verification code to"," ",e.jsx("strong",{children:u.email}),"."]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"Enter OTP"}),e.jsx(d,{ref:p,name:"otp",value:u.otp,onChange:e=>{const t=e.target.value.slice(0,4);g({target:{name:"otp",value:t}}),x.otp&&s.setErrors({...x,otp:null})},placeholder:"Enter 4-character code",type:"text",maxLength:4,error:x.otp,disabled:t}),4===u.otp.length&&!t&&!h&&e.jsxs("div",{className:"mt-2 text-blue-600 text-sm font-medium flex items-center",children:[e.jsx(l,{size:"sm",className:"mr-2"}),"Auto-verifying OTP..."]}),h&&e.jsxs("div",{className:"mt-2 text-gray-700 text-sm font-medium flex items-center",children:[e.jsx(l,{size:"sm",className:"mr-2"}),"Verifying OTP..."]}),t&&e.jsxs("div",{className:"mt-2 text-green-600 text-sm font-medium flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 20 20","aria-hidden":!0,children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"OTP verified successfully!"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:async()=>{s.setLoading(!0);try{await r("/otp/resend",{method:"POST",body:JSON.stringify({email:u.email})}),alert("New OTP sent successfully!")}catch(e){alert("Failed to resend OTP")}finally{s.setLoading(!1)}},className:"text-gray-700 hover:text-gray-900 text-sm underline",disabled:h,children:h?"Sending...":"Resend OTP"})})]});case 2:return e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{className:"text-2xl md:text-3xl text-gray-900",children:"Business Details"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Business Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{name:"businessName",value:u.businessName,onChange:g,placeholder:"Enter business name",error:x.businessName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Business Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"useAdminEmail",name:"useAdminEmail",checked:u.useAdminEmail,onChange:g,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"useAdminEmail",className:"text-sm text-gray-700",children:["Use admin email (",u.email,")"]})]}),!u.useAdminEmail&&e.jsx(d,{name:"businessEmail",value:u.businessEmail,onChange:g,placeholder:"Enter business email",type:"email",error:x.businessEmail})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:["Business Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"businessType",value:u.businessType,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{borderColor:x.businessType?"#ef4444":""},children:[e.jsx("option",{value:"",children:"Select business type"}),e.jsx("option",{value:"Grocery Store",children:"Grocery Store"}),e.jsx("option",{value:"Pharmacy",children:"Pharmacy"}),e.jsx("option",{value:"Clothing Store",children:"Clothing Store"}),e.jsx("option",{value:"Electronics Store",children:"Electronics Store"}),e.jsx("option",{value:"Hardware Store",children:"Hardware Store"}),e.jsx("option",{value:"Bookstore",children:"Bookstore"}),e.jsx("option",{value:"Convenience Store",children:"Convenience Store"}),e.jsx("option",{value:"Others",children:"Others"})]}),x.businessType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.businessType}),"Others"===u.businessType&&e.jsx("div",{className:"mt-2",children:e.jsx(d,{name:"customBusinessType",value:u.customBusinessType,onChange:g,placeholder:"Please specify your business type",error:x.customBusinessType})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 mt-4 font-semibold text-gray-900",children:"Business Location"}),e.jsx(y,{form:u,errors:x,handleLocationChange:s.handleLocationChange})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-700 font-medium",children:"House no./ Street Name / Landmark (optional)"}),e.jsx(d,{name:"houseNumber",value:u.houseNumber,onChange:g,placeholder:"Enter house no., street, or landmark (optional)"})]})]})]});case 3:return e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{className:"text-2xl md:text-3xl text-gray-900",children:"Business Documents"}),e.jsx("p",{className:"text-gray-700 mb-4 text-sm",children:"Please upload your business documents for verification. These documents help us verify that your business is legitimate and complies with Philippine regulations."}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"âš ï¸ REQUIRED Documents (Must Upload All 3):"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-1 font-medium",children:[e.jsx("li",{children:"â–º Business Registration Certificate (DTI/SEC/CDA)"}),e.jsx("li",{children:"â–º Mayor's Permit / Business Permit"}),e.jsx("li",{children:"â–º BIR Certificate of Registration (Form 2303)"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Additional Documents (Optional):"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Barangay Business Clearance"}),e.jsx("li",{children:"â€¢ Fire Safety Inspection Certificate (if applicable)"}),e.jsx("li",{children:"â€¢ Sanitary Permit (for food businesses)"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{documents:u.documents,documentTypes:u.documentTypes,onDocumentsChange:(e,s)=>{g({target:{name:"documents",value:e}}),g({target:{name:"documentTypes",value:s}})},error:x.documents||x.documentTypes}),e.jsx(b,{})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Important:"})," After submitting your documents, please allow 1-3 business days for verification. You will receive an email notification once the review is complete."]})}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"acceptTerms",name:"acceptTerms",type:"checkbox",checked:u.acceptTerms,onChange:g,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsxs("label",{htmlFor:"acceptTerms",className:"text-gray-700",children:["I agree to the"," ",e.jsx("button",{type:"button",onClick:n,className:"text-blue-600 hover:text-blue-800 underline",children:"Terms and Conditions"})]})})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"acceptPrivacy",name:"acceptPrivacy",type:"checkbox",checked:u.acceptPrivacy,onChange:g,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsxs("label",{htmlFor:"acceptPrivacy",className:"text-gray-700",children:["I have read the"," ",e.jsx("button",{type:"button",onClick:i,className:"text-blue-600 hover:text-blue-800 underline",children:"Privacy Policy"})]})})]}),x.accept&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:x.accept})]}),e.jsxs("div",{className:"mt-8 flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsxs("button",{type:"button",onClick:s.handlePrevious,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsx("button",{type:"button",onClick:s.handleFinish,disabled:h||!u.documents||0===u.documents.length||!u.acceptTerms||!u.acceptPrivacy,className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):"Submit Application"})]})]});default:return null}}function N({onOpenTerms:s,onOpenPrivacy:t}){const a=h(),{step:r,steps:n,progress:l,loading:d,errors:m,handleBack:u,handleNext:x,handleFinish:p,success:g,isOtpVerified:f}=a;return g?e.jsx(b,{step:r,steps:n,progress:100,loading:!1,errors:{},children:e.jsx("div",{className:"flex flex-col items-center justify-center px-4 py-12",children:e.jsxs(o,{className:"rounded-3xl p-10 flex flex-col items-center max-w-2xl",children:[e.jsx(c,{className:"text-3xl md:text-4xl text-gray-900 mb-4",children:"Application Submitted!"}),e.jsx("p",{className:"text-gray-800 mb-6 text-base text-center max-w-md",children:"Your business application has been submitted successfully! Our verification team will review your documents."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 w-full max-w-md",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Document verification (1-3 business days)"}),e.jsx("li",{children:"â€¢ Email notification once complete"}),e.jsx("li",{children:"â€¢ Full access upon approval"})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 w-full max-w-md",children:e.jsxs("p",{className:"text-sm text-yellow-800 text-center",children:[e.jsx("strong",{children:"Please wait 1-3 business days"})," for verification. You will receive an email notification once the review is complete."]})}),e.jsx(i,{label:"Return to Home",onClick:()=>window.location.href="/",className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-full font-semibold shadow hover:from-blue-700 hover:to-blue-800 transition-colors"})]})})}):e.jsx(b,{step:r,steps:n,progress:l,loading:d,errors:m,onBack:u,onNext:x,onFinish:p,children:e.jsx(v,{hook:a,isOtpVerified:f,onOpenTerms:s,onOpenPrivacy:t})})}function w(){const[t,a]=s.useState(!1),[r,n]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(N,{onOpenTerms:()=>a(!0),onOpenPrivacy:()=>n(!0)}),e.jsx(u,{open:t,onClose:()=>a(!1)}),e.jsx(x,{open:r,onClose:()=>n(!1)})]})}export{w as default};
//# sourceMappingURL=GetStarted-CJMV4ol3.js.map
