import{j as e}from"./utils-CzS7jPpm.js";import{g as t,a as s,R as a}from"./vendor-DpjJfaBO.js";import{a as r,u as n,b as o,c as i}from"./index-CBMb4OTp.js";import{P as l}from"./PageLayout-Ds8RPz28.js";import{N as d}from"./Nav-Admin-NcjbEfr6.js";import{C as c}from"./Card-BlR7hDww.js";import{S as u}from"./SectionHeader-Ma_y7mUs.js";import{R as m,B as h,C as x,X as f,Y as g,T as b,a as p,L as y,b as j,c as v,P as w,d as N,e as S}from"./charts-BEcyzEp-.js";import{B as M,a as D,b as $,c as k,d as O}from"./index-CyXmrNCZ.js";import{P as Y}from"./ProfileModal-CzxoCntg.js";import{N as _}from"./NotificationDropdown-xqqjKFtD.js";import"./Navbar-CEV9jCwp.js";import"./Logo-DYlOg-eR.js";import"./PrivacyPolicyModal-DyoaljC3.js";import"./BaseModal-BODUq_pt.js";import"./Modal-mCLYhInP.js";import"./FormField-B3zxLfAq.js";import"./Input-D0wlSige.js";import"./ScannerCard-DtSIQHjX.js";import"./qr-CcdB0EcG.js";var C,T={exports:{}};const P=t((C||(C=1,T.exports=function(){var e=1e3,t=6e4,s=36e5,a="millisecond",r="second",n="minute",o="hour",i="day",l="week",d="month",c="quarter",u="year",m="date",h="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],s=e%100;return"["+e+(t[(s-20)%10]||t[s]||t[0])+"]"}},b=function(e,t,s){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(s)+e},p={s:b,z:function(e){var t=-e.utcOffset(),s=Math.abs(t),a=Math.floor(s/60),r=s%60;return(t<=0?"+":"-")+b(a,2,"0")+":"+b(r,2,"0")},m:function e(t,s){if(t.date()<s.date())return-e(s,t);var a=12*(s.year()-t.year())+(s.month()-t.month()),r=t.clone().add(a,d),n=s-r<0,o=t.clone().add(a+(n?-1:1),d);return+(-(a+(s-r)/(n?r-o:o-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:u,w:l,d:i,D:m,h:o,m:n,s:r,ms:a,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",j={};j[y]=g;var v="$isDayjsObject",w=function(e){return e instanceof D||!(!e||!e[v])},N=function e(t,s,a){var r;if(!t)return y;if("string"==typeof t){var n=t.toLowerCase();j[n]&&(r=n),s&&(j[n]=s,r=n);var o=t.split("-");if(!r&&o.length>1)return e(o[0])}else{var i=t.name;j[i]=t,r=i}return!a&&r&&(y=r),r||!a&&y},S=function(e,t){if(w(e))return e.clone();var s="object"==typeof t?t:{};return s.date=e,s.args=arguments,new D(s)},M=p;M.l=N,M.i=w,M.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var D=function(){function g(e){this.$L=N(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[v]=!0}var b=g.prototype;return b.parse=function(e){this.$d=function(e){var t=e.date,s=e.utc;if(null===t)return new Date(NaN);if(M.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(x);if(a){var r=a[2]-1||0,n=(a[7]||"0").substring(0,3);return s?new Date(Date.UTC(a[1],r,a[3]||1,a[4]||0,a[5]||0,a[6]||0,n)):new Date(a[1],r,a[3]||1,a[4]||0,a[5]||0,a[6]||0,n)}}return new Date(t)}(e),this.init()},b.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},b.$utils=function(){return M},b.isValid=function(){return!(this.$d.toString()===h)},b.isSame=function(e,t){var s=S(e);return this.startOf(t)<=s&&s<=this.endOf(t)},b.isAfter=function(e,t){return S(e)<this.startOf(t)},b.isBefore=function(e,t){return this.endOf(t)<S(e)},b.$g=function(e,t,s){return M.u(e)?this[t]:this.set(s,e)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(e,t){var s=this,a=!!M.u(t)||t,c=M.p(e),h=function(e,t){var r=M.w(s.$u?Date.UTC(s.$y,t,e):new Date(s.$y,t,e),s);return a?r:r.endOf(i)},x=function(e,t){return M.w(s.toDate()[e].apply(s.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(t)),s)},f=this.$W,g=this.$M,b=this.$D,p="set"+(this.$u?"UTC":"");switch(c){case u:return a?h(1,0):h(31,11);case d:return a?h(1,g):h(0,g+1);case l:var y=this.$locale().weekStart||0,j=(f<y?f+7:f)-y;return h(a?b-j:b+(6-j),g);case i:case m:return x(p+"Hours",0);case o:return x(p+"Minutes",1);case n:return x(p+"Seconds",2);case r:return x(p+"Milliseconds",3);default:return this.clone()}},b.endOf=function(e){return this.startOf(e,!1)},b.$set=function(e,t){var s,l=M.p(e),c="set"+(this.$u?"UTC":""),h=(s={},s[i]=c+"Date",s[m]=c+"Date",s[d]=c+"Month",s[u]=c+"FullYear",s[o]=c+"Hours",s[n]=c+"Minutes",s[r]=c+"Seconds",s[a]=c+"Milliseconds",s)[l],x=l===i?this.$D+(t-this.$W):t;if(l===d||l===u){var f=this.clone().set(m,1);f.$d[h](x),f.init(),this.$d=f.set(m,Math.min(this.$D,f.daysInMonth())).$d}else h&&this.$d[h](x);return this.init(),this},b.set=function(e,t){return this.clone().$set(e,t)},b.get=function(e){return this[M.p(e)]()},b.add=function(a,c){var m,h=this;a=Number(a);var x=M.p(c),f=function(e){var t=S(h);return M.w(t.date(t.date()+Math.round(e*a)),h)};if(x===d)return this.set(d,this.$M+a);if(x===u)return this.set(u,this.$y+a);if(x===i)return f(1);if(x===l)return f(7);var g=(m={},m[n]=t,m[o]=s,m[r]=e,m)[x]||1,b=this.$d.getTime()+a*g;return M.w(b,this)},b.subtract=function(e,t){return this.add(-1*e,t)},b.format=function(e){var t=this,s=this.$locale();if(!this.isValid())return s.invalidDate||h;var a=e||"YYYY-MM-DDTHH:mm:ssZ",r=M.z(this),n=this.$H,o=this.$m,i=this.$M,l=s.weekdays,d=s.months,c=s.meridiem,u=function(e,s,r,n){return e&&(e[s]||e(t,a))||r[s].slice(0,n)},m=function(e){return M.s(n%12||12,e,"0")},x=c||function(e,t,s){var a=e<12?"AM":"PM";return s?a.toLowerCase():a};return a.replace(f,function(e,a){return a||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return M.s(t.$y,4,"0");case"M":return i+1;case"MM":return M.s(i+1,2,"0");case"MMM":return u(s.monthsShort,i,d,3);case"MMMM":return u(d,i);case"D":return t.$D;case"DD":return M.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(s.weekdaysMin,t.$W,l,2);case"ddd":return u(s.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(n);case"HH":return M.s(n,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return x(n,o,!0);case"A":return x(n,o,!1);case"m":return String(o);case"mm":return M.s(o,2,"0");case"s":return String(t.$s);case"ss":return M.s(t.$s,2,"0");case"SSS":return M.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")})},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(a,m,h){var x,f=this,g=M.p(m),b=S(a),p=(b.utcOffset()-this.utcOffset())*t,y=this-b,j=function(){return M.m(f,b)};switch(g){case u:x=j()/12;break;case d:x=j();break;case c:x=j()/3;break;case l:x=(y-p)/6048e5;break;case i:x=(y-p)/864e5;break;case o:x=y/s;break;case n:x=y/t;break;case r:x=y/e;break;default:x=y}return h?x:M.a(x)},b.daysInMonth=function(){return this.endOf(d).$D},b.$locale=function(){return j[this.$L]},b.locale=function(e,t){if(!e)return this.$L;var s=this.clone(),a=N(e,t,!0);return a&&(s.$L=a),s},b.clone=function(){return M.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},g}(),$=D.prototype;return S.prototype=$,[["$ms",a],["$s",r],["$m",n],["$H",o],["$W",i],["$M",d],["$y",u],["$D",m]].forEach(function(e){$[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),S.extend=function(e,t){return e.$i||(e(t,D,S),e.$i=!0),S},S.locale=N,S.isDayjs=w,S.unix=function(e){return S(1e3*e)},S.en=j[y],S.Ls=j,S.p={},S}()),T.exports));var A,F={exports:{}};const L=t((A||(A=1,F.exports=function(e,t,s){var a=function(e,t){if(!t||!t.length||1===t.length&&!t[0]||1===t.length&&Array.isArray(t[0])&&!t[0].length)return null;var s;1===t.length&&t[0].length>0&&(t=t[0]),s=(t=t.filter(function(e){return e}))[0];for(var a=1;a<t.length;a+=1)t[a].isValid()&&!t[a][e](s)||(s=t[a]);return s};s.max=function(){var e=[].slice.call(arguments,0);return a("isAfter",e)},s.min=function(){var e=[].slice.call(arguments,0);return a("isBefore",e)}}),F.exports));function R({title:t,children:s,className:a="",...r}){return e.jsxs(c,{className:`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl group ${a}`,...r,children:[t&&e.jsx(u,{size:"md",align:"left",className:"text-gray-900 mb-6 font-bold group-hover:text-blue-600 transition-colors duration-300",children:t}),e.jsxs("div",{className:"relative",children:[s,e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-blue-50/20 rounded-lg pointer-events-none"})]})]})}function I({stats:t,className:s="",...a}){return e.jsx(c,{className:`bg-white backdrop-blur-sm border border-gray-100 shadow-sm rounded-2xl ${s}`,...a,children:e.jsxs("div",{className:"grid grid-cols-1 divide-y divide-gray-200/60 p-6 md:p-8 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"₱"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Today's Sales"}),e.jsxs("span",{className:"text-2xl md:text-xl font-bold text-gray-900 mt-0.5",children:["₱",Number(t.sales||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"↻"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Transactions"}),e.jsx("span",{className:"text-2xl md:text-xl font-bold text-gray-900 mt-0.5",children:Number(t.transactions||0).toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"★"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Top Product"}),e.jsx("span",{className:"text-xl md:text-lg font-bold text-gray-900 mt-0.5 leading-tight line-clamp-2",children:t.topProduct||"-"})]})]}),e.jsxs("div",{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 text-xl font-bold",children:"#"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 tracking-wide uppercase",children:"Total Items Sold"}),e.jsx("span",{className:"text-2xl md:text-xl font-bold text-gray-900 mt-0.5",children:Number(t.totalItemsSold||0).toLocaleString()})]})]})]})})}const W=({trend:t})=>"up"===t?e.jsx("span",{className:"text-blue-600 font-semibold text-xl",children:"↗"}):"down"===t?e.jsx("span",{className:"text-blue-400 font-semibold text-xl",children:"↘"}):e.jsx("span",{className:"text-gray-400 font-semibold text-xl",children:"→"});function z({dateRange:t}){const[a,n]=s.useState([]),[o,i]=s.useState([]),[l,d]=s.useState([]),[c,u]=s.useState([]),[M,D]=s.useState([]),[$,k]=s.useState({}),[O,Y]=s.useState({cashFlow:0,operatingCosts:0,profitGrowth:0}),_=["#3b82f6","#1d4ed8","#1e40af","#2563eb","#60a5fa","#93c5fd","#bfdbfe"];return s.useEffect(()=>{(async()=>{try{const e=e=>{if(!e)return null;if(e.format)return e.format("YYYY-MM-DD");const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},s=t?.startDate?e(t.startDate):null,a=t?.endDate?e(t.endDate):null,o=e=>{const t=new URLSearchParams;e.startDate&&t.append("startDate",e.startDate),e.endDate&&t.append("endDate",e.endDate);const s=t.toString();return s?`?${s}`:""},l={};s&&a&&(l.startDate=s,l.endDate=a);const c=o(l),[m,h,x,f,g,b,p]=await Promise.all([r(`/api/stats/key-metrics${c}`),r(`/api/stats/sales-by-location${c}`),r(`/api/stats/revenue-vs-expenses${c}`),r(`/api/stats/profit-trend${c}`),r(`/api/stats/payment-methods${c}`),r(`/api/stats/product-performance${c}`),r(`/api/stats/business-stats${c}`)]);k(m||{}),n(h||[]),i(x||[]),d(f||[]),u(g||[]),D(b||[]),Y(p||{})}catch(e){console.error("Error fetching business report data:",e)}})()},[t]),e.jsxs("section",{className:"w-full px-5 md:px-8 py-6 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8 w-full min-h-[350px]",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Sales by Location"}),e.jsx(m,{width:"100%",height:280,children:e.jsxs(h,{data:a,margin:{top:10,right:10,left:0,bottom:10},children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#cbd5e1"}),e.jsx(f,{dataKey:"location",tick:{fontSize:13,fill:"#1e40af"},padding:{left:10,right:10}}),e.jsx(g,{tick:{fontSize:13,fill:"#1e40af"}}),e.jsx(b,{contentStyle:{background:"#f0f9ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e3a8a"}}),e.jsx(p,{dataKey:"sales",fill:"#3b82f6",radius:[10,10,0,0],barSize:40,background:{fill:"#c7d2fe"}})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Revenue vs Expenses"}),e.jsx(m,{width:"100%",height:280,children:e.jsxs(h,{data:o,margin:{top:10,right:10,left:0,bottom:10},children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#cbd5e1"}),e.jsx(f,{dataKey:"month",tick:{fontSize:13,fill:"#1e40af"},padding:{left:10,right:10}}),e.jsx(g,{tick:{fontSize:13,fill:"#1e40af"}}),e.jsx(b,{contentStyle:{background:"#f0f9ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e3a8a"}}),e.jsx(y,{verticalAlign:"top",wrapperStyle:{paddingBottom:10}}),e.jsx(p,{dataKey:"revenue",fill:"#2563eb",radius:[10,10,0,0],barSize:32,background:{fill:"#bfdbfe"}}),e.jsx(p,{dataKey:"expenses",fill:"#93c5fd",radius:[10,10,0,0],barSize:32,background:{fill:"#dbeafe"}})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8 w-full min-h-[350px]",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Profit Trends"}),e.jsx(m,{width:"100%",height:280,children:e.jsxs(j,{data:l,margin:{top:10,right:10,left:0,bottom:10},children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#cbd5e1"}),e.jsx(f,{dataKey:"month",tick:{fontSize:13,fill:"#1e40af"},padding:{left:10,right:10}}),e.jsx(g,{tick:{fontSize:13,fill:"#1e40af"}}),e.jsx(b,{contentStyle:{background:"#f0f9ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e3a8a"}}),e.jsx(v,{type:"monotone",dataKey:"profit",stroke:"#2563eb",strokeWidth:3,dot:{fill:"#2563eb",r:6}})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-5 select-none",children:"Payment Methods"}),e.jsx(m,{width:"100%",height:280,children:e.jsxs(w,{margin:{top:20,right:20,left:20,bottom:20},children:[e.jsx(N,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,value:t})=>`${e} ${t}%`,outerRadius:90,dataKey:"value",children:c.map((t,s)=>e.jsx(S,{fill:_[s%_.length]},`cell-${s}`))}),e.jsx(b,{formatter:(e,t,s)=>[`${Number(e).toFixed(0)}%`,s?.payload?.name],contentStyle:{background:"#eff6ff",borderColor:"#3b82f6",borderRadius:10,fontWeight:"600"},labelStyle:{fontWeight:"700",color:"#1e40af"}}),e.jsx(y,{verticalAlign:"bottom",height:36})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-md mb-8 w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6 select-none",children:"Product Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{const t=Math.max(...M.map(e=>e.sales||0));return M.map(s=>{const a=t?Math.round(s.sales/t*100):0;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-150",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-semibold text-gray-800 text-sm",children:s.name}),e.jsx(W,{trend:s.trend})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Sales progress for ${s.name}`,style:{width:`${a}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 font-semibold",children:["₱",s.sales.toLocaleString()]})]},s.name)})})()})]})]})}var B,E={exports:{}};const H=t(B?E.exports:(B=1,E.exports=function(e,t,s){t.prototype.isBetween=function(e,t,a,r){var n=s(e),o=s(t),i="("===(r=r||"()")[0],l=")"===r[1];return(i?this.isAfter(n,a):!this.isBefore(n,a))&&(l?this.isBefore(o,a):!this.isAfter(o,a))||(i?this.isBefore(n,a):!this.isAfter(n,a))&&(l?this.isAfter(o,a):!this.isBefore(o,a))}}));var J,V={exports:{}};const K=t(J?V.exports:(J=1,V.exports=function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}));var U,q={exports:{}};const Z=t(U?q.exports:(U=1,q.exports=function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}));P.extend(H),P.extend(K),P.extend(Z),P.extend(L);const Q=P();function G({currentMonth:t,currentYear:s,startDate:r,endDate:n,onDateClick:o,mode:i}){const l=P().year(s).month(t).startOf("month"),d=P().year(s).month(t).endOf("month"),c=l.day(),u=d.date(),m=[],h=0===c?6:c-1;for(let e=0;e<h;e++)m.push(null);for(let e=1;e<=u;e++){const t=l.date(e);if(t.isAfter(Q.endOf("day")))break;m.push(t)}const x=e=>{if(!e)return"text-gray-300";let t="w-9 h-9 flex items-center justify-center rounded-full text-sm font-medium cursor-pointer transition-all duration-150 relative z-10";const s=(e=>!!e&&(r&&n&&r.isSame(n,"day")||r)&&e.isSame(r,"day"))(e),a=(e=>!!e&&(r&&n&&r.isSame(n,"day")?e.isSame(r,"day"):n&&e.isSame(n,"day")))(e),o=(e=>!!e&&r&&n&&e.isBetween(r,n,"day","()"))(e),i=(e=>!!e&&e.isSame(Q,"day"))(e);return t+=" hover:bg-blue-50",o&&(t="w-9 h-9 flex items-center justify-center rounded-none text-blue-700 bg-blue-100 relative z-10"),s||a?t="w-9 h-9 flex items-center justify-center rounded-full text-sm font-medium cursor-pointer transition-all duration-150 bg-blue-600 text-white shadow-md relative z-10":t+=i?" border border-blue-400 text-blue-600":" text-gray-700",t};return e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(t=>e.jsx("span",{className:"text-center text-xs font-semibold text-gray-500 py-2",children:t},t)),m.map((t,s)=>e.jsx(a.Fragment,{children:t?e.jsx("div",{className:"flex items-center justify-center",onClick:()=>o(t),children:e.jsx("div",{className:x(t),children:t.date()})}):e.jsx("div",{className:"w-9 h-9"},`empty-${s}`)},s))]})}function X({currentYear:t,startDate:s,endDate:a,onMonthClick:r}){const n=e=>{if(!s||!a)return!1;const r=P().year(t).month(e).startOf("month");return r.isSame(s.startOf("month"))&&r.isSame(a.startOf("month"))};return e.jsx("div",{className:"grid grid-cols-4 gap-3",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((s,a)=>{const o=P().year(t).month(a).startOf("month").isAfter(Q.startOf("month"));return e.jsx("div",{className:"flex items-center justify-center "+(o?"opacity-50 cursor-not-allowed":"cursor-pointer"),onClick:()=>!o&&r(a),children:e.jsx("div",{className:"w-16 h-12 flex items-center justify-center rounded-lg text-sm font-medium transition-all duration-150 "+(n(a)?"bg-blue-600 text-white shadow-md":"text-gray-700 border border-gray-300 hover:bg-blue-50"),children:s})},s)})})}function ee({isOpen:t,onClose:a,onDateRangeApply:r}){const[n,o]=s.useState("Month"),[i,l]=s.useState(null),[d,c]=s.useState(null),[u,m]=s.useState(Q.year()),[h,x]=s.useState(Q.month()),f=s.useMemo(()=>{const e=Q.year(),t=[];for(let s=0;s<6;s++)t.push(e-s);return t},[]),g=(e,t,s)=>{const a=t.isAfter(Q.endOf("day"))?Q.endOf("day"):t;l(e.startOf("day")),c(a),o(s)};s.useEffect(()=>{if(!t)return;const e=P();if("Month"===n){m(Q.year());const t=e.startOf("month");g(t,e,"Month")}else if("Day"===n)g(e,e,"Day");else if("Week"===n){const t=e.subtract(6,"day");g(t,e,"Week")}else"Custom"===n&&(l(null),c(null));"Month"!==n&&(m(Q.year()),x(Q.month()))},[t,n]),s.useEffect(()=>{if("Month"===n){const e=i?i.month():Q.month(),t=P().year(u).month(e).startOf("month"),s=P().year(u).month(e).endOf("month");if(t.isAfter(Q.startOf("month"))){const e=P().startOf("month");g(e,Q,"Month")}else g(t,s,"Month")}},[u]);const b=(e,t)=>{const s=P().year(t).month(e);s.isAfter(Q,"month")?(x(Q.month()),m(Q.year())):(x(s.month()),m(s.year()))},p="Month"!==n,y=s.useMemo(()=>{if(i&&d){const e=P.min(i,d),t=P.max(i,d),s=e.format("MMM D, YYYY"),a=t.format("MMM D, YYYY"),r=t.diff(e,"day")+1;return 1===r?`${s} (1 day)`:"Month"===n?`${e.format("MMM YYYY")} (${r} days)`:`${s} - ${a} (${r} days)`}return i?`${i.format("MMM D, YYYY")} - Select end date...`:"Select a date range"},[i,d,n]);return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl z-50 w-full max-w-md",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Select date range"}),e.jsx("button",{onClick:a,className:"p-1 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition",children:e.jsx(M,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex space-x-2 border-b-2 border-gray-100 pb-2",children:["Custom","Week","Month","Day"].map(t=>e.jsx("button",{onClick:()=>o(t),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors duration-150 border-b-2 \n                        "+(n===t?"text-blue-700 border-blue-600 font-bold":"text-gray-500 border-transparent hover:text-blue-500"),children:t},t))})]}),e.jsx("div",{className:"px-4 py-4 overflow-y-auto max-h-[70vh]",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:()=>b(h-1,u),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:P().year(u).month(h).format("MMM YYYY")}),e.jsx("button",{onClick:()=>b(h+1,u),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full",disabled:P().year(u).month(h).isSame(Q,"month"),children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsx(G,{currentMonth:h,currentYear:u,startDate:i,endDate:d,onDateClick:e=>{if(e=e.startOf("day"),"Day"===n)g(e,e,"Day");else if("Week"===n){const t=e.subtract(6,"day");g(t,e,"Week")}else"Custom"===n&&(!i||d?(l(e),c(null)):e.isSameOrBefore(i,"day")?(c(i),l(e)):c(e))},mode:n})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative flex items-center mb-6 mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-inner",children:[e.jsx(k,{className:"w-5 h-5 text-blue-600 mr-3"}),e.jsx("label",{htmlFor:"year-select",className:"sr-only",children:"Select Year"}),e.jsx("select",{id:"year-select",value:u,onChange:e=>m(Number(e.target.value)),className:"w-full bg-transparent text-lg font-bold text-gray-800 outline-none appearance-none cursor-pointer",children:f.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(X,{currentYear:u,startDate:i,endDate:d,onMonthClick:e=>{const t=P().year(u).month(e).startOf("month"),s=P().year(u).month(e).endOf("month");t.isAfter(Q.startOf("month"))||g(t,s,"Month")}})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-100 flex justify-between items-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:y}),e.jsx("button",{onClick:()=>{if(i&&d){const e=P.min(i,d).startOf("day"),t=P.max(i,d).endOf("day");r({startDate:e,endDate:t,rangeType:n}),a()}},disabled:!i||!d,className:"py-2 px-6 rounded-lg text-white font-semibold transition-all duration-200 "+(i&&d?"bg-blue-600 hover:bg-blue-700 shadow-md shadow-blue-500/50":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Done"})]})]})]}):null}P.extend(L);const te="#3b82f6",se="#8b5cf6";function ae({data:t,className:s="",rangeType:a="Custom"}){return e.jsx(R,{title:e.jsx("span",{className:"text-blue-700",children:(e=>{switch(e){case"Day":return"Visitors Today";case"Week":return"Visitors for the last 7 days";case"Month":return"Visitors this Month";default:return"Visitors for the selected range"}})(a)}),className:`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl ${s}`,children:e.jsxs("div",{className:"h-72 w-full",children:[" ",e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(j,{data:t,margin:{top:20,right:20,left:0,bottom:5},children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(f,{dataKey:"name",tick:{fill:"#374151",fontSize:14}}),e.jsx(g,{tick:{fill:"#374151",fontSize:14}}),e.jsx(b,{contentStyle:{background:"#fff",borderColor:"#e5e7eb",borderRadius:8}}),e.jsx(v,{type:"monotone",dataKey:"value",stroke:te,strokeWidth:3,dot:{r:5,fill:te}})]})})]})})}function re({data:t,className:s=""}){return e.jsx(R,{title:e.jsx("span",{className:"text-blue-700",children:"Sales by Product Category"}),className:`bg-white/80 backdrop-blur-md border border-white/60 shadow-xl ${s}`,children:e.jsxs("div",{className:"h-72 w-full",children:[" ",e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(w,{children:[e.jsx(N,{data:t,dataKey:"percent",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:e=>`${e.name} (${Number(e.percent||0).toFixed(1)}%)`,fill:se,children:t.map((t,s)=>{const a=[te,"#10b981",se];return e.jsx(S,{fill:a[s%a.length]},`cell-${s}`)})}),e.jsx(y,{}),e.jsx(b,{formatter:(e,t,s)=>[`${Number(e).toFixed(1)}%`,s?.payload?.name],contentStyle:{background:"#fafafa",borderColor:se,borderRadius:8}})]})})]})})}function ne(){const[t,c]=s.useState({revenue:0,expenses:0,netProfit:0,grossMargin:0,totalTransactions:0,totalItemsSold:0,averageTransactionValue:0}),[u,m]=s.useState([]),[h,x]=s.useState({startDate:P().startOf("month"),endDate:P().endOf("day"),rangeType:"Month"}),[f,g]=s.useState(!1),[b,p]=s.useState([]),[y,j]=s.useState([]),[v,w]=s.useState([]),[N,S]=s.useState(!1),[M,D]=s.useState(!1),[$,C]=s.useState([]),[T,A]=s.useState(0),[F,L]=s.useState(!1),R=a.useRef(null);n();const[W,B]=s.useState(!1),[E,H]=s.useState({sales:0,transactions:0,topProduct:"-",totalItemsSold:0,averageTransactionValue:0});s.useEffect(()=>{(async()=>{try{const e=sessionStorage.getItem("auth_token"),t=P().format("YYYY-MM-DD"),s=await r("/api/dashboard/overview",{headers:i(e),params:{startDate:t,endDate:t}});s&&H({sales:s.totalSales||0,transactions:s.totalTransactions||0,totalItemsSold:s.totalItemsSold||0,averageTransactionValue:s.averageTransactionValue||0,topProduct:s.topProducts?.[0]?.product_name||"-"})}catch(e){console.error("Failed to fetch today's data",e)}})()},[]);const J=s.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem("user")||"{}")}catch(e){return{}}},[]);s.useEffect(()=>{const e=e=>{R.current&&!R.current.contains(e.target)&&L(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const V=async()=>{try{g(!0);const e=sessionStorage.getItem("auth_token"),{startDate:t,endDate:s,rangeType:a}=h,n=e=>P(e).format("YYYY-MM-DD"),o=P.min(t,s),l=P.max(t,s),d=n(o),u=n(l);console.log("Fetching data for date range:",{rangeType:a,formattedStart:d,formattedEnd:u});const[x,f,b,y]=await Promise.all([r("/api/dashboard/overview",{headers:i(e),params:{startDate:d,endDate:u}}),r("/api/stats/customers-timeseries",{headers:i(e),params:{startDate:d,endDate:u}}),r("/api/stats/sales-by-category",{headers:i(e),params:{startDate:d,endDate:u}}),r("/api/products/low-stock",{headers:i(e)})]),v=(f||[]).map(e=>({...e,name:e.date||e.name,value:Number(e.customers||e.total||e.value||0)})),N=(b||[]).reduce((e,t)=>e+Number(t.value||0),0)||1,S=(b||[]).map(e=>({...e,percent:Number(e.value||0)/N*100}));if(x){const e=Number(x.totalSales||0),t=Number(x.totalExpenses||0),s=e-t,r=e>0?(e-t)/e*100:0,n=Number(x.totalTransactions||0),i=Number(x.totalItemsSold||0),d=Number(x.averageTransactionValue||e/(n||1)),u=x.topProducts?.[0]?.product_name||"-";c({revenue:e,expenses:t,netProfit:s,grossMargin:r,totalTransactions:n,totalItemsSold:i,averageTransactionValue:d});const h="Day"===a?o.format("MMM D, YYYY"):`${o.format("MMM D")} - ${l.format("MMM D, YYYY")}`,f="Day"===a?"Daily Transactions":"Week"===a?"7-Day Transactions":"Month"===a?"Monthly Transactions":"Total Transactions";m([{label:"Day"===a?"Daily Sales":"Week"===a?"7-Day Sales":"Month"===a?"Monthly Sales":"Total Sales",value:`₱${e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subtext:h},{label:f,value:n,subtext:`${h}`},{label:"Top Product",value:u,subtext:`Total: ${x.topProducts?.[0]?.total_sold||0} sold`},{label:"Items Sold",value:i,subtext:`${n} transactions`}])}p(v),j(S);w(y||[])}catch(e){console.error("Failed to fetch dashboard data",e)}finally{g(!1)}};s.useEffect(()=>{V(),(async()=>{try{const e=sessionStorage.getItem("auth_token"),t=await r("/api/logs",{headers:i(e)}),s=new Set(JSON.parse(sessionStorage.getItem("read_notif_ids")||"[]")),a=new Set(JSON.parse(sessionStorage.getItem("deleted_notif_ids")||"[]")),n=(t||[]).filter(e=>!a.has(e.log_id)).map(e=>({id:e.log_id,title:e.action,message:`${e.username} (${e.role}) did an action: ${e.action}`,time:P(e.date_time).format("MMM D, h:mm A"),isRead:s.has(e.log_id)}));C(n),A(n.filter(e=>!e.isRead).length)}catch(e){console.error("Failed to fetch notifications",e)}})()},[h]);const K=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),U=s.useMemo(()=>{if(!h.startDate||!h.endDate)return"Select Range";const e=P.min(h.startDate,h.endDate),t=P.max(h.startDate,h.endDate);return`${e.format("MMM D")} - ${t.format("MMM D, YYYY")}`},[h]),q=e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:V,disabled:f,title:"Refresh Data",className:"bg-white/80 backdrop-blur-sm hover:bg-white text-gray-700 p-1.5 sm:p-2 rounded-lg border border-gray-200/80 text-sm font-medium transition-all duration-200 hover:shadow-md hover:scale-[1.02] shrink-0",children:e.jsx(O,{className:"w-4 h-4 sm:w-5 sm:h-5 "+(f?"animate-spin":"")})}),e.jsxs("button",{onClick:()=>D(!0),disabled:f,title:"Select Date Range",className:"flex items-center gap-1 sm:gap-2 bg-white/80 backdrop-blur-sm hover:bg-white text-gray-700 px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-lg border border-gray-200/80 text-xs sm:text-sm font-medium transition-all duration-200 outline-none cursor-pointer hover:shadow-md hover:scale-[1.02] shrink-0",children:[e.jsx(k,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:U})]}),e.jsx("div",{className:"py-2 flex justify-end",children:e.jsxs(o,{onClick:()=>{const e=u.map(e=>[e.label,e.value,e.change||"-"]);v.length>0&&(e.push(["","",""]),e.push(["Low Stock Products","",""]),e.push(["Product Name","Quantity Left",""]),v.forEach(t=>e.push([t.product_name,t.quantity_in_stock,""])));const t=[["Label","Value","Change"],...e].map(e=>e.join(",")).join("\n"),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="dashboard-data.csv",a.click()},size:"sm",variant:"secondary",className:"flex items-center gap-2 w-full sm:w-auto shrink-0",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]})}),e.jsx("div",{className:"relative",ref:R,children:e.jsx(_,{notifications:$,unreadCount:T,onMarkAsRead:e=>{const t=JSON.parse(sessionStorage.getItem("read_notif_ids")||"[]");t.includes(e)||sessionStorage.setItem("read_notif_ids",JSON.stringify([...t,e])),C(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t)),A(e=>Math.max(0,e-1))},onMarkAsUnread:e=>{const t=JSON.parse(sessionStorage.getItem("read_notif_ids")||"[]").filter(t=>t!==e);sessionStorage.setItem("read_notif_ids",JSON.stringify(t)),C(t=>t.map(t=>t.id===e?{...t,isRead:!1}:t)),A(e=>e+1)},onDelete:e=>{const t=JSON.parse(sessionStorage.getItem("deleted_notif_ids")||"[]");sessionStorage.setItem("deleted_notif_ids",JSON.stringify([...t,e])),C(t=>t.filter(t=>t.id!==e));const s=$.find(t=>t.id===e);s&&!s.isRead&&A(e=>Math.max(0,e-1))},isOpen:F,onToggle:()=>L(!F),containerRef:R})}),e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1 sm:gap-2 bg-white/80 backdrop-blur-sm p-1 sm:p-1.5 sm:px-2 sm:py-2 rounded-lg border border-gray-200/80 hover:bg-white transition-all duration-200 hover:shadow-md hover:scale-[1.02] shrink-0",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full flex items-center justify-center text-sm font-medium shadow-lg",children:J.username?.[0]?.toUpperCase()||"A"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:inline",children:J.username||"Admin"})]})]});return e.jsxs(l,{title:"DASHBOARD",subtitle:"",sidebar:e.jsx(d,{}),headerActions:q,isSidebarOpen:W,setSidebarOpen:B,className:"bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"p-4 lg:hidden",children:f?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/5"})]}):e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Low Stock Products"})}),e.jsx(oe,{lowStockProducts:v})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 w-full px-4 sm:px-6 md:px-8 py-2",children:[e.jsxs("div",{className:"bg-white rounded-lg p-5 border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:K(t.revenue)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For selected range"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-5 border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Operating Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:K(t.expenses)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For selected range"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-5 border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Net Profit"}),e.jsxs("p",{className:"text-2xl font-bold "+(t.netProfit>=0?"text-green-600":"text-red-600"),children:[K(Math.abs(t.netProfit)),t.netProfit<0&&e.jsx("span",{className:"text-sm text-red-500 ml-1",children:"(Loss)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For selected range"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-5 border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Gross Margin"}),e.jsxs("p",{className:"text-2xl font-bold "+(t.grossMargin>=0?"text-green-600":"text-red-600"),children:[t.grossMargin.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For selected range"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 p-4 sm:p-6 md:p-8 pt-0",children:[e.jsx("div",{className:"lg:col-span-8 flex flex-col gap-6",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 h-[336px] animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-full h-64 bg-gray-200 rounded-lg"})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 h-[336px] animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-64 h-64 bg-gray-200 rounded-full"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{data:b,rangeType:h.rangeType}),e.jsx(re,{data:y})]})}),e.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-6",children:[f?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2"})]}):e.jsx(I,{stats:E,formatCurrency:K,rangeType:"Today"}),f?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 animate-pulse hidden lg:block",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/5"})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md hidden lg:block",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Low Stock Products"})}),e.jsx(oe,{lowStockProducts:v})]})]})]}),e.jsx("div",{className:"w-full px-4 sm:px-6 md:px-8 pb-8",children:e.jsx(z,{dateRange:h})}),e.jsx(Y,{isOpen:N,onClose:()=>S(!1),userData:J}),e.jsx(ee,{isOpen:M,onClose:()=>D(!1),onDateRangeApply:e=>{x(e)}})]})}function oe({lowStockProducts:t}){return 0===t.length?e.jsx("p",{className:"text-sm text-gray-500",children:"No products with low stock."}):e.jsxs("ul",{className:"divide-y divide-gray-200",children:[e.jsxs("li",{className:"py-2 text-sm font-semibold text-gray-600 flex justify-between",children:[e.jsx("span",{children:"Product"}),e.jsx("span",{children:"Quantity"})]}),t.map(t=>e.jsxs("li",{className:"py-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.product_name}),e.jsxs("span",{className:"text-sm font-bold text-red-600",children:[t.quantity_in_stock," left"]})]},t.product_id))]})}P().startOf("day"),P().endOf("day");export{ne as default};
//# sourceMappingURL=Dashboard-B4SKATMC.js.map
