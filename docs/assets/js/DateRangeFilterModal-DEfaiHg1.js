import{j as e}from"./utils-BnCj7yKo.js";import{g as t,a as r,R as s}from"./vendor-BZrj58oz.js";import{o as n,p as a,q as o,g as i}from"./index-Bn6GZOQ4.js";import{d as l}from"./dayjs.min-DVXthx_5.js";var d,c={exports:{}};const m=t((d||(d=1,c.exports=function(e,t,r){var s=function(e,t){if(!t||!t.length||1===t.length&&!t[0]||1===t.length&&Array.isArray(t[0])&&!t[0].length)return null;var r;1===t.length&&t[0].length>0&&(t=t[0]),r=(t=t.filter(function(e){return e}))[0];for(var s=1;s<t.length;s+=1)t[s].isValid()&&!t[s][e](r)||(r=t[s]);return r};r.max=function(){var e=[].slice.call(arguments,0);return s("isAfter",e)},r.min=function(){var e=[].slice.call(arguments,0);return s("isBefore",e)}}),c.exports));var u,h={exports:{}};const f=t(u?h.exports:(u=1,h.exports=function(e,t,r){t.prototype.isBetween=function(e,t,s,n){var a=r(e),o=r(t),i="("===(n=n||"()")[0],l=")"===n[1];return(i?this.isAfter(a,s):!this.isBefore(a,s))&&(l?this.isBefore(o,s):!this.isAfter(o,s))||(i?this.isBefore(a,s):!this.isAfter(a,s))&&(l?this.isAfter(o,s):!this.isBefore(o,s))}}));var x,y={exports:{}};const b=t(x?y.exports:(x=1,y.exports=function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}));var p,g={exports:{}};const j=t(p?g.exports:(p=1,g.exports=function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}));l.extend(f),l.extend(b),l.extend(j),l.extend(m);const v=l();function M({currentMonth:t,currentYear:r,startDate:n,endDate:a,onDateClick:o,mode:i}){const d=l().year(r).month(t).startOf("month"),c=l().year(r).month(t).endOf("month"),m=d.day(),u=c.date(),h=[],f=0===m?6:m-1;for(let e=0;e<f;e++)h.push(null);for(let e=1;e<=u;e++){const t=d.date(e);if(t.isAfter(v.endOf("day")))break;h.push(t)}const x=e=>{if(!e)return"text-gray-300";let t="w-9 h-9 flex items-center justify-center rounded-full text-sm font-medium cursor-pointer transition-all duration-150 relative z-10";const r=(e=>!!e&&(n&&a&&n.isSame(a,"day")||n)&&e.isSame(n,"day"))(e),s=(e=>!!e&&(n&&a&&n.isSame(a,"day")?e.isSame(n,"day"):a&&e.isSame(a,"day")))(e),o=(e=>!!e&&n&&a&&e.isBetween(n,a,"day","()"))(e),i=(e=>!!e&&e.isSame(v,"day"))(e);return t+=" hover:bg-blue-50",o&&(t="w-9 h-9 flex items-center justify-center rounded-none text-blue-700 bg-blue-100 relative z-10"),r||s?t="w-9 h-9 flex items-center justify-center rounded-full text-sm font-medium cursor-pointer transition-all duration-150 bg-blue-600 text-white shadow-md relative z-10":t+=i?" border border-blue-400 text-blue-600":" text-gray-700",t};return e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(t=>e.jsx("span",{className:"text-center text-xs font-semibold text-gray-500 py-2",children:t},t)),h.map((t,r)=>e.jsx(s.Fragment,{children:t?e.jsx("div",{className:"flex items-center justify-center",onClick:()=>o(t),children:e.jsx("div",{className:x(t),children:t.date()})}):e.jsx("div",{className:"w-9 h-9"},`empty-${r}`)},r))]})}function N({currentYear:t,startDate:r,endDate:s,onMonthClick:n}){const a=e=>{if(!r||!s)return!1;const n=l().year(t).month(e).startOf("month");return n.isSame(r.startOf("month"))&&n.isSame(s.startOf("month"))};return e.jsx("div",{className:"grid grid-cols-4 gap-3",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((r,s)=>{const o=l().year(t).month(s).startOf("month").isAfter(v.startOf("month"));return e.jsx("div",{className:"flex items-center justify-center "+(o?"opacity-50 cursor-not-allowed":"cursor-pointer"),onClick:()=>!o&&n(s),children:e.jsx("div",{className:"w-16 h-12 flex items-center justify-center rounded-lg text-sm font-medium transition-all duration-150 "+(a(s)?"bg-blue-600 text-white shadow-md":"text-gray-700 border border-gray-300 hover:bg-blue-50"),children:r})},r)})})}function w({isOpen:t,onClose:s,onDateRangeApply:d}){const[c,m]=r.useState("Month"),[u,h]=r.useState(null),[f,x]=r.useState(null),[y,b]=r.useState(v.year()),[p,g]=r.useState(v.month()),j=r.useMemo(()=>{const e=v.year(),t=[];for(let r=0;r<6;r++)t.push(e-r);return t},[]),w=(e,t,r)=>{const s=t.isAfter(v.endOf("day"))?v.endOf("day"):t;h(e.startOf("day")),x(s),m(r)};r.useEffect(()=>{if(!t)return;const e=l();if("Month"===c){b(v.year());const t=e.startOf("month");w(t,e,"Month")}else if("Day"===c)w(e,e,"Day");else if("Week"===c){const t=e.subtract(6,"day");w(t,e,"Week")}else"Custom"===c&&(h(null),x(null));"Month"!==c&&(b(v.year()),g(v.month()))},[t,c]),r.useEffect(()=>{if("Month"===c){const e=u?u.month():v.month(),t=l().year(y).month(e).startOf("month"),r=l().year(y).month(e).endOf("month");if(t.isAfter(v.startOf("month"))){const e=l().startOf("month");w(e,v,"Month")}else w(t,r,"Month")}},[y]);const O=(e,t)=>{const r=l().year(t).month(e);r.isAfter(v,"month")?(g(v.month()),b(v.year())):(g(r.month()),b(r.year()))},S="Month"!==c,Y=r.useMemo(()=>{if(u&&f){const e=l.min(u,f),t=l.max(u,f),r=e.format("MMM D, YYYY"),s=t.format("MMM D, YYYY"),n=t.diff(e,"day")+1;return 1===n?`${r} (1 day)`:"Month"===c?`${e.format("MMM YYYY")} (${n} days)`:`${r} - ${s} (${n} days)`}return u?`${u.format("MMM D, YYYY")} - Select end date...`:"Select a date range"},[u,f,c]);return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl z-50 w-full max-w-md",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Select date range"}),e.jsx("button",{onClick:s,className:"p-1 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition",children:e.jsx(n,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex space-x-2 border-b-2 border-gray-100 pb-2",children:["Custom","Week","Month","Day"].map(t=>e.jsx("button",{onClick:()=>m(t),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors duration-150 border-b-2 \n                        "+(c===t?"text-blue-700 border-blue-600 font-bold":"text-gray-500 border-transparent hover:text-blue-500"),children:t},t))})]}),e.jsx("div",{className:"px-4 py-4 overflow-y-auto max-h-[70vh]",children:S?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:()=>O(p-1,y),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full",children:e.jsx(a,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:l().year(y).month(p).format("MMM YYYY")}),e.jsx("button",{onClick:()=>O(p+1,y),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full",disabled:l().year(y).month(p).isSame(v,"month"),children:e.jsx(o,{className:"w-5 h-5"})})]}),e.jsx(M,{currentMonth:p,currentYear:y,startDate:u,endDate:f,onDateClick:e=>{if(e=e.startOf("day"),"Day"===c)w(e,e,"Day");else if("Week"===c){const t=e.subtract(6,"day");w(t,e,"Week")}else"Custom"===c&&(!u||f?(h(e),x(null)):e.isSameOrBefore(u,"day")?(x(u),h(e)):x(e))},mode:c})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative flex items-center mb-6 mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-inner",children:[e.jsx(i,{className:"w-5 h-5 text-blue-600 mr-3"}),e.jsx("label",{htmlFor:"year-select",className:"sr-only",children:"Select Year"}),e.jsx("select",{id:"year-select",value:y,onChange:e=>b(Number(e.target.value)),className:"w-full bg-transparent text-lg font-bold text-gray-800 outline-none appearance-none cursor-pointer",children:j.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(N,{currentYear:y,startDate:u,endDate:f,onMonthClick:e=>{const t=l().year(y).month(e).startOf("month"),r=l().year(y).month(e).endOf("month");t.isAfter(v.startOf("month"))||w(t,r,"Month")}})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-100 flex justify-between items-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:Y}),e.jsx("button",{onClick:()=>{if(u&&f){const e=l.min(u,f).startOf("day"),t=l.max(u,f).endOf("day");d({startDate:e,endDate:t,rangeType:c}),s()}},disabled:!u||!f,className:"py-2 px-6 rounded-lg text-white font-semibold transition-all duration-200 "+(u&&f?"bg-blue-600 hover:bg-blue-700 shadow-md shadow-blue-500/50":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Done"})]})]})]}):null}export{w as D,m};
//# sourceMappingURL=DateRangeFilterModal-DEfaiHg1.js.map
